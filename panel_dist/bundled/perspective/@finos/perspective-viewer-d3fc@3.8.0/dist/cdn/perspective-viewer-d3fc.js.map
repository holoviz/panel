{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/gradient-parser@1.0.2/node_modules/gradient-parser/build/node.js", "../../src/ts/plugin/polyfills/matches.ts", "../../src/ts/plugin/polyfills/closest.ts", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/ascending.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/descending.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/bisector.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/number.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/bisect.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/variance.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/deviation.js", "../../../../node_modules/.pnpm/internmap@2.0.3/node_modules/internmap/src/index.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/ticks.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/max.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/min.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/mean.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/pairs.js", "../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/range.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/createReboundMethod.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/rebind.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/rebindAll.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/transform/regexify.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/transform/exclude.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/transform/include.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/transform/includeMap.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-rebind@6.0.1/node_modules/@d3fc/d3fc-rebind/src/transform/prefix.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-technical-indicator@8.1.1_d3-array@3.2.4/node_modules/@d3fc/d3fc-technical-indicator/src/fn.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-technical-indicator@8.1.1_d3-array@3.2.4/node_modules/@d3fc/d3fc-technical-indicator/src/slidingWindow.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-technical-indicator@8.1.1_d3-array@3.2.4/node_modules/@d3fc/d3fc-technical-indicator/src/bollingerBands.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/init.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/ordinal.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/band.js", "../../../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/define.js", "../../../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/color.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/basis.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/basisClosed.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/constant.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/color.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/rgb.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/numberArray.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/array.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/date.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/number.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/object.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/string.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/value.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/round.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/decompose.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/parse.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/index.js", "../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/zoom.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/constant.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/number.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/continuous.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatDecimal.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/exponent.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatGroup.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatNumerals.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatSpecifier.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatTrim.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatPrefixAuto.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatRounded.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatTypes.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/identity.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/locale.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/defaultLocale.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionFixed.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionPrefix.js", "../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionRound.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/tickFormat.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/linear.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/identity.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/nice.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/log.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/pow.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/interval.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/millisecond.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/second.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/minute.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/hour.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/day.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/week.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/month.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/year.js", "../../../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/ticks.js", "../../../../node_modules/.pnpm/d3-time-format@4.1.0/node_modules/d3-time-format/src/locale.js", "../../../../node_modules/.pnpm/d3-time-format@4.1.0/node_modules/d3-time-format/src/defaultLocale.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/time.js", "../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/sequential.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-discontinuous-scale@4.1.1_d3-scale@4.0.2_d3-time@3.1.0/node_modules/@d3fc/d3fc-discontinuous-scale/src/discontinuity/skipWeeklyPattern/dateTimeUtility.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-discontinuous-scale@4.1.1_d3-scale@4.0.2_d3-time@3.1.0/node_modules/@d3fc/d3fc-discontinuous-scale/src/discontinuity/skipWeeklyPattern.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-discontinuous-scale@4.1.1_d3-scale@4.0.2_d3-time@3.1.0/node_modules/@d3fc/d3fc-discontinuous-scale/src/discontinuity/skipUtcWeeklyPattern.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-extent@4.0.2_d3-array@3.2.4/node_modules/@d3fc/d3fc-extent/src/linear.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-extent@4.0.2_d3-array@3.2.4/node_modules/@d3fc/d3fc-extent/src/time.js", "../../../../node_modules/.pnpm/d3-path@3.1.0/node_modules/d3-path/src/path.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-shape@6.0.1_d3-path@3.1.0/node_modules/@d3fc/d3fc-shape/src/functor.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-shape@6.0.1_d3-path@3.1.0/node_modules/@d3fc/d3fc-shape/src/ohlc.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-shape@6.0.1_d3-path@3.1.0/node_modules/@d3fc/d3fc-shape/src/bar.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-shape@6.0.1_d3-path@3.1.0/node_modules/@d3fc/d3fc-shape/src/candlestick.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespaces.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespace.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/creator.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selector.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/select.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/array.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selectorAll.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectAll.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/matcher.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChild.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChildren.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/filter.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sparse.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/enter.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/constant.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/data.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/exit.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/join.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/merge.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/order.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sort.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/call.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/nodes.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/node.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/size.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/empty.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/each.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/attr.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/window.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/style.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/property.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/classed.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/text.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/html.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/raise.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/lower.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/append.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/insert.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/remove.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/clone.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/datum.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/on.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/dispatch.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/iterator.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/index.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/select.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/sourceEvent.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/pointer.js", "../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selectAll.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-data-join@6.0.3_d3-selection@3.0.0/node_modules/@d3fc/d3fc-data-join/src/dataJoin.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/constant.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/math.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/path.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/arc.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/array.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/linear.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/point.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/line.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/area.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol/circle.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol/cross.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol/diamond.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol/square.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol/star.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol/triangle.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol/wye.js", "../../../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/symbol.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/functor.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/defined.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/alignOffset.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/base.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/xyBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/colors.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/svg/line.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/line.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-webgl@3.2.1_d3-scale@4.0.2_d3-shape@3.2.0/node_modules/@d3fc/d3fc-webgl/src/scale/scaleMapper.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/svg/point.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/point.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/svg/bar.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/svg/area.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/area.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/ohlcBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/ohlcBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/candlestick.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/ohlc.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/multiBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/svg/multi.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/multi.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/groupedBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/svg/grouped.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/svg/repeat.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/autoBandwidth.js", "../../../../node_modules/.pnpm/d3-scale-chromatic@3.1.0/node_modules/d3-scale-chromatic/src/colors.js", "../../../../node_modules/.pnpm/d3-scale-chromatic@3.1.0/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/heatmapBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-series@6.1.3_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2__4fq526lq6upvqlbfojjj5urnkm/node_modules/@d3fc/d3fc-series/src/canvas/heatmap.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-annotation@3.0.16_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4_tozy4nacqeikhfami44jnszqna/node_modules/@d3fc/d3fc-annotation/src/ticks.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-annotation@3.0.16_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4_tozy4nacqeikhfami44jnszqna/node_modules/@d3fc/d3fc-annotation/src/svg/gridline.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-annotation@3.0.16_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4_tozy4nacqeikhfami44jnszqna/node_modules/@d3fc/d3fc-annotation/src/canvas/gridline.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-axis@3.0.7_d3-scale@4.0.2_d3-selection@3.0.0_d3-shape@3.2.0/node_modules/@d3fc/d3fc-axis/src/axisTickUtils.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-axis@3.0.7_d3-scale@4.0.2_d3-selection@3.0.0_d3-shape@3.2.0/node_modules/@d3fc/d3fc-axis/src/axisBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-axis@3.0.7_d3-scale@4.0.2_d3-selection@3.0.0_d3-shape@3.2.0/node_modules/@d3fc/d3fc-axis/src/axis.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-axis@3.0.7_d3-scale@4.0.2_d3-selection@3.0.0_d3-shape@3.2.0/node_modules/@d3fc/d3fc-axis/src/axisOrdinal.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/data.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/redraw.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/requestRedraw.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/element.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/canvas.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/group.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/svg.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/src/css.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-element@6.2.0/node_modules/@d3fc/d3fc-element/index.js", "../../../../node_modules/.pnpm/d3-dispatch@3.0.1/node_modules/d3-dispatch/src/dispatch.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-pointer@3.0.3_d3-dispatch@3.0.1_d3-selection@3.0.0/node_modules/@d3fc/d3fc-pointer/src/pointer.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-chart@5.1.9_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2_d_kyhwsugamw24x7v3obvyiw5jfe/node_modules/@d3fc/d3fc-chart/src/store.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-chart@5.1.9_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2_d_kyhwsugamw24x7v3obvyiw5jfe/node_modules/@d3fc/d3fc-chart/src/css.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-chart@5.1.9_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2_d_kyhwsugamw24x7v3obvyiw5jfe/node_modules/@d3fc/d3fc-chart/src/cartesian.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-chart@5.1.9_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2_d_kyhwsugamw24x7v3obvyiw5jfe/node_modules/@d3fc/d3fc-chart/src/cartesianBase.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-chart@5.1.9_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2_d_kyhwsugamw24x7v3obvyiw5jfe/node_modules/@d3fc/d3fc-chart/src/svg/cartesian.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-chart@5.1.9_d3-array@3.2.4_d3-path@3.1.0_d3-scale-chromatic@3.1.0_d3-scale@4.0.2_d_kyhwsugamw24x7v3obvyiw5jfe/node_modules/@d3fc/d3fc-chart/src/canvas/cartesian.js", "../../../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/noevent.js", "../../../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/nodrag.js", "../../../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/constant.js", "../../../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/event.js", "../../../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/drag.js", "../../../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timer.js", "../../../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timeout.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/schedule.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/interrupt.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/interrupt.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/tween.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/interpolate.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attr.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attrTween.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/delay.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/duration.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/ease.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/easeVarying.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/filter.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/merge.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/on.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/remove.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/select.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selectAll.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selection.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/style.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/styleTween.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/text.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/textTween.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/transition.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/end.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/index.js", "../../../../node_modules/.pnpm/d3-ease@3.0.1/node_modules/d3-ease/src/cubic.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/transition.js", "../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/index.js", "../../../../node_modules/.pnpm/d3-brush@3.0.0/node_modules/d3-brush/src/brush.js", "../../../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/constant.js", "../../../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/event.js", "../../../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/transform.js", "../../../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/noevent.js", "../../../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/zoom.js", "../../../../node_modules/.pnpm/@d3fc+d3fc-zoom@1.2.0_d3-dispatch@3.0.1_d3-selection@3.0.0_d3-zoom@3.0.0/node_modules/@d3fc/d3fc-zoom/src/zoom.js", "../../src/ts/axis/axisType.ts", "../../src/ts/axis/noAxis.ts", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/count.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/each.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/eachBefore.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/eachAfter.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/find.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/sum.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/sort.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/path.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/ancestors.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/descendants.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/leaves.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/links.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/iterator.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/index.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/accessors.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/constant.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/round.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/dice.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/partition.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/slice.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/squarify.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/index.js", "../../../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/binary.js", "../../src/ts/axis/flatten.ts", "../../src/ts/axis/minBandwidth.ts", "../../src/ts/axis/withoutTicks.ts", "../../src/ts/axis/linearAxis.ts", "../../src/ts/d3fc/padding/default.ts", "../../src/ts/d3fc/extent/extentLinear.ts", "../../src/ts/axis/valueFormatter.ts", "../../src/ts/plugin/root.ts", "../../src/ts/axis/timeAxis.ts", "../../src/ts/axis/ordinalAxis.ts", "../../src/ts/d3fc/axis/store.ts", "../../src/ts/d3fc/axis/multi-axis.ts", "../../src/ts/axis/axisFactory.ts", "../../src/ts/axis/chartFactory.ts", "../../src/ts/utils/utils.ts", "../../src/html/tooltip.html", "../../src/ts/tooltip/selectionData.ts", "../../src/ts/tooltip/generateHTML.ts", "../../src/ts/tooltip/selectionEvent.ts", "../../src/ts/tooltip/tooltip.ts", "../../src/ts/series/barSeries.ts", "../../src/ts/series/seriesKey.ts", "../../src/ts/data/utils.ts", "../../src/ts/series/seriesColors.ts", "../../src/ts/axis/axisLabel.ts", "../../src/ts/data/splitIntoMultiSeries.ts", "../../src/ts/data/groupData.ts", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/namespaces.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/namespace.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/creator.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/local.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/matcher.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/on.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selector.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/select.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selectorAll.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/selectAll.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/filter.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/sparse.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/enter.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/constant.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/data.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/exit.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/merge.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/order.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/sort.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/call.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/nodes.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/node.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/size.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/empty.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/each.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/attr.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/window.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/style.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/property.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/classed.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/text.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/html.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/raise.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/lower.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/append.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/insert.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/remove.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/datum.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/dispatch.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/selection/index.js", "../../../../node_modules/.pnpm/d3-selection@1.0.2/node_modules/d3-selection/src/select.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatDecimal.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/exponent.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatGroup.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatDefault.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatPrefixAuto.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatRounded.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatTypes.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatSpecifier.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/locale.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/defaultLocale.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionFixed.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionPrefix.js", "../../../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionRound.js", "../../../../node_modules/.pnpm/d3-dispatch@1.0.1/node_modules/d3-dispatch/src/dispatch.js", "../../../../node_modules/.pnpm/d3-array@1.2.4/node_modules/d3-array/src/ascending.js", "../../../../node_modules/.pnpm/d3-array@1.2.4/node_modules/d3-array/src/bisector.js", "../../../../node_modules/.pnpm/d3-array@1.2.4/node_modules/d3-array/src/bisect.js", "../../../../node_modules/.pnpm/d3-array@1.2.4/node_modules/d3-array/src/array.js", "../../../../node_modules/.pnpm/d3-array@1.2.4/node_modules/d3-array/src/ticks.js", "../../../../node_modules/.pnpm/d3-collection@1.0.7/node_modules/d3-collection/src/map.js", "../../../../node_modules/.pnpm/d3-collection@1.0.7/node_modules/d3-collection/src/set.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/array.js", "../../../../node_modules/.pnpm/d3-color@1.4.1/node_modules/d3-color/src/define.js", "../../../../node_modules/.pnpm/d3-color@1.4.1/node_modules/d3-color/src/color.js", "../../../../node_modules/.pnpm/d3-color@1.4.1/node_modules/d3-color/src/math.js", "../../../../node_modules/.pnpm/d3-color@1.4.1/node_modules/d3-color/src/cubehelix.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/basis.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/basisClosed.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/constant.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/color.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/rgb.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/numberArray.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/array.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/date.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/number.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/object.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/string.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/value.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/round.js", "../../../../node_modules/.pnpm/d3-interpolate@1.4.0/node_modules/d3-interpolate/src/cubehelix.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/constant.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/number.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/continuous.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/tickFormat.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/linear.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/time.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/colors.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/category10.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/category20b.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/category20c.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/category20.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/cubehelix.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/rainbow.js", "../../../../node_modules/.pnpm/d3-scale@1.0.3/node_modules/d3-scale/src/viridis.js", "../../../../node_modules/.pnpm/d3-array@1.0.1/node_modules/d3-array/src/ascending.js", "../../../../node_modules/.pnpm/d3-array@1.0.1/node_modules/d3-array/src/bisector.js", "../../../../node_modules/.pnpm/d3-array@1.0.1/node_modules/d3-array/src/bisect.js", "../../../../node_modules/.pnpm/d3-array@1.0.1/node_modules/d3-array/src/array.js", "../../../../node_modules/.pnpm/d3-array@1.0.1/node_modules/d3-array/src/ticks.js", "../../../../node_modules/.pnpm/d3-array@1.0.1/node_modules/d3-array/src/max.js", "../../../../node_modules/.pnpm/d3-array@1.0.1/node_modules/d3-array/src/sum.js", "../../../../node_modules/.pnpm/d3-svg-legend@2.25.6/node_modules/d3-svg-legend/src/legend.js", "../../../../node_modules/.pnpm/d3-svg-legend@2.25.6/node_modules/d3-svg-legend/src/color.js", "../../../../node_modules/.pnpm/d3-svg-legend@2.25.6/node_modules/d3-svg-legend/src/size.js", "../../../../node_modules/.pnpm/d3-svg-legend@2.25.6/node_modules/d3-svg-legend/src/symbol.js", "../../../../node_modules/.pnpm/d3-svg-legend@2.25.6/node_modules/d3-svg-legend/src/helpers.js", "../../../../node_modules/.pnpm/d3-svg-legend@2.25.6/node_modules/d3-svg-legend/index.js", "../../src/html/legend-controls.html", "../../src/ts/legend/styling/cropCellContents.ts", "../../src/ts/legend/styling/enforceContainerBoundaries.ts", "../../src/ts/legend/styling/draggableComponent.ts", "../../src/ts/legend/styling/resizableComponent.ts", "../../src/ts/legend/scrollableLegend.ts", "../../src/ts/legend/legend.ts", "../../src/ts/legend/filter.ts", "../../src/ts/gridlines/gridlines.ts", "../../src/ts/d3fc/padding/hardLimitZero.ts", "../../src/html/zoom-controls.html", "../../src/ts/zoom/zoomableChart.ts", "../../src/ts/charts/bar.ts", "../../src/ts/axis/domainMatchOrigins.ts", "../../src/ts/axis/splitterLabels.ts", "../../src/ts/axis/axisSplitter.ts", "../../src/ts/charts/column.ts", "../../src/ts/series/lineSeries.ts", "../../src/ts/data/splitData.ts", "../../src/ts/data/transposeData.ts", "../../src/ts/data/findBest.ts", "../../src/ts/tooltip/nearbyTip.ts", "../../src/ts/charts/line.ts", "../../src/ts/series/seriesSymbols.ts", "../../src/ts/series/pointSeriesCanvas.ts", "../../src/ts/data/xySplitData.ts", "../../src/ts/charts/xy-line.ts", "../../src/ts/series/areaSeries.ts", "../../src/ts/data/splitAndBaseData.ts", "../../src/ts/charts/area.ts", "../../src/ts/series/categoryPointSeries.ts", "../../src/ts/charts/y-scatter.ts", "../../src/ts/data/pointData.ts", "../../src/ts/series/seriesRange.ts", "../../src/ts/legend/colorRangeLegend.ts", "../../src/ts/layout/gridLayoutMultiChart.ts", "../../src/ts/series/xy-scatter/xyScatterSeries.ts", "../../src/ts/charts/xy-scatter.ts", "../../src/ts/series/heatmapSeries.ts", "../../src/ts/data/heatmapData.ts", "../../src/ts/charts/heatmap.ts", "../../src/ts/data/ohlcData.ts", "../../src/ts/series/ohlcCandleSeries.ts", "../../src/ts/charts/ohlcCandle.ts", "../../src/ts/charts/ohlc.ts", "../../src/ts/charts/candlestick.ts", "../../src/ts/series/sunburst/sunburstColor.ts", "../../src/ts/data/treeData.ts", "../../src/ts/series/sunburst/sunburstArc.ts", "../../src/ts/series/sunburst/sunburstLabel.ts", "../../src/ts/series/sunburst/sunburstClick.ts", "../../src/ts/series/sunburst/sunburstSeries.ts", "../../src/ts/charts/sunburst.ts", "../../src/ts/series/treemap/treemapColor.ts", "../../src/ts/series/treemap/treemapLabel.ts", "../../src/ts/series/treemap/treemapLayout.ts", "../../src/ts/series/treemap/treemapLevelCalculation.ts", "../../src/ts/series/treemap/treemapTransitions.ts", "../../src/html/parent-controls.html", "../../src/ts/series/treemap/treemapControls.ts", "../../src/ts/series/treemap/treemapSeries.ts", "../../src/ts/charts/treemap.ts", "../../src/ts/charts/charts.ts", "../../src/ts/series/colorStyles.ts", "../css/perspective-viewer-d3fc.css", "../../src/ts/plugin/plugin.ts", "../../src/ts/index.ts"],
  "sourcesContent": ["// Copyright (c) 2014 Rafael Caricio. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GradientParser = (GradientParser || {});\n\nGradientParser.stringify = (function() {\n\n  var visitor = {\n\n    'visit_linear-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_repeating-linear-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_radial-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_repeating-radial-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_gradient': function(node) {\n      var orientation = visitor.visit(node.orientation);\n      if (orientation) {\n        orientation += ', ';\n      }\n\n      return node.type + '(' + orientation + visitor.visit(node.colorStops) + ')';\n    },\n\n    'visit_shape': function(node) {\n      var result = node.value,\n          at = visitor.visit(node.at),\n          style = visitor.visit(node.style);\n\n      if (style) {\n        result += ' ' + style;\n      }\n\n      if (at) {\n        result += ' at ' + at;\n      }\n\n      return result;\n    },\n\n    'visit_default-radial': function(node) {\n      var result = '',\n          at = visitor.visit(node.at);\n\n      if (at) {\n        result += at;\n      }\n      return result;\n    },\n\n    'visit_extent-keyword': function(node) {\n      var result = node.value,\n          at = visitor.visit(node.at);\n\n      if (at) {\n        result += ' at ' + at;\n      }\n\n      return result;\n    },\n\n    'visit_position-keyword': function(node) {\n      return node.value;\n    },\n\n    'visit_position': function(node) {\n      return visitor.visit(node.value.x) + ' ' + visitor.visit(node.value.y);\n    },\n\n    'visit_%': function(node) {\n      return node.value + '%';\n    },\n\n    'visit_em': function(node) {\n      return node.value + 'em';\n    },\n\n    'visit_px': function(node) {\n      return node.value + 'px';\n    },\n\n    'visit_literal': function(node) {\n      return visitor.visit_color(node.value, node);\n    },\n\n    'visit_hex': function(node) {\n      return visitor.visit_color('#' + node.value, node);\n    },\n\n    'visit_rgb': function(node) {\n      return visitor.visit_color('rgb(' + node.value.join(', ') + ')', node);\n    },\n\n    'visit_rgba': function(node) {\n      return visitor.visit_color('rgba(' + node.value.join(', ') + ')', node);\n    },\n\n    'visit_color': function(resultColor, node) {\n      var result = resultColor,\n          length = visitor.visit(node.length);\n\n      if (length) {\n        result += ' ' + length;\n      }\n      return result;\n    },\n\n    'visit_angular': function(node) {\n      return node.value + 'deg';\n    },\n\n    'visit_directional': function(node) {\n      return 'to ' + node.value;\n    },\n\n    'visit_array': function(elements) {\n      var result = '',\n          size = elements.length;\n\n      elements.forEach(function(element, i) {\n        result += visitor.visit(element);\n        if (i < size - 1) {\n          result += ', ';\n        }\n      });\n\n      return result;\n    },\n\n    'visit': function(element) {\n      if (!element) {\n        return '';\n      }\n      var result = '';\n\n      if (element instanceof Array) {\n        return visitor.visit_array(element, result);\n      } else if (element.type) {\n        var nodeVisitor = visitor['visit_' + element.type];\n        if (nodeVisitor) {\n          return nodeVisitor(element);\n        } else {\n          throw Error('Missing visitor visit_' + element.type);\n        }\n      } else {\n        throw Error('Invalid node.');\n      }\n    }\n\n  };\n\n  return function(root) {\n    return visitor.visit(root);\n  };\n})();\n\n// Copyright (c) 2014 Rafael Caricio. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GradientParser = (GradientParser || {});\n\nGradientParser.parse = (function() {\n\n  var tokens = {\n    linearGradient: /^(\\-(webkit|o|ms|moz)\\-)?(linear\\-gradient)/i,\n    repeatingLinearGradient: /^(\\-(webkit|o|ms|moz)\\-)?(repeating\\-linear\\-gradient)/i,\n    radialGradient: /^(\\-(webkit|o|ms|moz)\\-)?(radial\\-gradient)/i,\n    repeatingRadialGradient: /^(\\-(webkit|o|ms|moz)\\-)?(repeating\\-radial\\-gradient)/i,\n    sideOrCorner: /^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,\n    extentKeywords: /^(closest\\-side|closest\\-corner|farthest\\-side|farthest\\-corner|contain|cover)/,\n    positionKeywords: /^(left|center|right|top|bottom)/i,\n    pixelValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))px/,\n    percentageValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))\\%/,\n    emValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))em/,\n    angleValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))deg/,\n    startCall: /^\\(/,\n    endCall: /^\\)/,\n    comma: /^,/,\n    hexColor: /^\\#([0-9a-fA-F]+)/,\n    literalColor: /^([a-zA-Z]+)/,\n    rgbColor: /^rgb/i,\n    rgbaColor: /^rgba/i,\n    number: /^(([0-9]*\\.[0-9]+)|([0-9]+\\.?))/\n  };\n\n  var input = '';\n\n  function error(msg) {\n    var err = new Error(input + ': ' + msg);\n    err.source = input;\n    throw err;\n  }\n\n  function getAST() {\n    var ast = matchListDefinitions();\n\n    if (input.length > 0) {\n      error('Invalid input not EOF');\n    }\n\n    return ast;\n  }\n\n  function matchListDefinitions() {\n    return matchListing(matchDefinition);\n  }\n\n  function matchDefinition() {\n    return matchGradient(\n            'linear-gradient',\n            tokens.linearGradient,\n            matchLinearOrientation) ||\n\n          matchGradient(\n            'repeating-linear-gradient',\n            tokens.repeatingLinearGradient,\n            matchLinearOrientation) ||\n\n          matchGradient(\n            'radial-gradient',\n            tokens.radialGradient,\n            matchListRadialOrientations) ||\n\n          matchGradient(\n            'repeating-radial-gradient',\n            tokens.repeatingRadialGradient,\n            matchListRadialOrientations);\n  }\n\n  function matchGradient(gradientType, pattern, orientationMatcher) {\n    return matchCall(pattern, function(captures) {\n\n      var orientation = orientationMatcher();\n      if (orientation) {\n        if (!scan(tokens.comma)) {\n          error('Missing comma before color stops');\n        }\n      }\n\n      return {\n        type: gradientType,\n        orientation: orientation,\n        colorStops: matchListing(matchColorStop)\n      };\n    });\n  }\n\n  function matchCall(pattern, callback) {\n    var captures = scan(pattern);\n\n    if (captures) {\n      if (!scan(tokens.startCall)) {\n        error('Missing (');\n      }\n\n      var result = callback(captures);\n\n      if (!scan(tokens.endCall)) {\n        error('Missing )');\n      }\n\n      return result;\n    }\n  }\n\n  function matchLinearOrientation() {\n    return matchSideOrCorner() ||\n      matchAngle();\n  }\n\n  function matchSideOrCorner() {\n    return match('directional', tokens.sideOrCorner, 1);\n  }\n\n  function matchAngle() {\n    return match('angular', tokens.angleValue, 1);\n  }\n\n  function matchListRadialOrientations() {\n    var radialOrientations,\n        radialOrientation = matchRadialOrientation(),\n        lookaheadCache;\n\n    if (radialOrientation) {\n      radialOrientations = [];\n      radialOrientations.push(radialOrientation);\n\n      lookaheadCache = input;\n      if (scan(tokens.comma)) {\n        radialOrientation = matchRadialOrientation();\n        if (radialOrientation) {\n          radialOrientations.push(radialOrientation);\n        } else {\n          input = lookaheadCache;\n        }\n      }\n    }\n\n    return radialOrientations;\n  }\n\n  function matchRadialOrientation() {\n    var radialType = matchCircle() ||\n      matchEllipse();\n\n    if (radialType) {\n      radialType.at = matchAtPosition();\n    } else {\n      var extent = matchExtentKeyword();\n      if (extent) {\n        radialType = extent;\n        var positionAt = matchAtPosition();\n        if (positionAt) {\n          radialType.at = positionAt;\n        }\n      } else {\n        var defaultPosition = matchPositioning();\n        if (defaultPosition) {\n          radialType = {\n            type: 'default-radial',\n            at: defaultPosition\n          };\n        }\n      }\n    }\n\n    return radialType;\n  }\n\n  function matchCircle() {\n    var circle = match('shape', /^(circle)/i, 0);\n\n    if (circle) {\n      circle.style = matchLength() || matchExtentKeyword();\n    }\n\n    return circle;\n  }\n\n  function matchEllipse() {\n    var ellipse = match('shape', /^(ellipse)/i, 0);\n\n    if (ellipse) {\n      ellipse.style =  matchDistance() || matchExtentKeyword();\n    }\n\n    return ellipse;\n  }\n\n  function matchExtentKeyword() {\n    return match('extent-keyword', tokens.extentKeywords, 1);\n  }\n\n  function matchAtPosition() {\n    if (match('position', /^at/, 0)) {\n      var positioning = matchPositioning();\n\n      if (!positioning) {\n        error('Missing positioning value');\n      }\n\n      return positioning;\n    }\n  }\n\n  function matchPositioning() {\n    var location = matchCoordinates();\n\n    if (location.x || location.y) {\n      return {\n        type: 'position',\n        value: location\n      };\n    }\n  }\n\n  function matchCoordinates() {\n    return {\n      x: matchDistance(),\n      y: matchDistance()\n    };\n  }\n\n  function matchListing(matcher) {\n    var captures = matcher(),\n      result = [];\n\n    if (captures) {\n      result.push(captures);\n      while (scan(tokens.comma)) {\n        captures = matcher();\n        if (captures) {\n          result.push(captures);\n        } else {\n          error('One extra comma');\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function matchColorStop() {\n    var color = matchColor();\n\n    if (!color) {\n      error('Expected color definition');\n    }\n\n    color.length = matchDistance();\n    return color;\n  }\n\n  function matchColor() {\n    return matchHexColor() ||\n      matchRGBAColor() ||\n      matchRGBColor() ||\n      matchLiteralColor();\n  }\n\n  function matchLiteralColor() {\n    return match('literal', tokens.literalColor, 0);\n  }\n\n  function matchHexColor() {\n    return match('hex', tokens.hexColor, 1);\n  }\n\n  function matchRGBColor() {\n    return matchCall(tokens.rgbColor, function() {\n      return  {\n        type: 'rgb',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n\n  function matchRGBAColor() {\n    return matchCall(tokens.rgbaColor, function() {\n      return  {\n        type: 'rgba',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n\n  function matchNumber() {\n    return scan(tokens.number)[1];\n  }\n\n  function matchDistance() {\n    return match('%', tokens.percentageValue, 1) ||\n      matchPositionKeyword() ||\n      matchLength();\n  }\n\n  function matchPositionKeyword() {\n    return match('position-keyword', tokens.positionKeywords, 1);\n  }\n\n  function matchLength() {\n    return match('px', tokens.pixelValue, 1) ||\n      match('em', tokens.emValue, 1);\n  }\n\n  function match(type, pattern, captureIndex) {\n    var captures = scan(pattern);\n    if (captures) {\n      return {\n        type: type,\n        value: captures[captureIndex]\n      };\n    }\n  }\n\n  function scan(regexp) {\n    var captures,\n        blankCaptures;\n\n    blankCaptures = /^[\\n\\r\\t\\s]+/.exec(input);\n    if (blankCaptures) {\n        consume(blankCaptures[0].length);\n    }\n\n    captures = regexp.exec(input);\n    if (captures) {\n        consume(captures[0].length);\n    }\n\n    return captures;\n  }\n\n  function consume(size) {\n    input = input.substr(size);\n  }\n\n  return function(code) {\n    input = code.toString();\n    return getAST();\n  };\n})();\n\nexports.parse = GradientParser.parse;\nexports.stringify = GradientParser.stringify;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nif (!Element.prototype.matches) {\n    Element.prototype.matches =\n        Element.prototype.msMatchesSelector ||\n        Element.prototype.webkitMatchesSelector;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nif (!Element.prototype.matches) {\n    Element.prototype.matches =\n        Element.prototype.msMatchesSelector ||\n        Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n    Element.prototype.closest = function <\n        K extends keyof HTMLElementTagNameMap\n    >(s: K): HTMLElementTagNameMap[K] {\n        var el = this;\n\n        do {\n            if (el.matches(s)) return el;\n            el = el.parentElement || el.parentNode;\n        } while (el !== null && el.nodeType === 1);\n        return null;\n    };\n}\n", "export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n", "import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We can\u2019t do this\n  // for a comparator (except for specific, known comparators) because we can\u2019t\n  // tell if the comparator is symmetric, and an asymmetric comparator can\u2019t be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n", "export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n", "import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n", "export default function variance(values, valueof) {\n  let count = 0;\n  let delta;\n  let mean = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n  if (count > 1) return sum / (count - 1);\n}\n", "import variance from \"./variance.js\";\n\nexport default function deviation(values, valueof) {\n  const v = variance(values, valueof);\n  return v ? Math.sqrt(v) : v;\n}\n", "export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n", "const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n", "export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n", "export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n", "export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n", "export default function pairs(values, pairof = pair) {\n  const pairs = [];\n  let previous;\n  let first = false;\n  for (const value of values) {\n    if (first) pairs.push(pairof(previous, value));\n    previous = value;\n    first = true;\n  }\n  return pairs;\n}\n\nexport function pair(a, b) {\n  return [a, b];\n}\n", "export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n", "export default (target, source, name) => {\n    const method = source[name];\n    if (typeof method !== 'function') {\n        throw new Error(`Attempt to rebind ${name} which isn't a function on the source object`);\n    }\n    return (...args) => {\n        var value = method.apply(source, args);\n        return value === source ? target : value;\n    };\n};\n", "import createReboundMethod from './createReboundMethod';\n\nexport default (target, source, ...names) => {\n    for (const name of names) {\n        target[name] = createReboundMethod(target, source, name);\n    }\n    return target;\n};\n", "import createReboundMethod from './createReboundMethod';\n\nconst createTransform = (transforms) =>\n    (name) => transforms.reduce(\n        (name, fn) => name && fn(name),\n        name\n    );\n\nexport default (target, source, ...transforms) => {\n    const transform = createTransform(transforms);\n    for (const name of Object.keys(source)) {\n        const result = transform(name);\n        if (result) {\n            target[result] = createReboundMethod(target, source, name);\n        }\n    }\n    return target;\n};\n", "export default (strsOrRegexes) =>\n    strsOrRegexes.map((strOrRegex) =>\n        typeof strOrRegex === 'string' ? new RegExp(`^${strOrRegex}$`) : strOrRegex\n    );\n", "import regexify from './regexify';\n\nexport default (...exclusions) => {\n    exclusions = regexify(exclusions);\n    return (name) =>\n        exclusions.every((exclusion) => !exclusion.test(name)) && name;\n};\n", "import regexify from './regexify';\n\nexport default (...inclusions) => {\n    inclusions = regexify(inclusions);\n    return (name) =>\n      inclusions.some((inclusion) => inclusion.test(name)) && name;\n};\n", "export default (mappings) => (name) => mappings[name];\n", "const capitalizeFirstLetter = (str) => str[0].toUpperCase() + str.slice(1);\n\nexport default (prefix) => (name) => prefix + capitalizeFirstLetter(name);\n", "export function identity(d) {\n    return d;\n}\nexport function noop(d) {}\n\nexport function functor(v) {\n    return typeof v === 'function' ? v : () => v;\n}\nexport function convertNaN(value) {\n    return typeof value === 'number' && isNaN(value) ? undefined : value;\n}\n", "import { identity, noop, functor } from './fn';\n\nexport default function() {\n\n    let period = () => 10;\n    let accumulator = noop;\n    let value = identity;\n    let defined = (d) => d != null;\n\n    var slidingWindow = function(data) {\n        const size = period.apply(this, arguments);\n        const windowData = data.slice(0, size).map(value);\n        return data.map((d, i) => {\n            if (i >= size) {\n                // Treat windowData as FIFO rolling buffer\n                windowData.shift();\n                windowData.push(value(d, i));\n            }\n            if (i < size - 1 || windowData.some(d => !defined(d))) {\n                return accumulator(undefined, i);\n            }\n            return accumulator(windowData, i);\n        });\n    };\n\n    slidingWindow.period = (...args) => {\n        if (!args.length) {\n            return period;\n        }\n        period = functor(args[0]);\n        return slidingWindow;\n    };\n    slidingWindow.accumulator = (...args) => {\n        if (!args.length) {\n            return accumulator;\n        }\n        accumulator = args[0];\n        return slidingWindow;\n    };\n    slidingWindow.defined = (...args) => {\n        if (!args.length) {\n            return defined;\n        }\n        defined = args[0];\n        return slidingWindow;\n    };\n    slidingWindow.value = (...args) => {\n        if (!args.length) {\n            return value;\n        }\n        value = args[0];\n        return slidingWindow;\n    };\n\n    return slidingWindow;\n}\n", "import { mean, deviation } from 'd3-array';\nimport { rebind } from '@d3fc/d3fc-rebind';\nimport _slidingWindow from './slidingWindow';\nimport { convertNaN } from './fn';\n\nexport default function() {\n\n    let multiplier = 2;\n\n    const slidingWindow = _slidingWindow()\n        .accumulator(values => {\n            const stdDev = values && deviation(values);\n            const average = values && mean(values);\n            return {\n                average: average,\n                upper: convertNaN(average + multiplier * stdDev),\n                lower: convertNaN(average - multiplier * stdDev)\n            };\n        });\n\n    const bollingerBands = data => slidingWindow(data);\n\n    bollingerBands.multiplier = (...args) => {\n        if (!args.length) {\n            return multiplier;\n        }\n        multiplier = args[0];\n        return bollingerBands;\n    };\n\n    rebind(bollingerBands, slidingWindow, 'period', 'value');\n\n    return bollingerBands;\n}\n", "export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n", "import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n", "import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n", "export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n", "import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n", "export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "export default x => () => x;\n", "import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n", "import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n", "export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n", "import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n", "export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n", "import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n", "import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n", "import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n", "var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n", "import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n", "import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n", "var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 \u2245 u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n", "export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n", "export default function number(x) {\n  return +x;\n}\n", "import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n", "export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, \u00B1Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n", "export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n", "export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n", "// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n", "// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n", "import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n", "export default function(x) {\n  return x;\n}\n", "import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\u00B5\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\u2212\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer \u201Cvalue\u201D part that can be\n        // grouped, and fractional or exponential \u201Csuffix\u201D part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n", "import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n", "import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n", "import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n", "import {linearish} from \"./linear.js\";\nimport number from \"./number.js\";\n\nexport default function identity(domain) {\n  var unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : x;\n  }\n\n  scale.invert = scale;\n\n  scale.domain = scale.range = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), scale) : domain.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return identity(domain).unknown(unknown);\n  };\n\n  domain = arguments.length ? Array.from(domain, number) : [0, 1];\n\n  return linearish(scale);\n}\n", "export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n", "import {ticks} from \"d3-array\";\nimport {format, formatSpecifier} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : x => Math.pow(base, x);\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), x => Math.log(x) / base);\n}\n\nfunction reflect(f) {\n  return (x, k) => -f(-x, k);\n}\n\nexport function loggish(transform) {\n  const scale = transform(transformLog, transformExp);\n  const domain = scale.domain;\n  let base = 10;\n  let logs;\n  let pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = count => {\n    const d = domain();\n    let u = d[0];\n    let v = d[d.length - 1];\n    const r = v < u;\n\n    if (r) ([u, v] = [v, u]);\n\n    let i = logs(u);\n    let j = logs(v);\n    let k;\n    let t;\n    const n = count == null ? 10 : +count;\n    let z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1; k < base; ++k) {\n          t = i < 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1; k >= 1; --k) {\n          t = i > 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = (count, specifier) => {\n    if (count == null) count = 10;\n    if (specifier == null) specifier = base === 10 ? \"s\" : \",\";\n    if (typeof specifier !== \"function\") {\n      if (!(base % 1) && (specifier = formatSpecifier(specifier)).precision == null) specifier.trim = true;\n      specifier = format(specifier);\n    }\n    if (count === Infinity) return specifier;\n    const k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return d => {\n      let i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = () => {\n    return domain(nice(domain(), {\n      floor: x => pows(Math.floor(logs(x))),\n      ceil: x => pows(Math.ceil(logs(x)))\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  const scale = loggish(transformer()).domain([1, 10]);\n  scale.copy = () => copy(scale, log()).base(scale.base());\n  initRange.apply(scale, arguments);\n  return scale;\n}\n", "import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n", "const t0 = new Date, t1 = new Date;\n\nexport function timeInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = (date) => {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = (date) => {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = (date) => {\n    const d0 = interval(date), d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = (date, step) => {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = (start, stop, step) => {\n    const range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    let previous;\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = (test) => {\n    return timeInterval((date) => {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, (date, step) => {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = (start, end) => {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = (step) => {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? (d) => field(d) % step === 0\n              : (d) => interval.count(0, d) % step === 0);\n    };\n  }\n\n  return interval;\n}\n", "import {timeInterval} from \"./interval.js\";\n\nexport const millisecond = timeInterval(() => {\n  // noop\n}, (date, step) => {\n  date.setTime(+date + step);\n}, (start, end) => {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = (k) => {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return timeInterval((date) => {\n    date.setTime(Math.floor(date / k) * k);\n  }, (date, step) => {\n    date.setTime(+date + step * k);\n  }, (start, end) => {\n    return (end - start) / k;\n  });\n};\n\nexport const milliseconds = millisecond.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nexport const second = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds());\n}, (date, step) => {\n  date.setTime(+date + step * durationSecond);\n}, (start, end) => {\n  return (end - start) / durationSecond;\n}, (date) => {\n  return date.getUTCSeconds();\n});\n\nexport const seconds = second.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeMinute = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getMinutes();\n});\n\nexport const timeMinutes = timeMinute.range;\n\nexport const utcMinute = timeInterval((date) => {\n  date.setUTCSeconds(0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getUTCMinutes();\n});\n\nexport const utcMinutes = utcMinute.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeHour = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getHours();\n});\n\nexport const timeHours = timeHour.range;\n\nexport const utcHour = timeInterval((date) => {\n  date.setUTCMinutes(0, 0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getUTCHours();\n});\n\nexport const utcHours = utcHour.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nexport const timeDay = timeInterval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport const timeDays = timeDay.range;\n\nexport const utcDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return date.getUTCDate() - 1;\n});\n\nexport const utcDays = utcDay.range;\n\nexport const unixDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return Math.floor(date / durationDay);\n});\n\nexport const unixDays = unixDay.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction timeWeekday(i) {\n  return timeInterval((date) => {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setDate(date.getDate() + step * 7);\n  }, (start, end) => {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport const timeSunday = timeWeekday(0);\nexport const timeMonday = timeWeekday(1);\nexport const timeTuesday = timeWeekday(2);\nexport const timeWednesday = timeWeekday(3);\nexport const timeThursday = timeWeekday(4);\nexport const timeFriday = timeWeekday(5);\nexport const timeSaturday = timeWeekday(6);\n\nexport const timeSundays = timeSunday.range;\nexport const timeMondays = timeMonday.range;\nexport const timeTuesdays = timeTuesday.range;\nexport const timeWednesdays = timeWednesday.range;\nexport const timeThursdays = timeThursday.range;\nexport const timeFridays = timeFriday.range;\nexport const timeSaturdays = timeSaturday.range;\n\nfunction utcWeekday(i) {\n  return timeInterval((date) => {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, (start, end) => {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport const utcSunday = utcWeekday(0);\nexport const utcMonday = utcWeekday(1);\nexport const utcTuesday = utcWeekday(2);\nexport const utcWednesday = utcWeekday(3);\nexport const utcThursday = utcWeekday(4);\nexport const utcFriday = utcWeekday(5);\nexport const utcSaturday = utcWeekday(6);\n\nexport const utcSundays = utcSunday.range;\nexport const utcMondays = utcMonday.range;\nexport const utcTuesdays = utcTuesday.range;\nexport const utcWednesdays = utcWednesday.range;\nexport const utcThursdays = utcThursday.range;\nexport const utcFridays = utcFriday.range;\nexport const utcSaturdays = utcSaturday.range;\n", "import {timeInterval} from \"./interval.js\";\n\nexport const timeMonth = timeInterval((date) => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setMonth(date.getMonth() + step);\n}, (start, end) => {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, (date) => {\n  return date.getMonth();\n});\n\nexport const timeMonths = timeMonth.range;\n\nexport const utcMonth = timeInterval((date) => {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, (start, end) => {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, (date) => {\n  return date.getUTCMonth();\n});\n\nexport const utcMonths = utcMonth.range;\n", "import {timeInterval} from \"./interval.js\";\n\nexport const timeYear = timeInterval((date) => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setFullYear(date.getFullYear() + step);\n}, (start, end) => {\n  return end.getFullYear() - start.getFullYear();\n}, (date) => {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\ntimeYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport const timeYears = timeYear.range;\n\nexport const utcYear = timeInterval((date) => {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, (start, end) => {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, (date) => {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport const utcYears = utcYear.range;\n", "import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n", "import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n", "import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n", "import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n", "import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n", "/**\n * Object that helps with working with time strings and dates\n * @typedef { Object } DateTimeUtility\n * @property { function(Date): string } getTimeString - get's the time string for date as 'hh:mm:ss.fff'\n * @property { function(Date , string, number): Date } setTime - set the time  for date as\n * @property { function(Date): Date } getStartOfNextDay - returns the start of the next day i.e. 00:00:00.000\n * @property { function(Date): Date } getEndOfPreviousDay - returns the 'End' of the previous day i.e. one ms before midnight\n */\n\n/**\n * \n * @param {function(Date, number, number, number, number): Date } setTimeForDate - sets a time on a Date object given hh, mm, ss & ms time compononets\n * @param {function(Date): number } getDay \n * @param {function(Date): number[] } getTimeComponentArray \n * @param {function} dayInterval - d3-time timeDay or utcDay\n * @param {function} msInterval - d3-time timeMillisecond or utcMillisecond\n  * @returns {DateTimeUtility}\n */\nexport const dateTimeUtility = (setTimeForDate, getDay, getTimeComponentArray, dayInterval, msInterval) => {\n    const utility = {};\n    utility.getTimeComponentArrayFromString = (timeString) => [timeString.slice(0, 2), timeString.slice(3, 5), timeString.slice(6, 8), timeString.slice(9, 12)];\n    /**\n        * Returns the local time part of a given Date instance as 'hh:mm:ss.fff'\n        * @param {Date} date - Data instance\n        * @returns {string} time string.\n        */\n    utility.getTimeString = date => {\n        const [hh, mm, ss, ms] = getTimeComponentArray(date).map(x => x.toString(10).padStart(2, '0'));\n        return `${hh}:${mm}:${ss}.${ms.padStart(3, '0')}`;\n    };\n\n    /**\n     * Returns the combined local date and time string\n     * @param {Date} date - Data instance\n     * @param {string} timeString - string as 'hh:mm:ss.fff'\n     * @param {number} offsetInmilliSeconds - additional offset in millisends. Default = 0; e.g. -1 is one millisecond before time specified by timeString;\n     * @returns {Date} - combined date and time.\n     */\n    utility.setTime = (date, timeString, offsetInmilliSeconds = 0) => {\n        const [hh, mm, ss, ms] = utility.getTimeComponentArrayFromString(timeString);\n        return msInterval.offset(setTimeForDate(date, hh, mm, ss, ms), offsetInmilliSeconds);\n    };\n\n    /**\n     * Returns the start of the next day i.e. 00:00:00.000\n     * @param {Date} date - Data instance\n     * @returns {Date}.\n     */\n    utility.getStartOfNextDay = (date) => dayInterval.offset(dayInterval.floor(date), 1);\n\n    /**\n     * Returns the end of the previous day (1ms before midnight) i.e.  23:59:59.999\n     * @param {Date} date - Data instance\n     * @returns {Date}.\n     */\n    utility.getEndOfPreviousDay = (date) => msInterval.offset(dayInterval.floor(date), -1);\n\n    utility.dayInterval = dayInterval;\n    utility.msInterval = msInterval;\n    utility.getDay = getDay;\n\n    return utility;\n};", "import { timeDay, timeMillisecond } from 'd3-time';\nimport { tradingDay } from './skipWeeklyPattern/tradingDay';\nimport { dayBoundary, millisPerDay } from './skipWeeklyPattern/constants';\nimport { dateTimeUtility } from './skipWeeklyPattern/dateTimeUtility';\n\nexport const localDateTimeUtility = dateTimeUtility(\n    (date, hh, mm, ss, ms) => new Date(date.getFullYear(), date.getMonth(), date.getDate(), hh, mm, ss, ms),\n    date => date.getDay(),\n    date => [date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()],\n    timeDay,\n    timeMillisecond\n);\n\n/**\n * Discontinuity provider implemenation that works with 'non-trading' periods during a trading day\n * @typedef { Object } WeeklyPatternDiscontinuityProvider\n * @property { function(Date): Date } clampUp - When given a value, if it falls within a discontinuity (i.e. an excluded domain range) it should be shifted forwards to the discontinuity boundary. Otherwise, it should be returned unchanged.\n * @property { function(Date): Date } clampDown - When given a value, if it falls within a discontinuity it should be shifted backwards to the discontinuity boundary. Otherwise, it should be returned unchanged.\n * @property { function(Date, Date): number } distance - When given a pair of values, this function returns the distance between the, in domain units, minus any discontinuities. discontinuities.\n * @property { function(Date, number): Date } offset - When given a value and an offset, the value should be advanced by the offset value, skipping any discontinuities, to return the final value.\n * @property { function(): WeeklyPatternDiscontinuityProvider } copy - Creates a copy of the discontinuity provider.\n  */\n\n/**\n * Creates WeeklyPatternDiscontinuityProvider\n * @param {Object} nonTradingPattern - contains raw 'non-trading' time ranges for each day of the week\n * @param {DateTimeUtility} dateTimeUtility - uses local or utc dates\n * @returns { WeeklyPatternDiscontinuityProvider } WeeklyPatternDiscontinuityProvider\n */\nexport const base = (nonTradingPattern, dateTimeUtility) => {\n\n    const getDayPatternOrDefault = (day) => nonTradingPattern[day] === undefined ? [] : nonTradingPattern[day];\n\n    const tradingDays = [\n        tradingDay(getDayPatternOrDefault('Sunday'), dateTimeUtility),\n        tradingDay(getDayPatternOrDefault('Monday'), dateTimeUtility),\n        tradingDay(getDayPatternOrDefault('Tuesday'), dateTimeUtility),\n        tradingDay(getDayPatternOrDefault('Wednesday'), dateTimeUtility),\n        tradingDay(getDayPatternOrDefault('Thursday'), dateTimeUtility),\n        tradingDay(getDayPatternOrDefault('Friday'), dateTimeUtility),\n        tradingDay(getDayPatternOrDefault('Saturday'), dateTimeUtility)];\n\n    const totalTradingWeekMilliseconds = tradingDays.reduce((total, tradingDay) => total + tradingDay.totalTradingTimeInMiliseconds, 0);\n\n    if (totalTradingWeekMilliseconds === 0) {\n        throw 'Trading pattern must yield at least 1 ms of trading time';\n    }\n\n    const instance = { tradingDays, totalTradingWeekMilliseconds };\n\n    /**\n     * When given a value falls within a discontinuity (i.e. an excluded domain range) it should be shifted forwards to the discontinuity boundary. \n     * Otherwise, it should be returns unchanged.\n     * @param {Date} date - date to clamp up\n     * @returns {Date}\n     */\n    instance.clampUp = (date) => {\n        const tradingDay = tradingDays[dateTimeUtility.getDay(date)];\n\n        for (const range of tradingDay.nonTradingTimeRanges) {\n            if (range.isInRange(date)) {\n\n                return range.endTime === dayBoundary\n                    ? instance.clampUp(dateTimeUtility.getStartOfNextDay(date))\n                    : dateTimeUtility.setTime(date, range.endTime);\n            }\n        }\n\n        return date;\n    };\n\n    /** \n     * When given a value, if it falls within a discontinuity it should be shifted backwards to the discontinuity boundary. Otherwise, it should be returned unchanged.\n     * @param {Date} date - date to clamp down\n     * @returns {Date}\n    */\n    instance.clampDown = (date) => {\n        const tradingDay = tradingDays[dateTimeUtility.getDay(date)];\n\n        for (const range of tradingDay.nonTradingTimeRanges) {\n            if (range.isInRange(date)) {\n\n                return range.startTime === dayBoundary\n                    ? instance.clampDown(dateTimeUtility.getEndOfPreviousDay(date))\n                    : dateTimeUtility.setTime(date, range.startTime, -1);\n            }\n        }\n        return date;\n    };\n\n    /**\n     * When given a pair of values, this function returns the distance between the, in domain units, minus any discontinuities. discontinuities.\n     * @param {Date} startDate \n     * @param {Date} endDate \n     * @returns {number} - the number of milliseconds between the dates\n     */\n    instance.distance = (startDate, endDate) => {\n\n        if (startDate.getTime() === endDate.getTime()) {\n            return 0;\n        }\n\n        let [start, end, factor] = startDate <= endDate\n            ? [startDate, endDate, 1]\n            : [endDate, startDate, -1];\n\n        // same day distance\n        if (dateTimeUtility.dayInterval(start).getTime() === dateTimeUtility.dayInterval(end).getTime()) {\n            return instance.tradingDays[dateTimeUtility.getDay(start)].totalTradingMillisecondsBetween(start, end);\n        }\n\n        // combine any trading time left in the day after startDate \n        // and any trading time from midnight up until the endDate\n        let total = instance.tradingDays[dateTimeUtility.getDay(start)].totalTradingMillisecondsBetween(start, dateTimeUtility.dayInterval.offset(dateTimeUtility.dayInterval(start), 1)) +\n            instance.tradingDays[dateTimeUtility.getDay(end)].totalTradingMillisecondsBetween(dateTimeUtility.dayInterval(end), end);\n\n        // startDate and endDate are consecutive days    \n        if (dateTimeUtility.dayInterval.count(start, end) === 1) {\n            return total;\n        }\n\n        // move the start date to following day\n        start = dateTimeUtility.dayInterval.offset(dateTimeUtility.dayInterval(start), 1);\n        // floor endDate to remove 'time component'\n        end = dateTimeUtility.dayInterval(end);\n\n        return factor * dateTimeUtility.dayInterval.range(start, end)\n            .reduce((runningTotal, currentDay, currentIndex, arr) => {\n\n                const nextDay = currentIndex < arr.length - 1\n                    ? arr[currentIndex + 1]\n                    : dateTimeUtility.dayInterval.offset(currentDay, 1);\n                const isDstBoundary = (nextDay - currentDay) !== millisPerDay;\n                const tradingDay = instance.tradingDays[dateTimeUtility.getDay(currentDay)];\n                return runningTotal += isDstBoundary\n                    ? tradingDay.totalTradingMillisecondsBetween(currentDay, nextDay)\n                    : tradingDay.totalTradingTimeInMiliseconds;\n\n            }, total);\n    };\n\n    /**\n     * When given a value and an offset in milliseconds, the value should be advanced by the offset value, skipping any discontinuities, to return the final value.\n     * @param {Date} date \n     * @param {number} ms \n     */\n    instance.offset = (date, ms) => {\n        date = ms >= 0\n            ? instance.clampUp(date)\n            : instance.clampDown(date);\n\n        const isDstBoundary = (d) => (dateTimeUtility.dayInterval.offset(d) - dateTimeUtility.dayInterval(d)) !== millisPerDay;\n\n        const moveToDayBoundary = (tradingDay, date, ms) => {\n\n            if (ms < 0) {\n                const dateFloor = dateTimeUtility.dayInterval(date);\n                const distanceToStartOfDay = tradingDay.totalTradingMillisecondsBetween(dateFloor, date);\n\n                return Math.abs(ms) <= distanceToStartOfDay\n                    ? tradingDay.offset(date, ms)\n                    : [instance.clampDown(dateTimeUtility.msInterval.offset(dateFloor, -1)), ms + distanceToStartOfDay + 1];\n\n            } else {\n                const nextDate = dateTimeUtility.getStartOfNextDay(date);\n                const distanceToDayBoundary = tradingDay.totalTradingMillisecondsBetween(date, nextDate);\n\n                return ms < distanceToDayBoundary\n                    ? tradingDay.offset(date, ms)\n                    : [instance.clampUp(nextDate), ms - distanceToDayBoundary];\n            }\n        };\n\n        if (ms === 0)\n            return date;\n\n        const moveDateDelegate = ms < 0\n            ? (date, remainingMs, tradingDayMs) => [instance.clampDown(dateTimeUtility.dayInterval.offset(date, -1)), remainingMs + tradingDayMs]\n            : (date, remainingMs, tradingDayMs) => [instance.clampUp(dateTimeUtility.dayInterval.offset(date)), remainingMs - tradingDayMs];\n\n        let tradingDay = instance.tradingDays[dateTimeUtility.getDay(date)];\n        [date, ms] = moveToDayBoundary(tradingDay, date, ms);\n        while (ms !== 0) {\n            tradingDay = instance.tradingDays[dateTimeUtility.getDay(date)];\n            if (isDstBoundary(date)) {\n                [date, ms] = moveToDayBoundary(tradingDay, date, ms);\n            } else {\n                [date, ms] = Math.abs(ms) >= tradingDay.totalTradingTimeInMiliseconds\n                    ? moveDateDelegate(date, ms, tradingDay.totalTradingTimeInMiliseconds)\n                    : moveToDayBoundary(tradingDay, date, ms);\n            }\n        }\n\n        return date;\n    };\n\n    instance.copy = () => instance;\n\n    return instance;\n};\n\nexport default (nonTradingHoursPattern) => base(nonTradingHoursPattern, localDateTimeUtility);", "import { utcDay, utcMillisecond } from 'd3-time';\nimport { base } from './skipWeeklyPattern';\nimport { dateTimeUtility } from './skipWeeklyPattern/dateTimeUtility';\n\nexport const utcDateTimeUtility = dateTimeUtility(\n    (date, hh, mm, ss, ms) => new Date(Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), hh, mm, ss, ms)),\n    date => date.getUTCDay(),\n    date => [date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds()],\n    utcDay,\n    utcMillisecond\n);\n\nexport default (nonTradingUtcHoursPattern) => base(nonTradingUtcHoursPattern, utcDateTimeUtility);", "import { min, max } from 'd3-array';\n\nexport default function() {\n\n    let accessors = [ d => d ];\n    let pad = [0, 0];\n    let padUnit = 'percent';\n    let symmetricalAbout = null;\n    let include = [];\n\n    const instance = (data) => {\n        const values = new Array(data.length);\n        for (const accessor of accessors) {\n            for (let i = 0; i < data.length; i++) {\n                const value = accessor(data[i], i);\n                if (Array.isArray(value)) {\n                    values.push(...value);\n                } else {\n                    values.push(value);\n                }\n            }\n        }\n\n        const extent = [ min(values), max(values) ];\n\n        extent[0] = extent[0] == null ? min(include) : min([extent[0], ...include]);\n        extent[1] = extent[1] == null ? max(include) : max([extent[1], ...include]);\n\n        if (symmetricalAbout != null) {\n            const halfRange = Math.max(\n                Math.abs(extent[1] - symmetricalAbout),\n                Math.abs(extent[0] - symmetricalAbout)\n            );\n            extent[0] = symmetricalAbout - halfRange;\n            extent[1] = symmetricalAbout + halfRange;\n        }\n\n        switch (padUnit) {\n        case 'domain': {\n            extent[0] -= pad[0];\n            extent[1] += pad[1];\n            break;\n        }\n        case 'percent': {\n            const delta = extent[1] - extent[0];\n            extent[0] -= pad[0] * delta;\n            extent[1] += pad[1] * delta;\n            break;\n        }\n        default:\n            throw new Error(`Unknown padUnit: ${padUnit}`);\n        }\n\n        return extent;\n    };\n\n    instance.accessors = (...args) => {\n        if (!args.length) {\n            return accessors;\n        }\n        accessors = args[0];\n        return instance;\n    };\n\n    instance.pad = (...args) => {\n        if (!args.length) {\n            return pad;\n        }\n        pad = args[0];\n        return instance;\n    };\n\n    instance.padUnit = (...args) => {\n        if (!args.length) {\n            return padUnit;\n        }\n        padUnit = args[0];\n        return instance;\n    };\n\n    instance.include = (...args) => {\n        if (!args.length) {\n            return include;\n        }\n        include = args[0];\n        return instance;\n    };\n\n    instance.symmetricalAbout = (...args) => {\n        if (!args.length) {\n            return symmetricalAbout;\n        }\n        symmetricalAbout = args[0];\n        return instance;\n    };\n\n    return instance;\n}\n", "import { default as linearExtent } from './linear';\n\nexport default function() {\n\n    let accessors = [];\n    let pad = [0, 0];\n    let padUnit = 'percent';\n    let symmetricalAbout = null;\n    let include = [];\n\n    const extent = linearExtent();\n\n    const valueOf = date => date != null ? date.valueOf() : null;\n\n    const instance = (data) => {\n        const adaptedAccessors = accessors.map(accessor => (...args) => {\n            const value = accessor(...args);\n            return Array.isArray(value) ? value.map(valueOf) : valueOf(value);\n        });\n\n        extent.accessors(adaptedAccessors)\n          .pad(pad)\n          .padUnit(padUnit)\n          .symmetricalAbout(symmetricalAbout != null ? symmetricalAbout.valueOf() : null)\n          .include(include.map(date => date.valueOf()));\n\n        return extent(data)\n          .map(value => new Date(value));\n    };\n\n    instance.accessors = (...args) => {\n        if (!args.length) {\n            return accessors;\n        }\n        accessors = args[0];\n        return instance;\n    };\n\n    instance.pad = (...args) => {\n        if (!args.length) {\n            return pad;\n        }\n        pad = args[0];\n        return instance;\n    };\n\n    instance.padUnit = (...args) => {\n        if (!args.length) {\n            return padUnit;\n        }\n        padUnit = args[0];\n        return instance;\n    };\n\n    instance.include = (...args) => {\n        if (!args.length) {\n            return include;\n        }\n        include = args[0];\n        return instance;\n    };\n\n    instance.symmetricalAbout = (...args) => {\n        if (!args.length) {\n            return symmetricalAbout;\n        }\n        symmetricalAbout = args[0];\n        return instance;\n    };\n\n    return instance;\n}\n", "const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? We\u2019re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n", "export default (v) =>\n  typeof v === 'function' ? v : () => v;\n", "import { path } from 'd3-path';\nimport functor from './functor';\n\n// Renders an OHLC as an SVG path based on the given array of datapoints. Each\n// OHLC has a fixed width, whilst the x, open, high, low and close positions are\n// obtained from each point via the supplied accessor functions.\nexport default () => {\n\n    let context = null;\n    let x       = (d) => d.date;\n    let open    = (d) => d.open;\n    let high    = (d) => d.high;\n    let low     = (d) => d.low;\n    let close   = (d) => d.close;\n    let orient  = 'vertical';\n    let width   = functor(3);\n\n    const ohlc = function(data) {\n\n        const drawingContext = context || path();\n\n        data.forEach(function(d, i) {\n            const xValue      = x(d, i);\n            const yOpen       = open(d, i);\n            const yHigh       = high(d, i);\n            const yLow        = low(d, i);\n            const yClose      = close(d, i);\n            const halfWidth   = width(d, i) / 2;\n\n            if (orient === 'vertical') {\n                drawingContext.moveTo(xValue, yLow);\n                drawingContext.lineTo(xValue, yHigh);\n\n                drawingContext.moveTo(xValue, yOpen);\n                drawingContext.lineTo(xValue - halfWidth, yOpen);\n                drawingContext.moveTo(xValue, yClose);\n                drawingContext.lineTo(xValue + halfWidth, yClose);\n            } else {\n                drawingContext.moveTo(yLow, xValue);\n                drawingContext.lineTo(yHigh, xValue);\n\n                drawingContext.moveTo(yOpen, xValue);\n                drawingContext.lineTo(yOpen, xValue + halfWidth);\n                drawingContext.moveTo(yClose, xValue);\n                drawingContext.lineTo(yClose, xValue - halfWidth);\n            }\n        });\n\n        return context ? null : drawingContext.toString();\n    };\n\n    ohlc.context = (...args) => {\n        if (!args.length) {\n            return context;\n        }\n        context = args[0];\n        return ohlc;\n    };\n    ohlc.x = (...args) => {\n        if (!args.length) {\n            return x;\n        }\n        x = functor(args[0]);\n        return ohlc;\n    };\n    ohlc.open = (...args) => {\n        if (!args.length) {\n            return open;\n        }\n        open = functor(args[0]);\n        return ohlc;\n    };\n    ohlc.high = (...args) => {\n        if (!args.length) {\n            return high;\n        }\n        high = functor(args[0]);\n        return ohlc;\n    };\n    ohlc.low = (...args) => {\n        if (!args.length) {\n            return low;\n        }\n        low = functor(args[0]);\n        return ohlc;\n    };\n    ohlc.close = (...args) => {\n        if (!args.length) {\n            return close;\n        }\n        close = functor(args[0]);\n        return ohlc;\n    };\n    ohlc.width = (...args) => {\n        if (!args.length) {\n            return width;\n        }\n        width = functor(args[0]);\n        return ohlc;\n    };\n    ohlc.orient = (...args) => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return ohlc;\n    };\n\n    return ohlc;\n};\n", "import { path } from 'd3-path';\nimport functor from './functor';\n\n// Renders a bar series as an SVG path based on the given array of datapoints. Each\n// bar has a fixed width, whilst the x, y and height are obtained from each data\n// point via the supplied accessor functions.\nexport default () => {\n\n    let context           = null;\n    let x                 = (d) => d.x;\n    let y                 = (d) => d.y;\n    let horizontalAlign   = 'center';\n    let verticalAlign     = 'center';\n    let height            = (d) => d.height;\n    let width             = functor(3);\n\n    const bar = function(data, index) {\n\n        const drawingContext = context || path();\n\n        data.forEach(function(d, i) {\n            const xValue    = x.call(this, d, index || i);\n            const yValue    = y.call(this, d, index || i);\n            const barHeight = height.call(this, d, index || i);\n            const barWidth  = width.call(this, d, index || i);\n\n            let horizontalOffset;\n            switch (horizontalAlign) {\n            case 'left':\n                horizontalOffset = barWidth;\n                break;\n            case 'right':\n                horizontalOffset = 0;\n                break;\n            case 'center':\n                horizontalOffset = barWidth / 2;\n                break;\n            default:\n                throw new Error('Invalid horizontal alignment ' + horizontalAlign);\n            }\n\n            let verticalOffset;\n            switch (verticalAlign) {\n            case 'bottom':\n                verticalOffset = -barHeight;\n                break;\n            case 'top':\n                verticalOffset = 0;\n                break;\n            case 'center':\n                verticalOffset = barHeight / 2;\n                break;\n            default:\n                throw new Error('Invalid vertical alignment ' + verticalAlign);\n            }\n\n            drawingContext.rect(\n                xValue - horizontalOffset,\n                yValue - verticalOffset,\n                barWidth,\n                barHeight\n            );\n        }, this);\n\n        return context ? null : drawingContext.toString();\n    };\n\n    bar.context = (...args) => {\n        if (!args.length) {\n            return context;\n        }\n        context = args[0];\n        return bar;\n    };\n    bar.x = (...args) => {\n        if (!args.length) {\n            return x;\n        }\n        x = functor(args[0]);\n        return bar;\n    };\n    bar.y = (...args) => {\n        if (!args.length) {\n            return y;\n        }\n        y = functor(args[0]);\n        return bar;\n    };\n    bar.width = (...args) => {\n        if (!args.length) {\n            return width;\n        }\n        width = functor(args[0]);\n        return bar;\n    };\n    bar.horizontalAlign = (...args) => {\n        if (!args.length) {\n            return horizontalAlign;\n        }\n        horizontalAlign = args[0];\n        return bar;\n    };\n    bar.height = (...args) => {\n        if (!args.length) {\n            return height;\n        }\n        height = functor(args[0]);\n        return bar;\n    };\n    bar.verticalAlign = (...args) => {\n        if (!args.length) {\n            return verticalAlign;\n        }\n        verticalAlign = args[0];\n        return bar;\n    };\n\n    return bar;\n};\n", "import { path } from 'd3-path';\nimport functor from './functor';\n\n// Renders a candlestick as an SVG path based on the given array of datapoints. Each\n// candlestick has a fixed width, whilst the x, open, high, low and close positions are\n// obtained from each point via the supplied accessor functions.\nexport default () => {\n\n    let context = null;\n    let x       = (d) => d.date;\n    let open    = (d) => d.open;\n    let high    = (d) => d.high;\n    let low     = (d) => d.low;\n    let close   = (d) => d.close;\n    let width   = functor(3);\n\n    const candlestick = function(data) {\n\n        const drawingContext = context || path();\n\n        data.forEach(function(d, i) {\n            const xValue        = x(d, i);\n            const yOpen         = open(d, i);\n            const yHigh         = high(d, i);\n            const yLow          = low(d, i);\n            const yClose        = close(d, i);\n            const barWidth      = width(d, i);\n            const halfBarWidth  = barWidth / 2;\n\n            // Body\n            drawingContext.rect(xValue - halfBarWidth, yOpen, barWidth, yClose - yOpen);\n            // High wick\n            // // Move to the max price of close or open; draw the high wick\n            // N.B. Math.min() is used as we're dealing with pixel values,\n            // the lower the pixel value, the higher the price!\n            drawingContext.moveTo(xValue, Math.min(yClose, yOpen));\n            drawingContext.lineTo(xValue, yHigh);\n            // Low wick\n            // // Move to the min price of close or open; draw the low wick\n            // N.B. Math.max() is used as we're dealing with pixel values,\n            // the higher the pixel value, the lower the price!\n            drawingContext.moveTo(xValue, Math.max(yClose, yOpen));\n            drawingContext.lineTo(xValue, yLow);\n        });\n\n        return context ? null : drawingContext.toString();\n    };\n\n    candlestick.context = (...args) => {\n        if (!args.length) {\n            return context;\n        }\n        context = args[0];\n        return candlestick;\n    };\n    candlestick.x = (...args) => {\n        if (!args.length) {\n            return x;\n        }\n        x = functor(args[0]);\n        return candlestick;\n    };\n    candlestick.open = (...args) => {\n        if (!args.length) {\n            return open;\n        }\n        open = functor(args[0]);\n        return candlestick;\n    };\n    candlestick.high = (...args) => {\n        if (!args.length) {\n            return high;\n        }\n        high = functor(args[0]);\n        return candlestick;\n    };\n    candlestick.low = (...args) => {\n        if (!args.length) {\n            return low;\n        }\n        low = functor(args[0]);\n        return candlestick;\n    };\n    candlestick.close = (...args) => {\n        if (!args.length) {\n            return close;\n        }\n        close = functor(args[0]);\n        return candlestick;\n    };\n    candlestick.width = (...args) => {\n        if (!args.length) {\n            return width;\n        }\n        width = functor(args[0]);\n        return candlestick;\n    };\n\n    return candlestick;\n};\n", "export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n", "import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n", "import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n", "function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don\u2019t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n", "function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n", "export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n", "import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "export default function(update) {\n  return new Array(update.length);\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don\u2019t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn\u2019t worried about \u201Clive\u201D collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don\u2019t; we\u2019d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n", "export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n", "export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n", "export default function() {\n  return !this.node();\n}\n", "export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n", "import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n", "export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n", "import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n", "function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n", "function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n", "function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n", "function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n", "function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n", "function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n", "import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n", "import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n", "function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n", "function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n", "export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n", "function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n", "import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n", "export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n", "import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n", "import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n", "export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n", "import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n", "import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([array(selector)], root);\n}\n", "// \"Caution: avoid interpolating to or from the number zero when the interpolator is used to generate\n// a string (such as with attr).\n// Very small values, when stringified, may be converted to scientific notation and\n// cause a temporarily invalid attribute or style property value.\n// For example, the number 0.0000001 is converted to the string \"1e-7\".\n// This is particularly noticeable when interpolating opacity values.\n// To avoid scientific notation, start or end the transition at 1e-6,\n// which is the smallest value that is not stringified in exponential notation.\"\n// - https://github.com/mbostock/d3/wiki/Transitions#d3_interpolateNumber\nexport const effectivelyZero = 1e-6;\n\nexport const isTransition = selectionOrTransition =>\n    selectionOrTransition.selection() !== selectionOrTransition;\n\n// Wrapper around d3's selectAll/data data-join, which allows decoration of the result.\n// This is achieved by appending the element to the enter selection before exposing it.\n// A default transition of fade in/out is also implicitly added but can be modified.\nexport default (element, className) => {\n    element = element || 'g';\n\n    let key = (_, i) => i;\n    let explicitTransition = null;\n\n    const dataJoin = function(container, data) {\n        data = data || (d => d);\n\n        const selection = container.selection();\n        const implicitTransition = isTransition(container) ? container : null;\n\n        const selected = selection.selectChildren(\n            className == null ? element : `${element}.${className}`\n        );\n        let update = selected.data(data, key);\n\n        const enter = update\n            .enter()\n            .append(element)\n            .attr('class', className);\n\n        let exit = update.exit();\n\n        // automatically merge in the enter selection\n        update = update.merge(enter);\n\n        // if transitions are enabled apply a default fade in/out transition\n        const transition = implicitTransition || explicitTransition;\n        if (transition) {\n            update = update.transition(transition).style('opacity', 1);\n            enter.style('opacity', effectivelyZero);\n            exit = exit\n                .transition(transition)\n                .style('opacity', effectivelyZero);\n        }\n\n        exit.remove();\n\n        update.enter = () => enter;\n        update.exit = () => exit;\n\n        return update;\n    };\n\n    dataJoin.element = (...args) => {\n        if (!args.length) {\n            return element;\n        }\n        element = args[0];\n        return dataJoin;\n    };\n    dataJoin.className = (...args) => {\n        if (!args.length) {\n            return className;\n        }\n        className = args[0];\n        return dataJoin;\n    };\n    dataJoin.key = (...args) => {\n        if (!args.length) {\n            return key;\n        }\n        key = args[0];\n        return dataJoin;\n    };\n    dataJoin.transition = (...args) => {\n        if (!args.length) {\n            return explicitTransition;\n        }\n        explicitTransition = args[0];\n        return dataJoin;\n    };\n\n    return dataJoin;\n};\n", "export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n", "export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n", "import {Path} from \"d3-path\";\n\nexport function withPath(shape) {\n  let digits = 3;\n\n  shape.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) {\n      digits = null;\n    } else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    return shape;\n  };\n\n  return () => new Path(digits);\n}\n", "import constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\nimport {withPath} from \"./path.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null,\n      path = withPath(arc);\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 \u2265 r0, da1 \u2265 da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle. If this\n        // intersection fails, it\u2019s probably because the arc is too small, so\n        // disable the corner radius entirely.\n        if (da < pi) {\n          if (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10)) {\n            var ax = x01 - oc[0],\n                ay = y01 - oc[1],\n                bx = x11 - oc[0],\n                by = y11 - oc[1],\n                kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n            rc0 = min(rc, (r0 - lc) / (kc - 1));\n            rc1 = min(rc, (r1 - lc) / (kc + 1));\n          } else {\n            rc0 = rc1 = 0;\n          }\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector\u2019s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it\u2019s a circular sector?\n      // Or perhaps it\u2019s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector\u2019s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n", "export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n", "function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n", "export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n", "import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n", "import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n", "import {pi, sqrt, tau} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const w = sqrt(size);\n    const x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n", "import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n", "import constant from \"./constant.js\";\nimport {withPath} from \"./path.js\";\nimport asterisk from \"./symbol/asterisk.js\";\nimport circle from \"./symbol/circle.js\";\nimport cross from \"./symbol/cross.js\";\nimport diamond from \"./symbol/diamond.js\";\nimport diamond2 from \"./symbol/diamond2.js\";\nimport plus from \"./symbol/plus.js\";\nimport square from \"./symbol/square.js\";\nimport square2 from \"./symbol/square2.js\";\nimport star from \"./symbol/star.js\";\nimport triangle from \"./symbol/triangle.js\";\nimport triangle2 from \"./symbol/triangle2.js\";\nimport wye from \"./symbol/wye.js\";\nimport times from \"./symbol/times.js\";\n\n// These symbols are designed to be filled.\nexport const symbolsFill = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\n// These symbols are designed to be stroked (with a width of 1.5px and round caps).\nexport const symbolsStroke = [\n  circle,\n  plus,\n  times,\n  triangle2,\n  asterisk,\n  square2,\n  diamond2\n];\n\nexport default function Symbol(type, size) {\n  let context = null,\n      path = withPath(symbol);\n\n  type = typeof type === \"function\" ? type : constant(type || circle);\n  size = typeof size === \"function\" ? size : constant(size === undefined ? 64 : +size);\n\n  function symbol() {\n    let buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n", "export default (d) => typeof d === 'function' ? d : () => d;\n", "// Checks that passed properties are 'defined', meaning that calling them with (d, i) returns non null values\nexport default function defined() {\n    const outerArguments = arguments;\n    return function(d, i) {\n        for (let c = 0, j = outerArguments.length; c < j; c++) {\n            if (outerArguments[c](d, i) == null) {\n                return false;\n            }\n        }\n        return true;\n    };\n}\n", "// determines the offset required along the cross scale based\n// on the series alignment\nexport default (align, width) => {\n    switch (align) {\n    case 'left':\n        return width / 2;\n    case 'right':\n        return -width / 2;\n    default:\n        return 0;\n    }\n};\n", "export default initialValues => {\n\n    const env = Object.assign({}, initialValues);\n    const base = () => {};\n\n    Object.keys(env).forEach(key => {\n        base[key] = (...args) => {\n            if (!args.length) {\n                return env[key];\n            }\n            env[key] = args[0];\n            return base;\n        };\n    });\n\n    return base;\n};\n", "import { scaleIdentity } from 'd3-scale';\nimport functor from './functor';\nimport defined from './defined';\nimport alignOffset from './alignOffset';\nimport createBase from './base';\n\nexport default () => {\n\n    let baseValue = () => 0;\n    let crossValue = d => d.x;\n    let mainValue = d => d.y;\n    let align = 'center';\n    let bandwidth = () => 5;\n    let orient = 'vertical';\n\n    const base = createBase({\n        decorate: () => { },\n        defined: (d, i) => defined(baseValue, crossValue, mainValue)(d, i),\n        xScale: scaleIdentity(),\n        yScale: scaleIdentity()\n    });\n\n    base.values = (d, i) => {\n        const width = bandwidth(d, i);\n        const offset = alignOffset(align, width);\n        const xScale = base.xScale();\n        const yScale = base.yScale();\n\n        if (orient === 'vertical') {\n            const y = yScale(mainValue(d, i), i);\n            const y0 = yScale(baseValue(d, i), i);\n            const x = xScale(crossValue(d, i), i) + offset;\n            return {\n                d,\n                x,\n                y,\n                y0,\n                width,\n                height: y - y0,\n                origin: [x, y],\n                baseOrigin: [x, y0],\n                transposedX: x,\n                transposedY: y\n            };\n        } else {\n            const y = xScale(mainValue(d, i), i);\n            const y0 = xScale(baseValue(d, i), i);\n            const x = yScale(crossValue(d, i), i) + offset;\n            return {\n                d,\n                x,\n                y,\n                y0,\n                width,\n                height: y - y0,\n                origin: [y, x],\n                baseOrigin: [y0, x],\n                transposedX: y,\n                transposedY: x\n            };\n        }\n    };\n\n    base.xValues = () => orient === 'vertical' ? [crossValue] : [\n        baseValue,\n        mainValue\n    ];\n    base.yValues = () => orient !== 'vertical' ? [crossValue] : [\n        baseValue,\n        mainValue\n    ];\n    base.baseValue = (...args) => {\n        if (!args.length) {\n            return baseValue;\n        }\n        baseValue = functor(args[0]);\n        return base;\n    };\n    base.crossValue = (...args) => {\n        if (!args.length) {\n            return crossValue;\n        }\n        crossValue = functor(args[0]);\n        return base;\n    };\n    base.mainValue = (...args) => {\n        if (!args.length) {\n            return mainValue;\n        }\n        mainValue = functor(args[0]);\n        return base;\n    };\n    base.bandwidth = (...args) => {\n        if (!args.length) {\n            return bandwidth;\n        }\n        bandwidth = functor(args[0]);\n        return base;\n    };\n    base.align = (...args) => {\n        if (!args.length) {\n            return align;\n        }\n        align = args[0];\n        return base;\n    };\n    base.orient = (...args) => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return base;\n    };\n\n    return base;\n};\n", "const red = '#c60';\nconst green = '#6c0';\nconst black = '#000';\nconst gray = '#ddd';\nconst darkGray = '#999';\n\nexport default {\n    red,\n    green,\n    black,\n    gray,\n    darkGray\n};\n", "import {dataJoin, isTransition} from '@d3fc/d3fc-data-join';\nimport {line as lineShape} from 'd3-shape';\nimport {select} from 'd3-selection';\nimport {rebind, exclude, rebindAll} from '@d3fc/d3fc-rebind';\nimport xyBase from '../xyBase';\nimport colors from '../colors';\n\nexport default () => {\n    const base = xyBase();\n\n    const lineData = lineShape()\n        .x((d, i) => base.values(d, i).transposedX)\n        .y((d, i) => base.values(d, i).transposedY);\n\n    const join = dataJoin('path', 'line');\n\n    const line = (selection) => {\n\n        if (isTransition(selection)) {\n            join.transition(selection);\n        }\n\n        lineData.defined(base.defined());\n\n        selection.each((data, index, group) => {\n            const path = join(select(group[index]), [data]);\n\n            path.enter()\n              .attr('fill', 'none')\n              .attr('stroke', colors.black);\n\n            path.attr('d', lineData);\n\n            base.decorate()(path, data, index);\n        });\n    };\n\n    rebindAll(line, base, exclude('baseValue', 'bandwidth', 'align'));\n    rebind(line, join, 'key');\n    rebind(line, lineData, 'curve');\n\n    return line;\n};\n", "import {line as lineShape} from 'd3-shape';\nimport {rebind, exclude, rebindAll} from '@d3fc/d3fc-rebind';\nimport xyBase from '../xyBase';\nimport colors from '../colors';\n\nexport default () => {\n    const base = xyBase();\n\n    const lineData = lineShape()\n        .x((d, i) => base.values(d, i).transposedX)\n        .y((d, i) => base.values(d, i).transposedY);\n\n    const line = (data) => {\n        const context = lineData.context();\n\n        context.beginPath();\n\n        context.strokeStyle = colors.black;\n        context.fillStyle = 'transparent';\n\n        base.decorate()(context, data);\n\n        lineData.defined(base.defined())(data);\n\n        context.fill();\n        context.stroke();\n        context.closePath();\n    };\n\n    rebindAll(line, base, exclude('baseValue', 'bandwidth', 'align'));\n    rebind(line, lineData, 'curve', 'context');\n\n    return line;\n};\n", "import {\n    scaleIdentity,\n    scaleLinear,\n    scaleLog,\n    scalePow,\n    scaleTime\n} from 'd3-scale';\nimport linear from './linear';\nimport log from './log';\nimport pow from './pow';\n\n// we compare the stringified 'copy' function of the scale to\n// determine the scale type.\nconst scaleLinearCopy = scaleLinear().copy.toString();\nconst scaleLogCopy = scaleLog().copy.toString();\nconst scalePowCopy = scalePow().copy.toString();\nconst scaleTimeCopy = scaleTime().copy.toString();\n\n// always return the same reference to hint to consumers that\n// it is a pure function\nconst identity = scaleIdentity();\n\n// offset date values to make the most of the float32 precision\nconst epoch = Date.now();\nconst reepoch = d => d - epoch;\n\nexport default scale => {\n    switch (scale.copy.toString()) {\n        case scaleLinearCopy: {\n            return {\n                scale: identity,\n                webglScale: linear().domain(scale.domain())\n            };\n        }\n        case scaleTimeCopy: {\n            return {\n                scale: reepoch,\n                webglScale: linear().domain(scale.domain().map(reepoch))\n            };\n        }\n        case scaleLogCopy: {\n            return {\n                scale: identity,\n                webglScale: log()\n                    .domain(scale.domain())\n                    .base(scale.base())\n            };\n        }\n        case scalePowCopy: {\n            return {\n                scale: identity,\n                webglScale: pow()\n                    .domain(scale.domain())\n                    .exponent(scale.exponent())\n            };\n        }\n        default: {\n            // always return a copy of the scale to hint to consumers\n            // that it may be an impure function\n            return {\n                scale: scale.copy(),\n                webglScale: linear().domain(scale.range())\n            };\n        }\n    }\n};\n", "import {dataJoin, isTransition} from '@d3fc/d3fc-data-join';\nimport {symbol as symbolShape} from 'd3-shape';\nimport {select} from 'd3-selection';\nimport {rebind, exclude, rebindAll} from '@d3fc/d3fc-rebind';\nimport xyBase from '../xyBase';\nimport colors from '../colors';\n\nexport default () => {\n    const symbol = symbolShape();\n\n    const base = xyBase();\n\n    const join = dataJoin('g', 'point');\n\n    const containerTransform = (origin) =>\n        'translate(' + origin[0] + ', ' + origin[1] + ')';\n\n    const point = (selection) => {\n\n        if (isTransition(selection)) {\n            join.transition(selection);\n        }\n\n        selection.each((data, index, group) => {\n\n            const filteredData = data.filter(base.defined());\n\n            const g = join(select(group[index]), filteredData);\n            g.enter()\n                .attr('transform', (d, i) => containerTransform(base.values(d, i).origin))\n                .attr('fill', colors.gray)\n                .attr('stroke', colors.black)\n                .append('path');\n\n            g.attr('transform', (d, i) => containerTransform(base.values(d, i).origin))\n                .select('path')\n                .attr('d', symbol);\n\n            base.decorate()(g, data, index);\n        });\n    };\n\n    rebindAll(point, base, exclude('baseValue', 'bandwidth', 'align'));\n    rebind(point, join, 'key');\n    rebind(point, symbol, 'type', 'size');\n\n    return point;\n};\n", "import {symbol as symbolShape} from 'd3-shape';\nimport xyBase from '../xyBase';\nimport { rebind, rebindAll, exclude } from '@d3fc/d3fc-rebind';\nimport colors from '../colors';\n\nexport default () => {\n\n    const symbol = symbolShape();\n\n    const base = xyBase();\n\n    const point = (data) => {\n        const filteredData = data.filter(base.defined());\n        const context = symbol.context();\n\n        filteredData.forEach((d, i) => {\n            context.save();\n\n            const values = base.values(d, i);\n            context.translate(values.origin[0], values.origin[1]);\n            context.beginPath();\n\n            context.strokeStyle = colors.black;\n            context.fillStyle = colors.gray;\n\n            base.decorate()(context, d, i);\n\n            symbol(d, i);\n\n            context.fill();\n            context.stroke();\n            context.closePath();\n\n            context.restore();\n        });\n    };\n\n    rebindAll(point, base, exclude('baseValue', 'bandwidth', 'align'));\n    rebind(point, symbol, 'size', 'type', 'context');\n\n    return point;\n\n};\n", "import { dataJoin, isTransition } from '@d3fc/d3fc-data-join';\nimport { shapeBar } from '@d3fc/d3fc-shape';\nimport { select } from 'd3-selection';\nimport xyBase from '../xyBase';\nimport { rebind, rebindAll } from '@d3fc/d3fc-rebind';\nimport colors from '../colors';\n\nexport default () => {\n\n    const pathGenerator = shapeBar()\n        .x(0)\n        .y(0);\n\n    const base = xyBase();\n\n    const join = dataJoin('g', 'bar');\n\n    const valueAxisDimension = (generator) =>\n        base.orient() === 'vertical' ? generator.height : generator.width;\n\n    const crossAxisDimension = (generator) =>\n        base.orient() === 'vertical' ? generator.width : generator.height;\n\n    const translation = (origin) =>\n        'translate(' + origin[0] + ', ' + origin[1] + ')';\n\n    const bar = (selection) => {\n\n        if (isTransition(selection)) {\n            join.transition(selection);\n        }\n\n        selection.each((data, index, group) => {\n\n            const orient = base.orient();\n            if (orient !== 'vertical' && orient !== 'horizontal') {\n                throw new Error('The bar series does not support an orientation of ' + orient);\n            }\n\n            const filteredData = data.filter(base.defined());\n            const projectedData = filteredData.map(base.values);\n\n            pathGenerator.width(0)\n                .height(0);\n\n            if (base.orient() === 'vertical') {\n                pathGenerator.verticalAlign('top');\n                pathGenerator.horizontalAlign('center');\n            } else {\n                pathGenerator.horizontalAlign('right');\n                pathGenerator.verticalAlign('center');\n            }\n\n            const g = join(select(group[index]), filteredData);\n\n            // within the enter selection the pathGenerator creates a zero\n            // height bar on the baseline. As a result, when used with a transition the bar grows\n            // from y0 to y1 (y)\n            g.enter()\n                .attr('transform', (_, i) => translation(projectedData[i].baseOrigin))\n                .attr('class', 'bar ' + base.orient())\n                .attr('fill', colors.darkGray)\n                .append('path')\n                .attr('d', (d, i) => {\n                    crossAxisDimension(pathGenerator)(projectedData[i].width);\n                    return pathGenerator([d]);\n                });\n\n            // the container translation sets the origin to the 'tip'\n            // of each bar as per the decorate pattern\n            g.attr('transform', (_, i) => translation(projectedData[i].origin))\n                .select('path')\n                .attr('d', (d, i) => {\n                    crossAxisDimension(pathGenerator)(projectedData[i].width);\n                    valueAxisDimension(pathGenerator)(-projectedData[i].height);\n                    return pathGenerator([d]);\n                });\n\n            base.decorate()(g, filteredData, index);\n        });\n    };\n\n    rebindAll(bar, base);\n    rebind(bar, join, 'key');\n\n    return bar;\n};\n", "import {dataJoin,isTransition} from '@d3fc/d3fc-data-join';\nimport {area as areaShape} from 'd3-shape';\nimport {select} from 'd3-selection';\nimport {rebind, exclude, rebindAll} from '@d3fc/d3fc-rebind';\nimport xyBase from '../xyBase';\nimport colors from '../colors';\n\nexport default () => {\n    const base = xyBase();\n\n    const areaData = areaShape();\n\n    const join = dataJoin('path', 'area');\n\n    const area = (selection) => {\n\n        if (isTransition(selection)) {\n            join.transition(selection);\n        }\n\n        areaData.defined(base.defined());\n\n        selection.each((data, index, group) => {\n\n            const projectedData = data.map(base.values);\n            areaData.x((_, i) => projectedData[i].transposedX)\n                .y((_, i) => projectedData[i].transposedY);\n\n            const valueComponent = base.orient() === 'vertical' ? 'y' : 'x';\n            areaData[valueComponent + '0']((_, i) => projectedData[i].y0);\n            areaData[valueComponent + '1']((_, i) => projectedData[i].y);\n\n            const path = join(select(group[index]), [data]);\n\n            path.enter()\n              .attr('fill', colors.gray);\n\n            path.attr('d', areaData);\n\n            base.decorate()(path, data, index);\n        });\n    };\n\n    rebindAll(area, base, exclude('bandwidth', 'align'));\n    rebind(area, join, 'key');\n    rebind(area, areaData, 'curve');\n\n    return area;\n};\n", "import {area as areaShape} from 'd3-shape';\nimport {rebind, exclude, rebindAll} from '@d3fc/d3fc-rebind';\nimport xyBase from '../xyBase';\nimport colors from '../colors';\n\nexport default () => {\n    const base = xyBase();\n\n    const areaData = areaShape();\n\n    const area = (data) => {\n        const context = areaData.context();\n\n        areaData.defined(base.defined());\n\n        const projectedData = data.map(base.values);\n        areaData.x((_, i) => projectedData[i].transposedX)\n            .y((_, i) => projectedData[i].transposedY);\n\n        const valueComponent = base.orient() === 'vertical' ? 'y' : 'x';\n        areaData[valueComponent + '0']((_, i) => projectedData[i].y0);\n        areaData[valueComponent + '1']((_, i) => projectedData[i].y);\n\n        context.beginPath();\n\n        context.fillStyle = colors.gray;\n        context.strokeStyle = 'transparent';\n\n        base.decorate()(context, data);\n\n        areaData(data);\n\n        context.fill();\n        context.stroke();\n        context.closePath();\n    };\n\n    rebindAll(area, base, exclude('bandwidth', 'align'));\n    rebind(area, areaData, 'curve', 'context');\n\n    return area;\n};\n", "import { scaleIdentity } from 'd3-scale';\nimport defined from './defined';\nimport functor from './functor';\nimport alignOffset from './alignOffset';\nimport createBase from './base';\n\nexport default () => {\n\n    let base;\n    let crossValue = (d) => d.date;\n    let openValue = (d) => d.open;\n    let highValue = (d) => d.high;\n    let lowValue = (d) => d.low;\n    let closeValue = (d) => d.close;\n    let bandwidth = () => 5;\n    let align = 'center';\n    let crossValueScaled = (d, i) => base.xScale()(crossValue(d, i));\n\n    base = createBase({\n        decorate: () => { },\n        defined: (d, i) => defined(\n            crossValue,\n            openValue,\n            lowValue,\n            highValue,\n            closeValue\n        )(d, i),\n        xScale: scaleIdentity(),\n        yScale: scaleIdentity()\n    });\n\n    base.values = (d, i) => {\n        const closeRaw = closeValue(d, i);\n        const openRaw = openValue(d, i);\n        const width = bandwidth(d, i);\n        const offset = alignOffset(align, width);\n\n        let direction = '';\n        if (closeRaw > openRaw) {\n            direction = 'up';\n        } else if (closeRaw < openRaw) {\n            direction = 'down';\n        }\n\n        return {\n            cross: crossValueScaled(d, i) + offset,\n            open: base.yScale()(openRaw),\n            high: base.yScale()(highValue(d, i)),\n            low: base.yScale()(lowValue(d, i)),\n            close: base.yScale()(closeRaw),\n            width,\n            direction\n        };\n    };\n\n    base.xValues = () => [crossValue];\n    base.yValues = () => [\n        openValue,\n        highValue,\n        lowValue,\n        closeValue\n    ];\n    base.crossValue = (...args) => {\n        if (!args.length) {\n            return crossValue;\n        }\n        crossValue = args[0];\n        return base;\n    };\n    base.openValue = (...args) => {\n        if (!args.length) {\n            return openValue;\n        }\n        openValue = args[0];\n        return base;\n    };\n    base.highValue = (...args) => {\n        if (!args.length) {\n            return highValue;\n        }\n        highValue = args[0];\n        return base;\n    };\n    base.lowValue = (...args) => {\n        if (!args.length) {\n            return lowValue;\n        }\n        lowValue = args[0];\n        return base;\n    };\n    base.yValue = base.closeValue = (...args) => {\n        if (!args.length) {\n            return closeValue;\n        }\n        closeValue = args[0];\n        return base;\n    };\n    base.bandwidth = (...args) => {\n        if (!args.length) {\n            return bandwidth;\n        }\n        bandwidth = functor(args[0]);\n        return base;\n    };\n    base.align = (...args) => {\n        if (!args.length) {\n            return align;\n        }\n        align = args[0];\n        return base;\n    };\n\n    return base;\n};\n", "import ohlcBase from '../ohlcBase';\nimport { rebind, rebindAll } from '@d3fc/d3fc-rebind';\nimport colors from '../colors';\n\nexport default (pathGenerator) => {\n\n    const base = ohlcBase();\n\n    const candlestick = (data) => {\n        const filteredData = data.filter(base.defined());\n        const context = pathGenerator.context();\n\n        filteredData.forEach((d, i) => {\n            context.save();\n\n            const values = base.values(d, i);\n            context.translate(values.cross, values.high);\n            context.beginPath();\n\n            pathGenerator.x(0)\n                .open(() => values.open - values.high)\n                .width(values.width)\n                .high(0)\n                .low(() => values.low - values.high)\n                .close(() => values.close - values.high)([d]);\n\n            const color = values.direction === 'up' ? colors.green : colors.red;\n            context.strokeStyle = color;\n            context.fillStyle = color;\n\n            base.decorate()(context, d, i);\n\n            context.fill();\n            context.stroke();\n            context.closePath();\n\n            context.restore();\n        });\n    };\n\n    rebind(candlestick, pathGenerator, 'context');\n    rebindAll(candlestick, base);\n\n    return candlestick;\n\n};\n", "import ohlcBase from './ohlcBase';\nimport { shapeCandlestick } from '@d3fc/d3fc-shape';\n\nexport default () => ohlcBase(shapeCandlestick());\n", "import ohlcBase from './ohlcBase';\nimport { shapeOhlc } from '@d3fc/d3fc-shape';\n\nexport default () => ohlcBase(shapeOhlc());\n", "import {scaleIdentity} from 'd3-scale';\nimport createBase from './base';\n\nexport default () => {\n\n    let series = [];\n    let mapping = (d) => d;\n    let key = (_, i) => i;\n\n    const multi = createBase({\n        decorate: () => {},\n        xScale: scaleIdentity(),\n        yScale: scaleIdentity()\n    });\n\n    multi.xValues = () => series.map(s => s.xValues())\n        .reduce((a, b) => a.concat(b));\n    multi.yValues = () => series.map(s => s.yValues())\n        .reduce((a, b) => a.concat(b));\n    multi.mapping = (...args) => {\n        if (!args.length) {\n            return mapping;\n        }\n        mapping = args[0];\n        return multi;\n    };\n    multi.key = (...args) => {\n        if (!args.length) {\n            return key;\n        }\n        key = args[0];\n        return multi;\n    };\n    multi.series = (...args) => {\n        if (!args.length) {\n            return series;\n        }\n        series = args[0];\n        return multi;\n    };\n\n    return multi;\n};\n", "import {dataJoin, isTransition} from '@d3fc/d3fc-data-join';\nimport {select} from 'd3-selection';\nimport {rebindAll, rebind} from '@d3fc/d3fc-rebind';\nimport multiBase from '../multiBase';\n\nexport default () => {\n\n    const base = multiBase();\n\n    const innerJoin = dataJoin('g');\n\n    const join = dataJoin('g', 'multi');\n\n    const multi = (selection) => {\n\n        if (isTransition(selection)) {\n            join.transition(selection);\n            innerJoin.transition(selection);\n        }\n\n        const mapping = base.mapping();\n        const series = base.series();\n        const xScale = base.xScale();\n        const yScale = base.yScale();\n\n        selection.each((data, index, group) => {\n\n            const container = join(select(group[index]), series);\n\n            // iterate over the containers, 'call'-ing the series for each\n            container.each((dataSeries, seriesIndex, seriesGroup) => {\n                dataSeries.xScale(xScale)\n                         .yScale(yScale);\n\n                const seriesData = mapping(data, seriesIndex, series);\n                const innerContainer = innerJoin(select(seriesGroup[seriesIndex]), [seriesData]);\n\n                innerContainer.call(dataSeries);\n            });\n\n            container.selection().order();\n\n            base.decorate()(container, data, index);\n        });\n    };\n\n    rebindAll(multi, base);\n    rebind(multi, join, 'key');\n\n    return multi;\n};\n", "import {rebindAll} from '@d3fc/d3fc-rebind';\nimport multiBase from '../multiBase';\n\nexport default () => {\n\n    let context = null;\n    const base = multiBase();\n\n    const multi = (data) => {\n        const mapping = base.mapping();\n        const series = base.series();\n        const xScale = base.xScale();\n        const yScale = base.yScale();\n\n        series.forEach((dataSeries, index) => {\n            const seriesData = mapping(data, index, series);\n            dataSeries.context(context)\n                .xScale(xScale)\n                .yScale(yScale);\n\n            let adaptedDecorate;\n            if (dataSeries.decorate) {\n                adaptedDecorate = dataSeries.decorate();\n                dataSeries.decorate((c, d, i) => {\n                    base.decorate()(c, data, index);\n                    adaptedDecorate(c, d, i);\n                });\n            } else {\n                base.decorate()(context, data, index);\n            }\n\n            dataSeries(seriesData);\n\n            if (adaptedDecorate) {\n                dataSeries.decorate(adaptedDecorate);\n            }\n        });\n    };\n\n    multi.context = (...args) => {\n        if (!args.length) {\n            return context;\n        }\n        context = args[0];\n        return multi;\n    };\n\n    rebindAll(multi, base);\n\n    return multi;\n};\n", "import { scaleLinear, scaleBand } from 'd3-scale';\nimport { range } from 'd3-array';\nimport { rebindAll, includeMap } from '@d3fc/d3fc-rebind';\nimport functor from './functor';\nimport alignOffset from './alignOffset';\nimport createBase from './base';\n\nexport default (series) => {\n\n    let bandwidth = () => 50;\n    let align = 'center';\n\n    // the offset scale is used to offset each of the series within a group\n    const offsetScale = scaleBand();\n\n    const grouped = createBase({\n        decorate: () => {},\n        xScale: scaleLinear(),\n        yScale: scaleLinear()\n    });\n\n    // the bandwidth for the grouped series can be a function of datum / index. As a result\n    // the offset scale required to cluster the 'sub' series is also dependent on datum / index.\n    // This function computes the offset scale for a specific datum / index of the grouped series\n    grouped.offsetScaleForDatum = (data, d, i) => {\n        const width = bandwidth(d, i);\n        const offset = alignOffset(align, width);\n\n        const halfWidth = width / 2;\n        return offsetScale\n          .domain(range(0, data.length))\n          .range([-halfWidth + offset, halfWidth + offset]);\n    };\n\n    grouped.bandwidth = (...args) => {\n        if (!args.length) {\n            return bandwidth;\n        }\n        bandwidth = functor(args[0]);\n        return grouped;\n    };\n    grouped.align = (...args) => {\n        if (!args.length) {\n            return align;\n        }\n        align = args[0];\n        return grouped;\n    };\n\n    rebindAll(grouped, offsetScale, includeMap({'paddingInner': 'paddingOuter'}));\n\n    return grouped;\n};\n", "import { dataJoin, isTransition } from '@d3fc/d3fc-data-join';\nimport { select } from 'd3-selection';\nimport { rebindAll, exclude } from '@d3fc/d3fc-rebind';\nimport groupedBase from '../groupedBase';\n\nexport default (series) => {\n\n    const base = groupedBase(series);\n\n    const join = dataJoin('g', 'grouped');\n\n    const grouped = (selection) => {\n\n        if (isTransition(selection)) {\n            join.transition(selection);\n        }\n\n        selection.each((data, index, group) => {\n\n            const g = join(select(group[index]), data);\n\n            g.enter().append('g');\n\n            g.select('g')\n                .each((_, index, group) => {\n                    const container = select(group[index]);\n\n                    // create a composite scale that applies the required offset\n                    const isVertical = series.orient() !== 'horizontal';\n                    const compositeScale = (d, i) => {\n                        const offset = base.offsetScaleForDatum(data, d, i);\n                        const baseScale = isVertical ? base.xScale() : base.yScale();\n                        return baseScale(d) +\n                          offset(index) +\n                          offset.bandwidth() / 2;\n                    };\n\n                    if (isVertical) {\n                        series.xScale(compositeScale);\n                        series.yScale(base.yScale());\n                    } else {\n                        series.yScale(compositeScale);\n                        series.xScale(base.xScale());\n                    }\n\n                    // if the sub-series has a bandwidth, set this from the offset scale\n                    if (series.bandwidth) {\n                        series.bandwidth(\n                          (d, i) => base.offsetScaleForDatum(data, d, i)\n                                        .bandwidth()\n                        );\n                    }\n\n                    // adapt the decorate function to give each series the correct index\n                    series.decorate((s, d) => base.decorate()(s, d, index));\n\n                    container.call(series);\n                });\n        });\n    };\n\n    rebindAll(grouped, series, exclude('decorate', 'xScale', 'yScale'));\n    rebindAll(grouped, base, exclude('offsetScaleForDatum'));\n\n    return grouped;\n};\n", "import {select} from 'd3-selection';\nimport {rebindAll, exclude} from '@d3fc/d3fc-rebind';\nimport multiSeries from './multi';\nimport line from './line';\n\nexport default () => {\n\n    let orient = 'vertical';\n    let series = line();\n    const multi = multiSeries();\n\n    const repeat = (selection) =>\n        selection.each((data, index, group) => {\n            if (orient === 'vertical') {\n                multi.series(data[0].map(_ => series))\n                  .mapping((data, index) => data.map(d => d[index]));\n            } else {\n                multi.series(data.map(_ => series))\n                  .mapping((data, index) => data[index]);\n            }\n            select(group[index]).call(multi);\n        });\n\n    repeat.series = (...args) => {\n        if (!args.length) {\n            return series;\n        }\n        series = args[0];\n        return repeat;\n    };\n\n    repeat.orient = (...args) => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return repeat;\n    };\n\n    rebindAll(repeat, multi, exclude('series', 'mapping'));\n\n    return repeat;\n};\n", "import { select, selection } from 'd3-selection';\nimport { rebindAll } from '@d3fc/d3fc-rebind';\nimport { pairs, min, ascending } from 'd3-array';\n\nconst sortUnique = arr =>\n    arr.sort(ascending)\n        .filter((value, index, self) => self.indexOf(value, index + 1) === -1);\n\nexport default (adaptee) => {\n\n    let widthFraction = 0.75;\n\n    // computes the bandwidth as a fraction of the smallest distance between the datapoints\n    const computeBandwidth = (screenValues) => {\n        // return some default value if there are not enough datapoints to compute the width\n        if (screenValues.length <= 1) {\n            return 10;\n        }\n\n        screenValues = sortUnique(screenValues);\n\n        // compute the distance between neighbouring items\n        const neighbourDistances = pairs(screenValues)\n            .map((tuple) => Math.abs(tuple[0] - tuple[1]));\n\n        const minDistance = min(neighbourDistances);\n        return widthFraction * minDistance;\n    };\n\n    const determineBandwith = (crossScale, data, accessor) => {\n        // if the cross-scale has a bandwidth function, i.e. it is a scaleBand, use\n        // this to determine the width\n        if (crossScale.bandwidth) {\n            return crossScale.bandwidth();\n        } else {\n            // grouped series expect a nested array, which is flattened out\n            const flattenedData = Array.isArray(data) ? [].concat(...data) : data;\n\n            // obtain an array of points along the crossValue axis, mapped to screen coordinates.\n            const crossValuePoints = flattenedData.filter(adaptee.defined())\n                .map(accessor())\n                .map(crossScale);\n\n            const width = computeBandwidth(crossValuePoints);\n\n            return width;\n        }\n    };\n\n    const autoBandwidth = (arg) => {\n\n        const computeWidth = (data) => {\n\n            if (adaptee.xBandwidth && adaptee.yBandwidth) {\n                adaptee.xBandwidth(determineBandwith(adaptee.xScale(), data, adaptee.xValue));\n                adaptee.yBandwidth(determineBandwith(adaptee.yScale(), data, adaptee.yValue));\n            } else {\n                // if the series has an orient property, use this to determine the cross-scale, otherwise\n                // assume it is the x-scale\n                const crossScale = (adaptee.orient && adaptee.orient() === 'horizontal')\n                    ? adaptee.yScale() : adaptee.xScale();\n\n                adaptee.bandwidth(determineBandwith(crossScale, data, adaptee.crossValue));\n            }\n        };\n\n        if (arg instanceof selection) {\n            arg.each((data, index, group) => {\n                computeWidth(data);\n                adaptee(select(group[index]));\n            });\n        } else {\n            computeWidth(arg);\n            adaptee(arg);\n        }\n    };\n\n    rebindAll(autoBandwidth, adaptee);\n\n    autoBandwidth.widthFraction = (...args) => {\n        if (!args.length) {\n            return widthFraction;\n        }\n        widthFraction = args[0];\n        return autoBandwidth;\n    };\n\n    return autoBandwidth;\n};\n", "export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n", "import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n", "import { scaleIdentity, scaleLinear } from 'd3-scale';\nimport { interpolateViridis } from 'd3-scale-chromatic';\nimport { min, max } from 'd3-array';\nimport { rebindAll, includeMap } from '@d3fc/d3fc-rebind';\nimport { shapeBar } from '@d3fc/d3fc-shape';\nimport functor from './functor';\nimport defined from './defined';\nimport createBase from './base';\n\nexport default () => {\n\n    let xValue = (d) => d.x;\n    let yValue = (d) => d.y;\n    let colorValue = (d) => d.color;\n    let yBandwidth = () => 5;\n    let xBandwidth = () => 5;\n    let colorInterpolate = interpolateViridis;\n\n    const heatmap = createBase({\n        decorate: () => {},\n        defined: (d, i) => defined(xValue, yValue, colorValue)(d, i),\n        xScale: scaleIdentity(),\n        yScale: scaleIdentity()\n    });\n\n    heatmap.pathGenerator = shapeBar()\n        .x(0)\n        .y(0);\n\n    heatmap.colorScale = (data) => {\n        const colorValues = data.map(colorValue);\n        // a scale that maps the color values onto a unit range, [0, 1]\n        return scaleLinear()\n          .domain([min(colorValues), max(colorValues)]);\n    };\n\n    heatmap.values = (d, i) => ({\n        x: heatmap.xScale()(xValue(d, i)),\n        y: heatmap.yScale()(yValue(d, i)),\n        colorValue: colorValue(d, i),\n        width: xBandwidth(d, i),\n        height: yBandwidth(d, i)\n    });\n\n\n    heatmap.xValues = () => [xValue];\n    heatmap.yValues = () => [yValue];\n    heatmap.xValue = (...args) => {\n        if (!args.length) {\n            return xValue;\n        }\n        xValue = functor(args[0]);\n        return heatmap;\n    };\n    heatmap.yValue = (...args) => {\n        if (!args.length) {\n            return yValue;\n        }\n        yValue = functor(args[0]);\n        return heatmap;\n    };\n    heatmap.colorValue = (...args) => {\n        if (!args.length) {\n            return colorValue;\n        }\n        colorValue = functor(args[0]);\n        return heatmap;\n    };\n    heatmap.colorInterpolate = (...args) => {\n        if (!args.length) {\n            return colorInterpolate;\n        }\n        colorInterpolate = args[0];\n        return heatmap;\n    };\n    heatmap.xBandwidth = (...args) => {\n        if (!args.length) {\n            return xBandwidth;\n        }\n        xBandwidth = functor(args[0]);\n        return heatmap;\n    };\n    heatmap.yBandwidth = (...args) => {\n        if (!args.length) {\n            return yBandwidth;\n        }\n        yBandwidth = functor(args[0]);\n        return heatmap;\n    };\n\n    rebindAll(heatmap, heatmap.pathGenerator, includeMap({\n        'horizontalAlign': 'xAlign',\n        'verticalAlign': 'yAlign'\n    }));\n\n    return heatmap;\n};\n", "import heatmapBase from '../heatmapBase';\nimport { rebindAll, rebind } from '@d3fc/d3fc-rebind';\n\nexport default () => {\n\n    const base = heatmapBase();\n\n    const heatmap = (data) => {\n        const filteredData = data.filter(base.defined());\n        const colorInterpolate = base.colorInterpolate();\n        const colorScale = base.colorScale(filteredData);\n        const context = base.pathGenerator.context();\n\n        filteredData.forEach((d, i) => {\n            context.save();\n            context.beginPath();\n\n            const values = base.values(d, i);\n            context.translate(values.x, values.y);\n\n            context.fillStyle = colorInterpolate(colorScale(values.colorValue));\n            context.strokeStyle = 'transparent';\n\n            base.decorate()(context, d, i);\n\n            base.pathGenerator.height(values.height)\n                .width(values.width)([d]);\n\n            context.fill();\n            context.stroke();\n            context.closePath();\n            context.restore();\n        });\n    };\n\n    rebind(heatmap, base.pathGenerator, 'context');\n    rebindAll(heatmap, base);\n\n    return heatmap;\n};\n", "import { scaleIdentity } from 'd3-scale';\n\nexport default () => {\n\n    let scale = scaleIdentity();\n    let tickArguments = [10];\n    let tickValues = null;\n\n    const ticks = () =>\n        tickValues != null ? tickValues\n            : (scale.ticks ? scale.ticks(...tickArguments) : scale.domain());\n\n    ticks.scale = (...args) => {\n        if (!args.length) {\n            return scale;\n        }\n        scale = args[0];\n        return ticks;\n    };\n\n    ticks.ticks = (...args) => {\n        tickArguments = args;\n        return ticks;\n    };\n\n    ticks.tickArguments = (...args) => {\n        if (!args.length) {\n            return tickArguments;\n        }\n        tickArguments = args[0];\n        return ticks;\n    };\n\n    ticks.tickValues = (...args) => {\n        if (!args.length) {\n            return tickValues;\n        }\n        tickValues = args[0];\n        return ticks;\n    };\n\n    return ticks;\n};\n", "import { select } from 'd3-selection';\nimport { dataJoin, isTransition } from '@d3fc/d3fc-data-join';\nimport ticks from '../ticks';\nimport { includeMap, prefix, rebindAll } from '@d3fc/d3fc-rebind';\n\nconst identity = d => d;\n\nexport default () => {\n\n    let xDecorate = () => {};\n    let yDecorate = () => {};\n\n    const xTicks = ticks();\n    const yTicks = ticks();\n    const xJoin = dataJoin('line', 'gridline-y')\n      .key(identity);\n    const yJoin = dataJoin('line', 'gridline-x')\n      .key(identity);\n\n    const instance = (selection) => {\n\n        if (isTransition(selection)) {\n            xJoin.transition(selection);\n            yJoin.transition(selection);\n        }\n\n        selection.each((data, index, nodes) => {\n\n            const element = nodes[index];\n            const container = select(nodes[index]);\n\n            const xScale = xTicks.scale();\n            const yScale = yTicks.scale();\n\n            // Stash a snapshot of the scale, and retrieve the old snapshot.\n            const xScaleOld = element.__x_scale__ || xScale;\n            element.__x_scale__ = xScale.copy();\n\n            const xData = xTicks();\n            const xLines = xJoin(container, xData);\n\n            xLines.enter()\n                .attr('x1', xScaleOld)\n                .attr('x2', xScaleOld)\n                .attr('y1', yScale.range()[0])\n                .attr('y2', yScale.range()[1])\n                .attr('stroke', '#bbb');\n\n            xLines\n                .attr('x1', xScale)\n                .attr('x2', xScale)\n                .attr('y1', yScale.range()[0])\n                .attr('y2', yScale.range()[1]);\n\n            xLines.exit()\n                .attr('x1', xScale)\n                .attr('x2', xScale);\n\n            xDecorate(xLines, xData, index);\n\n            // Stash a snapshot of the scale, and retrieve the old snapshot.\n            const yScaleOld = element.__y_scale__ || yScale;\n            element.__y_scale__ = yScale.copy();\n\n            const yData = yTicks();\n            const yLines = yJoin(container, yData);\n\n            yLines.enter()\n                .attr('y1', yScaleOld)\n                .attr('y2', yScaleOld)\n                .attr('x1', xScale.range()[0])\n                .attr('x2', xScale.range()[1])\n                .attr('stroke', '#bbb');\n\n            yLines\n                .attr('y1', yScale)\n                .attr('y2', yScale)\n                .attr('x1', xScale.range()[0])\n                .attr('x2', xScale.range()[1]);\n\n            yLines.exit()\n                .attr('y1', yScale)\n                .attr('y2', yScale);\n\n            yDecorate(yLines, yData, index);\n        });\n    };\n\n    instance.yDecorate = (...args) => {\n        if (!args.length) {\n            return yDecorate;\n        }\n        yDecorate = args[0];\n        return instance;\n    };\n\n    instance.xDecorate = (...args) => {\n        if (!args.length) {\n            return xDecorate;\n        }\n        xDecorate = args[0];\n        return instance;\n    };\n\n    rebindAll(instance, xJoin, includeMap({'key': 'xKey'}));\n    rebindAll(instance, yJoin, includeMap({'key': 'yKey'}));\n\n    rebindAll(instance, xTicks, prefix('x'));\n    rebindAll(instance, yTicks, prefix('y'));\n\n    return instance;\n};\n", "import {line as lineShape} from 'd3-shape';\nimport ticks from '../ticks';\nimport {prefix, rebindAll, rebind} from '@d3fc/d3fc-rebind';\n\nexport default () => {\n\n    let xDecorate = () => {};\n    let yDecorate = () => {};\n\n    const xTicks = ticks();\n    const yTicks = ticks();\n\n    const lineData = lineShape();\n\n    const instance = () => {\n\n        const context = lineData.context();\n        const xScale = xTicks.scale();\n        const yScale = yTicks.scale();\n\n        xTicks().forEach((xTick, i) => {\n            context.save();\n            context.beginPath();\n            context.strokeStyle = '#bbb';\n            context.fillStyle = 'transparent';\n\n            xDecorate(context, xTick, i);\n            lineData.context(context)(yScale.domain().map(d => [xScale(xTick), yScale(d)]));\n\n            context.fill();\n            context.stroke();\n            context.closePath();\n            context.restore();\n        });\n\n        yTicks().forEach((yTick, i) => {\n            context.save();\n            context.beginPath();\n            context.strokeStyle = '#bbb';\n            context.fillStyle = 'transparent';\n\n            yDecorate(context, yTick, i);\n            lineData.context(context)(xScale.domain().map(d => [xScale(d), yScale(yTick)]));\n\n            context.fill();\n            context.stroke();\n            context.closePath();\n            context.restore();\n        });\n    };\n\n    instance.yDecorate = (...args) => {\n        if (!args.length) {\n            return yDecorate;\n        }\n        yDecorate = args[0];\n        return instance;\n    };\n\n    instance.xDecorate = (...args) => {\n        if (!args.length) {\n            return xDecorate;\n        }\n        xDecorate = args[0];\n        return instance;\n    };\n\n    rebindAll(instance, xTicks, prefix('x'));\n    rebindAll(instance, yTicks, prefix('y'));\n    rebind(instance, lineData, 'context');\n\n    return instance;\n};\n", "// these utilities capture some of the relatively complex logic within d3-axis which \n// determines the ticks and tick formatter based on various axis and scale\n// properties: https://github.com/d3/d3-axis#axis_ticks \n\nconst identity = d => d;\n\nconst tryApply = (scale, fn, args, defaultVal) =>\n    scale[fn] ? scale[fn].apply(scale, args) : defaultVal;\n\nconst ticksArrayForAxis = axis =>\n    axis.tickValues() ??\n        tryApply(\n              axis.scale(),\n              'ticks',\n              axis.tickArguments(),\n              axis.scale().domain()\n          );\n\nconst tickFormatterForAxis = axis =>\n    axis.tickFormat() ??\n        tryApply(axis.scale(), 'tickFormat', axis.tickArguments(), identity);\n\nexport { ticksArrayForAxis, tickFormatterForAxis };\n", "import { select } from 'd3-selection';\r\nimport { line } from 'd3-shape';\r\nimport { dataJoin as _dataJoin, isTransition } from '@d3fc/d3fc-data-join';\r\nimport { ticksArrayForAxis, tickFormatterForAxis } from './axisTickUtils';\r\n\r\nconst identity = d => d;\r\n\r\nexport const axisBase = (orient, scale, custom = {}) => {\r\n\r\n    let tickArguments = [10];\r\n    let tickValues = null;\r\n    let decorate = () => {};\r\n    let tickFormat = null;\r\n    let tickSizeOuter = 6;\r\n    let tickSizeInner = 6;\r\n    let tickPadding = 3;\r\n\r\n    const svgDomainLine = line();\r\n\r\n    const dataJoin = _dataJoin('g', 'tick')\r\n        .key(identity);\r\n\r\n    const domainPathDataJoin = _dataJoin('path', 'domain');\r\n\r\n    const defaultLabelOffset = () => ({ offset: [0, tickSizeInner + tickPadding] });\r\n    const defaultTickPath = () => ({ path: [[0, 0], [0, tickSizeInner]] });\r\n\r\n    const labelOffset = custom.labelOffset || defaultLabelOffset;\r\n    const tickPath = custom.tickPath || defaultTickPath;\r\n\r\n    // returns a function that creates a translation based on\r\n    // the bound data\r\n    const containerTranslate = (scale, trans) => {\r\n        let offset = 0;\r\n        if (scale.bandwidth) {\r\n            offset = scale.bandwidth() / 2;\r\n            if (scale.round()) {\r\n                offset = Math.round(offset);\r\n            }\r\n        }\r\n        return d => trans(scale(d) + offset, 0);\r\n    };\r\n\r\n    const translate = (x, y) =>\r\n        isVertical()\r\n            ? `translate(${y}, ${x})`\r\n            : `translate(${x}, ${y})`;\r\n\r\n    const pathTranspose = (arr) =>\r\n        isVertical()\r\n           ? arr.map(d => [d[1], d[0]])\r\n           : arr;\r\n\r\n    const isVertical = () =>\r\n        orient === 'left' || orient === 'right';\r\n\r\n    const axis = (selection) => {\r\n\r\n        if (isTransition(selection)) {\r\n            dataJoin.transition(selection);\r\n            domainPathDataJoin.transition(selection);\r\n        }\r\n\r\n        selection.each((data, index, group) => {\r\n\r\n            const element = group[index];\r\n\r\n            const container = select(element);\r\n            if (!element.__scale__) {\r\n                container\r\n                    .attr('fill', 'none')\r\n                    .attr('font-size', 10)\r\n                    .attr('font-family', 'sans-serif')\r\n                    .attr('text-anchor', orient === 'right' ? 'start' : orient === 'left' ? 'end' : 'middle');\r\n            }\r\n\r\n            // Stash a snapshot of the new scale, and retrieve the old snapshot.\r\n            const scaleOld = element.__scale__ || scale;\r\n            element.__scale__ = scale.copy();\r\n\r\n            const ticksArray = ticksArrayForAxis(axis);\r\n            const tickFormatter = tickFormatterForAxis(axis);\r\n            const sign = orient === 'bottom' || orient === 'right' ? 1 : -1;\r\n            const withSign = ([x, y]) => ([x, sign * y]);\r\n\r\n            // add the domain line\r\n            const range = scale.range();\r\n            const domainPathData = pathTranspose([\r\n                [range[0], sign * tickSizeOuter],\r\n                [range[0], 0],\r\n                [range[1], 0],\r\n                [range[1], sign * tickSizeOuter]\r\n            ]);\r\n\r\n            const domainLine = domainPathDataJoin(container, [data]);\r\n\r\n            domainLine.enter()\r\n                .attr('stroke', '#000');\r\n\r\n            domainLine.attr('d', svgDomainLine(domainPathData));\r\n\r\n            const g = dataJoin(container, ticksArray);\r\n\r\n            const labelOffsets = ticksArray.map((d, i) => labelOffset(d, i, ticksArray));\r\n            const tickPaths = ticksArray.map((d, i) => tickPath(d, i, ticksArray));\r\n\r\n            // enter\r\n            g.enter()\r\n                .attr('transform', containerTranslate(scaleOld, translate))\r\n                .append('path')\r\n                .attr('stroke', '#000');\r\n\r\n            g.enter()\r\n                .append('text')\r\n                .attr('transform', (d, i) => translate(...withSign(labelOffsets[i].offset)))\r\n                .attr('fill', '#000');\r\n\r\n            // exit\r\n            g.exit()\r\n                .attr('transform', containerTranslate(scale, translate));\r\n\r\n            // update\r\n            g.select('path')\r\n                .attr('visibility', (d, i) => tickPaths[i].hidden && 'hidden')\r\n                .attr('d',\r\n                    (d, i) => svgDomainLine(pathTranspose(tickPaths[i].path.map(withSign)))\r\n                );\r\n\r\n            g.select('text')\r\n                .attr('visibility', (d, i) => labelOffsets[i].hidden && 'hidden')\r\n                .attr('transform', (d, i) => translate(...withSign(labelOffsets[i].offset)))\r\n                .attr('dy', () => {\r\n                    let offset = '0em';\r\n                    if (isVertical()) {\r\n                        offset = '0.32em';\r\n                    } else if (orient === 'bottom') {\r\n                        offset = '0.71em';\r\n                    }\r\n                    return offset;\r\n                })\r\n               .text(tickFormatter);\r\n\r\n            g.attr('transform', containerTranslate(scale, translate));\r\n\r\n            decorate(g, data, index);\r\n        });\r\n    };\r\n\r\n    axis.tickFormat = (...args) => {\r\n        if (!args.length) {\r\n            return tickFormat;\r\n        }\r\n        tickFormat = args[0];\r\n        return axis;\r\n    };\r\n\r\n    axis.tickSize = (...args) => {\r\n        if (!args.length) {\r\n            return tickSizeInner;\r\n        }\r\n        tickSizeInner = tickSizeOuter = Number(args[0]);\r\n        return axis;\r\n    };\r\n\r\n    axis.tickSizeInner = (...args) => {\r\n        if (!args.length) {\r\n            return tickSizeInner;\r\n        }\r\n        tickSizeInner = Number(args[0]);\r\n        return axis;\r\n    };\r\n\r\n    axis.tickSizeOuter = (...args) => {\r\n        if (!args.length) {\r\n            return tickSizeOuter;\r\n        }\r\n        tickSizeOuter = Number(args[0]);\r\n        return axis;\r\n    };\r\n\r\n    axis.tickPadding = (...args) => {\r\n        if (!args.length) {\r\n            return tickPadding;\r\n        }\r\n        tickPadding = args[0];\r\n        return axis;\r\n    };\r\n\r\n    axis.decorate = (...args) => {\r\n        if (!args.length) {\r\n            return decorate;\r\n        }\r\n        decorate = args[0];\r\n        return axis;\r\n    };\r\n\r\n    axis.scale = (...args) => {\r\n        if (!args.length) {\r\n            return scale;\r\n        }\r\n        scale = args[0];\r\n        return axis;\r\n    };\r\n\r\n    axis.ticks = (...args) => {\r\n        tickArguments = [...args];\r\n        return axis;\r\n    };\r\n\r\n    axis.tickArguments = (...args) => {\r\n        if (!args.length) {\r\n            return tickArguments !== null ? tickArguments.slice() : null;\r\n        }\r\n        tickArguments = args[0] == null ? [] : [...args[0]];\r\n        return axis;\r\n    };\r\n\r\n    axis.tickValues = (...args) => {\r\n        if (!args.length) {\r\n            return tickValues !== null ? tickValues.slice() : null;\r\n        }\r\n        tickValues = args[0] == null ? [] : [...args[0]];\r\n        return axis;\r\n    };\r\n\r\n    axis.orient = () => orient;\r\n\r\n    return axis;\r\n};\r\n", "import { rebindAll } from '@d3fc/d3fc-rebind';\nimport { axisBase } from './axisBase';\n\nconst axis = (orient, scale) => {\n    let tickCenterLabel = false;\n\n    const labelOffset = (tick, index, ticksArray) => {\n        let x = 0;\n        let y = base.tickSizeInner() + base.tickPadding();\n        let hidden = false;\n        if (tickCenterLabel) {\n            const thisPosition = scale(tick);\n            const nextPosition = index < ticksArray.length - 1 ? scale(ticksArray[index + 1]) : scale.range()[1];\n            x = (nextPosition - thisPosition) / 2;\n\n            y = base.tickPadding();\n            hidden = (index === ticksArray.length - 1) && (thisPosition === nextPosition);\n        }\n        return { offset: [x, y], hidden };\n    };\n\n    const base = axisBase(orient, scale, {labelOffset});\n\n    const axis = (selection) => {\n        return base(selection);\n    };\n\n    axis.tickCenterLabel = (...args) => {\n        if (!args.length) {\n            return tickCenterLabel;\n        }\n        tickCenterLabel = args[0];\n        return axis;\n    };\n\n    rebindAll(axis, base);\n    return axis;\n};\n\nexport const axisTop = (scale) => axis('top', scale);\n\nexport const axisBottom = (scale) => axis('bottom', scale);\n\nexport const axisLeft = (scale) => axis('left', scale);\n\nexport const axisRight = (scale) => axis('right', scale);\n", "import { rebindAll } from '@d3fc/d3fc-rebind';\r\nimport { axisBase } from './axisBase';\r\n\r\nconst axisOrdinal = (orient, scale) => {\r\n    let tickOffset = null;\r\n\r\n    const step = (tick, index, ticksArray) => {\r\n        if (scale.step) {\r\n            // Use the scale step size\r\n            return scale.step();\r\n        }\r\n        const thisPosition = scale(tick);\r\n        if (index < ticksArray.length - 1) {\r\n            // Distance between ticks\r\n            return scale(ticksArray[index + 1]) / thisPosition;\r\n        } else {\r\n            // 2* distance to end\r\n            return (scale.range()[1] - thisPosition) * 2;\r\n        }\r\n    };\r\n\r\n    const tickPath = (tick, index, ticksArray) => {\r\n        let x = 0;\r\n        if (tickOffset) {\r\n            x = tickOffset(tick, index);\r\n        } else {\r\n            x = step(tick, index, ticksArray) / 2;\r\n        }\r\n        return {\r\n            path: [[x, 0], [x, base.tickSizeInner()]],\r\n            hidden: index === ticksArray.length - 1\r\n        };\r\n    };\r\n    const labelOffset = () => {\r\n        // Don't include the tickSizeInner in the label positioning\r\n        return { offset: [0, base.tickPadding()] };\r\n    };\r\n\r\n    const base = axisBase(orient, scale, {labelOffset, tickPath});\r\n\r\n    const axis = (selection) => {\r\n        base(selection);\r\n    };\r\n\r\n    axis.tickOffset = (...args) => {\r\n        if (!args.length) {\r\n            return tickOffset;\r\n        }\r\n        tickOffset = args[0];\r\n        return axis;\r\n    };\r\n\r\n    rebindAll(axis, base);\r\n    return axis;\r\n};\r\n\r\nexport const axisOrdinalTop = (scale) => axisOrdinal('top', scale);\r\n\r\nexport const axisOrdinalBottom = (scale) => axisOrdinal('bottom', scale);\r\n\r\nexport const axisOrdinalLeft = (scale) => axisOrdinal('left', scale);\r\n\r\nexport const axisOrdinalRight = (scale) => axisOrdinal('right', scale);\r\n", "const key = '__d3fc-elements__';\n\nexport const get = (element) => element[key] || {};\n\nexport const set = (element, data) => void (element[key] = data);\n\nexport const clear = (element) => delete element[key];\n", "import * as data from './data';\n\nconst find = (element) => element.tagName === 'D3FC-GROUP'\n  ? [element, ...element.querySelectorAll('d3fc-canvas, d3fc-group, d3fc-svg')]\n  : [element];\n\nconst measure = (element) => {\n    const { width: previousWidth, height: previousHeight } = data.get(element);\n    const pixelRatio = (element.useDevicePixelRatio && window.devicePixelRatio != null) ? window.devicePixelRatio : 1;\n    const width = element.clientWidth * pixelRatio;\n    const height = element.clientHeight * pixelRatio;\n    const resized = width !== previousWidth || height !== previousHeight;\n    const child = element.children[0];\n    data.set(element, { pixelRatio, width, height, resized, child });\n};\n\nif (typeof CustomEvent !== 'function') {\n    throw new Error('d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.');\n}\n\nconst resize = (element) => {\n    const detail = data.get(element);\n    const event = new CustomEvent('measure', { detail });\n    element.dispatchEvent(event);\n};\n\nconst draw = (element) => {\n    const detail = data.get(element);\n    const event = new CustomEvent('draw', { detail });\n    element.dispatchEvent(event);\n};\n\nexport default (elements) => {\n    const allElements = elements.map(find)\n      .reduce((a, b) => a.concat(b));\n    allElements.forEach(measure);\n    allElements.forEach(resize);\n    allElements.forEach(draw);\n};\n", "import * as data from './data';\nimport redraw from './redraw';\n\nconst getQueue = (element) => data.get(element.ownerDocument).queue || [];\n\nconst setQueue = (element, queue) => {\n    let { requestId } = data.get(element.ownerDocument);\n    if (requestId == null) {\n        requestId = requestAnimationFrame(() => {\n            // This seems like a weak way of retrieving the queue\n            // but I can't see an edge case at the minute...\n            const queue = getQueue(element);\n            redraw(queue);\n            clearQueue(element);\n        });\n    }\n    data.set(element.ownerDocument, { queue, requestId });\n};\n\nconst clearQueue = (element) => data.clear(element.ownerDocument);\n\nconst isDescendentOf = (element, ancestor) => {\n    let node = element;\n    do {\n        if (node.parentNode === ancestor) {\n            return true;\n        }\n    // eslint-disable-next-line no-cond-assign\n    } while (node = node.parentNode);\n    return false;\n};\n\nexport default (element) => {\n    const queue = getQueue(element);\n    const queueContainsElement = queue.indexOf(element) > -1;\n    if (queueContainsElement) {\n        return;\n    }\n    const queueContainsAncestor = queue.some(queuedElement => isDescendentOf(element, queuedElement));\n    if (queueContainsAncestor) {\n        return;\n    }\n    const queueExcludingDescendents = queue.filter(queuedElement => !isDescendentOf(queuedElement, element));\n    queueExcludingDescendents.push(element);\n    setQueue(element, queueExcludingDescendents);\n};\n", "import requestRedraw from './requestRedraw';\n\nif (typeof HTMLElement !== 'function') {\n    throw new Error('d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.');\n}\n\nconst addMeasureListener = (element) => {\n    if (element.__measureListener__ != null) {\n        return;\n    }\n    element.__measureListener__ = (event) => element.setMeasurements(event.detail);\n    element.addEventListener('measure', element.__measureListener__);\n};\n\nconst removeMeasureListener = (element) => {\n    if (element.__measureListener__ == null) {\n        return;\n    }\n    element.removeEventListener('measure', element.__measureListener__);\n    element.__measureListener__ = null;\n};\n\nexport default (createNode, applyMeasurements) => class extends HTMLElement {\n\n    static get observedAttributes() {\n        return ['use-device-pixel-ratio'];\n    }\n\n    attributeChangedCallback(name) {\n        switch (name) {\n        case 'use-device-pixel-ratio':\n            this.requestRedraw();\n            break;\n        }\n    }\n\n    connectedCallback() {\n        if (this.childNodes.length === 0) {\n            this.appendChild(createNode());\n        }\n        addMeasureListener(this);\n    }\n\n    disconnectedCallback() {\n        removeMeasureListener(this);\n    }\n\n    setMeasurements({ width, height }) {\n        const { childNodes: [node, ...other] } = this;\n        if (other.length > 0) {\n            throw new Error('A d3fc-svg/canvas element must only contain a single svg/canvas element.');\n        }\n        applyMeasurements(this, node, { width, height });\n    }\n\n    get useDevicePixelRatio() {\n        return this.hasAttribute('use-device-pixel-ratio') && this.getAttribute('use-device-pixel-ratio') !== 'false';\n    }\n\n    set useDevicePixelRatio(useDevicePixelRatio) {\n        if (useDevicePixelRatio && !this.useDevicePixelRatio) {\n            this.setAttribute('use-device-pixel-ratio', '');\n        } else if (!useDevicePixelRatio && this.useDevicePixelRatio) {\n            this.removeAttribute('use-device-pixel-ratio');\n        }\n        this.requestRedraw();\n    }\n\n    requestRedraw() {\n        requestRedraw(this);\n    }\n};\n", "import element from './element';\n\nexport default class extends element(\n    () => document.createElement('canvas'),\n    (element, node, { width, height }) => {\n        node.setAttribute('width', width);\n        node.setAttribute('height', height);\n        if (element.setWebglViewport) {\n            const context = node.getContext('webgl');\n            context.viewport(0, 0, width, height);\n        }\n    }\n) {\n    get setWebglViewport() {\n        return this.hasAttribute('set-webgl-viewport') && this.getAttribute('set-webgl-viewport') !== 'false';\n    }\n\n    set setWebglViewport(setWebglViewport) {\n        if (setWebglViewport && !this.setWebglViewport) {\n            this.setAttribute('set-webgl-viewport', '');\n        } else if (!setWebglViewport && this.setWebglViewport) {\n            this.removeAttribute('set-webgl-viewport');\n        }\n        this.requestRedraw();\n    }\n}\n", "import requestRedraw from './requestRedraw';\n\nconst updateAutoResize = (element) => {\n    if (element.autoResize) {\n        addAutoResizeListener(element);\n    } else {\n        removeAutoResizeListener(element);\n    }\n};\n\nconst addAutoResizeListener = (element) => {\n    if (element.__autoResizeListener__ != null) {\n        return;\n    }\n    element.__autoResizeListener__ = () => requestRedraw(element);\n    addEventListener('resize', element.__autoResizeListener__);\n};\n\nconst removeAutoResizeListener = (element) => {\n    if (element.__autoResizeListener__ == null) {\n        return;\n    }\n    removeEventListener('resize', element.__autoResizeListener__);\n    element.__autoResizeListener__ = null;\n};\n\nexport default class extends HTMLElement {\n    connectedCallback() {\n        updateAutoResize(this);\n    }\n\n    disconnectedCallback() {\n        removeAutoResizeListener(this);\n    }\n\n    requestRedraw() {\n        requestRedraw(this);\n    }\n\n    get autoResize() {\n        return this.hasAttribute('auto-resize') && this.getAttribute('auto-resize') !== 'false';\n    }\n\n    set autoResize(autoResize) {\n        if (autoResize && !this.autoResize) {\n            this.setAttribute('auto-resize', '');\n        } else if (!autoResize && this.autoResize) {\n            this.removeAttribute('auto-resize');\n        }\n        updateAutoResize(this);\n    }\n\n    static get observedAttributes() {\n        return ['auto-resize'];\n    }\n\n    attributeChangedCallback(name) {\n        switch (name) {\n        case 'auto-resize':\n            updateAutoResize(this);\n            break;\n        }\n    }\n}\n", "import element from './element';\n\nexport default element(\n    () => document.createElementNS('http://www.w3.org/2000/svg', 'svg'),\n    (element, node, { width, height }) => {\n        node.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    }\n);\n", "// Adapted from https://github.com/substack/insert-css\nexport const css = `d3fc-canvas,d3fc-svg{position:relative;display:block}\\\nd3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}\\\nd3fc-svg>svg{overflow:visible}`;\n\nconst styleElement = document.createElement('style');\nstyleElement.setAttribute('type', 'text/css');\n\ndocument.querySelector('head')\n  .appendChild(styleElement);\n\nif (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText += css;\n} else {\n    styleElement.textContent += css;\n}\n", "/* globals customElements */\nimport Canvas from './src/canvas';\nimport Group from './src/group';\nimport Svg from './src/svg';\nimport './src/css';\n\nif (\n    typeof customElements !== 'object' ||\n    typeof customElements.define !== 'function'\n) {\n    throw new Error(\n        'd3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.'\n    );\n}\n\nconst alreadyRegistered = [];\nconst registerElement = (name, element) => {\n    if (customElements.get(name)) {\n        alreadyRegistered.push(name);\n    } else {\n        customElements.define(name, element);\n    }\n};\n\nregisterElement('d3fc-canvas', Canvas);\nregisterElement('d3fc-group', Group);\nregisterElement('d3fc-svg', Svg);\n\nif (alreadyRegistered.length > 0) {\n    console.warn(\n        `The d3fc components \"${alreadyRegistered.join(\n            ', '\n        )}\" is/are already registered on window. Be aware that this can create compatibility issues if different versions are used.`\n    );\n}\n", "var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n", "import { dispatch } from 'd3-dispatch';\nimport { pointer } from 'd3-selection';\nimport { rebind } from '@d3fc/d3fc-rebind';\n\nexport default () => {\n    const pointEvent = dispatch('point');\n\n    function mousemove(event) {\n        const point = pointer(event);\n        pointEvent.call('point', this, [{ x: point[0], y: point[1] }]);\n    }\n\n    function mouseleave() {\n        void pointEvent.call('point', this, []);\n    }\n\n    const instance = (selection) => {\n        selection\n            .on('mouseenter.pointer', mousemove)\n            .on('mousemove.pointer', mousemove)\n            .on('mouseleave.pointer', mouseleave);\n    };\n\n    rebind(instance, pointEvent, 'on');\n\n    return instance;\n};\n", "export default (...names) => {\n    const data = {};\n\n    const store = (target) => {\n        for (const key of Object.keys(data)) {\n            target[key].apply(null, data[key]);\n        }\n        return target;\n    };\n\n    for (const name of names) {\n        store[name] = (...args) => {\n            if (!args.length) {\n                return data[name];\n            }\n            data[name] = args;\n            return store;\n        };\n    }\n\n    return store;\n};\n", "// Adapted from https://github.com/substack/insert-css\nexport const css = `d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}`;\n\nconst styleElement = document.createElement('style');\nstyleElement.setAttribute('type', 'text/css');\n\ndocument.querySelector('head')\n  .appendChild(styleElement);\n\nif (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText += css;\n} else {\n    styleElement.textContent += css;\n}\n", "import { select } from 'd3-selection';\nimport { scaleIdentity } from 'd3-scale';\nimport { axisBottom, axisRight, axisLeft, axisTop } from '@d3fc/d3fc-axis';\nimport { dataJoin, isTransition } from '@d3fc/d3fc-data-join';\nimport { rebindAll, exclude, prefix } from '@d3fc/d3fc-rebind';\nimport '@d3fc/d3fc-element';\nimport store from './store';\nimport './css';\n\nconst functor = (v) =>\n    typeof v === 'function' ? v : () => v;\n\nexport default (...args) => {\n    const { xScale, yScale, xAxis, yAxis } = getArguments(...args);\n\n    let chartLabel = functor('');\n    let xLabel = functor('');\n    let yLabel = functor('');\n    let xAxisHeight = functor(null);\n    let yAxisWidth = functor(null);\n    let yOrient = functor('right');\n    let xOrient = functor('bottom');\n    let webglPlotArea = null;\n    let canvasPlotArea = null;\n    let svgPlotArea = null;\n    let isContextLost = false;\n    let useDevicePixelRatio = true;\n    let xAxisStore = store('tickFormat', 'ticks', 'tickArguments', 'tickSize', 'tickSizeInner', 'tickSizeOuter', 'tickValues', 'tickPadding', 'tickCenterLabel');\n    let xDecorate = () => { };\n    let yAxisStore = store('tickFormat', 'ticks', 'tickArguments', 'tickSize', 'tickSizeInner', 'tickSizeOuter', 'tickValues', 'tickPadding', 'tickCenterLabel');\n    let yDecorate = () => { };\n    let decorate = () => { };\n\n    const containerDataJoin = dataJoin('d3fc-group', 'cartesian-chart');\n    const webglDataJoin = dataJoin('d3fc-canvas', 'webgl-plot-area');\n    const canvasDataJoin = dataJoin('d3fc-canvas', 'canvas-plot-area');\n    const svgDataJoin = dataJoin('d3fc-svg', 'svg-plot-area');\n    const xAxisDataJoin = dataJoin('d3fc-svg', 'x-axis')\n        .key(d => d);\n    const yAxisDataJoin = dataJoin('d3fc-svg', 'y-axis')\n        .key(d => d);\n    const chartLabelDataJoin = dataJoin('div', 'chart-label');\n    const xLabelDataJoin = dataJoin('div', 'x-label')\n        .key(d => d);\n    const yLabelDataJoin = dataJoin('div', 'y-label')\n        .key(d => d);\n\n    const propagateTransition = maybeTransition => selection =>\n        isTransition(maybeTransition) ? selection.transition(maybeTransition) : selection;\n\n    const cartesian = (selection) => {\n\n        const transitionPropagator = propagateTransition(selection);\n\n        selection.each((data, index, group) => {\n            const container = containerDataJoin(select(group[index]), [data]);\n\n            container.enter()\n                .attr('auto-resize', '');\n\n            chartLabelDataJoin(container, [xOrient(data)])\n                .attr('class', d => d === 'top' ? 'chart-label bottom-label' : 'chart-label top-label')\n                .style('margin-bottom', d => d === 'top' ? 0 : '1em')\n                .style('margin-top', d => d === 'top' ? '1em' : 0)\n                .text(chartLabel(data));\n\n            xLabelDataJoin(container, [xOrient(data)])\n                .attr('class', d => `x-label ${d}-label`)\n                .text(xLabel(data));\n\n            yLabelDataJoin(container, [yOrient(data)])\n                .attr('class', d => `y-label ${d}-label`)\n                .text(yLabel(data));\n\n            webglDataJoin(container, webglPlotArea ? [data] : [])\n                .attr('set-webgl-viewport','')\n                .classed('plot-area', true)\n                .attr('use-device-pixel-ratio', useDevicePixelRatio)\n                .on('draw', (event, d) => {\n                    const { child, pixelRatio } = event.detail;\n                    webglPlotArea.context(isContextLost ? null : child.getContext('webgl'))\n                        .pixelRatio(pixelRatio)\n                        .xScale(xScale)\n                        .yScale(yScale);\n                    webglPlotArea(d);\n                });\n\n            container.select('.webgl-plot-area>canvas')\n                .on('webglcontextlost', event => {\n                    console.warn('WebGLRenderingContext lost');\n                    event.preventDefault();\n                    isContextLost = true;\n                    container.node().requestRedraw();\n                })\n                .on('webglcontextrestored', () => {\n                    console.info('WebGLRenderingContext restored');\n                    isContextLost = false;\n                    container.node().requestRedraw();\n                });\n\n            canvasDataJoin(container, canvasPlotArea ? [data] : [])\n                .classed('plot-area', true)\n                .attr('use-device-pixel-ratio', useDevicePixelRatio)\n                .on('draw', (event, d) => {\n                    const { child, pixelRatio } = event.detail;\n                    const context = child.getContext('2d');\n                    context.save();\n                    if (useDevicePixelRatio) {\n                        context.scale(pixelRatio, pixelRatio);\n                    }\n                    canvasPlotArea.context(context)\n                        .xScale(xScale)\n                        .yScale(yScale);\n                    canvasPlotArea(d);\n                    context.restore();\n                });\n\n            svgDataJoin(container, svgPlotArea ? [data] : [])\n                .classed('plot-area', true)\n                .on('draw', (event, d) => {\n                    const { child } = event.detail;\n                    svgPlotArea.xScale(xScale)\n                        .yScale(yScale);\n                    transitionPropagator(select(child).datum(d))\n                        .call(svgPlotArea);\n                });\n\n            xAxisDataJoin(container, [xOrient(data)])\n                .attr('class', d => `x-axis ${d}-axis`)\n                .style('height', xAxisHeight(data))\n                .on('measure', (event, d) => {\n                    const { width, height, child } = event.detail;\n                    if (d === 'top') {\n                        select(child)\n                            .attr('viewBox', `0 ${-height} ${width} ${height}`);\n                    }\n                    xScale.range([0, width]);\n                })\n                .on('draw', (event, d) => {\n                    const { child } = event.detail;\n                    const xAxisComponent = d === 'top' ? xAxis.top(xScale) : xAxis.bottom(xScale);\n                    xAxisComponent.decorate(xDecorate);\n                    transitionPropagator(select(child).datum(d))\n                        .call(xAxisStore(xAxisComponent));\n                });\n\n            yAxisDataJoin(container, [yOrient(data)])\n                .attr('class', d => `y-axis ${d}-axis`)\n                .style('width', yAxisWidth(data))\n                .on('measure', (event, d) => {\n                    const { width, height, child } = event.detail;\n                    if (d === 'left') {\n                        select(child)\n                            .attr('viewBox', `${-width} 0 ${width} ${height}`);\n                    }\n                    yScale.range([height, 0]);\n                })\n                .on('draw', (event, d) => {\n                    const { child } = event.detail;\n                    const yAxisComponent = d === 'left' ? yAxis.left(yScale) : yAxis.right(yScale);\n                    yAxisComponent.decorate(yDecorate);\n                    transitionPropagator(select(child).datum(d))\n                        .call(yAxisStore(yAxisComponent));\n                });\n\n            container.each((d, i, nodes) => nodes[i].requestRedraw());\n\n            decorate(container, data, index);\n        });\n    };\n\n    const scaleExclusions = exclude(\n        /range\\w*/,   // the scale range is set via the component layout\n        /tickFormat/  // use axis.tickFormat instead (only present on linear scales)\n    );\n    rebindAll(cartesian, xScale, scaleExclusions, prefix('x'));\n    rebindAll(cartesian, yScale, scaleExclusions, prefix('y'));\n    rebindAll(cartesian, xAxisStore, prefix('x'));\n    rebindAll(cartesian, yAxisStore, prefix('y'));\n\n    cartesian.xOrient = (...args) => {\n        if (!args.length) {\n            return xOrient;\n        }\n        xOrient = functor(args[0]);\n        return cartesian;\n    };\n    cartesian.yOrient = (...args) => {\n        if (!args.length) {\n            return yOrient;\n        }\n        yOrient = functor(args[0]);\n        return cartesian;\n    };\n    cartesian.xDecorate = (...args) => {\n        if (!args.length) {\n            return xDecorate;\n        }\n        xDecorate = args[0];\n        return cartesian;\n    };\n    cartesian.yDecorate = (...args) => {\n        if (!args.length) {\n            return yDecorate;\n        }\n        yDecorate = args[0];\n        return cartesian;\n    };\n    cartesian.chartLabel = (...args) => {\n        if (!args.length) {\n            return chartLabel;\n        }\n        chartLabel = functor(args[0]);\n        return cartesian;\n    };\n    cartesian.xLabel = (...args) => {\n        if (!args.length) {\n            return xLabel;\n        }\n        xLabel = functor(args[0]);\n        return cartesian;\n    };\n    cartesian.yLabel = (...args) => {\n        if (!args.length) {\n            return yLabel;\n        }\n        yLabel = functor(args[0]);\n        return cartesian;\n    };\n    cartesian.xAxisHeight = (...args) => {\n        if (!args.length) {\n            return xAxisHeight;\n        }\n        xAxisHeight = functor(args[0]);\n        return cartesian;\n    };\n    cartesian.yAxisWidth = (...args) => {\n        if (!args.length) {\n            return yAxisWidth;\n        }\n        yAxisWidth = functor(args[0]);\n        return cartesian;\n    };\n    cartesian.webglPlotArea = (...args) => {\n        if (!args.length) {\n            return webglPlotArea;\n        }\n        webglPlotArea = args[0];\n        return cartesian;\n    };\n    cartesian.canvasPlotArea = (...args) => {\n        if (!args.length) {\n            return canvasPlotArea;\n        }\n        canvasPlotArea = args[0];\n        return cartesian;\n    };\n    cartesian.svgPlotArea = (...args) => {\n        if (!args.length) {\n            return svgPlotArea;\n        }\n        svgPlotArea = args[0];\n        return cartesian;\n    };\n    cartesian.decorate = (...args) => {\n        if (!args.length) {\n            return decorate;\n        }\n        decorate = args[0];\n        return cartesian;\n    };\n    cartesian.useDevicePixelRatio = (...args) => {\n        if (!args.length) {\n            return useDevicePixelRatio;\n        }\n        useDevicePixelRatio = args[0];\n        return cartesian;\n    };\n\n    return cartesian;\n\n};\n\nconst getArguments = (...args) => {\n    const defaultSettings = {\n        xScale: scaleIdentity(),\n        yScale: scaleIdentity(),\n        xAxis: { bottom: axisBottom, top: axisTop },\n        yAxis: { right: axisRight, left: axisLeft }\n    };\n\n    if (args.length === 1 && !args[0].domain && !args[0].range) {\n        // Settings object\n        return Object.assign(defaultSettings, args[0]);\n    }\n\n    // xScale/yScale parameters\n    return Object.assign(defaultSettings, {\n        xScale: args[0] || defaultSettings.xScale,\n        yScale: args[1] || defaultSettings.yScale\n    });\n};\n", "import { rebindAll, include } from '@d3fc/d3fc-rebind';\nimport cartesianChart from './cartesian';\n\nconst functor = (v) =>\n    typeof v === 'function' ? v : () => v;\n\nexport default (setPlotArea, defaultPlotArea) =>\n    (...args) => {\n\n        let yLabel = functor('');\n        let plotArea = defaultPlotArea;\n        let decorate = () => { };\n\n        const cartesian = cartesianChart(...args);\n\n        const cartesianBase = (selection) => {\n            setPlotArea(cartesian, plotArea);\n\n            cartesian.decorate((container, data, index) => {\n                container.enter()\n                    .select('.x-label')\n                    .style('height', '1em')\n                    .style('line-height', '1em');\n\n                const yOrientValue = cartesian.yOrient()(data);\n\n                container.enter()\n                    .append('div')\n                    .attr('class', 'y-label-container')\n                    .style('grid-column', yOrientValue === 'left' ? 1 : 5)\n                    .style('-ms-grid-column', yOrientValue === 'left' ? 1 : 5)\n                    .style('grid-row', 3)\n                    .style('-ms-grid-row', 3)\n                    .style('width', '1em')\n                    .style('display', 'flex')\n                    .style('align-items', 'center')\n                    .style('justify-content', 'center')\n                    .style('white-space', 'nowrap')\n                    .append('div')\n                    .attr('class', 'y-label')\n                    .style('transform', 'rotate(-90deg)');\n\n                container.select('.y-label-container>.y-label')\n                    .text(yLabel);\n\n                decorate(container, data, index);\n            });\n\n            selection.call(cartesian);\n        };\n\n        rebindAll(cartesianBase, cartesian, include(/^x/, /^y/, 'chartLabel'));\n\n        cartesianBase.yLabel = (...args) => {\n            if (!args.length) {\n                return yLabel;\n            }\n            yLabel = functor(args[0]);\n            return cartesianBase;\n        };\n        cartesianBase.plotArea = (...args) => {\n            if (!args.length) {\n                return plotArea;\n            }\n            plotArea = args[0];\n            return cartesianBase;\n        };\n        cartesianBase.decorate = (...args) => {\n            if (!args.length) {\n                return decorate;\n            }\n            decorate = args[0];\n            return cartesianBase;\n        };\n\n        return cartesianBase;\n\n    };\n", "import cartesianBase from '../cartesianBase';\nimport { seriesSvgLine } from '@d3fc/d3fc-series';\n\nexport default cartesianBase(\n    (cartesian, plotArea) => cartesian.svgPlotArea(plotArea),\n    seriesSvgLine\n);\n", "import cartesianBase from '../cartesianBase';\nimport { seriesCanvasLine } from '@d3fc/d3fc-series';\n\nexport default cartesianBase(\n    (cartesian, plotArea) => cartesian.canvasPlotArea(plotArea),\n    seriesCanvasLine\n);\n", "// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n", "import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n", "export default x => () => x;\n", "export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n", "import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n", "var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we\u2019ve set an alarm, if we haven\u2019t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n", "import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n", "import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n", "import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n", "import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n", "import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n", "import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n", "import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n", "import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n", "import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n", "import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n", "import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n", "function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n", "import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n", "import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n", "import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n", "function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n", "import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n", "function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n", "import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n", "import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we\u2019re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n", "import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n", "export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n", "import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n", "import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name \u201C__brush\u201D rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n", "export default x => () => x;\n", "export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n", "export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n", "export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won\u2019t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n", "import { dispatch } from 'd3-dispatch';\nimport { select } from 'd3-selection';\nimport { zoom, zoomIdentity } from 'd3-zoom';\nimport { rebind } from '@d3fc/d3fc-rebind';\n\nconst domainsEqual = (a, b) => {\n    if (a == null && b == null) {\n        return true;\n    }\n    const aDomain = a.domain();\n    const bDomain = b.domain();\n    return (\n        aDomain.length === bDomain.length &&\n        aDomain.every((d, i) => d?.valueOf() === bDomain[i]?.valueOf())\n    );\n};\n\nconst subtract = (a, b) =>\n    zoomIdentity.scale(a.k / b.k).translate(a.x - b.x, a.y - b.y);\n\nconst symbol = Symbol('d3fc-domain-zoom');\n\nexport default () => {\n    const dispatcher = dispatch('zoom');\n\n    const zoomer = zoom().on('zoom', function (e) {\n        const { transform } = e;\n        const node = this;\n        let updatedTransform = transform;\n        let {\n            originalXScale,\n            previousXScale,\n            xScale,\n            originalYScale,\n            previousYScale,\n            yScale,\n            previousTransform\n        } = node[symbol];\n        if (\n            !domainsEqual(previousXScale, xScale) ||\n            !domainsEqual(previousYScale, yScale)\n        ) {\n            originalXScale = xScale?.copy();\n            originalYScale = yScale?.copy();\n            updatedTransform = subtract(transform, previousTransform);\n        }\n        if (xScale != null) {\n            previousXScale = updatedTransform.rescaleX(\n                originalXScale.range(xScale.range())\n            );\n            xScale.domain(previousXScale.domain());\n        }\n        if (yScale != null) {\n            previousYScale = updatedTransform.rescaleY(\n                originalYScale.range(yScale.range())\n            );\n            yScale.domain(previousYScale.domain());\n        }\n        previousTransform = updatedTransform;\n        node[symbol] = {\n            originalXScale,\n            previousXScale,\n            xScale,\n            originalYScale,\n            previousYScale,\n            yScale,\n            previousTransform\n        };\n        if (updatedTransform !== transform) {\n            zoomer.transform(select(node), updatedTransform);\n        }\n        dispatcher.call('zoom', this, e);\n    });\n\n    const instance = (selection, xScale = null, yScale = null) => {\n        if (xScale == null && yScale == null) {\n            console.warn(\n                `Without an xScale and/or yScale specified, this component won't do anything. Perhaps you forgot to specify them e.g. selection.call(zoom, x, y)?`\n            );\n        }\n        selection\n            .each((d, i, nodes) => {\n                const existingContext = nodes[i][symbol];\n                if (\n                    existingContext != null &&\n                    existingContext.xScale === xScale &&\n                    existingContext.yScale === yScale\n                ) {\n                    console.warn(\n                        `This component should only be called on a selection once. Perhaps you're missing an .enter()?`\n                    );\n                }\n                const xScaleCopy = xScale?.copy();\n                const yScaleCopy = yScale?.copy();\n                nodes[i][symbol] = {\n                    originalXScale: xScaleCopy,\n                    previousXScale: xScaleCopy,\n                    xScale,\n                    originalYScale: yScaleCopy,\n                    previousYScale: yScaleCopy,\n                    yScale,\n                    previousTransform: zoomIdentity\n                };\n            })\n            .call(zoomer);\n    };\n\n    rebind(instance, dispatcher, 'on');\n    rebind(\n        instance,\n        zoomer,\n        'extent',\n        'filter',\n        'wheelDelta',\n        'touchable',\n        'clickDistance',\n        'tapDistance',\n        'duration',\n        'interpolate',\n        'scaleExtent',\n        'translateExtent'\n    );\n\n    return instance;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Settings, SettingNameValues } from \"../types\";\n\nexport const AXIS_TYPES = {\n    none: \"none\",\n    ordinal: \"ordinal\",\n    time: \"time\",\n    linear: \"linear\",\n} as const;\n\nexport type AxisTypeValues = (typeof AXIS_TYPES)[keyof typeof AXIS_TYPES];\n\nexport interface AxisType {\n    (): AxisTypeValues;\n\n    settingName(): SettingNameValues;\n    settingName(nextSettingName: SettingNameValues): this;\n\n    settingValue(): string;\n    settingValue(nextSettingValue: string): this;\n\n    excludeType(): AxisTypeValues;\n    excludeType(nextExcludeType: AxisTypeValues): this;\n}\n\nexport const axisType = (settings: Settings): AxisType => {\n    let settingName = \"crossValues\";\n    let settingValue = null;\n    let excludeType = null;\n\n    const getType: Partial<AxisType> = (): AxisTypeValues | boolean => {\n        const checkTypes = (types) => {\n            const list = settingValue\n                ? settings[settingName].filter((s) => settingValue == s.name)\n                : settings[settingName];\n\n            if (settingName == \"crossValues\" && list.length > 1) {\n                // TODO: the return value of this function is used as an index, but \"false\" can't be used as an index.\n                // can't do multiple values on non-ordinal cross-axis\n                return false; // can this be \"none\"?\n            }\n\n            return list.some((s) => types.includes(s.type));\n        };\n\n        if (settings[settingName].length === 0) {\n            return AXIS_TYPES.none;\n        } else if (\n            excludeType != AXIS_TYPES.time &&\n            checkTypes([\"datetime\", \"date\"])\n        ) {\n            return AXIS_TYPES.time;\n        } else if (\n            excludeType != AXIS_TYPES.linear &&\n            checkTypes([\"integer\", \"float\"])\n        ) {\n            return AXIS_TYPES.linear;\n        }\n\n        if (excludeType == AXIS_TYPES.ordinal) {\n            return AXIS_TYPES.linear;\n        }\n        return AXIS_TYPES.ordinal;\n    };\n\n    getType.settingName = (...args: SettingNameValues[]): any => {\n        if (!args.length) {\n            return settingName;\n        }\n        settingName = args[0];\n        return getType;\n    };\n\n    getType.settingValue = (...args: (string | undefined)[]): any => {\n        if (!args.length) {\n            return settingValue;\n        }\n\n        settingValue = args[0];\n        return getType;\n    };\n\n    getType.excludeType = (...args: AxisTypeValues[]): any => {\n        if (!args.length) {\n            return excludeType;\n        }\n        excludeType = args[0];\n        return getType;\n    };\n\n    return getType as AxisType;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { flattenArray } from \"./flatten\";\nimport minBandwidth from \"./minBandwidth\";\nimport withoutTicks from \"./withoutTicks\";\nimport { Domain, Orientation, ValueName } from \"../types\";\n\nexport const scale = () => withoutTicks(minBandwidth(d3.scaleBand()));\n\nexport const domain = (): Domain => {\n    let valueNames = [\"crossValue\"];\n    let orient = \"horizontal\";\n\n    const _domain: Partial<Domain> = (data: any[]) => {\n        const flattenedData = flattenArray(data);\n        return transformDomain([\n            ...new Set(flattenedData.map((d) => d[valueNames[0]])),\n        ]);\n    };\n\n    const transformDomain = (d) => (orient == \"vertical\" ? d.reverse() : d);\n\n    _domain.valueName = (...args: ValueName[]): any => {\n        if (!args.length) {\n            return valueNames[0];\n        }\n        valueNames = [args[0]];\n        return _domain;\n    };\n\n    _domain.valueNames = (...args: ValueName[][]): any => {\n        if (!args.length) {\n            return valueNames;\n        }\n        valueNames = args[0];\n        return _domain;\n    };\n\n    _domain.orient = (...args: Orientation[]): any => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return _domain;\n    };\n\n    return _domain as Domain;\n};\n\nexport const labelFunction = (valueName) => (d) => d[valueName].join(\"|\");\n", "function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n", "export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n", "export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n", "export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n", "export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n", "export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don\u2019t include the root\u2019s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n", "export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n", "import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n", "export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n", "export function constantZero() {\n  return 0;\n}\n\nexport default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n", "import roundNode from \"./treemap/round.js\";\nimport treemapDice from \"./treemap/dice.js\";\n\nexport default function() {\n  var dx = 1,\n      dy = 1,\n      padding = 0,\n      round = false;\n\n  function partition(root) {\n    var n = root.height + 1;\n    root.x0 =\n    root.y0 = padding;\n    root.x1 = dx;\n    root.y1 = dy / n;\n    root.eachBefore(positionNode(dy, n));\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(dy, n) {\n    return function(node) {\n      if (node.children) {\n        treemapDice(node, node.x0, dy * (node.depth + 1) / n, node.x1, dy * (node.depth + 2) / n);\n      }\n      var x0 = node.x0,\n          y0 = node.y0,\n          x1 = node.x1 - padding,\n          y1 = node.y1 - padding;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      node.x0 = x0;\n      node.y0 = y0;\n      node.x1 = x1;\n      node.y1 = y1;\n    };\n  }\n\n  partition.round = function(x) {\n    return arguments.length ? (round = !!x, partition) : round;\n  };\n\n  partition.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], partition) : [dx, dy];\n  };\n\n  partition.padding = function(x) {\n    return arguments.length ? (padding = +x, partition) : padding;\n  };\n\n  return partition;\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n", "import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n", "import roundNode from \"./round.js\";\nimport squarify from \"./squarify.js\";\nimport {required} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\n\nexport default function() {\n  var tile = squarify,\n      round = false,\n      dx = 1,\n      dy = 1,\n      paddingStack = [0],\n      paddingInner = constantZero,\n      paddingTop = constantZero,\n      paddingRight = constantZero,\n      paddingBottom = constantZero,\n      paddingLeft = constantZero;\n\n  function treemap(root) {\n    root.x0 =\n    root.y0 = 0;\n    root.x1 = dx;\n    root.y1 = dy;\n    root.eachBefore(positionNode);\n    paddingStack = [0];\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(node) {\n    var p = paddingStack[node.depth],\n        x0 = node.x0 + p,\n        y0 = node.y0 + p,\n        x1 = node.x1 - p,\n        y1 = node.y1 - p;\n    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n    node.x0 = x0;\n    node.y0 = y0;\n    node.x1 = x1;\n    node.y1 = y1;\n    if (node.children) {\n      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;\n      x0 += paddingLeft(node) - p;\n      y0 += paddingTop(node) - p;\n      x1 -= paddingRight(node) - p;\n      y1 -= paddingBottom(node) - p;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      tile(node, x0, y0, x1, y1);\n    }\n  }\n\n  treemap.round = function(x) {\n    return arguments.length ? (round = !!x, treemap) : round;\n  };\n\n  treemap.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];\n  };\n\n  treemap.tile = function(x) {\n    return arguments.length ? (tile = required(x), treemap) : tile;\n  };\n\n  treemap.padding = function(x) {\n    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();\n  };\n\n  treemap.paddingInner = function(x) {\n    return arguments.length ? (paddingInner = typeof x === \"function\" ? x : constant(+x), treemap) : paddingInner;\n  };\n\n  treemap.paddingOuter = function(x) {\n    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();\n  };\n\n  treemap.paddingTop = function(x) {\n    return arguments.length ? (paddingTop = typeof x === \"function\" ? x : constant(+x), treemap) : paddingTop;\n  };\n\n  treemap.paddingRight = function(x) {\n    return arguments.length ? (paddingRight = typeof x === \"function\" ? x : constant(+x), treemap) : paddingRight;\n  };\n\n  treemap.paddingBottom = function(x) {\n    return arguments.length ? (paddingBottom = typeof x === \"function\" ? x : constant(+x), treemap) : paddingBottom;\n  };\n\n  treemap.paddingLeft = function(x) {\n    return arguments.length ? (paddingLeft = typeof x === \"function\" ? x : constant(+x), treemap) : paddingLeft;\n  };\n\n  return treemap;\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      i, n = nodes.length,\n      sum, sums = new Array(n + 1);\n\n  for (sums[0] = sum = i = 0; i < n; ++i) {\n    sums[i + 1] = sum += nodes[i].value;\n  }\n\n  partition(0, n, parent.value, x0, y0, x1, y1);\n\n  function partition(i, j, value, x0, y0, x1, y1) {\n    if (i >= j - 1) {\n      var node = nodes[i];\n      node.x0 = x0, node.y0 = y0;\n      node.x1 = x1, node.y1 = y1;\n      return;\n    }\n\n    var valueOffset = sums[i],\n        valueTarget = (value / 2) + valueOffset,\n        k = i + 1,\n        hi = j - 1;\n\n    while (k < hi) {\n      var mid = k + hi >>> 1;\n      if (sums[mid] < valueTarget) k = mid + 1;\n      else hi = mid;\n    }\n\n    if ((valueTarget - sums[k - 1]) < (sums[k] - valueTarget) && i + 1 < k) --k;\n\n    var valueLeft = sums[k] - valueOffset,\n        valueRight = value - valueLeft;\n\n    if ((x1 - x0) > (y1 - y0)) {\n      var xk = value ? (x0 * valueRight + x1 * valueLeft) / value : x1;\n      partition(i, k, valueLeft, x0, y0, xk, y1);\n      partition(k, j, valueRight, xk, y0, x1, y1);\n    } else {\n      var yk = value ? (y0 * valueRight + y1 * valueLeft) / value : y1;\n      partition(i, k, valueLeft, x0, y0, x1, yk);\n      partition(k, j, valueRight, x0, yk, x1, y1);\n    }\n  }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nexport const flattenExtent = (array: any[]): [number, number] => {\n    const withUndefined = (fn) => (a, b) => {\n        if (a === undefined) return b;\n        if (b === undefined) return a;\n        return fn(a, b);\n    };\n    return array.reduce(\n        (r, v) => [\n            withUndefined(Math.min)(r[0], v[0]),\n            withUndefined(Math.max)(r[1], v[1]),\n        ],\n        [undefined, undefined]\n    );\n};\n\nexport const flattenArray = (array: any): any[] => {\n    if (Array.isArray(array)) {\n        return array.flat(Infinity);\n    } else {\n        return [array];\n    }\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { rebindAll } from \"d3fc/index.js\";\n\nconst MIN_BANDWIDTH = 1;\n\nexport interface MinBandwidth {\n    (arg: any): any;\n    bandwidth(): number;\n    bandwidth(...args: any[]): any;\n}\n\n// NOTE: Can the minBandwidth in barSeries.ts be merged with this?\n\nexport default (adaptee: d3.ScaleBand<string>): MinBandwidth => {\n    const minBandwidth: Partial<MinBandwidth> = (arg) => {\n        return adaptee(arg);\n    };\n\n    rebindAll(minBandwidth, adaptee);\n\n    minBandwidth.bandwidth = (...args: any[]): any => {\n        if (!args.length) {\n            return Math.max(adaptee.bandwidth(), MIN_BANDWIDTH);\n        }\n        // NOTE: d3.ScaleBand only has a getter for .bandwidth? (no args...);\n        //       I'm not sure this can be set.\n        // @ts-ignore\n        adaptee.bandwidth(...args);\n        return minBandwidth;\n    };\n\n    return minBandwidth as MinBandwidth;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { rebindAll } from \"d3fc/index.js\";\n\nexport default (adaptee) => {\n    const withoutTicks = (arg) => {\n        return adaptee(arg);\n    };\n\n    rebindAll(withoutTicks, adaptee);\n\n    withoutTicks.ticks = function () {\n        return [];\n    };\n\n    return withoutTicks;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport * as fc from \"d3fc/index.js\";\nimport { flattenArray } from \"./flatten\";\nimport { extentLinear as customExtent } from \"../d3fc/extent/extentLinear\";\nimport { getValueFormatterForRange } from \"./valueFormatter\";\nimport { getChartContainer } from \"../plugin/root\";\nimport {\n    Component,\n    ComponentData,\n    Domain,\n    PaddingStrategy,\n    Settings,\n    ValueName,\n} from \"../types\";\n\nexport const scale = () => d3.scaleLinear();\n\nexport const domain = (): Domain => {\n    const base = customExtent().pad([0, 0.1]).padUnit(\"percent\");\n\n    let valueNames: ValueName[] = [\"crossValue\"];\n\n    const _domain: any = (data) => {\n        base.accessors(valueNames.map((v) => (d) => parseFloat(d[v])));\n\n        return getDataExtent(flattenArray(data));\n    };\n\n    fc.rebindAll(_domain, base);\n\n    const getMinimumGap = (data) => {\n        const gaps = valueNames.map((valueName) =>\n            data\n                .map((d) => d[valueName])\n                .sort((a, b) => a - b)\n                .filter((d, i, a) => i === 0 || d !== a[i - 1])\n                .reduce((acc, d, i, src) =>\n                    i === 0 || acc <= d - src[i - 1]\n                        ? acc\n                        : Math.abs(d - src[i - 1])\n                )\n        );\n\n        return Math.min(...gaps);\n    };\n\n    const getDataExtent = (data: any[]): PaddingStrategy => {\n        if (base.padUnit() == \"domain\") {\n            const dataWidth = getMinimumGap(data);\n            return base.pad([dataWidth / 2, dataWidth / 2])(data);\n        } else {\n            return base(data);\n        }\n    };\n\n    _domain.valueName = (...args: ValueName[]): any => {\n        if (!args.length) {\n            return valueNames[0];\n        }\n        valueNames = [args[0]];\n        return _domain;\n    };\n\n    _domain.valueNames = (...args: ValueName[][]): any => {\n        if (!args.length) {\n            return valueNames;\n        }\n        valueNames = args[0];\n        return _domain;\n    };\n\n    return _domain;\n};\n\nexport const labelFunction =\n    (valueName) =>\n    (d): string =>\n        d[valueName][0];\n\nexport const tickFormatFunction = getValueFormatterForRange;\n\nexport const component = (_settings: Settings): Component => {\n    let domain = null;\n    let orient = \"horizontal\";\n    let settingName = null;\n\n    const getAxis = (s, data) => {\n        try {\n            const container = getChartContainer(s.node());\n            const chart = container.querySelector(\".cartesian-chart\");\n            const axis = chart.querySelector(`.${data}-axis`);\n            return axis;\n        } catch (e) {\n            return null;\n        }\n    };\n\n    // shrinks a given tick label\n    const shrinkTickLabel = (node) => {\n        const text = d3.select(node).select(\"text\").node();\n        (text as HTMLElement).style.fontSize = \"80%\";\n    };\n\n    // resizes ticks if they overflow the axis box\n    const shrinkTicks = (axis, s) => {\n        const axisBox = axis.getBoundingClientRect();\n        s.each((d, i, nodes) => {\n            const tickBox = d3.select(nodes[i]).node().getBoundingClientRect();\n\n            // if the tick is bigger than the axis, resize it\n            if (orient == \"vertical\" && axisBox.width < tickBox.width) {\n                shrinkTickLabel(nodes[i]);\n            } else if (\n                orient == \"horizontal\" &&\n                axisBox.height < tickBox.height\n            ) {\n                shrinkTickLabel(nodes[i]);\n            }\n        });\n    };\n\n    const decorate = (s, data, _index) => {\n        const axis = getAxis(s, data);\n        if (axis) {\n            shrinkTicks(axis, s);\n        }\n    };\n\n    const getComponent: any = (): ComponentData => {\n        const components = {\n            bottom: fc.axisBottom,\n            left: fc.axisLeft,\n            top: fc.axisTop,\n            right: fc.axisRight,\n            // size: \"100px\", // works, but can't measure here\n            decorate,\n        };\n        return components;\n    };\n\n    getComponent.domain = (...args) => {\n        if (!args.length) {\n            return domain;\n        }\n        domain = args[0];\n        return getComponent;\n    };\n\n    getComponent.orient = (...args) => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return getComponent;\n    };\n\n    getComponent.settingName = (...args) => {\n        if (!args.length) {\n            return settingName;\n        }\n        settingName = args[0];\n        return getComponent;\n    };\n\n    return getComponent;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Pad, PadUnit, PaddingStrategy } from \"../../types\";\n\nexport const defaultPadding = (): PaddingStrategy => {\n    let pad = [0, 0];\n    let padUnit: PadUnit = \"percent\" as const;\n\n    const padding: Partial<PaddingStrategy> = (extent) => {\n        switch (padUnit) {\n            case \"domain\": {\n                extent[0] -= pad[0];\n                extent[1] += pad[1];\n                break;\n            }\n            case \"percent\": {\n                let delta = extent[1] - extent[0];\n                extent[0] -= pad[0] * delta;\n                extent[1] += pad[1] * delta;\n                break;\n            }\n            default:\n                throw new Error(\"Unknown padUnit: \" + padUnit);\n        }\n        return extent;\n    };\n\n    padding.pad = function (...args: Pad[]): any {\n        if (!args.length) {\n            return pad;\n        }\n\n        pad = args[0];\n\n        return padding;\n    };\n\n    padding.padUnit = function (...args: PadUnit[]): any {\n        if (!args.length) {\n            return padUnit;\n        }\n\n        padUnit = args[0];\n\n        return padding;\n    };\n\n    return padding as PaddingStrategy;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3Array from \"d3-array\";\nimport { defaultPadding } from \"../padding/default\";\nimport { Pad, PadUnit, PaddingStrategy } from \"../../types\";\n\nexport type SymmetricalAbout = number | null;\n\nexport interface ExtentLinear {\n    (data: any[]): PaddingStrategy;\n    accessors: (nextAccessors?: any[]) => any;\n\n    pad(): Pad;\n    pad(nextPad: Pad): ExtentLinear;\n\n    padUnit(): PadUnit;\n    padUnit(nextPadUnit: PadUnit): ExtentLinear;\n\n    include(): number[];\n    include(nextInclude?: number[]): ExtentLinear;\n\n    symmetricalAbout(): number | null;\n    symmetricalAbout(nextSymmetricalAbout?: number | null): ExtentLinear;\n\n    paddingStrategy(): PaddingStrategy;\n    paddingStrategy(nextPaddingStrategy?: any): ExtentLinear;\n}\n\nexport const extentLinear = function (): ExtentLinear {\n    let accessors = [\n        function (d) {\n            return d;\n        },\n    ];\n    let symmetricalAbout: number | null = null;\n    let include: number[] = [];\n    let paddingStrategy = defaultPadding();\n\n    const instance: Partial<ExtentLinear> = function instance(\n        data\n    ): PaddingStrategy {\n        let values = new Array(data.length);\n        let _iteratorNormalCompletion = true;\n        let _didIteratorError = false;\n        let _iteratorError = undefined;\n\n        let _iterator = accessors[Symbol.iterator]();\n        try {\n            for (\n                let _step;\n                !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n                _iteratorNormalCompletion = true\n            ) {\n                let accessor = _step.value;\n\n                for (let i = 0; i < data.length; i++) {\n                    let value = accessor(data[i], i);\n                    if (Array.isArray(value)) {\n                        values.push.apply(values, toConsumableArray(value));\n                    } else {\n                        values.push(value);\n                    }\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        let extent$$1 = [d3Array.min(values), d3Array.max(values)];\n\n        extent$$1[0] =\n            extent$$1[0] == null\n                ? d3Array.min(include)\n                : d3Array.min(\n                      [extent$$1[0]].concat(toConsumableArray(include))\n                  );\n        extent$$1[1] =\n            extent$$1[1] == null\n                ? d3Array.max(include)\n                : d3Array.max(\n                      [extent$$1[1]].concat(toConsumableArray(include))\n                  );\n\n        if (symmetricalAbout != null) {\n            let halfRange = Math.max(\n                Math.abs(extent$$1[1] - symmetricalAbout),\n                Math.abs(extent$$1[0] - symmetricalAbout)\n            );\n            extent$$1[0] = symmetricalAbout - halfRange;\n            extent$$1[1] = symmetricalAbout + halfRange;\n        }\n\n        return paddingStrategy(extent$$1);\n    };\n\n    instance.accessors = function () {\n        if (!arguments.length) {\n            return accessors;\n        }\n        accessors = arguments.length <= 0 ? undefined : arguments[0];\n        return instance;\n    };\n\n    //This function points directly at the paddingStrategy child object's\n    //properties for backwards-compatibility. DEPRECATED.\n    instance.pad = function (...args: Pad[]): any {\n        if (!args.length) {\n            return paddingStrategy.pad;\n        }\n\n        paddingStrategy.pad(args[0]);\n\n        return instance;\n    };\n\n    //This function points directly at the paddingStrategy child object's\n    //properties for backwards-compatibility. DEPRECATED.\n    instance.padUnit = function (...args: PadUnit[]): any {\n        if (!args.length) {\n            return paddingStrategy.padUnit;\n        }\n\n        paddingStrategy.padUnit(args[0]);\n\n        return instance;\n    };\n\n    instance.include = function (...args: number[][]): any {\n        if (!args.length) {\n            return include;\n        }\n\n        include = args[0];\n\n        return instance;\n    };\n\n    instance.symmetricalAbout = function (...args: SymmetricalAbout[]): any {\n        if (!args.length) {\n            return symmetricalAbout;\n        }\n\n        symmetricalAbout = args[0];\n\n        return instance;\n    };\n\n    instance.paddingStrategy = function (...args: PaddingStrategy[]): any {\n        if (!args.length) {\n            return paddingStrategy;\n        }\n\n        paddingStrategy = args[0];\n\n        return instance;\n    };\n\n    return instance as ExtentLinear;\n};\n\nlet toConsumableArray = function (arr) {\n    if (Array.isArray(arr)) {\n        let arr2 = Array(arr.length);\n        for (let i = 0; i < arr.length; i++) {\n            arr2[i] = arr[i];\n        }\n        return arr2;\n    } else {\n        return Array.from(arr);\n    }\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\n\nconst SI_MIN = 10000000;\n\nexport const getValueFormatterForRange = (min: number, max: number) => {\n    let precision = Math.ceil(Math.abs(Math.log10(max - min))) + 1;\n\n    return (d: number) => {\n        return Math.abs(d) >= SI_MIN\n            ? d3.format(\".3s\")(d)\n            : Number.isInteger(d)\n            ? d3.format(\",.0f\")(d)\n            : d3.format(`,.${precision}f`)(d);\n    };\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { ChartElement } from \"../types\";\n\nexport function getChartElement(element): ChartElement {\n    return element.getRootNode().host;\n}\n\nexport function getChartContainer(element): HTMLElement {\n    return element.closest(\"#container.chart\");\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport * as fc from \"d3fc/index.js\";\nimport { flattenArray } from \"./flatten\";\nimport { Domain, ValueName } from \"../types\";\n\nexport const scale = () => d3.scaleTime();\n\nexport const domain = (): Domain => {\n    const base = fc.extentTime();\n\n    let valueNames = [\"crossValue\"];\n\n    const _domain: Partial<Domain> = (data) => {\n        base.accessors(valueNames.map((v) => (d) => new Date(d[v])));\n\n        return getDataExtent(flattenArray(data));\n    };\n\n    fc.rebindAll(_domain, base, fc.exclude(\"include\", \"paddingStrategy\"));\n\n    const getMinimumGap = (data) => {\n        const gaps = valueNames.map((valueName) =>\n            data\n                .map((d) => new Date(d[valueName]).getTime())\n                .sort((a, b) => a - b)\n                .filter((d, i, a) => i === 0 || d !== a[i - 1])\n                .reduce((acc, d, i, src) =>\n                    i === 0 || Math.abs(acc) <= Math.abs(d - src[i - 1])\n                        ? Math.abs(acc)\n                        : Math.abs(d - src[i - 1])\n                )\n        );\n\n        return Math.min(...gaps);\n    };\n\n    const getDataExtent = (data) => {\n        const dataWidth = Math.abs(getMinimumGap(data));\n        return base.padUnit(\"domain\").pad([dataWidth / 2, dataWidth / 2])(data);\n    };\n\n    _domain.valueName = (...args: ValueName[]): any => {\n        if (!args.length) {\n            return valueNames[0];\n        }\n        valueNames = [args[0]];\n        return _domain;\n    };\n\n    _domain.valueNames = (...args: ValueName[][]): any => {\n        if (!args.length) {\n            return valueNames;\n        }\n        valueNames = args[0];\n        return _domain;\n    };\n\n    return _domain as Domain;\n};\n\nexport const labelFunction = (valueName) => (d) => new Date(d[valueName][0]);\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport * as fc from \"d3fc/index.js\";\nimport minBandwidth from \"./minBandwidth\";\nimport { flattenArray } from \"./flatten\";\nimport {\n    multiAxisBottom,\n    multiAxisLeft,\n    multiAxisTop,\n    multiAxisRight,\n} from \"../d3fc/axis/multi-axis\";\nimport { getChartContainer } from \"../plugin/root\";\nimport {\n    Component,\n    ComponentData,\n    Domain,\n    Orientation,\n    SettingNameValues,\n    Settings,\n    ValueName,\n} from \"../types\";\n\n// NOTE: Where is this used? Is it?\n// MinBandwidth doesn't have a padding() method, so what is going on here?\n// @ts-ignore\nexport const scale = () => minBandwidth(d3.scaleBand()).padding(0.5);\n\ninterface OrdinalAxisDomain {\n    (data: any): any;\n\n    valueName(): ValueName;\n    valueName(nextValueName: ValueName): this;\n\n    valueNames(): ValueName[];\n    valueNames(nextValueNames: ValueName[]): this;\n\n    orient(): Orientation;\n    orient(nextOrient: Orientation): this;\n}\n\nexport const domain = (): OrdinalAxisDomain => {\n    let valueNames = [\"crossValue\"];\n    let orient = \"horizontal\";\n\n    const _domain: Partial<Domain> = (data) => {\n        const flattenedData = flattenArray(data);\n        return transformDomain([\n            ...Array.from(new Set(flattenedData.map((d) => d[valueNames[0]]))),\n        ]);\n    };\n\n    const transformDomain = (d) => (orient == \"vertical\" ? d.reverse() : d);\n\n    _domain.valueName = (...args: ValueName[]): any => {\n        if (!args.length) {\n            return valueNames[0];\n        }\n        valueNames = [args[0]];\n        return _domain;\n    };\n\n    _domain.valueNames = (...args: ValueName[][]): any => {\n        if (!args.length) {\n            return valueNames;\n        }\n        valueNames = args[0];\n        return _domain;\n    };\n\n    _domain.orient = (...args: Orientation[]): any => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return _domain;\n    };\n\n    return _domain as Domain;\n};\n\nexport const labelFunction =\n    (valueName, settings?: Settings) =>\n    (d): string => {\n        return d[valueName]\n            .map((value, i) => {\n                const ty = settings.crossValues[i].type;\n                if (ty === \"datetime\") {\n                    return new Date(value).toLocaleString(undefined, {\n                        year: \"numeric\",\n                        month: \"numeric\",\n                        day: \"numeric\",\n                        hour: \"numeric\",\n                        minute: \"numeric\",\n                        second: \"numeric\",\n                        fractionalSecondDigits: 3,\n                    });\n                } else if (ty === \"date\") {\n                    return new Date(value).toLocaleDateString();\n                }\n\n                return value;\n            })\n            .join(\"|\");\n    };\n\nexport const component = (settings: Settings): Component => {\n    let orient = \"horizontal\";\n    let settingName = \"crossValues\";\n    let domain = null;\n\n    const getComponent: any = (): ComponentData => {\n        const multiLevel = settings[settingName].length > 1;\n\n        // Calculate the label groups and corresponding group sizes\n        const levelGroups = axisGroups(domain);\n        const groupTickLayout = levelGroups.map(getGroupTickLayout);\n\n        const tickSizeInner = multiLevel\n            ? groupTickLayout.map((l) => l.size)\n            : groupTickLayout[0].size;\n        const tickSizeOuter = groupTickLayout.reduce((s, v) => s + v.size, 0);\n\n        const createAxis = (base) => (scale) => {\n            const axis = base(scale);\n\n            if (multiLevel) {\n                axis.groups(levelGroups)\n                    .tickSizeInner(tickSizeInner)\n                    .tickSizeOuter(tickSizeOuter);\n            }\n            if (orient !== \"horizontal\") axis.tickPadding(10);\n            return axis;\n        };\n\n        const decorate = (s, data, index) => {\n            const rotation = groupTickLayout[index].rotation;\n            if (orient === \"horizontal\") applyLabelRotation(s, rotation);\n            hideOverlappingLabels(s, rotation);\n        };\n\n        const axisSet = getAxisSet(multiLevel);\n        return {\n            bottom: createAxis(axisSet.bottom),\n            left: createAxis(axisSet.left),\n            right: createAxis(axisSet.right),\n            top: createAxis(axisSet.top),\n            size: `${tickSizeOuter + 10}px`,\n            decorate,\n        };\n    };\n\n    // const pickAxis = multiLevel => {\n    //     if (multiLevel) {\n    //         return orient === \"horizontal\" ?\n    //                multiAxisBottom : multiAxisLeft;\n    //     }\n    //     return orient === \"horizontal\" ?\n    //                 fc.axisOrdinalBottom : fc.axisOrdinalLeft;\n    // };\n\n    const getAxisSet = (multiLevel) => {\n        if (multiLevel) {\n            return {\n                bottom: multiAxisBottom,\n                left: multiAxisLeft,\n                top: multiAxisTop,\n                right: multiAxisRight,\n            };\n        } else {\n            return {\n                bottom: fc.axisOrdinalBottom,\n                left: fc.axisOrdinalLeft,\n                top: fc.axisOrdinalTop,\n                right: fc.axisOrdinalRight,\n            };\n        }\n    };\n\n    const axisGroups = (domain) => {\n        const groups = [];\n        domain.forEach((tick) => {\n            const split = tick && tick.split ? tick.split(\"|\") : [tick];\n            split.forEach((s, i) => {\n                while (groups.length <= i) groups.push([]);\n\n                const group = groups[i];\n                if (group.length > 0 && group[group.length - 1].text === s) {\n                    group[group.length - 1].domain.push(tick);\n                } else {\n                    group.push({ text: s, domain: [tick] });\n                }\n            });\n        });\n        return groups.reverse();\n    };\n\n    const getGroupTickLayout = (group) => {\n        const width = settings.size.width;\n        const maxLength = Math.max(\n            ...group.map((g) => (g.text ? g.text.length : 0))\n        );\n\n        if (orient === \"horizontal\") {\n            // x-axis may rotate labels and expand the available height\n            if (group && group.length * 16 > width - 100) {\n                // Vertical\n                return {\n                    size: maxLength * 6.62 + 10,\n                    rotation: 90,\n                };\n            } else if (\n                group &&\n                group.length * (maxLength * 6 + 10) > width - 100\n            ) {\n                // Angle\n                return {\n                    size: maxLength * 4 + 20,\n                    rotation: 45,\n                };\n            }\n\n            // Horizontal\n            return {\n                size: 25,\n                rotation: 0,\n            };\n        } else {\n            // y-axis size always based on label size\n            return {\n                size: maxLength * 6.62 + 10,\n                rotation: 0,\n            };\n        }\n    };\n\n    const hideOverlappingLabels = (s, rotated) => {\n        const getTransformCoords = (transform) => {\n            const splitOn = transform.indexOf(\",\") !== -1 ? \",\" : \" \";\n            const coords = transform\n                .substring(transform.indexOf(\"(\") + 1, transform.indexOf(\")\"))\n                .split(splitOn)\n                .map((c) => parseInt(c));\n            while (coords.length < 2) coords.push(0);\n            return coords;\n        };\n\n        const rectanglesOverlap = (r1, r2) =>\n            r1.x <= r2.x + r2.width &&\n            r2.x <= r1.x + r1.width &&\n            r1.y <= r2.y + r2.height &&\n            r2.y <= r1.y + r1.height;\n        const rotatedLabelsOverlap = (r1, r2) =>\n            r1.x + r1.width + 14 > r2.x + r2.width;\n        const isOverlap = rotated ? rotatedLabelsOverlap : rectanglesOverlap;\n\n        const rectangleContained = (r1, r2) =>\n            r1.x >= r2.x &&\n            r1.x + r1.width <= r2.x + r2.width &&\n            r1.y >= r2.y &&\n            r1.y + r1.height <= r2.y + r2.height;\n        // The bounds rect is the available screen space a label can fit into\n        const boundsRect =\n            orient == \"horizontal\" ? getXAxisBoundsRect(s) : null;\n\n        const previousRectangles = [];\n        s.each((d, i, nodes) => {\n            const tick = d3.select(nodes[i]);\n\n            // How the \"tick\" element is transformed (x/y)\n            const transformCoords = getTransformCoords(tick.attr(\"transform\"));\n\n            // Work out the actual rectanble the label occupies\n            const tickRect = tick.node().getBBox();\n            const rect = {\n                x: tickRect.x + transformCoords[0],\n                y: tickRect.y + transformCoords[1],\n                width: tickRect.width,\n                height: tickRect.height,\n            };\n\n            const overlap = previousRectangles.some((r) => isOverlap(r, rect));\n\n            // Test that it also fits into the screen space\n            const hidden =\n                overlap ||\n                (boundsRect && !rectangleContained(rect, boundsRect));\n\n            tick.attr(\"visibility\", hidden ? \"hidden\" : \"\");\n            if (!hidden) {\n                previousRectangles.push(rect);\n            }\n        });\n    };\n\n    const getXAxisBoundsRect = (s) => {\n        const container = getChartContainer(s.node());\n        if (container === null) {\n            return;\n        }\n        const chart = container.querySelector(\".cartesian-chart\");\n        const axis = chart.querySelector(\".x-axis\");\n\n        const chartRect = chart.getBoundingClientRect();\n        const axisRect = axis.getBoundingClientRect();\n        return {\n            x: chartRect.left - axisRect.left,\n            width: chartRect.width,\n            y: chartRect.top - axisRect.top,\n            height: chartRect.height,\n        };\n    };\n\n    const getLabelTransform = (rotation) => {\n        if (!rotation) {\n            return \"translate(0, 8)\";\n        }\n        if (rotation < 60) {\n            return `rotate(-${rotation} 5 5)`;\n        }\n        return `rotate(-${rotation} 3 7)`;\n    };\n\n    const applyLabelRotation = (s, rotation) => {\n        const transform = getLabelTransform(rotation);\n        const anchor = rotation ? \"end\" : \"\";\n        s.each((d, i, nodes) => {\n            const tick = d3.select(nodes[i]);\n            const text = tick.select(\"text\");\n\n            text.attr(\"transform\", transform).style(\"text-anchor\", anchor);\n        });\n    };\n\n    getComponent.orient = (...args: Orientation[]): any => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return getComponent;\n    };\n\n    getComponent.settingName = (...args: SettingNameValues[]): any => {\n        if (!args.length) {\n            return settingName;\n        }\n        settingName = args[0];\n        return getComponent;\n    };\n\n    getComponent.domain = (...args: string[][]): any => {\n        if (!args.length) {\n            return domain;\n        }\n        domain = args[0];\n        return getComponent;\n    };\n\n    return getComponent;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nexport default (...names) => {\n    const data = {};\n\n    const store = (target) => {\n        for (const key of Object.keys(data)) {\n            target[key](data[key]);\n        }\n        return target;\n    };\n\n    for (const name of names) {\n        store[name] = (...args) => {\n            if (!args.length) {\n                return data[name];\n            }\n            data[name] = args[0];\n            return store;\n        };\n    }\n\n    return store;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { select, line } from \"d3\";\nimport {\n    axisOrdinalTop,\n    axisOrdinalBottom,\n    axisOrdinalLeft,\n    axisOrdinalRight,\n    dataJoin,\n    rebindAll,\n    exclude,\n} from \"d3fc/index.js\";\nimport store from \"./store\";\nimport { Orient } from \"../../types\";\n\nexport interface MultiAxis {\n    (selection: any): void;\n\n    tickSize(): number;\n    tickSize(nextTickSize: number): MultiAxis;\n\n    tickSizeInner(): number | number[];\n    tickSizeInner(nextTickSize: number | number[]): MultiAxis;\n\n    tickSizeOuter(): number;\n    tickSizeOuter(nextTickSize: number): MultiAxis;\n\n    decorate(): any;\n    decorate(nextDecorator: any): MultiAxis;\n\n    groups(): any;\n    groups(nextGroups: any): MultiAxis;\n}\n\nconst multiAxis = (orient: Orient, baseAxis, scale): MultiAxis => {\n    let tickSizeOuter = 6;\n    let tickSizeInner: number | number[] = 6;\n    let axisStore = store(\n        \"tickFormat\",\n        \"ticks\",\n        \"tickArguments\",\n        \"tickValues\",\n        \"tickPadding\"\n    );\n    let decorate = (...args) => {};\n\n    let groups = null;\n\n    const groupDataJoin = dataJoin(\"g\", \"group\");\n    const domainPathDataJoin = dataJoin(\"path\", \"domain\");\n\n    const translate = (x, y) =>\n        isVertical() ? `translate(${y}, ${x})` : `translate(${x}, ${y})`;\n\n    const pathTranspose = (arr) =>\n        isVertical() ? arr.map((d) => [d[1], d[0]]) : arr;\n\n    const isVertical = () => orient === \"left\" || orient === \"right\";\n\n    const multiAxis: Partial<MultiAxis> = (selection) => {\n        if (!groups) {\n            axisStore(baseAxis(scale).decorate(decorate))(selection);\n            return;\n        }\n\n        // if (selection.selection) {\n        //     groupDataJoin.call(selection);\n        //     domainPathDataJoin.call(selection);\n        // }\n\n        selection.each((data, index, group) => {\n            const element = group[index];\n\n            const container = select(element);\n\n            const sign = orient === \"bottom\" || orient === \"right\" ? 1 : -1;\n\n            // add the domain line\n            const range = scale.range();\n            const domainPathData = pathTranspose([\n                [range[0], sign * tickSizeOuter],\n                [range[0], 0],\n                [range[1], 0],\n                [range[1], sign * tickSizeOuter],\n            ]);\n\n            const domainLine = domainPathDataJoin(container, [data]);\n            domainLine\n                .attr(\"d\", line()(domainPathData))\n                .attr(\"stroke\", \"#000\")\n                .attr(\"fill\", \"none\");\n\n            const g = groupDataJoin(container, groups);\n\n            const getAxisSize = (i) =>\n                Array.isArray(tickSizeInner) ? tickSizeInner[i] : tickSizeInner;\n            const getAxisOffset = (i) => {\n                let sum = 0;\n                for (let n = 0; n < i; n++) {\n                    sum += getAxisSize(n);\n                }\n                return sum;\n            };\n\n            g.attr(\"transform\", (d, i) =>\n                translate(0, sign * getAxisOffset(i))\n            ).each((group, i, nodes) => {\n                const groupElement = select(nodes[i]);\n                const groupScale = scaleFromGroup(scale, group);\n                const useAxis = axisStore(baseAxis(groupScale))\n                    .decorate((s, data) => decorate(s, data, i))\n                    .tickSizeInner(getAxisSize(i))\n                    .tickOffset((d) => groupScale.step(d) / 2);\n                useAxis(groupElement);\n\n                groupElement.select(\"path.domain\").attr(\"visibility\", \"hidden\");\n            });\n\n            // exit\n            g.exit().attr(\"transform\", (d, i) =>\n                translate(0, sign * getAxisOffset(i))\n            );\n        });\n    };\n\n    const scaleFromGroup = (scale, group) => {\n        function customScale(value) {\n            const values = value.domain;\n            return values.reduce((sum, d) => sum + scale(d), 0) / values.length;\n        }\n\n        customScale.ticks = () => {\n            return group;\n        };\n        customScale.tickFormat = () => (d) => {\n            return d.text;\n        };\n        customScale.copy = () => scaleFromGroup(scale, group);\n\n        customScale.step = (value) => value.domain.length * scale.step();\n\n        rebindAll(customScale, scale, exclude(\"ticks\", \"step\", \"copy\"));\n        return customScale;\n    };\n\n    multiAxis.tickSize = (...args): any => {\n        if (!args.length) {\n            return tickSizeInner;\n        }\n        tickSizeInner = tickSizeOuter = Number(args[0]);\n        return multiAxis;\n    };\n\n    multiAxis.tickSizeInner = (...args: (number | number[])[]): any => {\n        if (!args.length) {\n            return tickSizeInner;\n        }\n        tickSizeInner = Array.isArray(args[0]) ? args[0] : Number(args[0]);\n        return multiAxis;\n    };\n\n    multiAxis.tickSizeOuter = (...args: number[]): any => {\n        if (!args.length) {\n            return tickSizeOuter;\n        }\n        tickSizeOuter = Number(args[0]);\n        return multiAxis;\n    };\n\n    multiAxis.decorate = (...args): any => {\n        if (!args.length) {\n            return decorate;\n        }\n        decorate = args[0];\n        return multiAxis;\n    };\n\n    multiAxis.groups = (...args) => {\n        if (!args.length) {\n            return groups;\n        }\n        groups = args[0];\n        return multiAxis;\n    };\n\n    rebindAll(multiAxis, axisStore);\n\n    return multiAxis as MultiAxis;\n};\n\nexport const multiAxisTop = (scale) => multiAxis(\"top\", axisOrdinalTop, scale);\n\nexport const multiAxisBottom = (scale) =>\n    multiAxis(\"bottom\", axisOrdinalBottom, scale);\n\nexport const multiAxisLeft = (scale) =>\n    multiAxis(\"left\", axisOrdinalLeft, scale);\n\nexport const multiAxisRight = (scale) =>\n    multiAxis(\"right\", axisOrdinalRight, scale);\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { AxisTypeValues, axisType } from \"./axisType\";\nimport * as none from \"./noAxis\";\nimport * as linear from \"./linearAxis\";\nimport * as time from \"./timeAxis\";\nimport * as ordinal from \"./ordinalAxis\";\n\nimport {\n    Axis,\n    D3Scale,\n    Domain,\n    DomainTuple,\n    Orientation,\n    SettingNameValues,\n    Settings,\n    ValueName,\n} from \"../types\";\n\nexport type AxisComponent = (scale) => Axis;\n\nexport interface AxisFactoryContent {\n    scale: D3Scale;\n    domain: DomainTuple;\n    domainFunction: Function;\n    labelFunction: (valueName: any) => (d: any) => string | Date;\n    component: {\n        bottom: AxisComponent;\n        left: AxisComponent;\n        top: AxisComponent;\n        right: AxisComponent;\n    };\n    size: number | undefined;\n    decorate: Function; // (s, data, index) => unknown\n    label: string;\n    tickFormatFunction: Function;\n}\n\ninterface AxisFactory {\n    (data: any[]): any;\n    memoValue(): Axis;\n    memoValue(a: Axis): AxisFactory;\n\n    excludeType(): () => AxisTypeValues;\n    excludeType(nextExcludeType?: AxisTypeValues): this;\n\n    orient(): () => Orientation;\n    orient(nextOrient?: Orientation): this;\n\n    settingName(): () => SettingNameValues;\n    settingName(nextSettingName?: SettingNameValues): this;\n\n    settingValue(): () => string | null;\n    settingValue(nextSettingValue?: string | null): this;\n\n    valueName(): () => ValueName;\n    valueName(nextValueName?: ValueName): this;\n\n    valueNames(): () => ValueName[];\n    valueNames(nextValueNames?: ValueName[]): this;\n\n    modifyDomain(): () => ModifyDomainFunc;\n    modifyDomain(nextModifyDomain?: ModifyDomainFunc): this;\n\n    // optional params, no idea yet if these are right or not.\n    include?: (nextInclude?: number[]) => any;\n    paddingStrategy?: (nextPaddingStrategy?: any) => any;\n    pad?: (nextPad?: [number, number]) => any;\n}\n\nexport type ModifyDomainFunc = (domain: any[]) => any[];\n\nconst axisTypes = {\n    none,\n    ordinal,\n    time,\n    linear,\n};\n\nexport const axisFactory = (settings: Settings): AxisFactory => {\n    let excludeType: AxisTypeValues | null = null;\n    let orient: Orientation = \"horizontal\";\n    let settingName: SettingNameValues = \"crossValues\";\n    let settingValue: string | undefined = undefined;\n    let valueNames: ValueName[] = [\"crossValue\"];\n    let modifyDomain = null;\n    let memoValue = null;\n\n    const optionalParams = [\"include\", \"paddingStrategy\", \"pad\"];\n    const optional = {};\n\n    const _factory: Partial<AxisFactory> = (data): AxisFactoryContent => {\n        const useType = axisType(settings)\n            .excludeType(excludeType)\n            .settingName(settingName)\n            .settingValue(settingValue)();\n\n        const axis = axisTypes[useType];\n        const domainFunction = (axis.domain() as Domain).valueNames(valueNames);\n\n        optionalParams.forEach((p) => {\n            if (optional[p] && domainFunction[p])\n                domainFunction[p](optional[p]);\n        });\n        if (domainFunction.orient) domainFunction.orient(orient);\n\n        let domain = domainFunction(data);\n        if (modifyDomain !== null) {\n            domain = modifyDomain(domain);\n        }\n\n        if (memoValue && typeof domain[0] === \"number\") {\n            memoValue[0] = domain[0] = Math.min(domain[0], memoValue[0]);\n            memoValue[1] = domain[1] = Math.max(domain[1], memoValue[1]);\n        }\n\n        const component = axis.hasOwnProperty(\"component\")\n            ? createComponent(axis, domain, data)\n            : defaultComponent();\n\n        const tickFormatFunction =\n            axis == linear\n                ? linear.tickFormatFunction(domain[0], domain[1])\n                : undefined;\n\n        return {\n            scale: axis.scale(),\n            domain,\n            domainFunction,\n            labelFunction: axis.labelFunction,\n            component: {\n                bottom: component.bottom,\n                left: component.left,\n                top: component.top,\n                right: component.right,\n            },\n            size: component.size,\n            decorate: component.decorate,\n            label: settings[settingName].map((v) => v.name).join(\", \"),\n            tickFormatFunction,\n        };\n    };\n\n    const createComponent = (axis, domain, data) =>\n        axis\n            .component(settings)\n            .orient(orient)\n            .settingName(settingName)\n            .domain(domain)(data);\n\n    const defaultComponent = () => ({\n        bottom: fc.axisBottom,\n        left: fc.axisLeft,\n        top: fc.axisTop,\n        right: fc.axisRight,\n        decorate: () => {},\n    });\n\n    _factory.memoValue = (...args: Axis[]): any => {\n        if (!args.length) {\n            return memoValue;\n        }\n\n        memoValue = args[0];\n        return _factory;\n    };\n\n    _factory.excludeType = (...args: AxisTypeValues[]): any => {\n        if (!args.length) {\n            return excludeType;\n        }\n\n        excludeType = args[0];\n        return _factory;\n    };\n\n    _factory.orient = (...args: Orientation[]): any => {\n        if (!args.length) {\n            return orient;\n        }\n\n        orient = args[0];\n        return _factory;\n    };\n\n    _factory.settingName = (...args: SettingNameValues[]): any => {\n        if (!args.length) {\n            return settingName;\n        }\n\n        settingName = args[0];\n        return _factory;\n    };\n\n    _factory.settingValue = (...args: (string | null)[]): any => {\n        if (!args.length) {\n            return settingValue;\n        }\n\n        settingValue = args[0];\n        return _factory;\n    };\n\n    _factory.valueName = (...args: ValueName[]): any => {\n        if (!args.length) {\n            return valueNames[0];\n        }\n\n        valueNames = [args[0]];\n        return _factory;\n    };\n\n    _factory.valueNames = (...args: ValueName[][]): any => {\n        if (!args.length) {\n            return valueNames;\n        }\n\n        valueNames = args[0];\n        return _factory;\n    };\n\n    _factory.modifyDomain = (nextModifyDomain?: ModifyDomainFunc) => {\n        if (!nextModifyDomain) {\n            return modifyDomain;\n        }\n\n        modifyDomain = nextModifyDomain;\n        return _factory;\n    };\n\n    optionalParams.forEach((p) => {\n        _factory[p] = (...args) => {\n            if (!args.length) {\n                return optional[p];\n            }\n            optional[p] = args[0];\n            return _factory;\n        };\n    });\n\n    return _factory as AxisFactory;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport * as fc from \"d3fc/index.js\";\n\nexport const chartSvgFactory = (xAxis, yAxis) =>\n    chartFactory(xAxis, yAxis, (x, y) => x.svgPlotArea(y), false);\nexport const chartCanvasFactory = (xAxis, yAxis) =>\n    chartFactory(\n        xAxis,\n        yAxis,\n        (x, y) => {\n            return x.canvasPlotArea(y).svgPlotArea(fc.seriesSvgPoint());\n        },\n        true\n    );\n\nconst chartFactory = (xAxis, yAxis, cartesian, canvas) => {\n    let axisSplitter = null;\n    let altAxis = null;\n\n    const chart = fc\n        .chartCartesian({\n            xScale: xAxis.scale,\n            yScale: yAxis.scale,\n            xAxis: xAxis.component,\n            yAxis: yAxis.component,\n        })\n        .xDomain(xAxis.domain)\n        .xLabel(xAxis.label)\n        .xAxisHeight(xAxis.size)\n        .xDecorate(xAxis.decorate)\n        .xTickFormat(xAxis.tickFormatFunction)\n        .yDomain(yAxis.domain)\n        .yLabel(yAxis.label)\n        .yAxisWidth(yAxis.size)\n        .yDecorate(yAxis.decorate)\n        .yOrient(\"left\")\n        .yTickFormat(yAxis.tickFormatFunction);\n\n    if (xAxis.decorate) chart.xDecorate(xAxis.decorate);\n    if (yAxis.decorate) chart.yDecorate(yAxis.decorate);\n\n    // Padding defaults can be overridden\n    chart.xPaddingInner && chart.xPaddingInner(1);\n    chart.xPaddingOuter && chart.xPaddingOuter(0.5);\n    chart.yPaddingInner && chart.yPaddingInner(1);\n    chart.yPaddingOuter && chart.yPaddingOuter(0.5);\n\n    chart.axisSplitter = (...args) => {\n        if (!args.length) {\n            return axisSplitter;\n        }\n        axisSplitter = args[0];\n        return chart;\n    };\n\n    chart.altAxis = (...args) => {\n        if (!args.length) {\n            return altAxis;\n        }\n        altAxis = args[0];\n        return chart;\n    };\n\n    /**\n     * Mimics the previous D3FC API and returns the main plot area selection.\n     * Both chart types will have both layers, so this should be determined\n     * by the constructor's `canvas` property.\n     *\n     * @param  {...any} args If provided, this function will act as a setter.\n     * @returns\n     */\n    chart.plotArea = function (...args) {\n        if (args.length == 0) {\n            if (canvas) {\n                return this.canvasPlotArea();\n            } else {\n                return this.svgPlotArea();\n            }\n        } else {\n            return cartesian(this, ...args);\n        }\n    };\n\n    const oldDecorate = chart.decorate();\n    chart.decorate((container, data) => {\n        const plotArea = container.select(\"d3fc-svg.plot-area\");\n        const node = plotArea.select(\"svg\").node();\n        node.setAttribute(\n            \"viewBox\",\n            `0 0 ${plotArea.node().clientWidth} ${plotArea.node().clientHeight}`\n        );\n        node.setAttribute(\"preserveAspectRatio\", \"none\");\n\n        for (const axis of [\"x-axis\", \"y-axis\"]) {\n            container\n                .select(`d3fc-svg.${axis} svg`)\n                .node()\n                .setAttribute(\"preserveAspectRatio\", \"none\");\n        }\n\n        oldDecorate(container, data);\n\n        // Not sure why these are out of order ...\n        // https://github.com/d3fc/d3fc/blob/master/packages/d3fc-chart/README.md#changing-the-z-order-of-plot-areas\n        if (canvas) {\n            const svgPlotArea = container.select(\".svg-plot-area\").node();\n            const canvasPlotArea = container.select(\".canvas-plot-area\").node();\n            d3.selectAll([svgPlotArea, canvasPlotArea]).order();\n        }\n\n        if (!axisSplitter) return;\n\n        if (axisSplitter.haveSplit()) {\n            // Render a second axis on the right of the chart\n            const altData = axisSplitter.altData();\n\n            const y2AxisDataJoin = fc\n                .dataJoin(\"d3fc-svg\", \"y2-axis\")\n                .key((d) => d);\n            const ySeriesDataJoin = fc.dataJoin(\"g\", \"y-series\").key((d) => d);\n\n            // Column 5 of the grid\n            container\n                // .enter()\n                .append(\"div\")\n                .attr(\"class\", \"y-label right-label\")\n                .style(\"grid-column\", 5)\n                .style(\"-ms-grid-column\", 5)\n                .style(\"grid-row\", 3)\n                .style(\"-ms-grid-row\", 3)\n                .style(\"width\", altAxis.size || \"1em\")\n                .style(\"display\", \"flex\")\n                .style(\"align-items\", \"center\")\n                .style(\"justify-content\", \"center\")\n                .append(\"span\")\n                .attr(\"class\", \"y-label splitter-label\")\n                .style(\"transform\", \"rotate(-90deg)\");\n\n            const y2Scale = altAxis.scale.domain(altAxis.domain);\n            const yAxisComponent = altAxis.component.right(y2Scale);\n            yAxisComponent.tickFormat(altAxis.tickFormatFunction);\n            if (altAxis.decorate) yAxisComponent.decorate(altAxis.decorate);\n\n            // Render the axis\n            y2AxisDataJoin(container, [\"right\"])\n                .attr(\"class\", (d) => `y2-axis ${d}-axis`)\n                .on(\"measure\", function (event, d) {\n                    const { width, height } = event.detail;\n                    if (d === \"left\") {\n                        d3.select(event.currentTarget)\n                            .select(\"svg\")\n                            .attr(\"viewBox\", `${-width} 0 ${width} ${height}`)\n                            .attr(\"preserveAspectRatio\", \"none\");\n                    }\n                    y2Scale.range([height, 0]);\n                })\n                .on(\"draw\", function (event, d) {\n                    d3.select(event.currentTarget)\n                        .select(\"svg\")\n                        .call(yAxisComponent);\n                });\n\n            // Render all the series using either the primary or alternate\n            // y-scales\n            if (canvas) {\n                const drawMultiCanvasSeries = (selection) => {\n                    const canvasPlotArea = chart.plotArea();\n                    canvasPlotArea\n                        .context(selection.node().getContext(\"2d\"))\n                        .xScale(xAxis.scale);\n\n                    const yScales = [yAxis.scale, y2Scale];\n                    [data, altData].forEach((d, i) => {\n                        canvasPlotArea.yScale(yScales[i]);\n                        canvasPlotArea(d);\n                    });\n                };\n\n                container\n                    .select(\"d3fc-canvas.plot-area\")\n                    .on(\"draw\", function (event, d) {\n                        drawMultiCanvasSeries(\n                            d3.select(event.currentTarget).select(\"canvas\")\n                        );\n                    });\n            } else {\n                const drawMultiSvgSeries = function (selection) {\n                    const svgPlotArea = chart.plotArea();\n                    svgPlotArea.xScale(xAxis.scale);\n\n                    const yScales = [yAxis.scale, y2Scale];\n                    ySeriesDataJoin(selection, [data, altData]).each(\n                        (d, i, nodes) => {\n                            svgPlotArea.yScale(yScales[i]);\n                            d3.select(nodes[i]).datum(d).call(svgPlotArea);\n                        }\n                    );\n                };\n\n                container\n                    .select(\"d3fc-svg.plot-area\")\n                    .on(\"draw\", function (event, d) {\n                        drawMultiSvgSeries(\n                            d3.select(event.currentTarget).select(\"svg\")\n                        );\n                    });\n            }\n        }\n\n        // Render any UI elements the splitter component requires\n        axisSplitter(container);\n    });\n\n    return chart;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { NodeRect, Orient } from \"../types\";\n\nexport function getOrCreateElement(container, selector, createCallback) {\n    let element = container.select(selector);\n    return element.size() > 0 ? element : createCallback();\n}\n\nexport function isElementOverflowing(\n    containerRect: DOMRect,\n    innerElementRect: NodeRect,\n    direction: Orient = \"right\"\n) {\n    if (direction === \"right\" || direction === \"bottom\") {\n        return containerRect[direction] < innerElementRect[direction]\n            ? true\n            : false;\n    }\n\n    if (direction === \"left\" || direction === \"top\") {\n        return containerRect[direction] > innerElementRect[direction]\n            ? true\n            : false;\n    }\n\n    throw `Direction being checked for overflow is invalid: ${direction}`;\n}\n\nexport function isElementOverlapping(\n    axis: \"x\" | \"y\",\n    immovableRect: DOMRect,\n    elementRect: DOMRect,\n    fuzz = 0\n) {\n    const dimension = axis === \"x\" ? \"width\" : \"height\";\n\n    const immovableInnerPoint = immovableRect[axis];\n    const immovableOuterPoint = immovableRect[axis] + immovableRect[dimension];\n\n    const elementInnerPoint = elementRect[axis];\n    const elementOuterPoint = elementRect[axis] + elementRect[dimension];\n\n    const innerPointInside =\n        elementInnerPoint + fuzz > immovableInnerPoint &&\n        elementInnerPoint - fuzz < immovableOuterPoint;\n    const outerPointInside =\n        elementOuterPoint + fuzz > immovableInnerPoint &&\n        elementOuterPoint - fuzz < immovableOuterPoint;\n    const pointsEitherSide =\n        elementInnerPoint + fuzz < immovableInnerPoint &&\n        elementOuterPoint - fuzz > immovableOuterPoint;\n\n    return innerPointInside || outerPointInside || pointsEitherSide;\n}\n", "<ul id=\"tooltip-values\"></ul>\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Settings } from \"../types\";\n\nexport function toValue(type, value) {\n    switch (type) {\n        case \"date\":\n        case \"datetime\":\n            return value instanceof Date\n                ? value\n                : new Date(parseInt(value)).toLocaleString([], {\n                      dateStyle: \"short\",\n                      timeStyle: \"medium\",\n                  });\n        case \"integer\":\n            return parseInt(value, 10);\n        case \"float\":\n            return parseFloat(value);\n    }\n    return value;\n}\n\nexport function getGroupValues(data, settings) {\n    if (settings.crossValues.length === 0) return [];\n    if (data.crossValue.length === 0) return [];\n    const groupValues = (data.crossValue.split\n        ? data.crossValue.split(\"|\")\n        : Array.isArray(data.crossValue)\n        ? data.crossValue\n        : [data.crossValue]) || [data.key];\n    return groupValues.map((cross, i) => ({\n        name: settings.crossValues[i].name,\n        value: toValue(settings.crossValues[i].type, cross),\n    }));\n}\n\nexport function getSplitValues(data, settings: Settings) {\n    if (settings.splitValues.length === 0) return [];\n    let splitValues = [data.mainValue];\n\n    if (data.key) {\n        splitValues = data.key.split(\"|\");\n    } else if (data.mainValue?.split) {\n        splitValues = data.mainValue.split(\"|\");\n    }\n\n    return settings.splitValues.map((split, i) => ({\n        name: split.name,\n        value: toValue(split.type, splitValues[i]),\n    }));\n}\n\nexport function getDataValues(data, settings) {\n    if (settings.mainValues.length > 1) {\n        if (data.mainValues) {\n            return settings.mainValues.map((main, i) => ({\n                name: main.name,\n                value: toValue(main.type, data.mainValues[i]),\n            }));\n        }\n        return settings.mainValues.map((main) => ({\n            name: main.name,\n            value: toValue(\n                main.type,\n                data.row[getDataRowKey(data.key, main, settings.realValues)]\n            ),\n        }));\n    }\n    return [\n        {\n            name: settings.mainValues[0].name,\n            value: toValue(\n                settings.mainValues[0].type,\n                data.colorValue ||\n                    data.mainValue - data.baseValue ||\n                    data.mainValue ||\n                    data.mainValues\n            ),\n        },\n    ];\n}\n\nfunction getDataRowKey(key, main, realValues) {\n    if (!key) {\n        return main.name;\n    }\n\n    if (key.includes(\"|\")) {\n        const splitKey = key.split(\"|\");\n        const keyIncludesValidValueName =\n            splitKey[splitKey.length - 1] === main.name;\n\n        if (keyIncludesValidValueName) {\n            return key;\n        }\n\n        const keyIncludesInvalidValueName = realValues.includes(\n            splitKey[splitKey.length - 1]\n        );\n\n        const validKeyPrefix = keyIncludesInvalidValueName\n            ? splitKey.slice(0, splitKey.length - 1).join(\"|\")\n            : key;\n\n        return `${validKeyPrefix}|${main.name}`;\n    }\n\n    const keyIsRealValue = realValues.includes(key);\n\n    return keyIsRealValue ? main.name : `${key}|${main.name}`;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { select } from \"d3\";\nimport { getGroupValues, getSplitValues, getDataValues } from \"./selectionData\";\nimport { Settings } from \"../types\";\n\nexport function generateHtml(tooltipDiv, data, settings: Settings) {\n    const tooltipValues = getGroupValues(data, settings)\n        .concat(getSplitValues(data, settings))\n        .concat(getDataValues(data, settings));\n    addDataValues(tooltipDiv, tooltipValues);\n}\n\nfunction addDataValues(tooltipDiv, values) {\n    tooltipDiv\n        .select(\"#tooltip-values\")\n        .selectAll(\"li\")\n        .data(values)\n        .join(\"li\")\n        .each(function (d) {\n            select(this)\n                .text(`${d.name}: `)\n                .append(\"b\")\n                .text(formatNumber(d.value));\n        });\n}\n\nconst formatNumber = (value) =>\n    value === null || value === undefined\n        ? \"-\"\n        : value.toLocaleString(undefined, {\n              style: \"decimal\",\n              minimumFractionDigits: 2,\n              maximumFractionDigits: 2,\n          });\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { getGroupValues, getSplitValues, getDataValues } from \"./selectionData\";\n\nconst mapToFilter = (d) => [d.name, \"==\", d.value];\n\nexport const raiseEvent = (node, data, settings) => {\n    const column_names = getDataValues(data, settings).map((d) => d.name);\n    const groupFilters = getGroupValues(data, settings).map(mapToFilter);\n    const splitFilters = getSplitValues(data, settings).map(mapToFilter);\n\n    const filter = settings.filter.concat(groupFilters).concat(splitFilters);\n\n    node.dispatchEvent(\n        new CustomEvent(\"perspective-click\", {\n            bubbles: true,\n            composed: true,\n            detail: {\n                column_names,\n                config: { filter },\n                row: data.row,\n            },\n        })\n    );\n};\n\nexport const selectionEvent = () => {\n    let settings = null;\n\n    const _event = (selection) => {\n        const node = selection.node();\n        selection.on(\"click\", (_event, data) =>\n            raiseEvent(node, data, settings)\n        );\n    };\n\n    _event.settings = (...args) => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        return _event;\n    };\n\n    return _event;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { select } from \"d3\";\nimport { getChartContainer } from \"../plugin/root\";\nimport { getOrCreateElement, isElementOverflowing } from \"../utils/utils\";\nimport tooltipTemplate from \"../../html/tooltip.html\";\nimport { generateHtml } from \"./generateHTML\";\nimport { selectionEvent } from \"./selectionEvent\";\nimport { Settings } from \"../types\";\n\nexport interface ToolTip {\n    (selection: any): void; // double check the return value is void.\n\n    alwaysShow(): boolean;\n    alwaysShow(alwaysShow: boolean): ToolTip;\n\n    centered(): boolean;\n    centered(centered: boolean): ToolTip;\n\n    settings(): Settings;\n    settings(settings: Settings): ToolTip;\n}\n\nexport const tooltip = (): ToolTip => {\n    let alwaysShow = false;\n    let tooltipDiv = null;\n    let settings: Settings | null = null;\n    let centered = false;\n\n    const _tooltip: any = (selection) => {\n        const node = selection.node();\n\n        if (!node || !node.isConnected) {\n            hideTooltip(tooltipDiv);\n            return;\n        }\n\n        const container = select(getChartContainer(node));\n        tooltipDiv = getTooltipDiv(container);\n\n        const showTip = function (_event, data) {\n            generateHtml(tooltipDiv, data, settings);\n            const nodes = selection.nodes();\n            const i = nodes.indexOf(this);\n            showTooltip(container.node(), nodes[i], tooltipDiv, centered);\n            select(nodes[i]).style(\"opacity\", \"0.7\");\n        };\n\n        const hideTip = function (_event, _data) {\n            hideTooltip(tooltipDiv);\n            const nodes = selection.nodes();\n            const i = nodes.indexOf(this);\n            if (nodes) select(nodes[i]).style(\"opacity\", \"1\");\n        };\n\n        if (alwaysShow) {\n            selection.each(function (data) {\n                return showTip.call(this, undefined, data);\n            });\n        } else {\n            selection.on(\"mouseover\", showTip).on(\"mouseout\", hideTip);\n            selectionEvent().settings(settings)(selection);\n        }\n    };\n\n    _tooltip.alwaysShow = (...args: boolean[]): any => {\n        if (!args.length) {\n            return alwaysShow;\n        }\n        alwaysShow = args[0];\n        return _tooltip;\n    };\n\n    _tooltip.centered = (...args: boolean[]): any => {\n        if (!args.length) {\n            return centered;\n        }\n        centered = args[0];\n        return _tooltip;\n    };\n\n    _tooltip.settings = (...args: Settings[]): any => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        return _tooltip;\n    };\n\n    return _tooltip;\n};\n\nfunction getTooltipDiv(container) {\n    return getOrCreateElement(container, \"div.tooltip\", () =>\n        container\n            .append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"z-index\", 3)\n            .style(\"opacity\", 0)\n            .html(tooltipTemplate)\n    );\n}\n\nfunction showTooltip(containerNode, node, tooltipDiv, centered) {\n    const containerRect = containerNode.getBoundingClientRect();\n    const rect = node.getBoundingClientRect();\n\n    let left = rect.left + rect.width / 2 - containerRect.left;\n    let top = rect.top - containerRect.top + containerNode.scrollTop;\n\n    if (centered)\n        top =\n            rect.top +\n            rect.height / 2 -\n            containerRect.top +\n            containerNode.scrollTop;\n\n    tooltipDiv\n        .style(\"left\", `${left}px`)\n        .style(\"top\", `${top}px`)\n        // .transition()\n        // .duration(200)\n        .style(\"opacity\", 0.9);\n\n    if (centered) [left, top] = centerTip(tooltipDiv, containerRect);\n\n    shiftIfOverflowingChartArea(tooltipDiv, containerRect, left, top, centered);\n}\n\nfunction centerTip(tooltipDiv, containerRect) {\n    const tooltipDivRect = tooltipDiv.node().getBoundingClientRect();\n\n    const leftAdjust = tooltipDivRect.width / 2;\n    const newLeft = tooltipDivRect.left - leftAdjust - containerRect.left;\n    tooltipDiv.style(\"left\", `${newLeft}px`);\n\n    const topAdjust = tooltipDivRect.height / 2;\n    const newTop = tooltipDivRect.top - topAdjust - containerRect.top;\n    tooltipDiv.style(\"top\", `${newTop}px`);\n    return [newLeft, newTop];\n}\n\nfunction shiftIfOverflowingChartArea(\n    tooltipDiv,\n    containerRect,\n    left,\n    top,\n    centered = false\n) {\n    const tooltipDivRect = tooltipDiv.node().getBoundingClientRect();\n\n    if (isElementOverflowing(containerRect, tooltipDivRect)) {\n        const leftAdjust = tooltipDivRect.right - containerRect.right;\n        tooltipDiv.style(\"left\", `${left - leftAdjust}px`);\n    }\n\n    if (isElementOverflowing(containerRect, tooltipDivRect, \"bottom\")) {\n        const topAdjust = tooltipDivRect.bottom - containerRect.bottom;\n        tooltipDiv.style(\"top\", `${top - topAdjust}px`);\n    }\n\n    if (!centered) return;\n\n    if (isElementOverflowing(containerRect, tooltipDivRect, \"left\")) {\n        const leftAdjust = tooltipDivRect.left - containerRect.left;\n        tooltipDiv.style(\"left\", `${left - leftAdjust}px`);\n    }\n\n    if (isElementOverflowing(containerRect, tooltipDivRect, \"top\")) {\n        const topAdjust = tooltipDivRect.top - containerRect.top;\n        tooltipDiv.style(\"top\", `${top - topAdjust}px`);\n    }\n}\n\nfunction hideTooltip(tooltipDiv) {\n    if (tooltipDiv) {\n        tooltipDiv\n            // .transition()\n            // .duration(500)\n            .style(\"opacity\", 0);\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { tooltip } from \"../tooltip/tooltip\";\nimport { ScaleSequential, Settings } from \"../types\";\n\nexport function barSeries(\n    settings: Settings,\n    color: d3.ScaleOrdinal<string, unknown> | ScaleSequential\n) {\n    let series =\n        settings.mainValues.length > 1\n            ? fc.seriesSvgGrouped(fc.seriesSvgBar())\n            : fc.seriesSvgBar();\n\n    series = series.decorate((selection) => {\n        tooltip().settings(settings)(selection);\n        selection.style(\"fill\", (d) => color(d.key));\n    });\n\n    return fc\n        .autoBandwidth(minBandwidth(series))\n        .crossValue((d) => d.crossValue)\n        .mainValue((d) => (d.mainValue ? d.mainValue : 0))\n        .baseValue((d) => d.baseValue);\n}\n\nconst minBandwidth = (adaptee) => {\n    const min = (arg) => {\n        return adaptee(arg);\n    };\n\n    fc.rebindAll(min, adaptee);\n\n    min.bandwidth = (...args) => {\n        if (!args.length) {\n            return adaptee.bandwidth();\n        }\n        adaptee.bandwidth(Math.max(args[0], 1));\n        return min;\n    };\n\n    return min;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nexport function groupFromKey(key: string): string {\n    return key.split(\"|\").slice(0, -1).join(\"|\");\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Settings } from \"../types\";\n\n/**\n *  This function filters settings.data to get values corresponding to an input column.\n * It accomodates for split-by.\n * @param {*} settings\n * @param {string} column\n */\nexport function getValuesByColumn(\n    settings: Settings,\n    column: string | null\n): any[] {\n    return settings.data\n        .map((row) =>\n            Object.entries(row)\n                .filter(([k, v]) => k.split(\"|\").at(-1) === column && !!v)\n                .map(([_, v]) => v)\n        )\n        .flat();\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { groupFromKey } from \"./seriesKey\";\nimport { getValuesByColumn } from \"../data/utils\";\nimport { Settings } from \"../types\";\n\nexport function seriesColors(\n    settings: Settings\n): d3.ScaleOrdinal<string, unknown> | null {\n    const col =\n        settings.data && settings.data.length > 0 ? settings.data[0] : {};\n    const domain = Object.keys(col).filter((k) => k !== \"__ROW_PATH__\");\n    return colorScale().settings(settings).domain(domain)();\n}\n\nexport function seriesColorsFromColumn(\n    settings: Settings,\n    column\n): d3.ScaleOrdinal<string, unknown> | null {\n    const data = getValuesByColumn(settings, column);\n    const domain = [...new Set(data)].sort();\n    return colorScale().settings(settings).domain(domain)();\n}\n\nexport function seriesColorsFromDistinct(\n    settings: Settings,\n    data\n): d3.ScaleOrdinal<string, unknown> | null {\n    let domain = [...new Set(data)];\n    return colorScale().settings(settings).domain(domain)();\n}\n\nexport function seriesColorsFromGroups(\n    settings: Settings\n): d3.ScaleOrdinal<string, unknown> | null {\n    const col = settings.data[0] ?? {};\n    const inner = Object.keys(col)\n        .filter((k) => k !== \"__ROW_PATH__\")\n        .map((k) => groupFromKey(k));\n    const domain = [...new Set(inner)];\n    return colorScale().settings(settings).domain(domain)();\n}\n\ntype ColorScaleSettings = {\n    colorStyles?: any;\n};\n\ntype ColorScaleMapFunc = (d: any) => string;\n\ninterface ColorScale {\n    (): d3.ScaleOrdinal<string, unknown> | null;\n\n    settings(): Settings;\n    settings(nextSettings: Settings): ColorScale;\n\n    domain(): any[];\n    domain(nextDomain: any[]): ColorScale;\n\n    defaultColors(): string[];\n    defaultColors(nextDefaultColors: string[]): ColorScale;\n\n    mapFunction(): ColorScaleMapFunc;\n    mapFunction(nextMapFunction: ColorScaleMapFunc): ColorScale;\n}\n\nexport function colorScale(): ColorScale {\n    let domain = null;\n    let defaultColors: string[] | null = null;\n    let settings: ColorScaleSettings = {};\n    let mapFunction = (d) =>\n        withOpacity(d, settings.colorStyles && settings.colorStyles.opacity);\n\n    const colors: ColorScale = (): d3.ScaleOrdinal<string, unknown> | null => {\n        const styles = settings.colorStyles;\n        const defaults = defaultColors || [styles.series];\n        if (defaults || domain.length > 1) {\n            const range = domain.length > 1 ? styles.scheme : defaults;\n            return d3.scaleOrdinal(range.map(mapFunction)).domain(domain); // ordinal.js\n        }\n        return null;\n    };\n\n    colors.domain = (...args: any[][]): any => {\n        if (args.length === 0) {\n            return domain;\n        }\n        domain = args[0];\n        return colors;\n    };\n\n    colors.defaultColors = (...args: string[][]): any => {\n        if (!args.length) {\n            return defaultColors;\n        }\n        defaultColors = args[0];\n        return colors;\n    };\n\n    colors.mapFunction = (...args: ColorScaleMapFunc[]): any => {\n        if (!args.length) {\n            return mapFunction;\n        }\n        mapFunction = args[0];\n        return colors;\n    };\n\n    colors.settings = (...args: Settings[]): any => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n\n        return colors;\n    };\n\n    return colors as ColorScale;\n}\n\nexport function withoutOpacity(color) {\n    return setOpacity(1)(color);\n}\n\nexport function withOpacity(color, opacity = 0.5) {\n    return setOpacity(opacity)(color);\n}\n\nexport function setOpacity(opacity) {\n    return (color) => {\n        const decoded = d3.color(color);\n        if (decoded !== null && decoded !== undefined) {\n            decoded.opacity = opacity;\n        }\n        return decoded + \"\";\n    };\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { rebindAll } from \"d3fc/index.js\";\nimport { axisType } from \"./axisType\";\nimport { labelFunction as noLabel } from \"./noAxis\";\nimport { labelFunction as timeLabel } from \"./timeAxis\";\nimport { labelFunction as linearLabel } from \"./linearAxis\";\nimport { labelFunction as ordinalLabel } from \"./ordinalAxis\";\nimport { Settings } from \"../types\";\n\nconst labelFunctions = {\n    none: noLabel,\n    ordinal: ordinalLabel,\n    time: timeLabel,\n    linear: linearLabel,\n};\n\nexport interface LabelFunction {\n    // NOTE: this \"i\" is not used...\n    (d, i?: any): string;\n    valueName(): string;\n    valueName(nextValueName: string): this;\n}\n\nexport const labelFunction = (settings: Settings): LabelFunction => {\n    const base = axisType(settings);\n    let valueName = \"__ROW_PATH__\";\n    const fn = labelFunctions[base()];\n    const label: Partial<LabelFunction> = (d, _i) => {\n        return fn(valueName, settings)(d);\n    };\n\n    rebindAll(label, base);\n    label.valueName = (...args: string[]): any => {\n        if (!args.length) {\n            return valueName;\n        }\n\n        valueName = args[0];\n        return label;\n    };\n\n    return label as LabelFunction;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Settings } from \"../types\";\n\nexport function splitIntoMultiSeries(\n    settings: Settings,\n    data,\n    { stack = false, excludeEmpty = false } = {}\n) {\n    const useData = data || settings.data;\n\n    if (settings.splitValues.length > 0) {\n        return splitByValuesIntoMultiSeries(settings, useData, {\n            stack,\n            excludeEmpty,\n        });\n    }\n    return [useData];\n}\n\nfunction splitByValuesIntoMultiSeries(\n    settings,\n    data,\n    { stack = false, excludeEmpty = false }\n) {\n    // Create a series for each \"split\" value, each one containing all the\n    // \"aggregate\" values, and \"base\" values to offset it from the previous\n    // series\n    const multiSeries = {};\n\n    data.forEach((col) => {\n        // Split this column by \"split\", including multiple aggregates for each\n        const baseValues = {};\n        const split = {};\n\n        // Keys are of the form \"split1|split2|aggregate\"\n        Object.keys(col)\n            .filter((key) => key !== \"__ROW_PATH__\")\n            .filter(\n                (key) =>\n                    !excludeEmpty || (col[key] != null && col[key] != undefined)\n            )\n            .forEach((key) => {\n                const labels = key.split(\"|\");\n                // label=\"aggregate\"\n                const label = labels[labels.length - 1];\n                const value = col[key] || 0;\n                const baseKey = `${label}${value >= 0 ? \"+ve\" : \"-ve\"}`;\n                // splitName=\"split1|split2\"\n                const splitName = labels.slice(0, labels.length - 1).join(\"|\");\n\n                // Combine aggregate values for the same split in a single\n                // object\n                const splitValues = (split[splitName] = split[splitName] || {\n                    __ROW_PATH__: col.__ROW_PATH__,\n                });\n                const baseValue = baseValues[baseKey] || 0;\n\n                splitValues.__KEY__ = splitName;\n\n                // Assign the values for this split/aggregate\n                if (stack) {\n                    splitValues[label] = baseValue + value;\n                    splitValues[`__BASE_VALUE__${label}`] = baseValue;\n                    baseValues[baseKey] = splitValues[label];\n                } else {\n                    splitValues[label] = value;\n                }\n                splitValues.row = col;\n            });\n\n        // Push each object onto the correct series\n        Object.keys(split).forEach((splitName) => {\n            const series = (multiSeries[splitName] =\n                multiSeries[splitName] || []);\n            series.push(split[splitName]);\n        });\n    });\n\n    return Object.keys(multiSeries).map((k) => {\n        const series = multiSeries[k];\n        series.key = k;\n        return series;\n    });\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { labelFunction } from \"../axis/axisLabel\";\nimport { Settings } from \"../types\";\nimport { splitIntoMultiSeries } from \"./splitIntoMultiSeries\";\n\nexport function groupData(settings: Settings, data: any[]): any[] {\n    const stack = { stack: false };\n    const groupedSeries = splitIntoMultiSeries(settings, data, stack).map(\n        (data) => groupPointDataByMainValue(settings, data, stack)\n    );\n\n    if (settings.mainValues.length > 1) {\n        const flattenedSeries: any[] = groupedSeries.reduce((a, b) =>\n            a.concat(b)\n        );\n        return flattenedSeries;\n    }\n\n    return groupedSeries;\n}\n\nexport function groupAndStackData(settings: Settings, data) {\n    const stack = { stack: true };\n    return splitIntoMultiSeries(settings, data, stack).map((data) =>\n        groupPointDataByMainValue(settings, data, stack)\n    );\n}\n\nfunction seriesDataFn(settings: Settings, data, { stack = false }) {\n    const labelfn = labelFunction(settings);\n\n    return (mainValue) => {\n        const baseValue = (col) =>\n            stack ? col[`__BASE_VALUE__${mainValue.name}`] || 0 : 0;\n        const series = data.map((col, i) => ({\n            crossValue: labelfn(col, i),\n            mainValue: !!col[mainValue.name] ? col[mainValue.name] : null,\n            baseValue: baseValue(col),\n            key: col.__KEY__\n                ? `${col.__KEY__}|${mainValue.name}`\n                : mainValue.name,\n            row: col.row || col,\n        }));\n        series.key = series[0].key;\n        return series;\n    };\n}\n\nfunction groupPointDataByMainValue(\n    settings: Settings,\n    data,\n    { stack = false }\n) {\n    // Split data into a group for each aggregate (mainValue)\n    const seriesFn = seriesDataFn(settings, data, { stack });\n\n    if (settings.mainValues.length > 1) {\n        return settings.mainValues.map(seriesFn);\n    } else {\n        return seriesFn(settings.mainValues[0]);\n    }\n}\n", "export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n", "import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n", "import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n", "var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n", "var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n", "var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n", "function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n", "import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n", "import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n", "import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "export default function(update) {\n  return new Array(update.length);\n}\n", "import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like \u201C__proto__\u201D.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don\u2019t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n", "import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n", "import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n", "import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n", "export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n", "export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n", "export default function() {\n  return !this.node();\n}\n", "export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n", "import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n", "export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n", "import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  var node;\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : defaultView(node = this.node())\n          .getComputedStyle(node, null)\n          .getPropertyValue(name);\n}\n", "function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n", "function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n", "function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n", "function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n", "function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n", "function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n", "import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n", "import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n", "function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n", "export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n", "import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (event) {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n", "import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n", "import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n", "// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, \u00B1Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n", "import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n", "export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n", "export default function(x, p) {\n  x = x.toPrecision(p);\n\n  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (x[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      case \"e\": break out;\n      default: if (i0 > 0) i0 = 0; break;\n    }\n  }\n\n  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n}\n", "import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n", "import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n", "import formatDefault from \"./formatDefault\";\nimport formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"\": formatDefault,\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n", "import formatTypes from \"./formatTypes\";\n\n// [[fill]align][sign][symbol][0][width][,][.precision][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\nexport default function(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n  var match,\n      fill = match[1] || \" \",\n      align = match[2] || \">\",\n      sign = match[3] || \"-\",\n      symbol = match[4] || \"\",\n      zero = !!match[5],\n      width = match[6] && +match[6],\n      comma = !!match[7],\n      precision = match[8] && +match[8].slice(1),\n      type = match[9] || \"\";\n\n  // The \"n\" type is an alias for \",g\".\n  if (type === \"n\") comma = true, type = \"g\";\n\n  // Map invalid types to the default format.\n  else if (!formatTypes[type]) type = \"\";\n\n  // If zero fill is specified, padding goes after sign and before digits.\n  if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n  this.fill = fill;\n  this.align = align;\n  this.sign = sign;\n  this.symbol = symbol;\n  this.zero = zero;\n  this.width = width;\n  this.comma = comma;\n  this.precision = precision;\n  this.type = type;\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + this.type;\n};\n", "import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\u00B5\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nfunction identity(x) {\n  return x;\n}\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal;\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        type = specifier.type;\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = !type || /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? (type ? 6 : 12)\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Convert negative to positive, and compute the prefix.\n        // Note that -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n        // Perform the initial formatting.\n        value = formatType(value, precision);\n\n        // If the original value was negative, it may be rounded to zero during\n        // formatting; treat this as (positive) zero.\n        if (valueNegative) {\n          i = -1, n = value.length;\n          valueNegative = false;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), (48 < c && c < 58)\n                || (type === \"x\" && 96 < c && c < 103)\n                || (type === \"X\" && 64 < c && c < 71)) {\n              valueNegative = true;\n              break;\n            }\n          }\n        }\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer \u201Cvalue\u201D part that can be\n        // grouped, and fractional or exponential \u201Csuffix\u201D part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": return valuePrefix + value + valueSuffix + padding;\n        case \"=\": return valuePrefix + padding + value + valueSuffix;\n        case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n      }\n      return padding + valuePrefix + value + valueSuffix;\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n", "import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n", "import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n", "var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n", "export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n", "import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n", "var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n", "var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n", "export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n", "import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it\u2019s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n", "var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n", "export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n", "import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n", "export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n", "import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {deg2rad, rad2deg} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n", "export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n", "import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n", "export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n", "import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n", "export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n", "import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n", "import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n", "import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n", "import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "export default function(x) {\n  return +x;\n}\n", "import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function deinterpolateLinear(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(b);\n}\n\nfunction deinterpolateClamp(deinterpolate) {\n  return function(a, b) {\n    var d = deinterpolate(a = +a, b = +b);\n    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n  };\n}\n\nfunction reinterpolateClamp(reinterpolate) {\n  return function(a, b) {\n    var r = reinterpolate(a = +a, b = +b);\n    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n  };\n}\n\nfunction bimap(domain, range, deinterpolate, reinterpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, deinterpolate, reinterpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = deinterpolate(domain[i], domain[i + 1]);\n    r[i] = reinterpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp());\n}\n\n// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\nexport default function continuous(deinterpolate, reinterpolate) {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      clamp = false,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);\n  }\n\n  scale.invert = function(y) {\n    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, rescale()) : clamp;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  return rescale();\n}\n", "import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(domain, count, specifier) {\n  var start = domain[0],\n      stop = domain[domain.length - 1],\n      step = tickStep(start, stop, count == null ? 10 : count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n", "import {ticks, tickStep} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return tickFormat(domain(), count, specifier);\n  };\n\n  scale.nice = function(count) {\n    var d = domain(),\n        i = d.length - 1,\n        n = count == null ? 10 : count,\n        start = d[0],\n        stop = d[i],\n        step = tickStep(start, stop, n);\n\n    if (step) {\n      step = tickStep(Math.floor(start / step) * step, Math.ceil(stop / step) * step, n);\n      d[0] = Math.floor(start / step) * step;\n      d[i] = Math.ceil(stop / step) * step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(deinterpolate, reinterpolate);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  return linearish(scale);\n}\n", "import {bisector, tickStep} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport {map} from \"./array\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport nice from \"./nice\";\n\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(deinterpolate, reinterpolate),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  var tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop, step) {\n    if (interval == null) interval = 10;\n\n    // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = tickStep(start, stop, interval);\n        interval = millisecond;\n      }\n    }\n\n    return step == null ? interval : interval.every(step);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(map.call(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval, step) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1, step);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval, step) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n        ? domain(nice(d, interval))\n        : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\n\nexport default function() {\n  return calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);\n}\n", "export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n", "import colors from \"./colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n", "import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n", "import colors from \"./colors\";\n\nexport default colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n", "import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n", "import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n", "import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n", "import colors from \"./colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n", "export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n", "import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n", "var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n", "import range from \"./range\";\n\nvar e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var step = tickStep(start, stop, count);\n  return range(\n    Math.ceil(start / step) * step,\n    Math.floor(stop / step) * step + step / 2, // inclusive\n    step\n  );\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n", "export default function(array, f) {\n  var i = -1,\n      n = array.length,\n      a,\n      b;\n\n  if (f == null) {\n    while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n    while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n  }\n\n  else {\n    while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n    while (++i < n) if ((b = f(array[i], i, array)) != null && b > a) a = b;\n  }\n\n  return a;\n}\n", "export default function(array, f) {\n  var s = 0,\n      n = array.length,\n      a,\n      i = -1;\n\n  if (f == null) {\n    while (++i < n) if (a = +array[i]) s += a; // Note: zero and null are equivalent.\n  }\n\n  else {\n    while (++i < n) if (a = +f(array[i], i, array)) s += a;\n  }\n\n  return s;\n}\n", "import { select } from \"d3-selection\"\nimport { format, formatPrefix } from \"d3-format\"\n\nconst d3_identity = d => d\n\nconst d3_reverse = arr => {\n  const mirror = []\n  for (let i = 0, l = arr.length; i < l; i++) {\n    mirror[i] = arr[l - i - 1]\n  }\n  return mirror\n}\n\n//Text wrapping code adapted from Mike Bostock\nconst d3_textWrapping = (text, width) => {\n  text.each(function() {\n    var text = select(this),\n      words = text\n        .text()\n        .split(/\\s+/)\n        .reverse(),\n      word,\n      line = [],\n      lineNumber = 0,\n      lineHeight = 1.2, //ems\n      y = text.attr(\"y\"),\n      dy = parseFloat(text.attr(\"dy\")) || 0,\n      tspan = text\n        .text(null)\n        .append(\"tspan\")\n        .attr(\"x\", 0)\n        .attr(\"dy\", dy + \"em\")\n\n    while ((word = words.pop())) {\n      line.push(word)\n      tspan.text(line.join(\" \"))\n      if (tspan.node().getComputedTextLength() > width && line.length > 1) {\n        line.pop()\n        tspan.text(line.join(\" \"))\n        line = [word]\n        tspan = text\n          .append(\"tspan\")\n          .attr(\"x\", 0)\n          .attr(\"dy\", lineHeight + dy + \"em\")\n          .text(word)\n      }\n    }\n  })\n}\n\nconst d3_mergeLabels = (gen = [], labels, domain, range, labelDelimiter) => {\n  if (typeof labels === \"object\") {\n    if (labels.length === 0) return gen\n\n    let i = labels.length\n    for (; i < gen.length; i++) {\n      labels.push(gen[i])\n    }\n    return labels\n  } else if (typeof labels === \"function\") {\n    const customLabels = []\n    const genLength = gen.length\n    for (let i = 0; i < genLength; i++) {\n      customLabels.push(\n        labels({\n          i,\n          genLength,\n          generatedLabels: gen,\n          domain,\n          range,\n          labelDelimiter\n        })\n      )\n    }\n    return customLabels\n  }\n\n  return gen\n}\n\nconst d3_linearLegend = (scale, cells, labelFormat) => {\n  let data = []\n\n  if (cells.length > 1) {\n    data = cells\n  } else {\n    const domain = scale.domain(),\n      increment = (domain[domain.length - 1] - domain[0]) / (cells - 1)\n    let i = 0\n\n    for (; i < cells; i++) {\n      data.push(domain[0] + i * increment)\n    }\n  }\n\n  const labels = data.map(labelFormat)\n  return {\n    data: data,\n    labels: labels,\n    feature: d => scale(d)\n  }\n}\n\nconst d3_quantLegend = (scale, labelFormat, labelDelimiter) => {\n  const labels = scale.range().map(d => {\n    const invert = scale.invertExtent(d)\n    return (\n      labelFormat(invert[0]) +\n      \" \" +\n      labelDelimiter +\n      \" \" +\n      labelFormat(invert[1])\n    )\n  })\n\n  return {\n    data: scale.range(),\n    labels: labels,\n    feature: d3_identity\n  }\n}\n\nconst d3_ordinalLegend = scale => ({\n  data: scale.domain(),\n  labels: scale.domain(),\n  feature: d => scale(d)\n})\n\nconst d3_cellOver = (cellDispatcher, d, obj) => {\n  cellDispatcher.call(\"cellover\", obj, d)\n}\n\nconst d3_cellOut = (cellDispatcher, d, obj) => {\n  cellDispatcher.call(\"cellout\", obj, d)\n}\n\nconst d3_cellClick = (cellDispatcher, d, obj) => {\n  cellDispatcher.call(\"cellclick\", obj, d)\n}\n\nexport default {\n  d3_drawShapes: (\n    shape,\n    shapes,\n    shapeHeight,\n    shapeWidth,\n    shapeRadius,\n    path\n  ) => {\n    if (shape === \"rect\") {\n      shapes.attr(\"height\", shapeHeight).attr(\"width\", shapeWidth)\n    } else if (shape === \"circle\") {\n      shapes.attr(\"r\", shapeRadius)\n    } else if (shape === \"line\") {\n      shapes\n        .attr(\"x1\", 0)\n        .attr(\"x2\", shapeWidth)\n        .attr(\"y1\", 0)\n        .attr(\"y2\", 0)\n    } else if (shape === \"path\") {\n      shapes.attr(\"d\", path)\n    }\n  },\n\n  d3_addText: function(svg, enter, labels, classPrefix, labelWidth) {\n    enter.append(\"text\").attr(\"class\", classPrefix + \"label\")\n    const text = svg\n      .selectAll(`g.${classPrefix}cell text.${classPrefix}label`)\n      .data(labels)\n      .text(d3_identity)\n\n    if (labelWidth) {\n      svg\n        .selectAll(`g.${classPrefix}cell text.${classPrefix}label`)\n        .call(d3_textWrapping, labelWidth)\n    }\n\n    return text\n  },\n\n  d3_calcType: function(\n    scale,\n    ascending,\n    cells,\n    labels,\n    labelFormat,\n    labelDelimiter\n  ) {\n    const type = scale.invertExtent\n      ? d3_quantLegend(scale, labelFormat, labelDelimiter)\n      : scale.ticks\n        ? d3_linearLegend(scale, cells, labelFormat)\n        : d3_ordinalLegend(scale)\n\n    //for d3.scaleSequential that doesn't have a range function\n    const range = (scale.range && scale.range()) || scale.domain()\n    type.labels = d3_mergeLabels(\n      type.labels,\n      labels,\n      scale.domain(),\n      range,\n      labelDelimiter\n    )\n\n    if (ascending) {\n      type.labels = d3_reverse(type.labels)\n      type.data = d3_reverse(type.data)\n    }\n\n    return type\n  },\n\n  d3_filterCells: (type, cellFilter) => {\n    let filterCells = type.data\n      .map((d, i) => ({ data: d, label: type.labels[i] }))\n      .filter(cellFilter)\n    const dataValues = filterCells.map(d => d.data)\n    const labelValues = filterCells.map(d => d.label)\n    type.data = type.data.filter(d => dataValues.indexOf(d) !== -1)\n    type.labels = type.labels.filter(d => labelValues.indexOf(d) !== -1)\n    return type\n  },\n\n  d3_placement: (orient, cell, cellTrans, text, textTrans, labelAlign) => {\n    cell.attr(\"transform\", cellTrans)\n    text.attr(\"transform\", textTrans)\n    if (orient === \"horizontal\") {\n      text.style(\"text-anchor\", labelAlign)\n    }\n  },\n\n  d3_addEvents: function(cells, dispatcher) {\n    cells\n      .on(\"mouseover.legend\", function(d) {\n        d3_cellOver(dispatcher, d, this)\n      })\n      .on(\"mouseout.legend\", function(d) {\n        d3_cellOut(dispatcher, d, this)\n      })\n      .on(\"click.legend\", function(d) {\n        d3_cellClick(dispatcher, d, this)\n      })\n  },\n\n  d3_title: (svg, title, classPrefix, titleWidth) => {\n    if (title !== \"\") {\n      const titleText = svg.selectAll(\"text.\" + classPrefix + \"legendTitle\")\n\n      titleText\n        .data([title])\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", classPrefix + \"legendTitle\")\n\n      svg.selectAll(\"text.\" + classPrefix + \"legendTitle\").text(title)\n\n      if (titleWidth) {\n        svg\n          .selectAll(\"text.\" + classPrefix + \"legendTitle\")\n          .call(d3_textWrapping, titleWidth)\n      }\n\n      const cellsSvg = svg.select(\".\" + classPrefix + \"legendCells\")\n      const yOffset = svg\n          .select(\".\" + classPrefix + \"legendTitle\")\n          .nodes()\n          .map(d => d.getBBox().height)[0],\n        xOffset = -cellsSvg.nodes().map(function(d) {\n          return d.getBBox().x\n        })[0]\n      cellsSvg.attr(\"transform\", \"translate(\" + xOffset + \",\" + yOffset + \")\")\n    }\n  },\n\n  d3_defaultLocale: {\n    format,\n    formatPrefix\n  },\n\n  d3_defaultFormatSpecifier: \".01f\",\n\n  d3_defaultDelimiter: \"to\"\n}\n", "import helper from \"./legend\"\nimport { dispatch } from \"d3-dispatch\"\nimport { scaleLinear } from \"d3-scale\"\nimport { formatLocale, formatSpecifier } from \"d3-format\"\n\nimport { sum } from \"d3-array\"\n\nexport default function color() {\n  let scale = scaleLinear(),\n    shape = \"rect\",\n    shapeWidth = 15,\n    shapeHeight = 15,\n    shapeRadius = 10,\n    shapePadding = 2,\n    cells = [5],\n    cellFilter,\n    labels = [],\n    classPrefix = \"\",\n    useClass = false,\n    title = \"\",\n    locale = helper.d3_defaultLocale,\n    specifier = helper.d3_defaultFormatSpecifier,\n    labelOffset = 10,\n    labelAlign = \"middle\",\n    labelDelimiter = helper.d3_defaultDelimiter,\n    labelWrap,\n    orient = \"vertical\",\n    ascending = false,\n    path,\n    titleWidth,\n    legendDispatcher = dispatch(\"cellover\", \"cellout\", \"cellclick\")\n\n  function legend(svg) {\n    const type = helper.d3_calcType(\n        scale,\n        ascending,\n        cells,\n        labels,\n        locale.format(specifier),\n        labelDelimiter\n      ),\n      legendG = svg.selectAll(\"g\").data([scale])\n\n    legendG\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", classPrefix + \"legendCells\")\n\n    if (cellFilter) {\n      helper.d3_filterCells(type, cellFilter)\n    }\n\n    let cell = svg\n      .select(\".\" + classPrefix + \"legendCells\")\n      .selectAll(\".\" + classPrefix + \"cell\")\n      .data(type.data)\n\n    const cellEnter = cell\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", classPrefix + \"cell\")\n    cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\")\n\n    let shapes = svg\n      .selectAll(\n        \"g.\" + classPrefix + \"cell \" + shape + \".\" + classPrefix + \"swatch\"\n      )\n      .data(type.data)\n\n    //add event handlers\n    helper.d3_addEvents(cellEnter, legendDispatcher)\n\n    cell\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .remove()\n    shapes\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .remove()\n\n    shapes = shapes.merge(shapes)\n\n    helper.d3_drawShapes(\n      shape,\n      shapes,\n      shapeHeight,\n      shapeWidth,\n      shapeRadius,\n      path\n    )\n    const text = helper.d3_addText(\n      svg,\n      cellEnter,\n      type.labels,\n      classPrefix,\n      labelWrap\n    )\n\n    // we need to merge the selection, otherwise changes in the legend (e.g. change of orientation) are applied only to the new cells and not the existing ones.\n    cell = cellEnter.merge(cell)\n\n    // sets placement\n    const textSize = text.nodes().map(d => d.getBBox()),\n      shapeSize = shapes.nodes().map(d => d.getBBox())\n    //sets scale\n    //everything is fill except for line which is stroke,\n    if (!useClass) {\n      if (shape == \"line\") {\n        shapes.style(\"stroke\", type.feature)\n      } else {\n        shapes.style(\"fill\", type.feature)\n      }\n    } else {\n      shapes.attr(\"class\", d => `${classPrefix}swatch ${type.feature(d)}`)\n    }\n\n    let cellTrans,\n      textTrans,\n      textAlign = labelAlign == \"start\" ? 0 : labelAlign == \"middle\" ? 0.5 : 1\n\n    //positions cells and text\n    if (orient === \"vertical\") {\n      const cellSize = textSize.map((d, i) =>\n        Math.max(d.height, shapeSize[i].height)\n      )\n\n      cellTrans = (d, i) => {\n        const height = sum(cellSize.slice(0, i))\n        return `translate(0, ${height + i * shapePadding})`\n      }\n\n      textTrans = (d, i) =>\n        `translate( ${shapeSize[i].width +\n          shapeSize[i].x +\n          labelOffset}, ${shapeSize[i].y + shapeSize[i].height / 2 + 5})`\n    } else if (orient === \"horizontal\") {\n      cellTrans = (d, i) =>\n        `translate(${i * (shapeSize[i].width + shapePadding)},0)`\n      textTrans = (d, i) => `translate(${shapeSize[i].width * textAlign +\n        shapeSize[i].x},\n          ${shapeSize[i].height + shapeSize[i].y + labelOffset + 8})`\n    }\n\n    helper.d3_placement(orient, cell, cellTrans, text, textTrans, labelAlign)\n    helper.d3_title(svg, title, classPrefix, titleWidth)\n\n    cell.transition().style(\"opacity\", 1)\n  }\n\n  legend.scale = function(_) {\n    if (!arguments.length) return scale\n    scale = _\n    return legend\n  }\n\n  legend.cells = function(_) {\n    if (!arguments.length) return cells\n    if (_.length > 1 || _ >= 2) {\n      cells = _\n    }\n    return legend\n  }\n\n  legend.cellFilter = function(_) {\n    if (!arguments.length) return cellFilter\n    cellFilter = _\n    return legend\n  }\n\n  legend.shape = function(_, d) {\n    if (!arguments.length) return shape\n    if (\n      _ == \"rect\" ||\n      _ == \"circle\" ||\n      _ == \"line\" ||\n      (_ == \"path\" && typeof d === \"string\")\n    ) {\n      shape = _\n      path = d\n    }\n    return legend\n  }\n\n  legend.shapeWidth = function(_) {\n    if (!arguments.length) return shapeWidth\n    shapeWidth = +_\n    return legend\n  }\n\n  legend.shapeHeight = function(_) {\n    if (!arguments.length) return shapeHeight\n    shapeHeight = +_\n    return legend\n  }\n\n  legend.shapeRadius = function(_) {\n    if (!arguments.length) return shapeRadius\n    shapeRadius = +_\n    return legend\n  }\n\n  legend.shapePadding = function(_) {\n    if (!arguments.length) return shapePadding\n    shapePadding = +_\n    return legend\n  }\n\n  legend.labels = function(_) {\n    if (!arguments.length) return labels\n    labels = _\n    return legend\n  }\n\n  legend.labelAlign = function(_) {\n    if (!arguments.length) return labelAlign\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _\n    }\n    return legend\n  }\n\n  legend.locale = function(_) {\n    if (!arguments.length) return locale\n    locale = formatLocale(_)\n    return legend\n  }\n\n  legend.labelFormat = function(_) {\n    if (!arguments.length) return legend.locale().format(specifier)\n    specifier = formatSpecifier(_)\n    return legend\n  }\n\n  legend.labelOffset = function(_) {\n    if (!arguments.length) return labelOffset\n    labelOffset = +_\n    return legend\n  }\n\n  legend.labelDelimiter = function(_) {\n    if (!arguments.length) return labelDelimiter\n    labelDelimiter = _\n    return legend\n  }\n\n  legend.labelWrap = function(_) {\n    if (!arguments.length) return labelWrap\n    labelWrap = _\n    return legend\n  }\n\n  legend.useClass = function(_) {\n    if (!arguments.length) return useClass\n    if (_ === true || _ === false) {\n      useClass = _\n    }\n    return legend\n  }\n\n  legend.orient = function(_) {\n    if (!arguments.length) return orient\n    _ = _.toLowerCase()\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _\n    }\n    return legend\n  }\n\n  legend.ascending = function(_) {\n    if (!arguments.length) return ascending\n    ascending = !!_\n    return legend\n  }\n\n  legend.classPrefix = function(_) {\n    if (!arguments.length) return classPrefix\n    classPrefix = _\n    return legend\n  }\n\n  legend.title = function(_) {\n    if (!arguments.length) return title\n    title = _\n    return legend\n  }\n\n  legend.titleWidth = function(_) {\n    if (!arguments.length) return titleWidth\n    titleWidth = _\n    return legend\n  }\n\n  legend.textWrap = function(_) {\n    if (!arguments.length) return textWrap\n    textWrap = _\n    return legend\n  }\n\n  legend.on = function() {\n    const value = legendDispatcher.on.apply(legendDispatcher, arguments)\n    return value === legendDispatcher ? legend : value\n  }\n\n  return legend\n}\n", "import helper from \"./legend\"\nimport { dispatch } from \"d3-dispatch\"\nimport { scaleLinear } from \"d3-scale\"\nimport { formatLocale, formatSpecifier } from \"d3-format\"\nimport { sum, max } from \"d3-array\"\n\nexport default function size() {\n  let scale = scaleLinear(),\n    shape = \"rect\",\n    shapeWidth = 15,\n    shapePadding = 2,\n    cells = [5],\n    cellFilter,\n    labels = [],\n    classPrefix = \"\",\n    title = \"\",\n    locale = helper.d3_defaultLocale,\n    specifier = helper.d3_defaultFormatSpecifier,\n    labelOffset = 10,\n    labelAlign = \"middle\",\n    labelDelimiter = helper.d3_defaultDelimiter,\n    labelWrap,\n    orient = \"vertical\",\n    ascending = false,\n    path,\n    titleWidth,\n    legendDispatcher = dispatch(\"cellover\", \"cellout\", \"cellclick\")\n\n  function legend(svg) {\n    const type = helper.d3_calcType(\n        scale,\n        ascending,\n        cells,\n        labels,\n        locale.format(specifier),\n        labelDelimiter\n      ),\n      legendG = svg.selectAll(\"g\").data([scale])\n\n    if (cellFilter) {\n      helper.d3_filterCells(type, cellFilter)\n    }\n\n    legendG\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", classPrefix + \"legendCells\")\n\n    let cell = svg\n      .select(\".\" + classPrefix + \"legendCells\")\n      .selectAll(\".\" + classPrefix + \"cell\")\n      .data(type.data)\n    const cellEnter = cell\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", classPrefix + \"cell\")\n    cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\")\n\n    let shapes = svg.selectAll(\n      \"g.\" + classPrefix + \"cell \" + shape + \".\" + classPrefix + \"swatch\"\n    )\n\n    //add event handlers\n    helper.d3_addEvents(cellEnter, legendDispatcher)\n\n    cell\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .remove()\n\n    shapes\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .remove()\n    shapes = shapes.merge(shapes)\n\n    //creates shape\n    if (shape === \"line\") {\n      helper.d3_drawShapes(shape, shapes, 0, shapeWidth)\n      shapes.attr(\"stroke-width\", type.feature)\n    } else {\n      helper.d3_drawShapes(\n        shape,\n        shapes,\n        type.feature,\n        type.feature,\n        type.feature,\n        path\n      )\n    }\n\n    const text = helper.d3_addText(\n      svg,\n      cellEnter,\n      type.labels,\n      classPrefix,\n      labelWrap\n    )\n\n    // we need to merge the selection, otherwise changes in the legend (e.g. change of orientation) are applied only to the new cells and not the existing ones.\n    cell = cellEnter.merge(cell)\n\n    //sets placement\n\n    const textSize = text.nodes().map(d => d.getBBox()),\n      shapeSize = shapes.nodes().map((d, i) => {\n        const bbox = d.getBBox()\n        const stroke = scale(type.data[i])\n\n        if (shape === \"line\" && orient === \"horizontal\") {\n          bbox.height = bbox.height + stroke\n        } else if (shape === \"line\" && orient === \"vertical\") {\n          bbox.width = bbox.width\n        }\n        return bbox\n      })\n\n    const maxH = max(shapeSize, d => d.height + d.y),\n      maxW = max(shapeSize, d => d.width + d.x)\n\n    let cellTrans,\n      textTrans,\n      textAlign = labelAlign == \"start\" ? 0 : labelAlign == \"middle\" ? 0.5 : 1\n\n    //positions cells and text\n    if (orient === \"vertical\") {\n      const cellSize = textSize.map((d, i) =>\n        Math.max(d.height, shapeSize[i].height)\n      )\n      const y =\n        shape == \"circle\" || shape == \"line\" ? shapeSize[0].height / 2 : 0\n      cellTrans = (d, i) => {\n        const height = sum(cellSize.slice(0, i))\n\n        return `translate(0, ${y + height + i * shapePadding})`\n      }\n\n      textTrans = (d, i) => `translate( ${maxW + labelOffset},\n          ${shapeSize[i].y + shapeSize[i].height / 2 + 5})`\n    } else if (orient === \"horizontal\") {\n      cellTrans = (d, i) => {\n        const width = sum(shapeSize.slice(0, i), d => d.width)\n        const y = shape == \"circle\" || shape == \"line\" ? maxH / 2 : 0\n        return `translate(${width + i * shapePadding}, ${y})`\n      }\n\n      const offset = shape == \"line\" ? maxH / 2 : maxH\n      textTrans = (d, i) => {\n        return `translate( ${shapeSize[i].width * textAlign + shapeSize[i].x},\n              ${offset + labelOffset})`\n      }\n    }\n\n    helper.d3_placement(orient, cell, cellTrans, text, textTrans, labelAlign)\n    helper.d3_title(svg, title, classPrefix, titleWidth)\n\n    cell.transition().style(\"opacity\", 1)\n  }\n\n  legend.scale = function(_) {\n    if (!arguments.length) return scale\n    scale = _\n    return legend\n  }\n\n  legend.cells = function(_) {\n    if (!arguments.length) return cells\n    if (_.length > 1 || _ >= 2) {\n      cells = _\n    }\n    return legend\n  }\n\n  legend.cellFilter = function(_) {\n    if (!arguments.length) return cellFilter\n    cellFilter = _\n    return legend\n  }\n\n  legend.shape = function(_, d) {\n    if (!arguments.length) return shape\n    if (_ == \"rect\" || _ == \"circle\" || _ == \"line\") {\n      shape = _\n      path = d\n    }\n    return legend\n  }\n\n  legend.shapeWidth = function(_) {\n    if (!arguments.length) return shapeWidth\n    shapeWidth = +_\n    return legend\n  }\n\n  legend.shapePadding = function(_) {\n    if (!arguments.length) return shapePadding\n    shapePadding = +_\n    return legend\n  }\n\n  legend.labels = function(_) {\n    if (!arguments.length) return labels\n    labels = _\n    return legend\n  }\n\n  legend.labelAlign = function(_) {\n    if (!arguments.length) return labelAlign\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _\n    }\n    return legend\n  }\n\n  legend.locale = function(_) {\n    if (!arguments.length) return locale\n    locale = formatLocale(_)\n    return legend\n  }\n\n  legend.labelFormat = function(_) {\n    if (!arguments.length) return legend.locale().format(specifier)\n    specifier = formatSpecifier(_)\n    return legend\n  }\n\n  legend.labelOffset = function(_) {\n    if (!arguments.length) return labelOffset\n    labelOffset = +_\n    return legend\n  }\n\n  legend.labelDelimiter = function(_) {\n    if (!arguments.length) return labelDelimiter\n    labelDelimiter = _\n    return legend\n  }\n\n  legend.labelWrap = function(_) {\n    if (!arguments.length) return labelWrap\n    labelWrap = _\n    return legend\n  }\n\n  legend.orient = function(_) {\n    if (!arguments.length) return orient\n    _ = _.toLowerCase()\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _\n    }\n    return legend\n  }\n\n  legend.ascending = function(_) {\n    if (!arguments.length) return ascending\n    ascending = !!_\n    return legend\n  }\n\n  legend.classPrefix = function(_) {\n    if (!arguments.length) return classPrefix\n    classPrefix = _\n    return legend\n  }\n\n  legend.title = function(_) {\n    if (!arguments.length) return title\n    title = _\n    return legend\n  }\n\n  legend.titleWidth = function(_) {\n    if (!arguments.length) return titleWidth\n    titleWidth = _\n    return legend\n  }\n\n  legend.on = function() {\n    const value = legendDispatcher.on.apply(legendDispatcher, arguments)\n    return value === legendDispatcher ? legend : value\n  }\n\n  return legend\n}\n", "import helper from \"./legend\"\nimport { dispatch } from \"d3-dispatch\"\nimport { scaleLinear } from \"d3-scale\"\nimport { formatLocale, formatSpecifier } from \"d3-format\"\nimport { sum, max } from \"d3-array\"\n\nexport default function symbol() {\n  let scale = scaleLinear(),\n    shape = \"path\",\n    shapeWidth = 15,\n    shapeHeight = 15,\n    shapeRadius = 10,\n    shapePadding = 5,\n    cells = [5],\n    cellFilter,\n    labels = [],\n    classPrefix = \"\",\n    title = \"\",\n    locale = helper.d3_defaultLocale,\n    specifier = helper.d3_defaultFormatSpecifier,\n    labelAlign = \"middle\",\n    labelOffset = 10,\n    labelDelimiter = helper.d3_defaultDelimiter,\n    labelWrap,\n    orient = \"vertical\",\n    ascending = false,\n    titleWidth,\n    legendDispatcher = dispatch(\"cellover\", \"cellout\", \"cellclick\")\n\n  function legend(svg) {\n    const type = helper.d3_calcType(\n        scale,\n        ascending,\n        cells,\n        labels,\n        locale.format(specifier),\n        labelDelimiter\n      ),\n      legendG = svg.selectAll(\"g\").data([scale])\n\n    if (cellFilter) {\n      helper.d3_filterCells(type, cellFilter)\n    }\n\n    legendG\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", classPrefix + \"legendCells\")\n\n    let cell = svg\n      .select(\".\" + classPrefix + \"legendCells\")\n      .selectAll(\".\" + classPrefix + \"cell\")\n      .data(type.data)\n    const cellEnter = cell\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", classPrefix + \"cell\")\n    cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\")\n\n    let shapes = svg.selectAll(\"g.\" + classPrefix + \"cell \" + shape + \".\" + classPrefix + \"swatch\")\n\n    //add event handlers\n    helper.d3_addEvents(cellEnter, legendDispatcher)\n\n    //remove old shapes\n    cell\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .remove()\n    shapes\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .remove()\n    shapes = shapes.merge(shapes)\n\n    helper.d3_drawShapes(\n      shape,\n      shapes,\n      shapeHeight,\n      shapeWidth,\n      shapeRadius,\n      type.feature\n    )\n    const text = helper.d3_addText(\n      svg,\n      cellEnter,\n      type.labels,\n      classPrefix,\n      labelWrap\n    )\n\n    // we need to merge the selection, otherwise changes in the legend (e.g. change of orientation) are applied only to the new cells and not the existing ones.\n    cell = cellEnter.merge(cell)\n\n    // sets placement\n    const textSize = text.nodes().map(d => d.getBBox()),\n      shapeSize = shapes.nodes().map(d => d.getBBox())\n\n    const maxH = max(shapeSize, d => d.height),\n      maxW = max(shapeSize, d => d.width)\n\n    let cellTrans,\n      textTrans,\n      textAlign = labelAlign == \"start\" ? 0 : labelAlign == \"middle\" ? 0.5 : 1\n\n    //positions cells and text\n    if (orient === \"vertical\") {\n      const cellSize = textSize.map((d, i) => Math.max(maxH, d.height))\n\n      cellTrans = (d, i) => {\n        const height = sum(cellSize.slice(0, i))\n        return `translate(0, ${height + i * shapePadding} )`\n      }\n      textTrans = (d, i) => `translate( ${maxW + labelOffset},\n              ${shapeSize[i].y + shapeSize[i].height / 2 + 5})`\n    } else if (orient === \"horizontal\") {\n      cellTrans = (d, i) => `translate( ${i * (maxW + shapePadding)},0)`\n      textTrans = (d, i) => `translate( ${shapeSize[i].width * textAlign +\n        shapeSize[i].x},\n              ${maxH + labelOffset})`\n    }\n\n    helper.d3_placement(orient, cell, cellTrans, text, textTrans, labelAlign)\n    helper.d3_title(svg, title, classPrefix, titleWidth)\n    cell.transition().style(\"opacity\", 1)\n  }\n\n  legend.scale = function(_) {\n    if (!arguments.length) return scale\n    scale = _\n    return legend\n  }\n\n  legend.cells = function(_) {\n    if (!arguments.length) return cells\n    if (_.length > 1 || _ >= 2) {\n      cells = _\n    }\n    return legend\n  }\n\n  legend.cellFilter = function(_) {\n    if (!arguments.length) return cellFilter\n    cellFilter = _\n    return legend\n  }\n\n  legend.shapePadding = function(_) {\n    if (!arguments.length) return shapePadding\n    shapePadding = +_\n    return legend\n  }\n\n  legend.labels = function(_) {\n    if (!arguments.length) return labels\n    labels = _\n    return legend\n  }\n\n  legend.labelAlign = function(_) {\n    if (!arguments.length) return labelAlign\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _\n    }\n    return legend\n  }\n\n  legend.locale = function(_) {\n    if (!arguments.length) return locale\n    locale = formatLocale(_)\n    return legend\n  }\n\n  legend.labelFormat = function(_) {\n    if (!arguments.length) return legend.locale().format(specifier)\n    specifier = formatSpecifier(_)\n    return legend\n  }\n\n  legend.labelOffset = function(_) {\n    if (!arguments.length) return labelOffset\n    labelOffset = +_\n    return legend\n  }\n\n  legend.labelDelimiter = function(_) {\n    if (!arguments.length) return labelDelimiter\n    labelDelimiter = _\n    return legend\n  }\n\n  legend.labelWrap = function(_) {\n    if (!arguments.length) return labelWrap\n    labelWrap = _\n    return legend\n  }\n\n  legend.orient = function(_) {\n    if (!arguments.length) return orient\n    _ = _.toLowerCase()\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _\n    }\n    return legend\n  }\n\n  legend.ascending = function(_) {\n    if (!arguments.length) return ascending\n    ascending = !!_\n    return legend\n  }\n\n  legend.classPrefix = function(_) {\n    if (!arguments.length) return classPrefix\n    classPrefix = _\n    return legend\n  }\n\n  legend.title = function(_) {\n    if (!arguments.length) return title\n    title = _\n    return legend\n  }\n\n  legend.titleWidth = function(_) {\n    if (!arguments.length) return titleWidth\n    titleWidth = _\n    return legend\n  }\n\n  legend.on = function() {\n    const value = legendDispatcher.on.apply(legendDispatcher, arguments)\n    return value === legendDispatcher ? legend : value\n  }\n\n  return legend\n}\n", "export const thresholdLabels = function({\n  i,\n  genLength,\n  generatedLabels,\n  labelDelimiter\n}) {\n  if (i === 0) {\n    const values = generatedLabels[i].split(` ${labelDelimiter} `)\n    return `Less than ${values[1]}`\n  } else if (i === genLength - 1) {\n    const values = generatedLabels[i].split(` ${labelDelimiter} `)\n    return `${values[0]} or more`\n  }\n  return generatedLabels[i]\n}\n\nexport default {\n  thresholdLabels\n}\n", "import legendColor from './src/color'\nimport legendSize from './src/size'\nimport legendSymbol from './src/symbol'\nimport legendHelpers from './src/helpers'\n\nexport { legendColor, legendSize, legendSymbol, legendHelpers }\n\nexport default {\n  legendColor,\n  legendSize,\n  legendSymbol,\n  legendHelpers\n};\n", "<span id=\"up-arrow\">&#9650;</span>\n<span id=\"page-text\"></span>\n<span id=\"down-arrow\">&#9660;</span>\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { isElementOverflowing } from \"../../utils/utils\";\n\nexport function cropCellContents(legendDiv) {\n    const legendCells = legendDiv.select(\"g.legendCells\");\n    const legendDivRect = legendDiv.node().getBoundingClientRect();\n\n    if (\n        !isElementOverflowing(\n            legendDivRect,\n            legendCells.node().getBoundingClientRect()\n        )\n    ) {\n        return;\n    }\n\n    const svg = legendDiv.select(\".legend\");\n\n    legendCells.selectAll(\".label\").text((d, i, nodes) => {\n        const cell = nodes[i];\n        if (isElementOverflowing(legendDivRect, cell.getBoundingClientRect())) {\n            const cutoffCharIndex = getCutoffCharacterIndex(\n                cell,\n                svg,\n                legendDivRect\n            );\n            return `${d.substring(0, cutoffCharIndex - 3)}...`;\n        } else {\n            return d;\n        }\n    });\n}\n\nfunction getCutoffCharacterIndex(cell, svg, legendDivRect) {\n    const cellRect = cell.getBoundingClientRect();\n    const cutoffCoord = svg.node().createSVGPoint();\n    // Sometimes the svg point can _just_ miss a character, so we fuzz it.\n    const fuzzyFactor = 3;\n    cutoffCoord.x = legendDivRect.right - cellRect.left - fuzzyFactor;\n    cutoffCoord.y = 0;\n    return cell.getCharNumAtPosition(cutoffCoord);\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { isElementOverflowing } from \"../../utils/utils\";\nimport { getChartElement } from \"../../plugin/root\";\nimport { NodeRect, Orient } from \"../../types\";\n\nexport const margin = 10;\n\nexport type AdjustedOffsets = {\n    x: number;\n    y: number;\n};\n\nexport function enforceContainerBoundaries(\n    innerNode: Element,\n    offsetX: number,\n    offsetY: number\n): AdjustedOffsets {\n    const chartNodeRect: DOMRect = d3\n        .select(getChartElement(innerNode).getContainer())\n        .node()\n        .getBoundingClientRect();\n\n    const innerNodeRect: NodeRect = innerNode.getBoundingClientRect();\n\n    const draggedInnerNodeRect: NodeRect = {\n        top: innerNodeRect.top + offsetY - margin,\n        right: innerNodeRect.right + offsetX + margin,\n        bottom: innerNodeRect.bottom + offsetY + margin,\n        left: innerNodeRect.left + offsetX - margin,\n    };\n\n    const adjustedOffsets: AdjustedOffsets = { x: offsetX, y: offsetY };\n    const boundaries: { edge: Orient; dimension: \"x\" | \"y\" }[] = [\n        { edge: \"right\", dimension: \"x\" },\n        { edge: \"left\", dimension: \"x\" },\n        { edge: \"top\", dimension: \"y\" },\n        { edge: \"bottom\", dimension: \"y\" },\n    ];\n\n    boundaries.forEach((bound) => {\n        if (\n            isElementOverflowing(\n                chartNodeRect,\n                draggedInnerNodeRect,\n                bound.edge\n            )\n        ) {\n            const adjustment =\n                draggedInnerNodeRect[bound.edge] - chartNodeRect[bound.edge];\n            adjustedOffsets[bound.dimension] =\n                adjustedOffsets[bound.dimension] - adjustment;\n        }\n    });\n\n    return adjustedOffsets;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { getChartContainer } from \"../../plugin/root\";\nimport {\n    enforceContainerBoundaries,\n    margin,\n} from \"./enforceContainerBoundaries\";\n\nconst resizeForDraggingEvent = \"resize.for-dragging\";\n\nexport function draggableComponent() {\n    let pinned = true;\n    let settings = null;\n\n    const draggable = (element) => {\n        const node = element.node();\n        const viewer = node.getRootNode().host.closest(\"perspective-viewer\");\n        node.style.cursor = \"move\";\n        if (settings.legend) {\n            node.style.left = settings.legend.left;\n            node.style.top = settings.legend.top;\n        }\n\n        const drag = d3\n            .drag<HTMLElement, unknown>()\n            .on(\"drag\", function (event) {\n                const offsets = enforceContainerBoundaries(\n                    this,\n                    event.dx,\n                    event.dy\n                );\n\n                this.style.left = `${this.offsetLeft + offsets.x}px`;\n                this.style.top = `${this.offsetTop + offsets.y}px`;\n                const position = {\n                    left: this.style.left,\n                    top: this.style.top,\n                };\n                settings.legend = { ...settings.legend, ...position };\n\n                pinned = isNodeInTopRight(node)\n                    ? pinNodeToTopRight(node)\n                    : unpinNodeFromTopRight(node, pinned);\n            });\n\n        drag.on(\"end\", function (event) {\n            d3.select(window).on(resizeForDraggingEvent, null);\n            viewer?.dispatchEvent(new Event(\"perspective-config-update\"));\n        });\n\n        element.call(drag);\n    };\n\n    draggable.settings = (...args) => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        return draggable;\n    };\n\n    return draggable;\n}\n\nfunction unpinNodeFromTopRight(node, pinned) {\n    if (pinned !== false) {\n        // Default behaviour for the legend is to remain pinned to the top right\n        // hand corner with a specific margin. Once the legend has moved we\n        // cannot continue to use that css based approach.\n        d3.select(window).on(resizeForDraggingEvent, function () {\n            const offsets = enforceContainerBoundaries(node, 0, 0);\n            node.style.left = `${node.offsetLeft + offsets.x}px`;\n            node.style.top = `${node.offsetTop + offsets.y}px`;\n        });\n    }\n    return false;\n}\n\nfunction pinNodeToTopRight(node) {\n    d3.select(window).on(resizeForDraggingEvent, null);\n    node.style.left = \"auto\";\n    return true;\n}\n\nfunction isNodeInTopRight(node) {\n    const nodeRect = node.getBoundingClientRect();\n    const containerRect = d3\n        .select(getChartContainer(node))\n        .node()\n        .getBoundingClientRect();\n\n    const fuzz = 5;\n\n    return (\n        nodeRect.right + margin + fuzz >= containerRect.right &&\n        nodeRect.top - margin - fuzz <= containerRect.top\n    );\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { enforceContainerBoundaries } from \"./enforceContainerBoundaries\";\n\nconst horizontalHandleClass = \"horizontal-drag-handle\";\nconst verticalHandleClass = \"vertical-drag-handle\";\nconst cornerHandleClass = \"corner-drag-handle\";\n\nconst handlesContainerId = \"dragHandles\";\n\nconst fillOpacity = 0.0;\nconst resizeEvent = \"resize\";\n\nexport function resizableComponent() {\n    let handleWidthPx = 9;\n    let zIndex = 3;\n    let settings = null;\n    const minDimensionsPx = { height: 100, width: 100 };\n    const maxDimensionsPx = { height: null, width: null };\n\n    const callbacks: { event: any; execute: Function }[] = [];\n    const executeCallbacks = (event, direction) =>\n        callbacks\n            .filter((callback) => callback.event === event)\n            .forEach((callback) => callback.execute(direction));\n\n    const resizable = (container) => {\n        if (handlesContainerExists(container)) {\n            return;\n        }\n\n        const dragHelper = {\n            left: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: dragLeft(event),\n                    vertical: false,\n                }),\n            top: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: false,\n                    vertical: dragTop(event),\n                }),\n            right: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: dragRight(event),\n                    vertical: false,\n                }),\n            bottom: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: false,\n                    vertical: dragBottom(event),\n                }),\n            topleft: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: dragLeft(event),\n                    vertical: dragTop(event),\n                }),\n            topright: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: dragRight(event),\n                    vertical: dragTop(event),\n                }),\n            bottomright: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: dragRight(event),\n                    vertical: dragBottom(event),\n                }),\n            bottomleft: (event) =>\n                executeCallbacks(resizeEvent, {\n                    horizontal: dragLeft(event),\n                    vertical: dragBottom(event),\n                }),\n        };\n\n        const containerNode = container.node();\n        if (settings.legend) {\n            containerNode.style.height = settings.legend.height;\n            containerNode.style.width = settings.legend.width;\n        }\n\n        const containerRect: DOMRect = containerNode.getBoundingClientRect();\n        const handles: d3.Selection<SVGElement, unknown, undefined, unknown> =\n            container\n                .append(\"svg\")\n                .attr(\"id\", handlesContainerId)\n                .attr(\"width\", containerRect.width)\n                .attr(\"height\", containerRect.height);\n\n        const handlesGroup = handles.append(\"g\");\n\n        const isVertical = (d) => d === \"left\" || d === \"right\";\n        const xCoordHelper = {\n            left: 0,\n            top: handleWidthPx,\n            right: containerRect.width - handleWidthPx,\n            bottom: handleWidthPx,\n        };\n        const yCoordHelper = {\n            left: handleWidthPx,\n            top: 0,\n            right: handleWidthPx,\n            bottom: containerRect.height - handleWidthPx,\n        };\n        const edgeHandles = [\"left\", \"top\", \"right\", \"bottom\"];\n        const [leftHandle, topHandle, rightHandle, bottomHandle] =\n            edgeHandles.map((edge) =>\n                handlesGroup\n                    .append(\"rect\")\n                    .attr(\"id\", `drag${edge}`)\n                    .attr(\n                        \"class\",\n                        isVertical(edge)\n                            ? verticalHandleClass\n                            : horizontalHandleClass\n                    )\n                    .attr(\"y\", yCoordHelper[edge])\n                    .attr(\"x\", xCoordHelper[edge])\n                    .attr(\n                        \"height\",\n                        isVertical(edge)\n                            ? containerRect.height - handleWidthPx * 2\n                            : handleWidthPx\n                    )\n                    .attr(\n                        \"width\",\n                        isVertical(edge)\n                            ? handleWidthPx\n                            : containerRect.width - handleWidthPx * 2\n                    )\n                    .attr(\"fill\", isVertical(edge) ? \"lightgreen\" : \"lightblue\")\n                    .attr(\"fill-opacity\", fillOpacity)\n                    .style(\"z-index\", zIndex)\n                    .attr(\n                        \"cursor\",\n                        isVertical(edge) ? \"ew-resize\" : \"ns-resize\"\n                    )\n                    .call(d3.drag().on(\"drag\", dragHelper[edge]))\n            );\n\n        const concatCornerEdges = (corner) => `${corner[0]}${corner[1]}`;\n        const cornerCursorHelper = {\n            topleft: \"nwse\",\n            topright: \"nesw\",\n            bottomright: \"nwse\",\n            bottomleft: \"nesw\",\n        };\n        const cornerHandles = [\n            [\"top\", \"left\"],\n            [\"top\", \"right\"],\n            [\"bottom\", \"right\"],\n            [\"bottom\", \"left\"],\n        ];\n        const [\n            topLeftHandle,\n            topRightHandle,\n            bottomRightHandle,\n            bottomLeftHandle,\n        ] = cornerHandles.map((corner) =>\n            handlesGroup\n                .append(\"rect\")\n                .attr(\"id\", `drag${concatCornerEdges(corner)}`)\n                .attr(\"class\", `${cornerHandleClass} ${corner[0]} ${corner[1]}`)\n                .attr(\"height\", handleWidthPx)\n                .attr(\"width\", handleWidthPx)\n                .attr(\"fill\", \"red\")\n                .attr(\"fill-opacity\", fillOpacity)\n                .style(\"z-index\", zIndex)\n                .attr(\n                    \"cursor\",\n                    `${cornerCursorHelper[concatCornerEdges(corner)]}-resize`\n                )\n                .call(\n                    d3.drag().on(\"drag\", dragHelper[concatCornerEdges(corner)])\n                )\n        );\n\n        enforceMaxDimensions(\"height\", \"y\", bottomHandle);\n        enforceMaxDimensions(\"width\", \"x\", rightHandle);\n        pinCorners(handles);\n\n        function dragLeft(event) {\n            const offset = enforceDistToParallelBarConstraints(\n                enforceContainerBoundaries(leftHandle.node(), event.x, 0).x,\n                handles,\n                \"width\",\n                (x, y) => x - y\n            );\n            containerNode.style.left = `${containerNode.offsetLeft + offset}px`;\n            containerNode.style.width = `${\n                containerNode.offsetWidth - offset\n            }px`;\n            updateSettings();\n            return resizeAndRelocateHandles(rightHandle, offset, \"width\", \"x\");\n        }\n\n        function dragRight(event) {\n            const offset = -enforceDistToParallelBarConstraints(\n                enforceContainerBoundaries(rightHandle.node(), event.dx, 0).x,\n                handles,\n                \"width\",\n                (x, y) => x + y\n            );\n            if (\n                pointerFallenBehindAbsoluteCoordinates(\n                    offset,\n                    \"x\",\n                    rightHandle,\n                    event\n                )\n            )\n                return false;\n            containerNode.style.width = `${\n                containerNode.offsetWidth - offset\n            }px`;\n            updateSettings();\n            return resizeAndRelocateHandles(rightHandle, offset, \"width\", \"x\");\n        }\n\n        function dragTop(event) {\n            const offset = enforceDistToParallelBarConstraints(\n                enforceContainerBoundaries(topHandle.node(), 0, event.y).y,\n                handles,\n                \"height\",\n                (x, y) => x - y\n            );\n            containerNode.style.top = `${containerNode.offsetTop + offset}px`;\n            containerNode.style.height = `${\n                containerNode.offsetHeight - offset\n            }px`;\n            updateSettings();\n            return resizeAndRelocateHandles(\n                bottomHandle,\n                offset,\n                \"height\",\n                \"y\"\n            );\n        }\n\n        function dragBottom(event) {\n            const offset = -enforceDistToParallelBarConstraints(\n                enforceContainerBoundaries(bottomHandle.node(), 0, event.dy).y,\n                handles,\n                \"height\",\n                (x, y) => x + y\n            );\n            if (\n                pointerFallenBehindAbsoluteCoordinates(\n                    offset,\n                    \"y\",\n                    bottomHandle,\n                    event\n                )\n            )\n                return false;\n            containerNode.style.height = `${\n                containerNode.offsetHeight - offset\n            }px`;\n            updateSettings();\n            return resizeAndRelocateHandles(\n                bottomHandle,\n                offset,\n                \"height\",\n                \"y\"\n            );\n        }\n\n        function updateSettings() {\n            const dimensions = {\n                top: containerNode.style.top,\n                left: containerNode.style.left,\n                height: containerNode.style.height,\n                width: containerNode.style.width,\n            };\n            settings.legend = { ...settings.legend, ...dimensions };\n        }\n\n        function resizeAndRelocateHandles(handle, offset, dimension, axis) {\n            extendHandlesBox(handles, dimension, offset);\n            pinHandleToHandleBoxEdge(handle, axis, offset);\n            extendPerpendicularHandles(\n                handles,\n                offset,\n                dimension,\n                dimension === \"height\"\n                    ? verticalHandleClass\n                    : horizontalHandleClass\n            );\n            pinCorners(handles);\n            return offset != 0;\n        }\n\n        function pinCorners(handles) {\n            topLeftHandle.attr(\"y\", 0);\n            topRightHandle\n                .attr(\"y\", 0)\n                .attr(\"x\", handles.attr(\"width\") - handleWidthPx);\n            bottomRightHandle\n                .attr(\"y\", handles.attr(\"height\") - handleWidthPx)\n                .attr(\"x\", handles.attr(\"width\") - handleWidthPx);\n            bottomLeftHandle\n                .attr(\"y\", handles.attr(\"height\") - handleWidthPx)\n                .attr(\"x\", 0);\n        }\n\n        function enforceMaxDimensions(dimension, axis, relativeHandle) {\n            if (\n                !!maxDimensionsPx[dimension] &&\n                maxDimensionsPx[dimension] < containerRect[dimension]\n            ) {\n                containerNode.style[\n                    dimension\n                ] = `${maxDimensionsPx[dimension]}px`;\n                resizeAndRelocateHandles(\n                    relativeHandle,\n                    containerRect[dimension] - maxDimensionsPx[dimension],\n                    dimension,\n                    axis\n                );\n            }\n        }\n    };\n\n    resizable.on = (event, callback) => {\n        callbacks.push({ event: event, execute: callback });\n        return resizable;\n    };\n\n    resizable.zIndex = (input) => {\n        zIndex = input;\n        return resizable;\n    };\n\n    resizable.settings = (...args) => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        return resizable;\n    };\n\n    resizable.minWidth = (input) => {\n        minDimensionsPx.width = input;\n        if (!!maxDimensionsPx.width)\n            maxDimensionsPx.width = Math.max(\n                minDimensionsPx.width,\n                maxDimensionsPx.width\n            );\n        return resizable;\n    };\n\n    resizable.minHeight = (input) => {\n        minDimensionsPx.height = input;\n        if (!!maxDimensionsPx.height)\n            maxDimensionsPx.height = Math.max(\n                minDimensionsPx.height,\n                maxDimensionsPx.height\n            );\n        return resizable;\n    };\n\n    resizable.handleWidth = (input) => {\n        handleWidthPx = input;\n        return resizable;\n    };\n\n    resizable.maxWidth = (input) => {\n        maxDimensionsPx.width = input;\n        minDimensionsPx.width = Math.min(\n            minDimensionsPx.width,\n            maxDimensionsPx.width\n        );\n        return resizable;\n    };\n\n    resizable.maxHeight = (input) => {\n        maxDimensionsPx.height = input;\n        minDimensionsPx.height = Math.min(\n            minDimensionsPx.height,\n            maxDimensionsPx.height\n        );\n        return resizable;\n    };\n\n    function pointerFallenBehindAbsoluteCoordinates(\n        offset,\n        axis,\n        handle,\n        event\n    ) {\n        const becauseCrossedMinSize = (offset, axis, handle, event) =>\n            offset < 0 && event[axis] < Number(handle.attr(axis));\n        const becauseExitedCoordinateSpace = (offset, axis, handle, event) =>\n            offset > 0 && event[axis] > Number(handle.attr(axis));\n        return (\n            becauseCrossedMinSize(offset, axis, handle, event) ||\n            becauseExitedCoordinateSpace(offset, axis, handle, event)\n        );\n    }\n\n    function enforceDistToParallelBarConstraints(\n        offset,\n        dragHandleContainer,\n        dimension,\n        operatorFunction\n    ) {\n        const anticipatedDimension = operatorFunction(\n            Number(dragHandleContainer.attr(dimension)),\n            offset\n        );\n        if (anticipatedDimension < minDimensionsPx[dimension]) {\n            const difference =\n                minDimensionsPx[dimension] - anticipatedDimension;\n            return operatorFunction(offset, difference);\n        }\n        if (\n            !!maxDimensionsPx[dimension] &&\n            anticipatedDimension > maxDimensionsPx[dimension]\n        ) {\n            const difference =\n                maxDimensionsPx[dimension] - anticipatedDimension;\n            return operatorFunction(offset, difference);\n        }\n        return offset;\n    }\n\n    return resizable;\n}\n\n// \"dimension\" referring to width or height\nconst extendPerpendicularHandles = (\n    handles,\n    offset,\n    dimension,\n    orientationClass\n) => {\n    const perpendicularHandles = handles.selectAll(`.${orientationClass}`);\n    perpendicularHandles.each((_, i, nodes) => {\n        const handleNode = nodes[i];\n        const handleElement = d3.select(handleNode);\n        handleElement.attr(\n            dimension,\n            handleNode.getBoundingClientRect()[dimension] - offset\n        );\n    });\n};\n\nconst handlesContainerExists = (container) =>\n    container.select(`#${handlesContainerId}`).size() > 0;\n\nconst pinHandleToHandleBoxEdge = (handle, axis, offset) =>\n    handle.attr(axis, Number(handle.attr(axis)) - offset);\n\nconst extendHandlesBox = (handles, dimension, offset) =>\n    handles.attr(\n        dimension,\n        handles.node().getBoundingClientRect()[dimension] - offset\n    );\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3Legend from \"d3-svg-legend\";\nimport { rebindAll } from \"d3fc/index.js\";\nimport { getOrCreateElement } from \"../utils/utils\";\nimport legendControlsTemplate from \"../../html/legend-controls.html\";\nimport { cropCellContents } from \"./styling/cropCellContents\";\nimport { draggableComponent } from \"./styling/draggableComponent\";\nimport { resizableComponent } from \"./styling/resizableComponent\";\n\nconst averageCellHeightPx = 16;\nconst controlsHeightPx = 20;\n\nexport default (fromLegend, settings) => {\n    const legend = fromLegend || d3Legend.legendColor();\n\n    let domain = [];\n    let pageCount = 1;\n    let pageSize;\n    let pageIndex =\n        settings.legend && settings.legend.pageIndex\n            ? settings.legend.pageIndex\n            : 0;\n    let decorate: (...args: any[]) => void = () => {};\n    let draggable = draggableComponent().settings(settings);\n    let resizable;\n\n    const scrollableLegend = (selection) => {\n        domain = legend.scale().domain();\n\n        resizable = resizableComponent()\n            .settings(settings)\n            .maxHeight(domain.length * averageCellHeightPx + controlsHeightPx)\n            .on(\"resize\", () => render(selection));\n\n        resizable(selection);\n        draggable(selection);\n        render(selection);\n    };\n\n    const render = (selection) => {\n        calculatePageSize(selection);\n        renderControls(selection);\n        renderLegend(selection);\n        cropCellContents(selection);\n    };\n\n    const renderControls = (selection) => {\n        const controls = getLegendControls(selection);\n        controls.style(\"display\", pageCount <= 1 ? \"none\" : \"block\");\n\n        controls.select(\"#page-text\").text(`${pageIndex + 1}/${pageCount}`);\n\n        controls\n            .select(\"#up-arrow\")\n            .attr(\"class\", pageIndex === 0 ? \"disabled\" : \"\")\n            .on(\"click\", () => {\n                if (pageIndex > 0) {\n                    setPage(pageIndex - 1);\n                    render(selection);\n                }\n            });\n\n        controls\n            .select(\"#down-arrow\")\n            .attr(\"class\", pageIndex >= pageCount - 1 ? \"disabled\" : \"\")\n            .on(\"click\", () => {\n                if (pageIndex < pageCount - 1) {\n                    setPage(pageIndex + 1);\n                    render(selection);\n                }\n            });\n    };\n\n    const renderLegend = (selection) => {\n        if (pageCount > 1) legend.cellFilter(cellFilter());\n        selection.select(\"g.legendCells\").remove();\n\n        const legendElement = getLegendElement(selection);\n        legendElement.call(legend);\n\n        const cellContainerSize = selection\n            .select(\"g.legendCells\")\n            .node()\n            .getBBox();\n        legendElement.attr(\n            \"height\",\n            cellContainerSize.height + controlsHeightPx\n        );\n\n        decorate(selection);\n    };\n\n    const setPage = (index) => {\n        pageIndex = index;\n        settings.legend = { ...settings.legend, pageIndex };\n    };\n\n    const cellFilter = () => (_, i) =>\n        i >= pageSize * pageIndex && i < pageSize * pageIndex + pageSize;\n\n    const calculatePageSize = (selection) => {\n        const legendContainerRect = selection.node().getBoundingClientRect();\n        let proposedPageSize =\n            Math.floor(legendContainerRect.height / averageCellHeightPx) - 1;\n\n        // if page size is less than all legend items, leave space for the\n        // legend controls\n        pageSize =\n            proposedPageSize < domain.length\n                ? proposedPageSize - 1\n                : proposedPageSize;\n        pageCount = calculatePageCount(proposedPageSize);\n        pageIndex = Math.min(pageIndex, pageCount - 1);\n    };\n\n    const calculatePageCount = (pageSize) =>\n        Math.ceil(domain.length / pageSize);\n\n    const getLegendControls = (container) =>\n        getOrCreateElement(container, \".legend-controls\", () =>\n            container\n                .append(\"g\")\n                .attr(\"class\", \"legend-controls\")\n                .html(legendControlsTemplate)\n        );\n\n    const getLegendElement = (container) =>\n        getOrCreateElement(container, \".legend\", () =>\n            container.append(\"svg\").attr(\"class\", \"legend\")\n        );\n\n    scrollableLegend.decorate = (...args) => {\n        if (!args.length) {\n            return decorate;\n        }\n        decorate = args[0];\n        return scrollableLegend;\n    };\n\n    rebindAll(scrollableLegend, legend);\n\n    return scrollableLegend;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport * as d3Legend from \"d3-svg-legend\";\nimport scrollableLegend from \"./scrollableLegend\";\nimport { withoutOpacity } from \"../series/seriesColors\";\nimport { getChartElement } from \"../plugin/root\";\nimport { getOrCreateElement } from \"../utils/utils\";\nimport { D3Scale } from \"../types\";\n\nexport type LegendComponentSettings = {\n    hideKeys?: any[];\n    mainValues?: any[];\n};\n\nconst scrollColorLegend = (settings) =>\n    scrollableLegend(\n        d3Legend.legendColor().shape(\"circle\").shapeRadius(6),\n        settings\n    );\n\nconst scrollSymbolLegend = (settings) =>\n    scrollableLegend(\n        d3Legend.legendSymbol().shapePadding(1).labelOffset(3),\n        settings\n    );\n\nexport const colorLegend = () => legendComponent(scrollColorLegend);\nexport const symbolLegend = () =>\n    legendComponent(scrollSymbolLegend, symbolScale);\nexport const colorGroupLegend = () =>\n    legendComponent(scrollColorLegend, symbolScale);\n\nfunction symbolScale(fromScale) {\n    if (!fromScale) return null;\n\n    const domain = fromScale.domain();\n    const range = fromScale.range().map((r) => d3.symbol().type(r)());\n\n    return d3.scaleOrdinal().domain(domain).range(range);\n}\n\ninterface LegendComponent {\n    (container): void;\n\n    settings(): LegendComponentSettings;\n    settings(nextSettings: LegendComponentSettings): LegendComponent;\n\n    scale(): D3Scale | null;\n    scale(nextScale: D3Scale | null): LegendComponent;\n\n    color(): d3.ScaleOrdinal<string, unknown>;\n    color(nextColor: d3.ScaleOrdinal<string, unknown>): LegendComponent;\n}\n\nfunction legendComponent(\n    scrollLegendComponent,\n    scaleModifier = undefined\n): LegendComponent {\n    let settings: LegendComponentSettings = {};\n    let scale = null; // type?\n    let color: D3Scale | null = null;\n\n    const legend: Partial<LegendComponent> = (container) => {\n        if (scale && scale.range().length > 1) {\n            const scrollLegend = scrollLegendComponent(settings);\n            scrollLegend\n                .scale(scale)\n                .orient(\"vertical\")\n                .on(\"cellclick\", function (_d) {\n                    // d3-svg-legend is very outdated and incompat with d3 6.x\n                    const d = this.__data__;\n                    settings.hideKeys = settings.hideKeys || [];\n                    if (settings.hideKeys.includes(d)) {\n                        settings.hideKeys = settings.hideKeys.filter(\n                            (k) => k !== d\n                        );\n                    } else {\n                        settings.hideKeys.push(d);\n                    }\n\n                    getChartElement(this)._draw();\n                });\n\n            scrollLegend.labels((options) => {\n                const parts = String(options.domain[options.i]).split(\"|\");\n                return settings.mainValues.length <= 1 && parts.length > 1\n                    ? parts.slice(0, parts.length - 1).join(\"|\")\n                    : options.domain[options.i];\n            });\n\n            const legendSelection = getOrCreateElement(\n                container,\n                \"div.legend-container\",\n                () => container.append(\"div\")\n            );\n\n            scrollLegend.decorate((selection) => {\n                const isHidden = (data) =>\n                    settings.hideKeys && settings.hideKeys.includes(data);\n\n                const cells = selection\n                    .select(\"g.legendCells\")\n                    .attr(\"transform\", \"translate(20,20)\")\n                    .selectAll(\"g.cell\");\n\n                cells.classed(\"hidden\", isHidden);\n                cells.append(\"title\").html((d) => d);\n\n                if (color) {\n                    cells\n                        .select(\"circle, path\")\n                        .style(\"fill\", (d) => (isHidden(d) ? null : color(d)))\n                        .style(\"stroke\", (d) =>\n                            isHidden(d) ? null : withoutOpacity(color(d))\n                        );\n                }\n            });\n\n            // render the legend\n            legendSelection\n                .attr(\"class\", \"legend-container\")\n                .attr(\"borderbox-on-hover\", true)\n                .style(\"z-index\", \"2\")\n                .call(scrollLegend);\n        }\n    };\n\n    legend.settings = (...args: LegendComponentSettings[]): any => {\n        if (args.length === 0) {\n            return settings;\n        }\n        settings = args[0];\n\n        return legend;\n    };\n\n    legend.scale = (...args: (D3Scale | null)[]): any => {\n        if (!args.length) {\n            return scale;\n        }\n        scale = scaleModifier ? scaleModifier(args[0]) : args[0];\n        return legend;\n    };\n\n    legend.color = (...args: D3Scale[]): any => {\n        if (!args.length) {\n            return color;\n        }\n        color = args[0];\n        return legend;\n    };\n\n    return legend as LegendComponent;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { groupFromKey } from \"../series/seriesKey\";\nimport { DataRowsWithKey, Settings } from \"../types\";\n\nexport function filterData(\n    settings: Settings,\n    data: any[] | undefined = undefined\n) {\n    const useData = data || settings.data;\n    const len = settings.hideKeys?.length ?? 0;\n    return len > 0\n        ? useData.map((col) => {\n              const clone = { ...col };\n              settings.hideKeys.forEach((k) => {\n                  delete clone[k];\n              });\n              return clone;\n          })\n        : useData;\n}\n\nexport function filterDataByGroup(settings: Settings): DataRowsWithKey {\n    const newData = settings.data;\n    const hideKeysLen = settings.hideKeys?.length ?? 0;\n    const splitValsLen = settings.splitValues.length;\n    return hideKeysLen > 0\n        ? splitValsLen === 0\n            ? newData.filter((row) => {\n                  return Object.values(row).reduce(\n                      (res, val) => res && !settings.hideKeys.includes(val),\n                      true\n                  );\n              })\n            : newData.map((row) => {\n                  const entries = Object.entries(row).filter(\n                      ([key, _val]) =>\n                          !settings.hideKeys.includes(groupFromKey(key))\n                  );\n                  return Object.fromEntries(entries);\n              })\n        : newData;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { D3Scale, Orientation } from \"../types\";\n\nconst mainGridSvg = (settings) => (x, xTick) =>\n    x\n        .style(\"stroke-width\", (xTick) => \"1.0\")\n        .style(\"stroke\", (xTick) => axis_color(xTick, settings));\n\nfunction axis_color(xTick, settings) {\n    if (xTick === 0) {\n        if (settings) {\n            return settings.textStyles.color;\n        } else {\n            return \"#666\";\n        }\n    } else if (settings) {\n        return settings.colorStyles.grid.gridLineColor;\n    } else {\n        return \"#bbb\";\n    }\n}\n\nconst mainGridCanvas = (settings) => (c, xTick) => {\n    c.strokeStyle = axis_color(xTick, settings);\n    c.lineWidth = 1;\n};\n\nconst crossGridSvg = (x, _) => x.style(\"display\", \"none\");\nconst crossGridCanvas = (settings) => (c, xTick) => {\n    c.lineWidth = 1;\n    c.strokeStyle = axis_color(xTick, settings);\n};\n\nexport interface WithGridLines {\n    (...args): any;\n\n    orient(): Orientation;\n    orient(nextOrient: Orientation): WithGridLines;\n\n    canvas(): boolean;\n    canvas(nextCanvas: boolean): WithGridLines;\n\n    xScale(): D3Scale;\n    xScale(xScale: D3Scale): WithGridLines;\n\n    yScale(): D3Scale;\n    yScale(yScale: D3Scale): WithGridLines;\n\n    context(): any;\n    context(context: any): WithGridLines;\n}\n\nexport default (series, settings): WithGridLines => {\n    let orient = \"both\";\n    let canvas = false;\n    let xScale = null;\n    let yScale = null;\n    let context = null;\n\n    let seriesMulti = fc.seriesSvgMulti();\n    let annotationGridline = fc.annotationSvgGridline();\n    let mainGrid = mainGridSvg(settings);\n    let crossGrid = crossGridSvg;\n\n    const _withGridLines: Partial<WithGridLines> = function (...args) {\n        if (canvas) {\n            seriesMulti = fc.seriesCanvasMulti().context(context);\n            annotationGridline = fc.annotationCanvasGridline();\n            mainGrid = mainGridCanvas(settings);\n            crossGrid = crossGridCanvas(settings);\n        }\n\n        const multi = seriesMulti.xScale(xScale).yScale(yScale);\n\n        const xStyle = orient === \"vertical\" ? crossGrid : mainGrid;\n        const yStyle = orient === \"horizontal\" ? crossGrid : mainGrid;\n\n        const gridlines = annotationGridline\n            .xDecorate(xStyle)\n            .yDecorate(yStyle);\n\n        return multi.series([gridlines, series])(...args);\n    };\n\n    _withGridLines.orient = (...args: Orientation[]): any => {\n        if (!args.length) {\n            return orient;\n        }\n        orient = args[0];\n        return _withGridLines;\n    };\n\n    _withGridLines.canvas = (...args: boolean[]): any => {\n        if (!args.length) {\n            return canvas;\n        }\n        canvas = args[0];\n        return _withGridLines;\n    };\n\n    _withGridLines.xScale = (...args): any => {\n        if (!args.length) {\n            return xScale;\n        }\n        xScale = args[0];\n        return _withGridLines;\n    };\n\n    _withGridLines.yScale = (...args): any => {\n        if (!args.length) {\n            return yScale;\n        }\n        yScale = args[0];\n        return _withGridLines;\n    };\n\n    _withGridLines.context = (...args): any => {\n        if (!args.length) {\n            return context;\n        }\n        context = args[0];\n        return _withGridLines;\n    };\n\n    return _withGridLines as WithGridLines;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Pad, PadUnit, PaddingStrategy } from \"../../types\";\nimport { defaultPadding } from \"./default\";\nimport * as fc from \"d3fc/index.js\";\n\nexport const hardLimitZeroPadding = (): PaddingStrategy => {\n    const _defaultPadding = defaultPadding();\n\n    const padding: Partial<PaddingStrategy> = (extent) => {\n        let pad = _defaultPadding.pad();\n        let padUnit = _defaultPadding.padUnit();\n\n        let delta = 1;\n        switch (padUnit) {\n            case \"domain\": {\n                break;\n            }\n            case \"percent\": {\n                delta = extent[1] - extent[0];\n                break;\n            }\n            default:\n                throw new Error(\"Unknown padUnit: \" + padUnit);\n        }\n\n        let paddedLowerExtent = extent[0] - pad[0] * delta;\n        let paddedUpperExtent = extent[1] + pad[1] * delta;\n\n        // If datapoints are exclusively negative or exclusively positive hard\n        // limit extent to 0.\n        extent[0] =\n            extent[0] >= 0 && paddedLowerExtent < 0 ? 0 : paddedLowerExtent;\n        extent[1] =\n            extent[1] <= 0 && paddedUpperExtent > 0 ? 0 : paddedUpperExtent;\n        return extent;\n    };\n\n    padding.pad = function (..._args: Pad[]): any {\n        return _defaultPadding.pad();\n    };\n\n    padding.padUnit = function (..._args: PadUnit[]): any {\n        return _defaultPadding.padUnit();\n    };\n\n    fc.rebindAll(padding, _defaultPadding);\n\n    return padding as PaddingStrategy;\n};\n", "<button id=\"zoom-reset\">Reset zoom</button>\n<button id=\"one-year\">1 Year</button>\n<button id=\"six-months\">6 Months</button>\n<button id=\"one-month\">1 Month</button>\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { getOrCreateElement } from \"../utils/utils\";\nimport template from \"../../html/zoom-controls.html\";\n\nexport default () => {\n    let chart = null;\n    let settings = null;\n    let xScale = null;\n    let xCopy = null;\n    let yScale = null;\n    let yCopy = null;\n    let bound = false;\n    let canvas = false;\n    let onChange: (args: any) => void = () => {};\n\n    function zoomableChart(selection) {\n        const chartPlotArea = `d3fc-${canvas ? \"canvas\" : \"svg\"}.plot-area`;\n        if (xScale || yScale) {\n            const dateAxis = xCopy && xCopy.domain()[0] instanceof Date;\n            const zoom = d3.zoom().on(\"zoom\", (event) => {\n                const { transform } = event;\n                settings.zoom = {\n                    k: transform.k,\n                    x: transform.x,\n                    y: transform.y,\n                };\n\n                applyTransform(transform);\n\n                selection.call(chart);\n\n                const noZoom =\n                    transform.k === 1 && transform.x === 0 && transform.y === 0;\n\n                const zoomControls = getZoomControls(selection).style(\n                    \"display\",\n                    noZoom ? \"none\" : \"\"\n                );\n                zoomControls\n                    .select(\"#zoom-reset\")\n                    .on(\"click\", () =>\n                        selection\n                            .select(chartPlotArea)\n                            .call(zoom.transform, d3.zoomIdentity)\n                    );\n\n                const oneYear = zoomControls\n                    .select(\"#one-year\")\n                    .style(\"display\", dateAxis ? \"\" : \"none\");\n                const sixMonths = zoomControls\n                    .select(\"#six-months\")\n                    .style(\"display\", dateAxis ? \"\" : \"none\");\n                const oneMonth = zoomControls\n                    .select(\"#one-month\")\n                    .style(\"display\", dateAxis ? \"\" : \"none\");\n                if (dateAxis) {\n                    const dateClick = (endCalculation) => () => {\n                        const start = new Date(xScale.domain()[0]);\n                        const end = new Date(start);\n                        endCalculation(start, end);\n\n                        const xRange = xCopy.range();\n                        const k =\n                            (xRange[1] - xRange[0]) /\n                            (xCopy(end) - xCopy(start));\n                        const x = -xCopy(start) * k;\n                        let y = 0;\n                        if (yScale) {\n                            const yMiddle =\n                                yScale.domain().reduce((a, b) => a + b) / 2;\n                            y = -yCopy(yMiddle) * k + yScale(yMiddle);\n                        }\n                        selection\n                            .select(chartPlotArea)\n                            .call(\n                                zoom.transform,\n                                d3.zoomIdentity.translate(x, y).scale(k)\n                            );\n                    };\n\n                    oneYear.on(\n                        \"click\",\n                        dateClick((start, end) =>\n                            end.setYear(start.getFullYear() + 1)\n                        )\n                    );\n                    sixMonths.on(\n                        \"click\",\n                        dateClick((start, end) =>\n                            end.setMonth(start.getMonth() + 6)\n                        )\n                    );\n                    oneMonth.on(\n                        \"click\",\n                        dateClick((start, end) =>\n                            end.setMonth(start.getMonth() + 1)\n                        )\n                    );\n                }\n            });\n\n            const oldDecorate = chart.decorate();\n            chart.decorate((sel, data) => {\n                oldDecorate(sel, data);\n                if (!bound) {\n                    bound = true;\n                    // add the zoom interaction on the enter selection\n                    const plotArea = sel.select(chartPlotArea);\n                    const device_pixel_factor = canvas\n                        ? window.devicePixelRatio\n                        : 1;\n\n                    plotArea\n                        .on(\"measure.zoom-range\", (event) => {\n                            if (xCopy)\n                                xCopy.range([\n                                    0,\n                                    event.detail.width / device_pixel_factor,\n                                ]);\n                            if (yCopy)\n                                yCopy.range([\n                                    0,\n                                    event.detail.height / device_pixel_factor,\n                                ]);\n\n                            if (settings.zoom) {\n                                const initialTransform = d3.zoomIdentity\n                                    .translate(settings.zoom.x, settings.zoom.y)\n                                    .scale(settings.zoom.k);\n                                plotArea.call(zoom.transform, initialTransform);\n                            }\n                        })\n                        .call(zoom);\n                }\n            });\n        }\n\n        selection.call(chart);\n    }\n\n    zoomableChart.chart = (...args) => {\n        if (!args.length) {\n            return chart;\n        }\n        chart = args[0];\n        return zoomableChart;\n    };\n\n    zoomableChart.settings = (...args) => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        return zoomableChart;\n    };\n\n    zoomableChart.xScale = (...args) => {\n        if (!args.length) {\n            return xScale;\n        }\n        xScale = zoomableScale(args[0]);\n        xCopy = xScale ? xScale.copy() : null;\n        return zoomableChart;\n    };\n\n    zoomableChart.yScale = (...args) => {\n        if (!args.length) {\n            return yScale;\n        }\n        yScale = zoomableScale(args[0]);\n        yCopy = yScale ? yScale.copy() : null;\n        if (yCopy) {\n            const yDomain = yCopy.domain();\n            yCopy.domain([yDomain[1], yDomain[0]]);\n        }\n        return zoomableChart;\n    };\n\n    zoomableChart.canvas = (...args) => {\n        if (!args.length) {\n            return canvas;\n        }\n        canvas = args[0];\n        return zoomableChart;\n    };\n\n    zoomableChart.onChange = (...args) => {\n        if (!args.length) {\n            return onChange;\n        }\n        onChange = args[0];\n        return zoomableChart;\n    };\n\n    const applyTransform = (transform) => {\n        const changeArgs = { ...transform };\n        if (xScale) {\n            xScale.domain(transform.rescaleX(xCopy).domain());\n            changeArgs.xDomain = xScale.domain();\n        }\n\n        if (yScale) {\n            const yZoomDomain = transform.rescaleY(yCopy).domain();\n            yScale.domain([yZoomDomain[1], yZoomDomain[0]]);\n            changeArgs.yDomain = yScale.domain();\n        }\n\n        onChange(changeArgs);\n    };\n\n    const getZoomControls = (container) =>\n        getOrCreateElement(container, \".zoom-controls\", () =>\n            container\n                .append(\"div\")\n                .attr(\"class\", \"zoom-controls\")\n                .style(\"display\", \"none\")\n                .html(template)\n        );\n\n    const zoomableScale = (scale) => {\n        if (scale && scale.nice) {\n            return scale;\n        }\n        return null;\n    };\n\n    return zoomableChart;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { axisFactory } from \"../axis/axisFactory\";\nimport { chartSvgFactory } from \"../axis/chartFactory\";\nimport { AXIS_TYPES } from \"../axis/axisType\";\nimport { barSeries } from \"../series/barSeries\";\nimport { seriesColors } from \"../series/seriesColors\";\nimport { groupAndStackData } from \"../data/groupData\";\nimport { colorLegend } from \"../legend/legend\";\nimport { filterData } from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\n\nimport { hardLimitZeroPadding } from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction barChart(container: HTMLSelection, settings: Settings) {\n    const data = groupAndStackData(settings, filterData(settings));\n    const color = seriesColors(settings);\n\n    const legend = colorLegend().settings(settings).scale(color);\n\n    const bars = barSeries(settings, color).orient(\"horizontal\");\n    const series = fc\n        .seriesSvgMulti()\n        .mapping((data, index) => data[index])\n        .series(data.map(() => bars));\n\n    const xAxis = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .valueName(\"mainValue\")\n        .memoValue(settings.axisMemo[0])\n        .excludeType(AXIS_TYPES.ordinal)\n        .include([0])\n        .paddingStrategy(hardLimitZeroPadding())(data);\n    const yAxis = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"crossValues\")\n        .valueName(\"crossValue\")\n        .orient(\"vertical\")(data);\n\n    const chart = chartSvgFactory(xAxis, yAxis).plotArea(\n        withGridLines(series, settings).orient(\"horizontal\")\n    );\n\n    if (chart.yPaddingInner) {\n        chart.yPaddingInner(0.5);\n        chart.yPaddingOuter(0.25);\n        bars.align(\"left\");\n    }\n    chart.xNice && chart.xNice();\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .yScale(yAxis.scale);\n\n    // render\n    container.datum(data).call(zoomChart);\n    container.call(legend);\n}\n\nbarChart.plugin = {\n    name: \"X Bar\",\n    category: \"X Chart\",\n    max_cells: 1000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        names: [\"X Axis\"],\n    },\n};\n\nexport default barChart;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { DomainTuple } from \"../types\";\n\nexport default (domain1: DomainTuple, domain2: DomainTuple) => {\n    if (!isMatchable(domain1) || !isMatchable(domain2)) return;\n\n    const ratio1 = originRatio(domain1);\n    const ratio2 = originRatio(domain2);\n\n    if (ratio1 > ratio2) {\n        domain2[0] = adjustLowerBound(domain2, ratio1);\n    } else {\n        domain1[0] = adjustLowerBound(domain1, ratio2);\n    }\n};\n\nconst isMatchable = (domain: DomainTuple) =>\n    domain.length === 2 &&\n    !isNaN(domain[0]) &&\n    !isNaN(domain[1]) &&\n    domain[0] !== domain[1];\nconst originRatio = (domain: DomainTuple) =>\n    (0 - domain[0]) / (domain[1] - domain[0]);\nconst adjustLowerBound = (domain: DomainTuple, ratio: number) =>\n    (ratio * domain[1]) / (ratio - 1);\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { getChartElement } from \"../plugin/root\";\nimport { withoutOpacity } from \"../series/seriesColors.js\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nexport type SplitterLabel = {\n    index: number;\n    name: string;\n};\n\nexport interface SplitterLabels {\n    (selection: any): void;\n\n    labels(): SplitterLabel[];\n    labels(labels: SplitterLabel[]): SplitterLabels;\n\n    color(): d3.ScaleOrdinal<string, unknown>;\n    color(nextColor: d3.ScaleOrdinal<string, unknown>): SplitterLabels;\n\n    alt(): boolean;\n    alt(nextAlt: boolean): SplitterLabels;\n}\n\n// Render a set of labels with the little left/right arrows for moving\n// between axes\nexport const splitterLabels = (settings: Settings): SplitterLabels => {\n    let labels: SplitterLabel[] = [];\n    let alt = false;\n    let color;\n\n    const _render: Partial<SplitterLabels> = (selection: HTMLSelection) => {\n        selection.text(\"\");\n\n        const labelDataJoin = fc\n            .dataJoin(\"span\", \"splitter-label\")\n            .key((d) => d);\n\n        const disabled = !alt && labels.length === 1;\n        const coloured = color && settings.splitValues.length === 0;\n        labelDataJoin(selection, labels)\n            .classed(\"disabled\", disabled)\n            .text((d) => d.name)\n            .style(\"color\", (d) =>\n                coloured ? withoutOpacity(color(d.name)) : undefined\n            )\n            .on(\"click\", (event, d) => {\n                if (disabled) return;\n\n                if (alt) {\n                    settings.splitMainValues = settings.splitMainValues.filter(\n                        (v) => v != d.name\n                    );\n                } else {\n                    settings.splitMainValues = [d.name].concat(\n                        settings.splitMainValues || []\n                    );\n                }\n\n                event.target\n                    .getRootNode()\n                    .host.closest(\"perspective-viewer\")\n                    ?.dispatchEvent(new Event(\"perspective-config-update\"));\n\n                redrawChart(selection);\n            });\n    };\n\n    const redrawChart = (selection: HTMLSelection) => {\n        const chartElement = getChartElement(selection.node());\n        chartElement._container.innerHTML = \"\";\n        chartElement._draw();\n    };\n\n    _render.labels = (...args: SplitterLabel[][]): any => {\n        if (!args.length) {\n            return labels;\n        }\n        labels = args[0];\n        return _render;\n    };\n    _render.alt = (...args: boolean[]): any => {\n        if (!args.length) {\n            return alt;\n        }\n        alt = args[0];\n        return _render;\n    };\n\n    _render.color = (...args) => {\n        if (!args.length) {\n            return color;\n        }\n        color = args[0];\n        return _render;\n    };\n\n    return _render as SplitterLabels;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Settings } from \"../types\";\nimport { splitterLabels } from \"./splitterLabels\";\n\nexport interface AxisSplitter {\n    (selection: any): void;\n\n    color(): d3.ScaleOrdinal<string, unknown>;\n    color(nextColor: d3.ScaleOrdinal<string, unknown>): AxisSplitter;\n\n    haveSplit: () => boolean;\n\n    data(): any[];\n    data(nextData: any[]): AxisSplitter;\n\n    altData(): any[];\n    altData(nextData: any[]): AxisSplitter;\n}\n\nexport const axisSplitter = (\n    settings: Settings,\n    sourceData,\n    splitFn = dataSplitFunction\n): AxisSplitter => {\n    let color: d3.ScaleOrdinal<string, unknown> | undefined = undefined;\n    let data;\n    let altData;\n\n    // splitMainValues is an array of main-value names to put into the alt-axis\n    const splitMainValues = settings.splitMainValues || [];\n    const altValue = (name) => {\n        const split = name.split(\"|\");\n        return splitMainValues.includes(split[split.length - 1]);\n    };\n\n    const haveSplit: boolean = settings[\"mainValues\"].some((m) =>\n        altValue(m.name)\n    );\n\n    // Split the data into main and alt displays\n    data = haveSplit\n        ? splitFn(sourceData, (key) => !altValue(key))\n        : sourceData;\n    altData = haveSplit ? splitFn(sourceData, altValue) : null;\n\n    // Renderer to show the special controls for moving between axes\n    const splitter: any = (selection) => {\n        if (settings[\"mainValues\"].length === 1) return;\n\n        const labelsInfo = settings[\"mainValues\"].map((v, i) => ({\n            index: i,\n            name: v.name,\n        }));\n        const mainLabels = labelsInfo.filter((v) => !altValue(v.name));\n        const altLabels = labelsInfo.filter((v) => altValue(v.name));\n\n        const labeller = () => splitterLabels(settings).color(color);\n\n        selection\n            .select(\".y-label.left-label\")\n            .call(labeller().labels(mainLabels));\n        selection\n            .select(\".y-label.right-label\")\n            .call(labeller().labels(altLabels).alt(true));\n    };\n\n    splitter.color = (...args: d3.ScaleOrdinal<string, unknown>[]): any => {\n        if (!args.length) {\n            return color;\n        }\n        color = args[0];\n        return splitter;\n    };\n\n    splitter.haveSplit = (): boolean => haveSplit;\n\n    splitter.data = (...args: any[][]): any => {\n        if (!args.length) {\n            return data;\n        }\n        data = args[0];\n        return splitter;\n    };\n\n    splitter.altData = (...args: any[][]): any => {\n        if (!args.length) {\n            return altData;\n        }\n        altData = args[0];\n        return splitter;\n    };\n\n    return splitter;\n};\n\nexport const dataSplitFunction = (sourceData, isIncludedFn) => {\n    return sourceData.map((d) => d.filter((v) => isIncludedFn(v.key)));\n};\n\nexport const dataBlankFunction = (sourceData, isIncludedFn) => {\n    return sourceData.map((series) => {\n        if (!isIncludedFn(series.key)) {\n            // Blank this data\n            return series.map((v) => Object.assign({}, v, { mainValue: null }));\n        }\n        return series;\n    });\n};\n\nexport const groupedBlankFunction = (sourceData, isIncludedFn) => {\n    return sourceData.map((group) => dataBlankFunction(group, isIncludedFn));\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { axisFactory } from \"../axis/axisFactory\";\nimport { chartSvgFactory } from \"../axis/chartFactory\";\nimport domainMatchOrigins from \"../axis/domainMatchOrigins\";\nimport {\n    axisSplitter,\n    dataBlankFunction,\n    groupedBlankFunction,\n} from \"../axis/axisSplitter\";\nimport { AXIS_TYPES } from \"../axis/axisType\";\nimport { barSeries } from \"../series/barSeries\";\nimport { seriesColors } from \"../series/seriesColors\";\nimport { groupAndStackData } from \"../data/groupData\";\nimport { colorLegend } from \"../legend/legend\";\nimport { filterData } from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\nimport { hardLimitZeroPadding } from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction columnChart(container: HTMLSelection, settings: Settings) {\n    const data = groupAndStackData(settings, filterData(settings));\n    const color = seriesColors(settings);\n\n    const legend = colorLegend().settings(settings).scale(color);\n\n    const bars = barSeries(settings, color).orient(\"vertical\");\n    const series = fc\n        .seriesSvgMulti()\n        .mapping((data, index) => data[index])\n        .series(data.map(() => bars));\n\n    const xAxis = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"crossValues\")\n        .valueName(\"crossValue\")(data);\n    const yAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .valueName(\"mainValue\")\n        .memoValue(settings.axisMemo[1])\n        .excludeType(AXIS_TYPES.ordinal)\n        .orient(\"vertical\")\n        .include([0])\n        .paddingStrategy(hardLimitZeroPadding());\n\n    // Check whether we've split some values into a second y-axis\n    const blankFunction =\n        settings.mainValues.length > 1\n            ? groupedBlankFunction\n            : dataBlankFunction;\n    const splitter = axisSplitter(settings, data, blankFunction).color(color);\n\n    const yAxis1 = yAxisFactory(splitter.data());\n\n    // No grid lines if splitting y-axis\n    const plotSeries = splitter.haveSplit()\n        ? series\n        : withGridLines(series, settings).orient(\"vertical\");\n\n    const chart = chartSvgFactory(xAxis, yAxis1)\n        .axisSplitter(splitter)\n        .plotArea(plotSeries);\n\n    if (chart.xPaddingInner) {\n        chart.xPaddingInner(0.5);\n        chart.xPaddingOuter(0.25);\n        bars.align(\"left\");\n    }\n    chart.yNice && chart.yNice();\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale);\n\n    if (splitter.haveSplit()) {\n        // Create the y-axis data for the alt-axis\n        const yAxis2 = yAxisFactory(splitter.altData());\n\n        domainMatchOrigins(yAxis1.domain, yAxis2.domain);\n        chart.yDomain(yAxis1.domain).altAxis(yAxis2);\n    }\n\n    // render\n    container.datum(splitter.data()).call(zoomChart);\n    container.call(legend);\n}\ncolumnChart.plugin = {\n    name: \"Y Bar\",\n    category: \"Y Chart\",\n    max_cells: 1000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        names: [\"Y Axis\"],\n    },\n};\n\nexport default columnChart;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { withoutOpacity } from \"./seriesColors.js\";\nimport { D3Scale, Settings } from \"../types.js\";\n\nexport function lineSeries(settings: Settings, color: D3Scale) {\n    let series = fc.seriesSvgLine();\n\n    const estimated_size =\n        settings.data.length *\n        (settings.data?.length > 0\n            ? Object.keys(settings.data[0]).length -\n              (settings.crossValues?.length > 0 ? 1 : 0)\n            : 0);\n    const stroke_width = Math.max(\n        1,\n        Math.min(3, Math.floor(settings.size.width / estimated_size / 2))\n    );\n\n    series = series.decorate((selection) => {\n        selection\n            .style(\"stroke\", (d) => withoutOpacity(color(d[0] && d[0].key)))\n            .style(\"stroke-width\", stroke_width);\n    });\n\n    return series.crossValue((d) => d.crossValue).mainValue((d) => d.mainValue);\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { labelFunction } from \"../axis/axisLabel\";\nimport { Settings } from \"../types\";\n\nexport type SplitData = {\n    key: string;\n    crossValue: string;\n    mainValue: string | number | boolean | Date;\n    row: any;\n};\n\nexport function splitData(settings: Settings, data: any[]): SplitData[][] {\n    const labelfn = labelFunction(settings);\n\n    return data.map((col, i) => {\n        return Object.keys(col)\n            .filter((key) => key !== \"__ROW_PATH__\")\n            .map((key) => ({\n                key,\n                crossValue: labelfn(col, i),\n                mainValue: col[key],\n                row: col,\n            }));\n    });\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nexport const transposeData = function (x) {\n    const columns = [];\n    for (const row of x) {\n        for (let col = 0; col < row.length; col++) {\n            if (row[col].mainValue !== null) {\n                columns[col] = columns[col] || [];\n                columns[col].push(row[col]);\n            }\n        }\n    }\n    return columns;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nexport const findBestFromData = (array, valueFn, compareFn = Math.min) => {\n    const findBestFromArray = (array) => {\n        return array.reduce((best, v) => {\n            const thisValue = findBestFromItem(v);\n            return thisValue &&\n                (!best ||\n                    compareFn(best.value, thisValue.value) === thisValue.value)\n                ? thisValue\n                : best;\n        }, null);\n    };\n    const findBestFromItem = (item) => {\n        if (Array.isArray(item)) {\n            return findBestFromArray(item);\n        }\n        const value = valueFn(item);\n        return value !== null\n            ? {\n                  item,\n                  value,\n              }\n            : null;\n    };\n\n    const bestItem = findBestFromArray(array);\n    return bestItem ? bestItem.item : null;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { tooltip } from \"./tooltip\";\nimport { withOpacity } from \"../series/seriesColors.js\";\nimport { findBestFromData } from \"../data/findBest\";\nimport { raiseEvent } from \"./selectionEvent\";\nimport { SplitData } from \"../data/splitData\";\nimport { D3Scale, Settings } from \"../types\";\n\nexport type AltDataWithScale = {\n    data: SplitData[][];\n    yScale: D3Scale;\n};\n\nexport interface SizeArg {\n    (arg: any): any;\n    copy: () => any;\n}\n\ninterface NearbyTip {\n    (selection: any): void;\n\n    scaleFactor(): number;\n    scaleFactor(scaleFactor: number): NearbyTip;\n\n    settings(): Settings;\n    settings(settings: Settings): NearbyTip;\n\n    xScale(): D3Scale;\n    xScale(xScale: D3Scale): NearbyTip;\n\n    yScale(): D3Scale;\n    yScale(yScale: D3Scale): NearbyTip;\n\n    color(): D3Scale;\n    color(color: D3Scale): NearbyTip;\n\n    size(): SizeArg;\n    size(size: SizeArg): NearbyTip;\n\n    canvas(): boolean;\n    canvas(canvas: boolean): NearbyTip;\n\n    data(): Record<string, any>[][];\n    data(data: Record<string, any>[][]): NearbyTip;\n\n    xValueName(): string;\n    xValueName(xValueName: string): NearbyTip;\n\n    yValueName(): string;\n    yValueName(yValueName: string): NearbyTip;\n\n    altDataWithScale(): AltDataWithScale;\n    altDataWithScale(altDataWithScale: AltDataWithScale): NearbyTip;\n}\n\nexport default (): NearbyTip => {\n    const base = tooltip().alwaysShow(true);\n\n    let xScale: D3Scale | null = null;\n    let yScale: D3Scale | null = null;\n    let color: D3Scale | null = null;\n    let size = null;\n    let canvas = false;\n    let data = null;\n    let xValueName = \"crossValue\";\n    let yValueName = \"mainValue\";\n    let altDataWithScale = null;\n    let scale_factor = 1;\n\n    const nearbyTip: Partial<NearbyTip> = (selection) => {\n        const chartPlotArea = `d3fc-${canvas ? \"canvas\" : \"svg\"}.plot-area`;\n        if (xScale || yScale) {\n            let tooltipData = null;\n            const pointer = fc.pointer().on(\"point\", (event) => {\n                const closest = event.length\n                    ? getClosestDataPoint(event[0])\n                    : null;\n                tooltipData = closest ? [closest.data] : [];\n                const useYScale = closest ? closest.scale : yScale;\n\n                renderTip(selection, tooltipData, useYScale);\n            });\n\n            selection\n                .select(chartPlotArea)\n                .on(\"measure.nearbyTip\", () => renderTip(selection, []))\n                .on(\"click\", () => {\n                    if (tooltipData.length) {\n                        raiseEvent(\n                            selection.node(),\n                            tooltipData[0],\n                            base.settings()\n                        );\n                    }\n                })\n                .call(pointer);\n        }\n    };\n\n    const renderTip = (selection, tipData, useYScale = yScale) => {\n        const tips = selection\n            .select(\"d3fc-svg.plot-area svg\")\n            .selectAll(\"circle.nearbyTip\")\n            .data(tipData);\n        tips.exit().remove();\n\n        tips.enter()\n            .append(\"circle\")\n            .attr(\"class\", \"nearbyTip\")\n            .merge(tips)\n            .attr(\"r\", (d) =>\n                size ? scale_factor * Math.sqrt(size(d.size)) : 10\n            )\n            .attr(\n                \"transform\",\n                (d) =>\n                    `translate(${xScale(d[xValueName])},${useYScale(\n                        d[yValueName]\n                    )})`\n            )\n            .style(\"stroke\", \"none\")\n            .style(\"fill\", (d) => color && d.key && withOpacity(color(d.key)));\n\n        base(tips);\n    };\n\n    const getClosestDataPoint = (pos) => {\n        const distFn = (scale) => {\n            return (v) => {\n                if (\n                    v[yValueName] === undefined ||\n                    v[yValueName] === null ||\n                    v[xValueName] === undefined ||\n                    v[xValueName] === null\n                )\n                    return null;\n\n                return Math.sqrt(\n                    Math.pow((xScale(v[xValueName]) as number) - pos.x, 2) +\n                        Math.pow(scale(v[yValueName]) - pos.y, 2)\n                );\n            };\n        };\n\n        // Check the main data\n        const dist1 = distFn(yScale);\n        const best1 = findBestFromData(data, dist1, Math.min);\n\n        if (altDataWithScale) {\n            // Check the alt data with its scale, to see if any are closer\n            const dist2 = distFn(altDataWithScale.yScale);\n            const best2 = findBestFromData(\n                altDataWithScale.data,\n                dist2,\n                Math.min\n            );\n            return dist1(best1) <= dist2(best2)\n                ? { data: best1, scale: yScale }\n                : { data: best2, scale: altDataWithScale.yScale };\n        }\n        return { data: best1, scale: yScale };\n    };\n\n    nearbyTip.scaleFactor = (...args: number[]): any => {\n        if (!args.length) {\n            return scale_factor;\n        }\n        scale_factor = args[0];\n        return nearbyTip;\n    };\n    nearbyTip.xScale = (...args: D3Scale[]): any => {\n        if (!args.length) {\n            return xScale;\n        }\n        xScale = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.yScale = (...args: D3Scale[]): any => {\n        if (!args.length) {\n            return yScale;\n        }\n        yScale = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.color = (...args: D3Scale[]): any => {\n        if (!args.length) {\n            return color;\n        }\n        color = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.size = (...args: SizeArg[]): any => {\n        if (!args.length) {\n            return size;\n        }\n        size = args[0] ? args[0].copy().range([40, 4000]) : null;\n        return nearbyTip;\n    };\n\n    nearbyTip.canvas = (...args: boolean[]): any => {\n        if (!args.length) {\n            return canvas;\n        }\n        canvas = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.data = (...args: Record<string, any>[][][]): any => {\n        if (!args.length) {\n            return data;\n        }\n        data = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.xValueName = (...args: string[]): any => {\n        if (!args.length) {\n            return xValueName;\n        }\n        xValueName = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.yValueName = (...args: string[]): any => {\n        if (!args.length) {\n            return yValueName;\n        }\n        yValueName = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.altDataWithScale = (...args: AltDataWithScale[]): any => {\n        if (!args.length) {\n            return altDataWithScale;\n        }\n        altDataWithScale = args[0];\n        return nearbyTip;\n    };\n\n    nearbyTip.settings = (...args: Settings[]): any => {\n        if (!args.length) {\n            return base.settings();\n        }\n        base.settings(args[0]);\n        return nearbyTip;\n    };\n\n    fc.rebindAll(nearbyTip, base);\n    return nearbyTip as NearbyTip;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { AxisFactoryContent, axisFactory } from \"../axis/axisFactory\";\nimport { AXIS_TYPES } from \"../axis/axisType\";\nimport { chartSvgFactory } from \"../axis/chartFactory\";\nimport { axisSplitter } from \"../axis/axisSplitter\";\nimport { seriesColors } from \"../series/seriesColors\";\nimport { lineSeries } from \"../series/lineSeries\";\nimport { splitData } from \"../data/splitData\";\nimport { colorLegend } from \"../legend/legend\";\nimport { filterData } from \"../legend/filter\";\nimport { transposeData } from \"../data/transposeData\";\nimport withGridLines from \"../gridlines/gridlines\";\n\nimport { hardLimitZeroPadding } from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport nearbyTip from \"../tooltip/nearbyTip\";\nimport { Settings } from \"../types\";\n\nfunction lineChart(container, settings: Settings) {\n    const data = splitData(settings, filterData(settings));\n    const color = seriesColors(settings);\n\n    const legend = colorLegend().settings(settings).scale(color);\n\n    const series = fc\n        .seriesSvgRepeat()\n        .series(lineSeries(settings, color))\n        .orient(\"horizontal\");\n\n    const paddingStrategy = hardLimitZeroPadding()\n        .pad([0.1, 0.1])\n        .padUnit(\"percent\");\n\n    // Check whether we've split some values into a second y-axis\n    const splitter = axisSplitter(settings, transposeData(data)).color(color);\n\n    const xAxis: AxisFactoryContent = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"crossValues\")\n        .valueName(\"crossValue\")(data);\n\n    const yAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .valueName(\"mainValue\")\n        .memoValue(splitter.haveSplit() ? null : settings.axisMemo[0])\n        .orient(\"vertical\")\n        .paddingStrategy(paddingStrategy);\n\n    const yAxis1: AxisFactoryContent = yAxisFactory(splitter.data());\n\n    // No grid lines if splitting y-axis\n    const plotSeries = withGridLines(series, settings).orient(\"vertical\");\n\n    const chart = chartSvgFactory(xAxis, yAxis1)\n        .axisSplitter(splitter)\n        .plotArea(plotSeries);\n\n    chart.yNice && chart.yNice();\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale);\n\n    const toolTip = nearbyTip()\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis1.scale)\n        .color(color)\n        .data(data);\n\n    if (splitter.haveSplit()) {\n        // Create the y-axis data for the alt-axis\n        const yAxis2 = yAxisFactory(splitter.altData());\n        chart.altAxis(yAxis2);\n        // Give the tooltip the information (i.e. 2 datasets with different\n        // scales)\n        toolTip.data(splitter.data()).altDataWithScale({\n            yScale: yAxis2.scale,\n            data: splitter.altData(),\n        });\n    }\n\n    const transposed_data = splitter.data();\n\n    // render\n    container.datum(transposed_data).call(zoomChart);\n    container.call(toolTip);\n    container.call(legend);\n}\n\nlineChart.plugin = {\n    name: \"Y Line\",\n    category: \"Y Chart\",\n    max_cells: 4000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        names: [\"Y Axis\"],\n    },\n};\n\nexport default lineChart;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\n\nconst sqrt3 = Math.sqrt(3);\n\nconst nabla = {\n    draw: function (context, size) {\n        const y = Math.sqrt(size / (sqrt3 * 3));\n        context.moveTo(0, y * 2);\n        context.lineTo(-sqrt3 * y, -y);\n        context.lineTo(sqrt3 * y, -y);\n        context.closePath();\n    },\n};\n\nexport const symbols = [\n    d3.symbolCircle,\n    d3.symbolCross,\n    d3.symbolDiamond,\n    d3.symbolSquare,\n    d3.symbolStar,\n    d3.symbolTriangle,\n    d3.symbolWye,\n];\nexport const symbolsObj = {\n    circle: d3.symbolCircle,\n    square: d3.symbolSquare,\n    cross: d3.symbolCross,\n    diamond: d3.symbolDiamond,\n    star: d3.symbolStar,\n    triangle: d3.symbolTriangle,\n    wye: d3.symbolWye,\n    nabla,\n};\n\nexport function fromDomain(domain: string[]) {\n    return domain.length > 1\n        ? d3.scaleOrdinal().domain(domain).range(symbols)\n        : null;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { seriesCanvasPoint } from \"d3fc/index.js\";\nimport { withOpacity, withoutOpacity } from \"./seriesColors\";\nimport { groupFromKey } from \"./seriesKey\";\nimport { fromDomain } from \"./seriesSymbols\";\nimport { toValue } from \"../tooltip/selectionData\";\nimport { getValuesByColumn } from \"../data/utils\";\nimport { D3Scale, Settings } from \"../types\";\n\nconst LABEL_PADDING = 8;\nconst LABEL_COSINE = 1;\n\n/**\n *\n * @param {any} settings\n * @param {string} seriesKey\n * @param {d3.ScaleLinear} size\n * @param {d3.ScaleOrdinal} color\n * @param {string} label\n * @param {d3.ScaleOrdinal} symbols\n * @param {number?} scale_factor\n * @returns  {d3fc.seriesCanvasPoint}\n */\nexport function pointSeriesCanvas(\n    settings,\n    symbolKey,\n    size,\n    color,\n    label,\n    symbols,\n    scale_factor = 1\n) {\n    let series = seriesCanvasPoint()\n        .crossValue((d) => d.x)\n        .mainValue((d) => d.y);\n\n    if (symbols) {\n        series.type((data) => symbols(data.row[symbolKey]));\n    }\n\n    if (size) {\n        series.size((d) => Math.round(scale_factor * size(d.size)));\n    }\n\n    series.decorate((context, data) => {\n        const colorValue = color(data.colorValue);\n        const opacity = settings.colorStyles?.opacity;\n        if (label) {\n            const { type } = settings.mainValues.find((x) => x.name === label);\n            const value = toValue(type, data.row[label]);\n            if (value !== null) {\n                context.fillStyle = settings.textStyles.color;\n                context.font = settings.textStyles.font;\n                let magnitude = 0;\n                if (size) {\n                    // A = pi * r^2\n                    // r = sqrt(A / pi)\n                    const radius = Math.sqrt(\n                        (scale_factor * size(data.size)) / Math.PI\n                    );\n\n                    magnitude = radius * LABEL_COSINE;\n                }\n\n                const mag_with_padding = magnitude + LABEL_PADDING;\n                context.fillText(value, mag_with_padding, 4);\n            }\n        }\n\n        context.strokeStyle = withoutOpacity(colorValue);\n        context.fillStyle = withOpacity(colorValue, opacity);\n    });\n\n    return series;\n}\n\nexport function symbolTypeFromColumn(\n    settings: Settings,\n    column: string | null\n): D3Scale {\n    let rows = [...new Set(getValuesByColumn(settings, column))];\n    return fromDomain(rows);\n}\n\nexport function symbolTypeFromGroups(settings: Settings) {\n    const col =\n        settings.data && settings.data.length > 0 ? settings.data[0] : {};\n    const domain: string[] = [];\n    Object.keys(col).forEach((key) => {\n        if (key !== \"__ROW_PATH__\") {\n            const group = groupFromKey(key);\n            if (!domain.includes(group)) {\n                domain.push(group);\n            }\n        }\n    });\n    return fromDomain(domain);\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { groupFromKey } from \"../series/seriesKey\";\n\nexport function xySplitData(settings, data) {\n    const n_cols = settings.mainValues.length;\n\n    return data.map((col) => {\n        const cols = Object.keys(col).filter((key) => key !== \"__ROW_PATH__\");\n        const row = new Array(cols.length / n_cols);\n        for (let i = 0; i < cols.length / n_cols; i++) {\n            row[i] = {\n                key: groupFromKey(cols[i * n_cols]),\n                crossValue: col[cols[i * n_cols]],\n                mainValue: col[cols[i * n_cols + 1]],\n                row: col,\n            };\n        }\n        return row;\n    });\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { transposeData } from \"../data/transposeData\";\nimport { AxisFactoryContent, axisFactory } from \"../axis/axisFactory\";\nimport { chartSvgFactory } from \"../axis/chartFactory\";\nimport { symbolTypeFromGroups } from \"../series/pointSeriesCanvas\";\nimport { lineSeries } from \"../series/lineSeries\";\nimport { xySplitData } from \"../data/xySplitData\";\nimport { seriesColorsFromGroups } from \"../series/seriesColors\";\nimport { colorGroupLegend } from \"../legend/legend\";\nimport { filterDataByGroup } from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\nimport { hardLimitZeroPadding } from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport nearbyTip from \"../tooltip/nearbyTip\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction xyLine(container: HTMLSelection, settings: Settings) {\n    const data = transposeData(\n        xySplitData(settings, filterDataByGroup(settings))\n    );\n\n    const color = seriesColorsFromGroups(settings);\n    const symbols = symbolTypeFromGroups(settings);\n\n    let legend = null;\n    if (color.domain().length >= 2) {\n        legend = colorGroupLegend()\n            .settings(settings)\n            .scale(symbols)\n            .color(color);\n    }\n\n    const series = fc\n        .seriesSvgRepeat()\n        .series(lineSeries(settings, color))\n        .orient(\"horizontal\");\n\n    const paddingStrategy = hardLimitZeroPadding()\n        .pad([0.1, 0.1])\n        .padUnit(\"percent\");\n\n    const xAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .settingValue(settings.mainValues[0].name)\n        .valueName(\"crossValue\")\n        .memoValue(settings.axisMemo[0])\n        .paddingStrategy(paddingStrategy);\n\n    const yAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .settingValue(settings.mainValues[1].name)\n        .valueName(\"mainValue\")\n        .memoValue(settings.axisMemo[1])\n        .orient(\"vertical\")\n        .paddingStrategy(paddingStrategy);\n\n    const yAxis: AxisFactoryContent = yAxisFactory(data);\n    const xAxis: AxisFactoryContent = xAxisFactory(data);\n\n    const plotSeries = withGridLines(series, settings).orient(\"vertical\");\n\n    const chart = chartSvgFactory(xAxis, yAxis)\n        .xLabel(settings.mainValues[0].name)\n        .yLabel(settings.mainValues[1].name)\n        .plotArea(plotSeries);\n\n    chart.xNice && chart.xNice();\n    chart.yNice && chart.yNice();\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis.scale);\n\n    const toolTip = nearbyTip()\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis.scale)\n        .color(color)\n        .data(data);\n\n    container.datum(data).call(zoomChart);\n    container.call(toolTip);\n    if (legend) {\n        container.call(legend);\n    }\n}\n\nxyLine.plugin = {\n    name: \"X/Y Line\",\n    category: \"X/Y Chart\",\n    max_cells: 50000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        type: \"number\",\n        count: 2,\n        names: [\"X Axis\", \"Y Axis\", \"Tooltip\"],\n    },\n    selectMode: \"toggle\",\n};\n\nexport default xyLine;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { D3Scale, Settings } from \"../types\";\n\nexport function areaSeries(_settings: Settings, color: D3Scale) {\n    let series = fc.seriesSvgArea();\n\n    series = series.decorate((selection) => {\n        selection.style(\"fill\", (d) => color(d[0].key)).style(\"opacity\", 0.5);\n    });\n\n    return series\n        .crossValue((d) => d.crossValue)\n        .mainValue((d) => d.mainValue)\n        .baseValue((d) => d.baseValue);\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { labelFunction } from \"../axis/axisLabel\";\nimport { Settings } from \"../types\";\n\nexport interface SplitAndBasedData {\n    key: string;\n    crossValue: string;\n    mainValue: number;\n    baseValue: number;\n    row: any;\n}\n\nexport function splitAndBaseData(\n    settings: Settings,\n    data\n): SplitAndBasedData[][] {\n    const labelfn = labelFunction(settings);\n\n    return data.map((col, i): SplitAndBasedData[] => {\n        const baseValues = {};\n\n        return Object.keys(col)\n            .filter((key) => key !== \"__ROW_PATH__\")\n            .map((key) => {\n                // Keys are of the form \"split1|split2|aggregate\"\n                const labels = key.split(\"|\");\n                // label=\"aggregate\"\n                const label = labels[labels.length - 1];\n                const baseValue = baseValues[label] || 0;\n                const value = baseValue + col[key];\n                baseValues[label] = value;\n\n                return {\n                    key,\n                    crossValue: labelfn(col, i),\n                    mainValue: value,\n                    baseValue: baseValue,\n                    row: col,\n                };\n            });\n    });\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { AxisFactoryContent, axisFactory } from \"../axis/axisFactory\";\nimport { chartSvgFactory } from \"../axis/chartFactory\";\nimport { axisSplitter } from \"../axis/axisSplitter\";\nimport { AXIS_TYPES } from \"../axis/axisType\";\nimport { areaSeries } from \"../series/areaSeries\";\nimport { lineSeries } from \"../series/lineSeries\";\nimport { seriesColors } from \"../series/seriesColors\";\nimport { splitAndBaseData } from \"../data/splitAndBaseData\";\nimport { colorLegend } from \"../legend/legend\";\nimport { filterData } from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\n\nimport { hardLimitZeroPadding } from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport nearbyTip from \"../tooltip/nearbyTip\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction areaChart(container: HTMLSelection, settings: Settings) {\n    const data: any[] = splitAndBaseData(settings, filterData(settings));\n\n    const color = seriesColors(settings);\n    const legend = colorLegend().settings(settings).scale(color);\n\n    const area_series = fc\n        .seriesSvgRepeat()\n        .series(areaSeries(settings, color).orient(\"vertical\"));\n\n    const line_series = fc\n        .seriesSvgRepeat()\n        .series(lineSeries(settings, color))\n        .orient(\"vertical\");\n\n    const series = fc.seriesSvgMulti().series([area_series, line_series]);\n\n    const xAxis: AxisFactoryContent = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"crossValues\")\n        .valueName(\"crossValue\")(data);\n    const yAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .valueName(\"mainValue\")\n        .memoValue(settings.axisMemo[1])\n        .excludeType(AXIS_TYPES.ordinal)\n        .orient(\"vertical\")\n        .include([0])\n        .paddingStrategy(hardLimitZeroPadding());\n\n    // Check whether we've split some values into a second y-axis\n    const splitter = axisSplitter(settings, data).color(color);\n\n    const yAxis1: AxisFactoryContent = yAxisFactory(splitter.data());\n\n    // No grid lines if splitting y-axis\n    const plotSeries = splitter.haveSplit()\n        ? series\n        : withGridLines(series, settings).orient(\"vertical\");\n\n    const chart = chartSvgFactory(xAxis, yAxis1)\n        .axisSplitter(splitter)\n        .plotArea(plotSeries);\n\n    chart.yNice && chart.yNice();\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale);\n\n    const toolTip = nearbyTip()\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis1.scale)\n        .color(color)\n        .data(data);\n\n    if (splitter.haveSplit()) {\n        // Create the y-axis data for the alt-axis\n        const yAxis2 = yAxisFactory(splitter.altData());\n        chart.altAxis(yAxis2);\n        // Give the tooltip the information (i.e. 2 datasets with different\n        // scales)\n        toolTip.data(splitter.data()).altDataWithScale({\n            yScale: yAxis2.scale,\n            data: splitter.altData(),\n        });\n    }\n\n    // render\n    container.datum(splitter.data()).call(zoomChart);\n    container.call(toolTip);\n    container.call(legend);\n}\nareaChart.plugin = {\n    name: \"Y Area\",\n    category: \"Y Chart\",\n    max_cells: 4000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        names: [\"Y Axis\"],\n    },\n};\n\nexport default areaChart;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { withOpacity, withoutOpacity } from \"./seriesColors\";\nimport { fromDomain } from \"./seriesSymbols\";\nimport { D3Scale, Settings } from \"../types\";\n\nexport function categoryPointSeries(\n    settings: Settings,\n    seriesKey: string,\n    color: D3Scale,\n    symbols: D3Scale\n) {\n    let series = fc.seriesSvgPoint().size(100);\n    const opacity = settings.colorStyles && settings.colorStyles.opacity;\n\n    if (symbols) {\n        series.type(symbols(seriesKey));\n    }\n\n    series.decorate((selection) => {\n        selection\n            .style(\"stroke\", (d) =>\n                withoutOpacity(color(d.colorValue || seriesKey))\n            )\n            .style(\"fill\", (d) =>\n                withOpacity(color(d.colorValue || seriesKey), opacity)\n            );\n    });\n\n    return series.crossValue((d) => d.crossValue).mainValue((d) => d.mainValue);\n}\n\nexport function symbolType(settings: Settings) {\n    const col =\n        settings.data && settings.data.length > 0 ? settings.data[0] : {};\n    const domain = Object.keys(col).filter((k) => k !== \"__ROW_PATH__\");\n    return fromDomain(domain);\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { AxisFactoryContent, axisFactory } from \"../axis/axisFactory\";\nimport { AXIS_TYPES } from \"../axis/axisType\";\nimport { chartSvgFactory } from \"../axis/chartFactory\";\nimport { axisSplitter } from \"../axis/axisSplitter\";\nimport { seriesColors } from \"../series/seriesColors\";\nimport { categoryPointSeries, symbolType } from \"../series/categoryPointSeries\";\nimport { groupData } from \"../data/groupData\";\nimport { symbolLegend } from \"../legend/legend\";\nimport { filterData } from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\nimport { hardLimitZeroPadding } from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport nearbyTip from \"../tooltip/nearbyTip\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction yScatter(container: HTMLSelection, settings: Settings) {\n    const data = groupData(settings, filterData(settings));\n    const symbols = symbolType(settings);\n    const color = seriesColors(settings);\n\n    const legend = symbolLegend()\n        .settings(settings)\n        .scale(symbols)\n        .color(color);\n\n    const series = fc\n        .seriesSvgMulti()\n        .mapping((data, index) => data[index])\n        .series(\n            data.map((series) =>\n                categoryPointSeries(settings, series.key, color, symbols)\n            )\n        );\n\n    const paddingStrategy = hardLimitZeroPadding()\n        .pad([0.05, 0.05])\n        .padUnit(\"percent\");\n\n    const xAxis: AxisFactoryContent = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"crossValues\")\n        .valueName(\"crossValue\")(data);\n    const yAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .valueName(\"mainValue\")\n        .memoValue(settings.axisMemo[1])\n        .orient(\"vertical\")\n        .paddingStrategy(paddingStrategy);\n\n    // Check whether we've split some values into a second y-axis\n    const splitter = axisSplitter(settings, data).color(color);\n\n    const yAxis1: AxisFactoryContent = yAxisFactory(splitter.data());\n\n    // No grid lines if splitting y-axis\n    const plotSeries = splitter.haveSplit()\n        ? series\n        : withGridLines(series, settings).orient(\"vertical\");\n\n    const chart = chartSvgFactory(xAxis, yAxis1)\n        .axisSplitter(splitter)\n        .plotArea(plotSeries);\n\n    chart.yNice && chart.yNice();\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale);\n\n    const toolTip = nearbyTip()\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis1.scale)\n        .color(color)\n        .data(data);\n\n    if (splitter.haveSplit()) {\n        // Create the y-axis data for the alt-axis\n        const yAxis2 = yAxisFactory(splitter.altData());\n        chart.altAxis(yAxis2);\n        // Give the tooltip the information (i.e. 2 datasets with different\n        // scales)\n        toolTip.data(splitter.data()).altDataWithScale({\n            yScale: yAxis2.scale,\n            data: splitter.altData(),\n        });\n    }\n\n    // render\n    container.datum(splitter.data()).call(zoomChart);\n    container.call(toolTip);\n    if (legend) {\n        container.call(legend);\n    }\n}\n\nyScatter.plugin = {\n    name: \"Y Scatter\",\n    category: \"Y Chart\",\n    max_cells: 4000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        names: [\"Y Axis\"],\n    },\n};\n\nexport default yScatter;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { labelFunction } from \"../axis/axisLabel\";\nimport { Settings } from \"../types\";\nimport { splitIntoMultiSeries } from \"./splitIntoMultiSeries\";\n\nexport function pointData(settings: Settings, data) {\n    return splitIntoMultiSeries(settings, data, { excludeEmpty: true }).map(\n        (data) => seriesToPoints(settings, data)\n    );\n}\n\nfunction seriesToPoints(settings: Settings, data) {\n    const labelfn = labelFunction(settings);\n\n    const mappedSeries = data.map((col, i) => ({\n        crossValue: labelfn(col, i),\n        mainValues: settings.mainValues.map((v) => col[v.name]),\n        x: col[settings.mainValues[0].name],\n        y: col[settings.mainValues[1].name],\n        colorValue: settings.realValues[2]\n            ? col[settings.realValues[2]]\n            : undefined,\n        size: settings.realValues[3] ? col[settings.realValues[3]] : undefined,\n        key: data.key,\n        row: col,\n    }));\n\n    mappedSeries.key = data.key;\n    return mappedSeries;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { domain } from \"../axis/linearAxis\";\nimport { Settings, ValueName } from \"../types\";\n\nexport function seriesLinearRange(\n    _settings,\n    data,\n    valueName,\n    customExtent?: any\n) {\n    return d3.scaleLinear().domain(getExtent(data, valueName, customExtent));\n}\n\nexport function seriesColorRange(\n    settings: Settings,\n    data: any[],\n    valueName: ValueName,\n    customExtent = null\n): d3.ScaleSequential<string> {\n    let extent = getExtent(data, valueName, customExtent);\n    let gradient = settings.colorStyles.gradient.full;\n\n    if (extent[0] >= 0) {\n        gradient = settings.colorStyles.gradient.positive;\n    } else if (extent[1] <= 0) {\n        gradient = settings.colorStyles.gradient.negative;\n    } else {\n        const maxVal = Math.max(-extent[0], extent[1]);\n        extent = [-maxVal, maxVal];\n    }\n\n    const interpolator = multiInterpolator(gradient);\n    return d3.scaleSequential(interpolator).domain(extent);\n}\n\nconst getExtent = (data: any[], valueName: ValueName, customExtent?: any) => {\n    return customExtent || domain().valueName(valueName).pad([0, 0])(data);\n};\n\nconst multiInterpolator = (gradientPairs) => {\n    // A new interpolator that calls through to a set of\n    // interpolators between each value/color pair\n    const interpolators = gradientPairs\n        .slice(1)\n        .map((p, i) => d3.interpolate(gradientPairs[i][1], p[1]));\n    return (value) => {\n        const index = gradientPairs.findIndex(\n            (p, i) =>\n                i < gradientPairs.length - 1 &&\n                value <= gradientPairs[i + 1][0] &&\n                value > p[0]\n        );\n        if (index === -1) {\n            if (value <= gradientPairs[0][0]) {\n                return gradientPairs[0][1];\n            }\n            return gradientPairs[gradientPairs.length - 1][1];\n        }\n\n        const interpolator = interpolators[index];\n        const [value1] = gradientPairs[index];\n        const [value2] = gradientPairs[index + 1];\n\n        return interpolator((value - value1) / (value2 - value1));\n    };\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport * as fc from \"d3fc/index.js\";\nimport { getOrCreateElement } from \"../utils/utils\";\nimport { getValueFormatterForRange as getValueFormatter } from \"../axis/valueFormatter\";\n\nexport function colorRangeLegend() {\n    let scale = null;\n\n    function legend(container) {\n        const legendSelection = getOrCreateElement(\n            container,\n            \"div.legend-container\",\n            () =>\n                container\n                    .append(\"div\")\n                    .attr(\"class\", \"legend-container legend-color\")\n                    .style(\"z-index\", \"2\")\n        );\n        const { width, height } = legendSelection\n            .node()\n            .getBoundingClientRect();\n\n        const xScale = d3.scaleBand<number>().domain([0, 1]).range([0, width]);\n\n        const domain = scale.copy().nice().domain();\n        const paddedDomain = fc\n            .extentLinear()\n            .pad([0.1, 0.1])\n            .padUnit(\"percent\")(domain);\n        const [min, max] = paddedDomain;\n        const expandedDomain = d3.range(min, max, (max - min) / height);\n\n        const yScale = d3.scaleLinear().domain(paddedDomain).range([height, 0]);\n\n        const svgBar = fc\n            .autoBandwidth(fc.seriesSvgBar())\n            .xScale(xScale)\n            .yScale(yScale)\n            .crossValue(0)\n            .baseValue((_, i) => expandedDomain[Math.max(0, i - 1)])\n            .mainValue((d) => d)\n            .decorate((selection) => {\n                selection.selectAll(\"path\").style(\"fill\", (d) => scale(d));\n            });\n\n        const middle =\n            domain[0] < 0 && domain[1] > 0\n                ? 0\n                : Math.round((domain[1] + domain[0]) / 2);\n        const tickValues = [...domain, middle];\n\n        let valueformatter = getValueFormatter(min, max);\n        const axisLabel = fc\n            .axisRight(yScale)\n            .tickValues(tickValues)\n            .tickSizeOuter(0)\n            .tickFormat((d) => valueformatter(d));\n\n        const legendSvg = getOrCreateElement(legendSelection, \"svg\", () =>\n            legendSelection.append(\"svg\")\n        )\n            .style(\"width\", width)\n            .style(\"height\", height);\n        const legendBar = getOrCreateElement(legendSvg, \"g\", () =>\n            legendSvg.append(\"g\")\n        )\n            .datum(expandedDomain)\n            .call(svgBar);\n\n        const barWidth = Math.abs(legendBar.node().getBBox().x);\n        getOrCreateElement(legendSvg, \"#legend-axis\", () =>\n            legendSvg.append(\"g\").attr(\"id\", \"legend-axis\")\n        )\n            .attr(\"transform\", `translate(${barWidth})`)\n            .datum(expandedDomain)\n            .call(axisLabel)\n            .select(\".domain\")\n            .attr(\"visibility\", \"hidden\");\n    }\n\n    legend.scale = (...args) => {\n        if (!args.length) {\n            return scale;\n        }\n        scale = args[0];\n        return legend;\n    };\n\n    return legend;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { getOrCreateElement } from \"../utils/utils\";\n\nexport interface GridLayoutMultiChart {\n    (container: any): any;\n\n    elementsPrefix(): string;\n    elementsPrefix(nextPrefix: string): GridLayoutMultiChart;\n\n    padding(): string;\n    padding(nextPadding: string): GridLayoutMultiChart;\n\n    svg(): boolean;\n    svg(nextSvg: boolean): GridLayoutMultiChart;\n\n    chartContainer: () => any;\n    chartEnter: () => any;\n    chartDiv: () => any;\n    chartTitle: () => any;\n    containerSize: () => any;\n}\n\nexport function gridLayoutMultiChart(): GridLayoutMultiChart {\n    let elementsPrefix = \"element-prefix-unset\";\n\n    let chartContainer = null;\n    let chartEnter = null;\n    let chartDiv = null;\n    let chartTitle = null;\n    let color = null;\n    let containerSize = null;\n    let svg = true;\n    let padding = null;\n\n    const _gridLayoutMultiChart: Partial<GridLayoutMultiChart> = (\n        container\n    ) => {\n        const outerContainer = getOrCreateElement(\n            container,\n            \"div.outer-container\",\n            () =>\n                container\n                    .append(\"div\")\n                    .attr(\"class\", \"outer-container\")\n                    .style(\"width\", `calc(100% - ${padding ?? 0})`)\n                    .style(\"height\", `calc(100% - ${padding ?? 0})`)\n                    .style(\"padding-left\", padding ?? 0)\n        );\n\n        const scrollContainer = getOrCreateElement(\n            outerContainer,\n            \"div.inner-container\",\n            () => outerContainer.append(\"div\").attr(\"class\", \"inner-container\")\n        );\n\n        const innerRect = outerContainer.node().getBoundingClientRect();\n        const containerHeight = innerRect.height;\n        const containerWidth = innerRect.width - (color ? 70 : 0);\n\n        const minSize = 300;\n        const data = container.datum();\n\n        const cols = Math.max(\n            1,\n            Math.min(data.length, Math.floor(containerWidth / minSize))\n        );\n        const rows = Math.ceil(data.length / cols);\n\n        containerSize = {\n            width: containerWidth / Math.max(cols, 1),\n            height: Math.min(\n                containerHeight,\n                Math.max(\n                    containerHeight / rows,\n                    containerWidth / Math.max(cols, 1)\n                )\n            ),\n        };\n\n        if (containerHeight / rows > containerSize.height * 0.75) {\n            containerSize.height = containerHeight / rows;\n        }\n\n        if (data.length > 1) {\n            scrollContainer.style(\n                \"grid-template-columns\",\n                `repeat(${cols}, ${100 / cols}%)`\n            );\n            scrollContainer.style(\n                \"grid-template-rows\",\n                `repeat(${rows}, ${containerSize.height}px)`\n            );\n        } else {\n            scrollContainer.style(\"grid-template-columns\", `repeat(1, 100%)`);\n            scrollContainer.style(\"grid-template-rows\", `repeat(1, 100%)`);\n        }\n\n        chartDiv = scrollContainer\n            .selectAll(`div.${elementsPrefix}-container`)\n            .data(data, (d) => d.split);\n        chartDiv.exit().remove();\n\n        chartEnter = chartDiv\n            .enter()\n            .append(\"div\")\n            .attr(\"class\", `${elementsPrefix}-container`);\n\n        chartTitle = chartEnter\n            .append(\"div\")\n            .attr(\"class\", \"title-container\")\n            .style(\"text-align\", \"center\")\n            .attr(\"display\", \"inline-block\")\n            .append(\"text\")\n            .attr(\"class\", \"title\")\n            .style(\"text-align\", \"left\");\n\n        if (svg) {\n            chartContainer = chartEnter\n                .append(\"svg\")\n                .append(\"g\")\n                .attr(\"class\", elementsPrefix);\n        } else {\n            chartContainer = chartEnter\n                .append(\"div\")\n                .attr(\"class\", elementsPrefix);\n        }\n    };\n\n    _gridLayoutMultiChart.padding = (...args: string[]): any => {\n        if (!args.length) {\n            return padding;\n        }\n        padding = args[0];\n        return _gridLayoutMultiChart;\n    };\n    _gridLayoutMultiChart.svg = (...args: boolean[]): any => {\n        if (!args.length) {\n            return svg;\n        }\n        svg = args[0];\n        return _gridLayoutMultiChart;\n    };\n\n    _gridLayoutMultiChart.elementsPrefix = (...args: string[]): any => {\n        if (!args.length) {\n            return elementsPrefix;\n        }\n        elementsPrefix = args[0];\n        return _gridLayoutMultiChart;\n    };\n\n    _gridLayoutMultiChart.chartContainer = () => chartContainer;\n\n    _gridLayoutMultiChart.chartEnter = () => chartEnter;\n\n    _gridLayoutMultiChart.chartDiv = () => chartDiv;\n\n    _gridLayoutMultiChart.chartTitle = () => chartTitle;\n\n    _gridLayoutMultiChart.containerSize = () => containerSize;\n\n    return _gridLayoutMultiChart as GridLayoutMultiChart;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { axisFactory } from \"../../axis/axisFactory\";\nimport { chartCanvasFactory } from \"../../axis/chartFactory\";\nimport { pointSeriesCanvas, symbolTypeFromColumn } from \"../pointSeriesCanvas\";\nimport { seriesLinearRange } from \"../seriesRange\";\nimport withGridLines from \"../../gridlines/gridlines\";\nimport { hardLimitZeroPadding } from \"../../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../../zoom/zoomableChart\";\nimport nearbyTip from \"../../tooltip/nearbyTip\";\nimport { symbolsObj } from \"../seriesSymbols\";\nimport { D3Scale, Settings } from \"../../types\";\n\n/**\n * Define a clamped scaling factor based on the container size for bubble plots.\n *\n * @param {Array} p1 a point as a tuple of `Number`\n * @param {Array} p2 a second point as a tuple of `Number`\n * @returns a function `container -> integer` which calculates a scaling factor\n * from the linear function (clamped) defgined by the input points\n */\nfunction interpolate_scale([x1, y1], [x2, y2]) {\n    const m = (y2 - y1) / (x2 - x1);\n    const b = y2 - m * x2;\n    return function (container) {\n        const node = container.node();\n        const shortest_axis = Math.min(node.clientWidth, node.clientHeight);\n        return Math.min(y2, Math.max(y1, m * shortest_axis + b));\n    };\n}\n\nexport interface XYScatterSeries {\n    (container: any): void;\n\n    settings(): Settings;\n    settings(settings: Settings): XYScatterSeries;\n\n    data(): Record<string, any>[][];\n    data(data: Record<string, any>[][]): XYScatterSeries;\n\n    color(): D3Scale;\n    color(color: D3Scale): XYScatterSeries;\n\n    symbols(): D3Scale;\n    symbols(symbols: D3Scale): XYScatterSeries;\n}\n\n/**\n * @param {d3.Selection} container - d3.Selection of the outer div\n * @param {any} settings - settings as defined in the Update method in plugin.js\n */\nexport default function xyScatterSeries(): XYScatterSeries {\n    let settings: Settings | null = null;\n    let data = null;\n    let color = null;\n    let symbols = null;\n\n    const _xyScatterSeries: Partial<XYScatterSeries> = (container) => {\n        const colorBy = settings.realValues[2];\n        let hasColorBy = !!colorBy;\n        const symbolCol = settings.realValues[4];\n\n        const size = settings.realValues[3]\n            ? seriesLinearRange(settings, data, \"size\").range([10, 10000])\n            : null;\n\n        const label = settings.realValues[5];\n\n        const scale_factor = interpolate_scale(\n            [600, 0.1],\n            [1600, 1]\n        )(container);\n        const series = fc\n            .seriesCanvasMulti()\n            .mapping((data, index) => data[index])\n            .series(\n                data.map(() =>\n                    pointSeriesCanvas(\n                        settings,\n                        symbolCol,\n                        size,\n                        color,\n                        label,\n                        symbols,\n                        scale_factor\n                    )\n                )\n            );\n\n        const axisDefault = () =>\n            axisFactory(settings)\n                .settingName(\"mainValues\")\n                .paddingStrategy(hardLimitZeroPadding())\n                .pad([0.1, 0.1]);\n\n        const xAxis = axisDefault()\n            .settingValue(settings.mainValues[0].name)\n            .memoValue(settings.axisMemo[0])\n            .valueName(\"x\")(data);\n\n        const yAxis = axisDefault()\n            .orient(\"vertical\")\n            .settingValue(settings.mainValues[1].name)\n            .memoValue(settings.axisMemo[1])\n            .valueName(\"y\")(data);\n\n        const [xLabel, yLabel] =\n            settings.splitValues.length === 0\n                ? [settings.mainValues[0].name, settings.mainValues[1].name]\n                : [\"\", \"\"];\n\n        const chart = chartCanvasFactory(xAxis, yAxis)\n            .xLabel(xLabel)\n            .yLabel(yLabel)\n            .plotArea(withGridLines(series, settings).canvas(true));\n\n        chart.xNice && chart.xNice();\n        chart.yNice && chart.yNice();\n\n        // TODO: This make scrolling the grid tricky. Maybe require modifier key to zoom?\n        // Also, reset zoom button is now at the top of the page and overlaps any other items.\n        const zoomChart = zoomableChart()\n            .chart(chart)\n            .settings(settings)\n            .xScale(xAxis.scale)\n            .yScale(yAxis.scale)\n            .canvas(true);\n\n        const toolTip = nearbyTip()\n            .scaleFactor(scale_factor)\n            .settings(settings)\n            .canvas(true)\n            .xScale(xAxis.scale as D3Scale)\n            .xValueName(\"x\")\n            .yValueName(\"y\")\n            .yScale(yAxis.scale as D3Scale)\n            .color((!hasColorBy && color) as D3Scale)\n            .size(size)\n            .data(data);\n\n        // render\n        container.datum(data).call(zoomChart);\n        container.call(toolTip);\n    };\n\n    _xyScatterSeries.settings = (...args: Settings[]): any => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        return _xyScatterSeries;\n    };\n    _xyScatterSeries.data = (...args: any[][]): any => {\n        if (!args.length) {\n            return data;\n        }\n        data = args[0];\n        return _xyScatterSeries;\n    };\n    _xyScatterSeries.color = (...args: D3Scale[]): any => {\n        if (!args.length) {\n            return color;\n        }\n        color = args[0];\n        return _xyScatterSeries;\n    };\n    _xyScatterSeries.symbols = (...args: D3Scale[]): any => {\n        if (!args.length) {\n            return symbols;\n        }\n        symbols = args[0];\n        return _xyScatterSeries;\n    };\n\n    return _xyScatterSeries as XYScatterSeries;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { symbolTypeFromColumn } from \"../series/pointSeriesCanvas\";\nimport { pointData } from \"../data/pointData\";\nimport {\n    seriesColorsFromColumn,\n    seriesColorsFromDistinct,\n    colorScale,\n} from \"../series/seriesColors\";\nimport { seriesColorRange } from \"../series/seriesRange\";\nimport { symbolLegend, colorLegend } from \"../legend/legend\";\nimport { colorRangeLegend } from \"../legend/colorRangeLegend\";\nimport { filterDataByGroup } from \"../legend/filter\";\nimport { symbolsObj } from \"../series/seriesSymbols\";\nimport { gridLayoutMultiChart } from \"../layout/gridLayoutMultiChart\";\nimport xyScatterSeries from \"../series/xy-scatter/xyScatterSeries\";\nimport { D3Scale, HTMLSelection, Settings, Type } from \"../types\";\n\n/**\n * Overrides specific symbols based on plugin settings. This modifies in-place _and_ returns the value.\n * @param {any} settings\n * @param {d3.ScaleOrdinal} symbols\n */\nfunction overrideSymbols(settings: Settings, symbols): D3Scale {\n    if (!symbols) {\n        return;\n    }\n    const symbolCol = settings.realValues[4];\n    const columnType = settings.mainValues.find(\n        (val) => val.name === symbolCol\n    )?.type;\n    let domain: string[] = symbols.domain();\n    let range = symbols.range();\n    let len = range.length;\n    for (let [i, _] of domain.entries()) {\n        range[i] = range[(i as number) % len];\n    }\n    let maybeSymbols = (settings.columns_config?.[symbolCol]?.[\"symbols\"] ??\n        {}) as Record<string, string>;\n    Object.entries(maybeSymbols).forEach(([key, value]) => {\n        // TODO: Define custom symbol types based on the values passed in here.\n        // https://d3js.org/d3-shape/symbol#custom-symbols\n        let symbolType = symbolsObj[value] ?? d3.symbolCircle;\n\n        let i = domain.findIndex((val) => {\n            switch (columnType) {\n                case \"date\":\n                case \"datetime\":\n                    return new Date(val).valueOf() === new Date(key).valueOf();\n                default:\n                    return String(val) === String(key);\n            }\n        });\n\n        range[i] = symbolType;\n    });\n    symbols.range(range);\n    return symbols;\n}\n\nfunction xyScatter(container: HTMLSelection, settings: Settings) {\n    const colorBy = settings.realValues[2];\n    let hasColorBy = !!colorBy;\n    let isColoredByString =\n        settings.mainValues.find((x) => x.name === colorBy)?.type === \"string\";\n\n    let color = null;\n    let legend = null;\n\n    const symbolCol = settings.realValues[4];\n    const temp = symbolTypeFromColumn(settings, symbolCol);\n\n    const symbols = overrideSymbols(settings, temp);\n\n    const data = pointData(settings, filterDataByGroup(settings));\n\n    if (hasColorBy && isColoredByString) {\n        if (!!symbolCol) {\n            // TODO: Legend should have cartesian product labels (ColorBy|SplitBy)\n            // For now, just use monocolor legends.\n            if (settings.splitValues.length > 0) {\n                color = seriesColorsFromDistinct(settings, data);\n            } else {\n                color = seriesColorsFromDistinct(settings, data[0]);\n            }\n            legend = symbolLegend().settings(settings).scale(symbols);\n        } else {\n            color = seriesColorsFromColumn(settings, colorBy);\n            legend = colorLegend().settings(settings).scale(color);\n        }\n    } else if (hasColorBy) {\n        color = seriesColorRange(settings, data, \"colorValue\");\n        legend = colorRangeLegend().scale(color);\n    } else {\n        // always use default color\n        color = colorScale().settings(settings).domain([\"\"])();\n        legend = symbolLegend().settings(settings).scale(symbols);\n    }\n\n    if (settings.splitValues.length !== 0) {\n        let xyGrid = gridLayoutMultiChart()\n            .svg(false)\n            .elementsPrefix(\"xy-scatter\");\n        xyGrid = xyGrid.padding(\"2.5em\");\n\n        const xLabel = container.append(\"div\").attr(\"class\", \"multi-xlabel\");\n        xLabel.append(\"p\").text(settings.mainValues[0].name);\n\n        const yLabel = container.append(\"div\").attr(\"class\", \"multi-ylabel\");\n        yLabel\n            .append(\"p\")\n            .text(settings.mainValues[1].name)\n            .style(\"transform\", \"rotate(-90deg)\")\n            .style(\"text-wrap\", \"nowrap\");\n\n        container = container.datum(data);\n        container.call(xyGrid);\n        const xyContainer = xyGrid.chartContainer();\n        const xyEnter = xyGrid.chartEnter();\n        const xyDiv = xyGrid.chartDiv();\n        const xyTitle = xyGrid.chartTitle();\n        const containerSize = xyGrid.containerSize();\n\n        xyTitle.each((d, i, nodes) => d3.select(nodes[i]).text(d.key));\n        xyEnter\n            .merge(xyDiv)\n            .attr(\n                \"transform\",\n                `translate(${containerSize.width / 2}, ${\n                    containerSize.height / 2\n                })`\n            )\n            .each(function (data) {\n                const xyElement = d3.select(this);\n                xyScatterSeries()\n                    .settings(settings)\n                    .data([data])\n                    .color(color as D3Scale)\n                    .symbols(symbols)(xyElement);\n            });\n    } else {\n        xyScatterSeries()\n            .settings(settings)\n            .data(data)\n            .color(color as D3Scale)\n            .symbols(symbols)(container);\n    }\n\n    if (legend) container.call(legend);\n}\n\nxyScatter.plugin = {\n    name: \"X/Y Scatter\",\n    category: \"X/Y Chart\",\n    max_cells: 50000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        type: \"number\",\n        count: 2,\n        names: [\n            \"X Axis\",\n            \"Y Axis\",\n            \"Color\",\n            \"Size\",\n            \"Symbol\",\n            \"Label\",\n            \"Tooltip\",\n        ],\n    },\n    selectMode: \"toggle\",\n};\n\nxyScatter.can_render_column_styles = (type: Type, group?: string) => {\n    return type === \"string\" && group === \"Symbol\";\n};\nxyScatter.column_style_controls = (type: Type, group?: string) => {\n    if (type === \"string\" && group === \"Symbol\") {\n        return {\n            symbols: {\n                keys: \"row\",\n                values: Object.keys(symbolsObj),\n            },\n        };\n    } else {\n        return null;\n    }\n};\n\nexport default xyScatter;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { tooltip } from \"../tooltip/tooltip\";\nimport { Settings } from \"../types\";\n\nexport function heatmapSeries(\n    _settings: Settings,\n    color: d3.ScaleSequential<string>\n) {\n    let series = fc.seriesCanvasHeatmap();\n\n    series.decorate((ctx, d) => {\n        ctx.fillStyle = color(d.colorValue);\n        // tooltip().settings(settings)(selection);\n        // selection.select(\"path\").attr(\"fill\", (d) => color(d.colorValue));\n    });\n\n    return fc\n        .autoBandwidth(series)\n        .xValue((d) => d.crossValue)\n        .yValue((d) => d.mainValue)\n        .colorValue((d) => d.colorValue)\n        .colorInterpolate(color.interpolator())\n        .widthFraction(1.0);\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { axisType } from \"../axis/axisType\";\nimport { AXIS_TYPES } from \"../axis/axisType\";\nimport { labelFunction } from \"../axis/axisLabel\";\nimport { Settings } from \"../types\";\n\nexport function heatmapData(settings: Settings, data) {\n    const labelfn = labelFunction(settings);\n    const mainType = axisType(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"splitValues\")();\n\n    const heatmapData = [];\n\n    data.forEach((col, i) => {\n        const crossValue = labelfn(col, i);\n        Object.keys(col)\n            .filter((key) => key !== \"__ROW_PATH__\")\n            .forEach((key) => {\n                const mainValue = getMainValues(key);\n                heatmapData.push({\n                    crossValue: crossValue,\n                    mainValue:\n                        mainType === AXIS_TYPES.time\n                            ? new Date(mainValue)\n                            : mainValue,\n                    colorValue: col[key],\n                    row: col,\n                });\n            });\n    });\n\n    return heatmapData;\n}\n\nfunction getMainValues(key) {\n    // Key format is based on \"Split By\" values plus the value label at the end\n    // val1|val2|....|label\n    const labels = key.split(\"|\");\n    labels.pop();\n    return labels.join(\"|\");\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { AxisFactoryContent, axisFactory } from \"../axis/axisFactory\";\nimport { AXIS_TYPES } from \"../axis/axisType\";\nimport { chartCanvasFactory } from \"../axis/chartFactory\";\nimport { heatmapSeries } from \"../series/heatmapSeries\";\nimport { seriesColorRange } from \"../series/seriesRange\";\nimport { heatmapData } from \"../data/heatmapData\";\nimport { filterData } from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\nimport { colorRangeLegend } from \"../legend/colorRangeLegend\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport nearbyTip from \"../tooltip/nearbyTip\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction heatmapChart(container: HTMLSelection, settings: Settings) {\n    const data = heatmapData(settings, filterData(settings));\n\n    const color = seriesColorRange(settings, data, \"colorValue\");\n    const series = heatmapSeries(settings, color);\n\n    const legend = colorRangeLegend().scale(color);\n\n    const xAxis: AxisFactoryContent = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"crossValues\")\n        .valueName(\"crossValue\")(data);\n\n    const yAxis: AxisFactoryContent = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"splitValues\")\n        .valueName(\"mainValue\")\n        .modifyDomain((d: any[]): any[] => {\n            let is_number = !isNaN(d[0]);\n            return is_number ? d.reverse() : d;\n        })\n        .orient(\"vertical\")(data);\n\n    const chart = chartCanvasFactory(xAxis, yAxis).plotArea(\n        withGridLines(series, settings).canvas(true)\n    );\n\n    if (chart.xPaddingInner) {\n        chart.xPaddingInner(0);\n        chart.xPaddingOuter(0);\n        series.xAlign(\"right\");\n    }\n    if (chart.yPaddingInner) {\n        chart.yPaddingInner(0);\n        chart.yPaddingOuter(0);\n        series.yAlign(\"top\");\n    }\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis.scale)\n        .canvas(true);\n\n    // const tp = tooltip().settings(settings);\n\n    const toolTip = nearbyTip()\n        // .scaleFactor(scale_factor)\n        .settings(settings)\n        .canvas(true)\n        .xScale(xAxis.scale)\n        // .xValueName(\"x\")\n        // .yValueName(\"y\")\n        .yScale(yAxis.scale)\n        .color(color)\n        // .size(size)\n        .data(data);\n\n    // // render\n    // container.datum(data).call(zoomChart);\n\n    // render\n    container.datum(data).call(zoomChart);\n    container.call(legend);\n    container.call(toolTip);\n}\nheatmapChart.plugin = {\n    name: \"Heatmap\",\n    category: \"Hierarchial Chart\",\n    max_cells: 50000,\n    max_columns: 500,\n    render_warning: true,\n    initial: {\n        names: [\"Color\"],\n    },\n};\n\nexport default heatmapChart;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { labelFunction } from \"../axis/axisLabel\";\nimport { DataRowsWithKey, Settings } from \"../types\";\nimport { splitIntoMultiSeries } from \"./splitIntoMultiSeries\";\n\ntype MappedSeries = {\n    crossValue: any;\n    mainValues: any[];\n    openValue: any;\n    closeValue: any;\n    highValue: any;\n    lowValue: any;\n    key: string;\n    row: any;\n};\n\ninterface MappedSeriesArray extends Array<MappedSeries> {\n    key: string;\n}\n\nexport function ohlcData(settings: Settings, data: DataRowsWithKey) {\n    return splitIntoMultiSeries(settings, data, { excludeEmpty: true }).map(\n        (data) => seriesToOHLC(settings, data)\n    );\n}\n\nfunction seriesToOHLC(\n    settings: Settings,\n    data: DataRowsWithKey\n): MappedSeriesArray {\n    const labelfn = labelFunction(settings);\n    const getNextOpen = (i) =>\n        data[i < data.length - 1 ? i + 1 : i][settings.realValues[0]];\n    const mappedSeries: any = data.map((col, i) => {\n        const openValue = !!settings.realValues[0]\n            ? col[settings.realValues[0]]\n            : undefined;\n        const closeValue = !!settings.realValues[1]\n            ? col[settings.realValues[1]]\n            : getNextOpen(i);\n\n        return {\n            crossValue: labelfn(col, i),\n            mainValues: settings.mainValues.map((v) => col[v.name]),\n            openValue: openValue,\n            closeValue: closeValue,\n            highValue: !!settings.realValues[2]\n                ? col[settings.realValues[2]]\n                : Math.max(openValue as number, closeValue as number),\n            lowValue: !!settings.realValues[3]\n                ? col[settings.realValues[3]]\n                : Math.min(openValue as number, closeValue as number),\n            key: data.key,\n            row: col,\n        };\n    });\n\n    mappedSeries.key = data.key;\n    return mappedSeries;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { colorScale, setOpacity } from \"./seriesColors\";\nimport { D3Scale, Settings } from \"../types\";\n\nconst isUp = (d) => d.closeValue >= d.openValue;\n\nexport function ohlcCandleSeries(\n    settings: Settings,\n    seriesCanvas,\n    upColor: D3Scale\n) {\n    const domain = upColor.domain();\n    const downColor = colorScale()\n        .domain(domain)\n        .settings(settings)\n        .defaultColors([settings.colorStyles[\"series-2\"]])\n        .mapFunction(setOpacity(0.5))();\n    const avgColor = colorScale().settings(settings).domain(domain)();\n\n    const series = seriesCanvas()\n        .crossValue((d) => d.crossValue)\n        .openValue((d) => d.openValue)\n        .highValue((d) => d.highValue)\n        .lowValue((d) => d.lowValue)\n        .closeValue((d) => d.closeValue)\n        .decorate((context, d) => {\n            const color = isUp(d) ? upColor(d.key) : downColor(d.key);\n            context.fillStyle = color;\n            context.strokeStyle = color;\n        });\n\n    const bollingerAverageSeries = fc\n        .seriesCanvasLine()\n        .mainValue((d) => d.bollinger.average)\n        .crossValue((d) => d.crossValue)\n        .decorate((context, d) => {\n            context.strokeStyle = avgColor(d[0].key);\n        });\n\n    const bollingerAreaSeries = fc\n        .seriesCanvasArea()\n        .mainValue((d) => d.bollinger.upper)\n        .baseValue((d) => d.bollinger.lower)\n        .crossValue((d) => d.crossValue)\n        .decorate((context, d) => {\n            context.fillStyle = setOpacity(0.25)(avgColor(d[0].key));\n        });\n\n    return fc\n        .seriesCanvasMulti()\n        .series([bollingerAreaSeries, series, bollingerAverageSeries]);\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as fc from \"d3fc/index.js\";\nimport { AxisFactoryContent, axisFactory } from \"../axis/axisFactory\";\nimport { chartCanvasFactory } from \"../axis/chartFactory\";\nimport { ohlcData } from \"../data/ohlcData\";\nimport { filterDataByGroup } from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\n\nimport { hardLimitZeroPadding } from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport nearbyTip from \"../tooltip/nearbyTip\";\nimport { ohlcCandleSeries } from \"../series/ohlcCandleSeries\";\nimport { colorScale, setOpacity } from \"../series/seriesColors\";\nimport { colorLegend } from \"../legend/legend\";\nimport { Chart, HTMLSelection, Settings } from \"../types\";\n\nfunction ohlcCandle(seriesCanvas): Chart {\n    return function (container: HTMLSelection, settings: Settings) {\n        const srcData = ohlcData(settings, filterDataByGroup(settings));\n\n        const bollinger = fc\n            .indicatorBollingerBands()\n            .value((d) => d.openValue);\n        const data = srcData.map((seriesData) => {\n            const bollingerData = bollinger(seriesData);\n            return seriesData.map((d, i) =>\n                Object.assign({ bollinger: bollingerData[i] }, d)\n            );\n        });\n\n        const keys = srcData\n            .map((k) => k.key)\n            .concat(settings.hideKeys ? settings.hideKeys : [])\n            .sort();\n\n        const upColor = colorScale()\n            .domain(keys)\n            .settings(settings)\n            .mapFunction(setOpacity(1))();\n\n        const legend = colorLegend()\n            .settings(settings)\n            .scale(\n                keys.length > 1\n                    ? (upColor as unknown as d3.ScaleOrdinal<string, unknown>)\n                    : null\n            );\n\n        const series = ohlcCandleSeries(settings, seriesCanvas, upColor);\n\n        const multi = fc\n            .seriesCanvasMulti()\n            .mapping((data, index) => data[index])\n            .series(data.map(() => series));\n\n        const paddingStrategy = hardLimitZeroPadding()\n            .pad([0.1, 0.1])\n            .padUnit(\"percent\");\n\n        const xAxis: AxisFactoryContent = axisFactory(settings)\n            .settingName(\"crossValues\")\n            .valueName(\"crossValue\")(data);\n        const yAxis: AxisFactoryContent = axisFactory(settings)\n            .settingName(\"mainValues\")\n            .valueNames([\"lowValue\", \"highValue\"])\n            .memoValue(settings.axisMemo[1])\n            .orient(\"vertical\")\n            .paddingStrategy(paddingStrategy)(data);\n\n        const chart = chartCanvasFactory(xAxis, yAxis).plotArea(\n            withGridLines(multi, settings).orient(\"vertical\").canvas(true)\n        );\n\n        chart.yNice && chart.yNice();\n\n        const zoomChart = zoomableChart()\n            .chart(chart)\n            .settings(settings)\n            .xScale(xAxis.scale)\n            .onChange((zoom) => {\n                const zoomedData = data.map((series) =>\n                    series.filter(\n                        (d) =>\n                            d.crossValue >= zoom.xDomain[0] &&\n                            d.crossValue <= zoom.xDomain[1]\n                    )\n                );\n                chart.yDomain(yAxis.domainFunction(zoomedData));\n            })\n            .canvas(true);\n\n        const toolTip = nearbyTip()\n            .settings(settings)\n            .xScale(xAxis.scale)\n            .yScale(yAxis.scale)\n            .yValueName(\"closeValue\")\n            .color(upColor)\n            .data(data)\n            .canvas(true);\n\n        // render\n        container.datum(data).call(zoomChart);\n        container.call(toolTip);\n        container.call(legend);\n    };\n}\n\nexport default ohlcCandle;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { seriesCanvasOhlc } from \"d3fc/index.js\";\nimport ohlcCandle from \"./ohlcCandle\";\n\nconst ohlc = ohlcCandle(seriesCanvasOhlc);\nohlc.plugin = {\n    name: \"OHLC\",\n    category: \"Y Chart\",\n    max_cells: 3500,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        type: \"number\",\n        count: 1,\n        names: [\"Open\", \"Close\", \"High\", \"Low\", \"Tooltip\"],\n    },\n    selectMode: \"toggle\",\n};\n\nexport default ohlc;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { seriesCanvasCandlestick } from \"d3fc/index.js\";\nimport ohlcCandle from \"./ohlcCandle\";\n\nlet candlestick = ohlcCandle(seriesCanvasCandlestick);\n\ncandlestick.plugin = {\n    name: \"Candlestick\",\n    category: \"Y Chart\",\n    max_cells: 4000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        type: \"number\",\n        count: 1,\n        names: [\"Open\", \"Close\", \"High\", \"Low\", \"Tooltip\"],\n    },\n    selectMode: \"toggle\",\n};\n\nexport default candlestick;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { flattenExtent } from \"../../axis/flatten\";\nimport { seriesColorRange } from \"../seriesRange\";\nimport { seriesColorsFromDistinct } from \"../seriesColors\";\n\nexport function treeColor(settings, data) {\n    if (settings.realValues.length > 1 && settings.realValues[1] !== null) {\n        const color_column = settings.realValues[1];\n        if (\n            settings.mainValues.find((x) => x.name === color_column)?.type ===\n            \"string\"\n        ) {\n            const colors = data\n                .map((d) => d.data)\n                .filter((x) => x.height > 0)\n                .map((x) => getColors(x))\n                .reduce((a, b) => a.concat(b));\n            return seriesColorsFromDistinct(settings, colors);\n        } else {\n            return seriesColorRange(\n                settings,\n                null,\n                null,\n                flattenExtent(data.map((d) => d.extents))\n            );\n        }\n    }\n}\n\n// only get the colors from the bottom level (e.g. nodes with no children)\nfunction getColors(nodes, colors = []) {\n    nodes.children && nodes.children.length > 0\n        ? nodes.children.forEach((child) =>\n              colors.concat(getColors(child, colors))\n          )\n        : nodes.data.color && colors.push(nodes.data.color);\n    return colors;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { toValue } from \"../tooltip/selectionData\";\nimport { Settings } from \"../types\";\n\nexport type TreeData = {\n    name: string;\n    children: unknown;\n    size?: number;\n    color?: number;\n    tooltip?: unknown[];\n};\n\nexport function treeData(settings: Settings) {\n    const sets = {};\n    const real_aggs = settings.realValues.map((x) =>\n        x === null ? null : settings.mainValues.find((y) => y.name === x)\n    );\n    settings.data.forEach((d, j) => {\n        const groups = Array.isArray(d.__ROW_PATH__)\n            ? (d.__ROW_PATH__ as string[])\n            : [];\n\n        const splits = getSplitNames(d);\n        splits.forEach((split) => {\n            let currentLevel;\n            if (!sets[split]) {\n                sets[split] = [];\n            }\n            currentLevel = sets[split];\n            groups.forEach((group, i) => {\n                let element = currentLevel.find((e) => e.name === group);\n                if (!element) {\n                    element = { name: group, children: [] };\n                    currentLevel.push(element);\n                }\n                if (\n                    settings.realValues.length > 1 &&\n                    settings.realValues[1] !== null\n                ) {\n                    const is_leaf = i === groups.length - 1;\n                    const colorValue = is_leaf\n                        ? getDataValue(d, settings.mainValues[1], split)\n                        : getDataValue(\n                              settings.agg_paths[j][i + 1] || d,\n                              settings.mainValues[1],\n                              split\n                          );\n                    if (colorValue !== undefined) {\n                        element.color = colorValue;\n                    }\n                }\n                if (\n                    settings.realValues.length > 2 &&\n                    settings.realValues[2] !== null\n                ) {\n                    element.tooltip = [];\n                    for (let i = 2; i < settings.realValues.length; ++i) {\n                        element.tooltip.push(\n                            getDataValue(d, real_aggs[i], split)\n                        );\n                    }\n                }\n                if (i === groups.length - 1) {\n                    element.name = groups.slice(-1)[0];\n                    if (settings.crossValues.length === 0) {\n                        element.size = getDataValue(\n                            d,\n                            settings.mainValues[0],\n                            \"\"\n                        );\n                    } else if (groups.length === settings.crossValues.length) {\n                        const size = getDataValue(\n                            d,\n                            settings.mainValues[0],\n                            split\n                        );\n                        element.size = size > 0 ? size : 0;\n                    }\n                }\n                currentLevel = element.children;\n            });\n        });\n    });\n\n    const data = Object.entries(sets).map((set) => {\n        const tree: TreeData = {\n            name: \"root\",\n            children: set[1],\n        };\n\n        const root = d3.hierarchy(tree).sum((d) => d.size); // adds a `value` field to each node\n        const chartData: d3.HierarchyNode<TreeData> = d3\n            .partition<TreeData>()\n            .size([2 * Math.PI, root.height + 1])(root);\n\n        // \"d\" is a Node, but chartData is a HierarchyNode, and there is a couple of\n        // fields that are missing from the Node type.\n        // What is the best way to handle this? What is the actual type here??\n        (chartData as any).each((d) => {\n            d.current = d;\n            d.mainValues =\n                settings.realValues.length === 1 ||\n                (settings.realValues[1] === null &&\n                    settings.realValues[2] === null)\n                    ? d.value\n                    : [d.value, d.data.color]\n                          .concat(d.data.tooltip || [])\n                          .filter((x) => x !== undefined);\n\n            d.crossValue = d\n                .ancestors()\n                .slice(0, -1)\n                .reverse()\n                .map((cross) => cross.data.name);\n\n            d.key = set[0];\n            d.label = toValue(\n                settings.crossValues[d.depth - 1 < 0 ? 0 : d.depth - 1]?.type ||\n                    settings.mainValues[0].type,\n                d.data.name\n            );\n        });\n\n        return {\n            split: set[0],\n            data: chartData,\n            extents: getExtents(settings, set),\n        };\n    });\n\n    return data;\n}\n\nexport const getDataValue = (d, aggregate, split) =>\n    split.length ? d[`${split}|${aggregate.name}`] : d[aggregate.name];\n\nfunction getExtents(settings, [split, data]) {\n    if (settings.realValues.length > 1 && settings.realValues[1] !== null) {\n        const min = Math.min(\n            ...settings.data.map((d) =>\n                getDataValue(d, settings.mainValues[1], split)\n            )\n        );\n        const max = Math.max(...data.map((d) => d.color));\n        return [min, max];\n    }\n}\n\nfunction getSplitNames(d) {\n    const splits = [];\n    Object.keys(d).forEach((key) => {\n        if (key !== \"__ROW_PATH__\") {\n            const splitValue = key.split(\"|\").slice(0, -1).join(\"|\");\n            if (!splits.includes(splitValue)) {\n                splits.push(splitValue);\n            }\n        }\n    });\n    return splits;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { arc } from \"d3\";\nimport { SunburstData } from \"./sunburstSeries\";\n\nexport const drawArc = <D extends SunburstData>(radius) =>\n    arc<any, D>()\n        .startAngle((d) => d.x0)\n        .endAngle((d) => d.x1)\n        .padAngle((d) => Math.min((d.x1 - d.x0) / 2, 0.005))\n        .padRadius(radius)\n        .innerRadius((d) => Math.max(1, (d.y0 - 1) * radius))\n        .outerRadius((d) =>\n            Math.max((d.y0 - 1) * radius, (d.y1 - 1) * radius - 1)\n        );\n\nexport const arcVisible = (d) => d.y0 >= 1 && d.x1 > d.x0;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { select } from \"d3\";\n\nexport const labelVisible = (d) =>\n    d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.06;\n\nexport function labelTransform(d, radius) {\n    const x = (((d.x0 + d.x1) / 2) * 180) / Math.PI;\n    const y = ((d.y0 - 1 + (d.y1 - 1)) / 2) * radius;\n    return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\n}\n\nexport function cropLabel(d, targetWidth) {\n    let actualWidth = this.getBBox().width;\n    if (actualWidth > targetWidth) {\n        let labelText = d.label;\n        const textSelection = select(this);\n        while (actualWidth > targetWidth) {\n            labelText = labelText.substring(0, labelText.length - 1);\n            textSelection.text(() => labelText);\n            actualWidth = this.getBBox().width;\n        }\n        textSelection.text(\n            () =>\n                `${labelText\n                    .substring(0, labelText.length - 3)\n                    .replace(/\\s+$/, \"\")}...`\n        );\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { interpolate } from \"d3\";\nimport { drawArc, arcVisible } from \"./sunburstArc\";\nimport { labelVisible, labelTransform } from \"./sunburstLabel\";\n\nexport const clickHandler =\n    (data, g, parent, parentTitle, path, label, radius, split, settings) =>\n    (p, skipTransition) => {\n        settings.sunburstLevel[split] = p.data.name;\n        if (p.parent) {\n            parent.datum(p.parent);\n            parent.style(\"cursor\", \"pointer\");\n            parentTitle.html(`&#8682; ${p.label}`);\n        } else {\n            parent.datum(data);\n            parent.style(\"cursor\", \"default\");\n            parentTitle.html(\"\");\n        }\n        data.each(\n            (d) =>\n                (d.target = {\n                    x0:\n                        Math.max(\n                            0,\n                            Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))\n                        ) *\n                        2 *\n                        Math.PI,\n                    x1:\n                        Math.max(\n                            0,\n                            Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))\n                        ) *\n                        2 *\n                        Math.PI,\n                    y0: Math.max(0, d.y0 - p.depth),\n                    y1: Math.max(0, d.y1 - p.depth),\n                })\n        );\n\n        const t = g.transition().duration(skipTransition ? 0 : 750);\n        path.transition(t)\n            .tween(\"data\", (d) => {\n                const i = interpolate(d.current, d.target);\n                return (t) => (d.current = i(t));\n            })\n            .filter(function (d) {\n                return (\n                    +this.getAttribute(\"fill-opacity\") || arcVisible(d.target)\n                );\n            })\n            .attr(\"fill-opacity\", (d) => (arcVisible(d.target) ? 1 : 0))\n            .attr(\"user-select\", (d) =>\n                arcVisible(d.target) ? \"initial\" : \"none\"\n            )\n            .style(\"pointer-events\", (d) =>\n                arcVisible(d.target) ? \"initial\" : \"none\"\n            )\n            .attrTween(\"d\", (d) => () => drawArc(radius)(d.current));\n\n        label\n            .filter(function (d) {\n                return (\n                    +this.getAttribute(\"fill-opacity\") || labelVisible(d.target)\n                );\n            })\n            .transition(t)\n            .attr(\"fill-opacity\", (d) => +labelVisible(d.target))\n            .attrTween(\n                \"transform\",\n                (d) => () => labelTransform(d.current, radius)\n            );\n    };\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { drawArc, arcVisible } from \"./sunburstArc\";\nimport { labelVisible, labelTransform, cropLabel } from \"./sunburstLabel\";\nimport { clickHandler } from \"./sunburstClick\";\nimport { D3Scale, Settings } from \"../../types\";\n\nexport interface SunburstData extends d3.HierarchyNode<any> {\n    children: this[];\n    crossValue: string[];\n    current: this;\n    data: {\n        name: string;\n        children: d3.HierarchyNode<any>[];\n    };\n    depth: number;\n    height: number;\n    key: string;\n    label: any; // is NaN, but should this be string?\n    mainValues: number;\n    parent: any;\n    value: number;\n    x0: number;\n    x1: number;\n    y0: number;\n    y1: number;\n}\n\nexport interface SunburstSeries {\n    (sunburstElement: any): void;\n\n    settings(): Settings;\n    settings(settings: Settings): SunburstSeries;\n\n    split(): string;\n    split(split: string): SunburstSeries;\n\n    data(): SunburstData;\n    data(data: SunburstData): SunburstSeries;\n\n    color(): D3Scale;\n    color(color: D3Scale): SunburstSeries;\n\n    radius(): number;\n    radius(radius: number): SunburstSeries;\n}\n\nexport function sunburstSeries(): SunburstSeries {\n    let settings: Settings | null = null;\n    let split: string | null = null;\n    let data: SunburstData | null = null;\n    let color: D3Scale | null = null;\n    let radius = null;\n\n    const _sunburstSeries: Partial<SunburstSeries> = (sunburstElement) => {\n        const segment = sunburstElement\n            .selectAll(\"g.segment\")\n            .data(data.descendants().slice(1));\n        const segmentEnter = segment\n            .enter()\n            .append(\"g\")\n            .attr(\"class\", \"segment\");\n\n        segmentEnter.append(\"path\");\n        segmentEnter\n            .append(\"text\")\n            .attr(\"class\", \"segment\")\n            .attr(\"dy\", \"0.35em\");\n        const segmentMerge = segmentEnter.merge(segment);\n\n        const path = segmentMerge\n            .select(\"path\")\n            .attr(\"fill-opacity\", (d) => (arcVisible(d.current) ? 1 : 0))\n            .attr(\"user-select\", (d) =>\n                arcVisible(d.current) ? \"initial\" : \"none\"\n            )\n            .style(\"pointer-events\", (d) =>\n                arcVisible(d.current) ? \"initial\" : \"none\"\n            )\n            .attr(\"d\", (d) => drawArc(radius)(d.current));\n        color && path.style(\"fill\", (d) => color(d.data.color));\n\n        const label = segmentMerge\n            .select(\"text\")\n            .attr(\"fill-opacity\", (d) => +labelVisible(d.current))\n            .attr(\"transform\", (d) => labelTransform(d.current, radius))\n            .text((d) => d.label)\n            .each(function (d) {\n                cropLabel.call(this, d, radius);\n            });\n\n        const parentTitle = sunburstElement.select(\"text.parent\");\n        const parent = sunburstElement\n            .select(\"circle\")\n            .attr(\"r\", radius)\n            .datum(data);\n\n        const onClick = clickHandler(\n            data,\n            sunburstElement,\n            parent,\n            parentTitle,\n            path,\n            label,\n            radius,\n            split,\n            settings\n        );\n        // NOTE: Double check to make sure that settings.sunburstLevel is a thing.\n        if (settings.sunburstLevel) {\n            const currentLevel = data\n                .descendants()\n                .find((d) => d.data.name === settings.sunburstLevel[split]);\n            currentLevel && onClick(currentLevel, true);\n        } else {\n            settings.sunburstLevel = {};\n        }\n        parent.on(\"click\", (d) => onClick(d, false));\n        path.filter((d) => d.children)\n            .style(\"cursor\", \"pointer\")\n            .on(\"click\", (d) => onClick(d, false));\n    };\n\n    _sunburstSeries.settings = (...args: Settings[]): any => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        return _sunburstSeries;\n    };\n\n    _sunburstSeries.split = (...args: string[]): any => {\n        if (!args.length) {\n            return split;\n        }\n        split = args[0];\n        return _sunburstSeries;\n    };\n\n    _sunburstSeries.data = (...args: SunburstData[]): any => {\n        if (!args.length) {\n            return data;\n        }\n        data = args[0];\n        return _sunburstSeries;\n    };\n\n    _sunburstSeries.color = (...args: D3Scale[]): any => {\n        if (!args.length) {\n            return color;\n        }\n        color = args[0];\n        return _sunburstSeries;\n    };\n\n    _sunburstSeries.radius = (...args: number[]): any => {\n        if (!args.length) {\n            return radius;\n        }\n        radius = args[0];\n        return _sunburstSeries;\n    };\n\n    return _sunburstSeries as SunburstSeries;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { treeColor } from \"../series/sunburst/sunburstColor\";\nimport { treeData } from \"../data/treeData\";\nimport {\n    SunburstData,\n    sunburstSeries,\n} from \"../series/sunburst/sunburstSeries\";\nimport { tooltip } from \"../tooltip/tooltip\";\nimport { gridLayoutMultiChart } from \"../layout/gridLayoutMultiChart\";\nimport { colorRangeLegend } from \"../legend/colorRangeLegend\";\nimport { colorLegend } from \"../legend/legend\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction sunburst(container: HTMLSelection, settings: Settings) {\n    const data = treeData(settings);\n    const color = treeColor(settings, data);\n    const sunburstGrid = gridLayoutMultiChart().elementsPrefix(\"sunburst\");\n\n    container.datum(data).call(sunburstGrid);\n\n    if (color) {\n        const color_column = settings.realValues[1];\n        if (\n            settings.mainValues.find((x) => x.name === color_column)?.type ===\n            \"string\"\n        ) {\n            const legend = colorLegend().settings(settings).scale(color);\n            container.call(legend);\n        } else {\n            const legend = colorRangeLegend().scale(color);\n            container.call(legend);\n        }\n    }\n\n    const sunburstContainer = sunburstGrid.chartContainer();\n    const sunburstEnter = sunburstGrid.chartEnter();\n    const sunburstDiv = sunburstGrid.chartDiv();\n    const sunburstTitle = sunburstGrid.chartTitle();\n    const containerSize = sunburstGrid.containerSize();\n\n    sunburstTitle.each((d, i, nodes) => d3.select(nodes[i]).text(d.split));\n\n    sunburstContainer\n        .append(\"circle\")\n        .attr(\"fill\", \"none\")\n        .style(\"pointer-events\", \"all\");\n\n    sunburstContainer.append(\"text\").attr(\"class\", \"parent\");\n    sunburstEnter\n        .merge(sunburstDiv)\n        .select(\"svg\")\n        .select(\"g.sunburst\")\n        .attr(\n            \"transform\",\n            `translate(${containerSize.width / 2}, ${containerSize.height / 2})`\n        )\n        .each(function ({\n            split,\n            data,\n        }: {\n            split: string;\n            data: SunburstData;\n        }) {\n            const sunburstElement = d3.select(this);\n            const svgNode: SVGElement = this.parentNode;\n            const { width, height } = svgNode.getBoundingClientRect();\n\n            const radius =\n                (Math.min(width, height) - 24) /\n                Math.max(2, settings.crossValues.length * 2);\n            sunburstSeries()\n                .settings(settings)\n                .split(split)\n                .data(data)\n                .color(color)\n                .radius(radius)(sunburstElement);\n\n            tooltip().settings(settings)(\n                sunburstElement.selectAll(\"g.segment\")\n            );\n        });\n}\n\nsunburst.plugin = {\n    name: \"Sunburst\",\n    category: \"Hierarchial Chart\",\n    max_cells: 7500,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        type: \"number\",\n        count: 1,\n        names: [\"Size\", \"Color\", \"Tooltip\"],\n    },\n};\n\nexport default sunburst;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { seriesColorRange } from \"../seriesRange\";\nimport { seriesColorsFromDistinct } from \"../seriesColors\";\nimport { Settings } from \"../../types\";\nimport { TreeData } from \"../../data/treeData\";\n\nexport function treeColor(\n    settings: Settings,\n    data: d3.HierarchyNode<TreeData>[]\n) {\n    if (\n        settings.realValues.length < 1 ||\n        settings.realValues[1] === null ||\n        settings.realValues[1] === undefined\n    )\n        return;\n    const color_column = settings.realValues[1];\n    const colors = data\n        .filter((x) => x.height > 0)\n        .map((x) => getColors(x))\n        .reduce((a, b) => a.concat(b));\n    if (\n        settings.mainValues.find((x) => x.name === color_column)?.type ===\n        \"string\"\n    ) {\n        return seriesColorsFromDistinct(settings, colors);\n    } else {\n        let min = Math.min(...colors);\n        let max = Math.max(...colors);\n        return seriesColorRange(settings, null, null, [min, max]);\n    }\n}\n\n// only get the colors from the bottom level (e.g. nodes with no children)\nfunction getColors(nodes, colors = []) {\n    nodes.children && nodes.children.length > 0\n        ? nodes.children.forEach((child) =>\n              colors.concat(getColors(child, colors))\n          )\n        : nodes.data.color && colors.push(nodes.data.color);\n    return colors;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { select } from \"d3\";\nimport { isElementOverlapping, isElementOverflowing } from \"../../utils/utils\";\n\nconst minTextSize = 7;\n\nexport const labelMapExists = (d) =>\n    d.target && d.target.textAttributes ? true : false;\n\nexport const toggleLabels = (nodes, treemapLevel, crossValues) => {\n    nodes.selectAll(\"text\").each(function (d, i) {\n        const help = textLevelHelper(d, treemapLevel, crossValues);\n        this.style = help;\n    });\n\n    const visibleNodes = selectVisibleNodes(nodes);\n    centerLabels(visibleNodes);\n    preventTextCollisions(visibleNodes);\n};\n\nexport const restoreLabels = (nodes) => {\n    nodes.each((d, i, nodes) => {\n        const label = select(nodes[i]).selectAll(\"text\");\n        label\n            .attr(\"dx\", d.target.textAttributes.dx)\n            .attr(\"dy\", d.target.textAttributes.dy)\n            .attr(\"style\", d.target.textAttributes.style);\n    });\n};\n\nexport const preventTextCollisions = (nodes) => {\n    const textCollisionFuzzFactorPx = -2;\n    const textAdjustPx = 14; // This should remain the same as the css value for .top => font-size in the chart.less\n    const rect = (element): DOMRect => element.getBoundingClientRect();\n\n    const topNodes = [];\n    nodes\n        .selectAll(\"text\")\n        .filter(\n            (_, i, nodes) =>\n                select(nodes[i]).attr(\"style\") === textVisibility.high\n        )\n        .each((_, i, nodes) => topNodes.push(nodes[i]));\n\n    nodes\n        .selectAll(\"text\")\n        .filter(\n            (_, i, nodes) =>\n                select(nodes[i]).attr(\"style\") === textVisibility.low\n        )\n        .each((_, i, nodes) => {\n            const lowerNode = nodes[i];\n            topNodes\n                .filter(\n                    (topNode) =>\n                        isElementOverlapping(\n                            \"x\",\n                            rect(topNode),\n                            rect(lowerNode)\n                        ) &&\n                        isElementOverlapping(\n                            \"y\",\n                            rect(topNode),\n                            rect(lowerNode),\n                            textCollisionFuzzFactorPx\n                        )\n                )\n                .forEach(() =>\n                    select(lowerNode).attr(\n                        \"dy\",\n                        Number(select(lowerNode).attr(\"dy\")) + textAdjustPx\n                    )\n                );\n        });\n};\n\nexport const lockTextOpacity = (d) =>\n    select(d).style(\"opacity\", textOpacity[select(d).attr(\"class\")]);\n\nexport const unlockTextOpacity = (d) => select(d).style(\"opacity\", null);\n\nexport const textOpacity = { top: 1, mid: 0.7, lower: 0 };\n\nexport const selectVisibleNodes = (nodes) =>\n    nodes.filter(\n        (_, i, nodes) =>\n            select(nodes[i]).selectAll(\"text\").attr(\"style\") !==\n            textVisibility.zero\n    );\n\nexport const adjustLabelsThatOverflow = (nodes) =>\n    nodes.selectAll(\"text\").each((_, i, nodes) => shrinkOrHideText(nodes[i]));\n\nconst centerLabels = (nodes) =>\n    nodes.selectAll(\"text\").each((_, i, nodes) => centerText(nodes[i]));\n\nconst centerText = (d) => {\n    const nodeSelect = select(d);\n    const rect = d.getBoundingClientRect();\n    nodeSelect.attr(\"dx\", 0 - rect.width / 2).attr(\"dy\", 0 + rect.height / 4);\n};\n\n// WOuld be ideal to use IntersectionObserver here, but it does not support SVG\nconst shrinkOrHideText = (d) => {\n    const parent = d.parentNode;\n    const rect = parent.childNodes[0];\n\n    const textRect = d.getBBox();\n    const rectRect = rect.getBBox();\n\n    if (!needsToShrinkOrHide(d, rectRect, textRect)) {\n        select(d).attr(\"style\", select(d).attr(\"style\"));\n    }\n};\n\nconst needsToShrinkOrHide = (d, rectRect, textRect) => {\n    const resize_factor = Math.min(\n        rectRect.height / textRect.height,\n        rectRect.width / textRect.width\n    );\n\n    if (resize_factor < 1) {\n        const fontSize = parseInt(select(d).style(\"font-size\"));\n        const newFontSize = Math.floor(fontSize * resize_factor);\n        if (fontSize > minTextSize && newFontSize > minTextSize) {\n            select(d).style(\"font-size\", `${newFontSize}px`);\n            centerText(d);\n        } else {\n            select(d).style(\"font-size\", null);\n            select(d).style(\"opacity\", \"0\");\n        }\n        return true;\n    }\n    return false;\n};\n\nconst textLevelHelper = (d, treemapLevel, crossValues) => {\n    if (\n        !crossValues\n            .filter((x) => x !== \"\")\n            .every((x) => d.crossValue.includes(x))\n    )\n        return textVisibility.zero;\n    switch (d.depth) {\n        case treemapLevel + 1:\n            return textVisibility.high;\n        case treemapLevel + 2:\n            return textVisibility.low;\n        default:\n            return textVisibility.zero;\n    }\n};\n\nconst textVisibility = {\n    high: \"font-size:14px;z-index:5;pointer-events: none;\",\n    low: \"font-size:8px;opacity:0.7;z-index:4;\",\n    zero: \"font-size:0px;opacity:0;z-index:4;\",\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\n\nexport default (width: number, height: number): d3.TreemapLayout<unknown> => {\n    const treemapLayout = d3\n        .treemap()\n        .size([width, height])\n        .paddingInner((d) => 1 + 2 * (d.height - 1));\n\n    treemapLayout.tile(d3.treemapBinary);\n\n    return treemapLayout;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { calcWidth, calcHeight } from \"./treemapSeries\";\nimport { hierarchy, select } from \"d3\";\nimport treemapLayout from \"./treemapLayout\";\nimport { textOpacity } from \"./treemapLabel\";\n\nconst includesAllCrossValues = (d, crossValues) =>\n    crossValues.every((val) => d.crossValue.includes(val));\n\nexport function calculateSubTreeMap(\n    d,\n    crossValues,\n    nodesMerge,\n    treemapLevel,\n    rootNode,\n    treemapDiv\n) {\n    // We can approximate coordinates for most of the tree which will be shunted\n    // beyond the viewable area. This approach alone results in excessive\n    // margins as one goes deeper into the treemap.\n    approximateAttributesForAllNodes(\n        d,\n        crossValues,\n        nodesMerge,\n        treemapLevel,\n        rootNode\n    );\n    d.mapLevel[treemapLevel].levelRoot = true;\n    // Use the pre-existing d3 mechanism to calculate the subtree for the\n    // viewable area.\n    recalculateVisibleSubTreeCoordinates(\n        d,\n        treemapDiv.node().getBoundingClientRect().width,\n        treemapDiv.node().getBoundingClientRect().height,\n        treemapLevel\n    );\n\n    calculateTextOpacities(nodesMerge, treemapLevel);\n}\n\nexport function calculateRootLevelMap(nodesMerge, rootNode) {\n    nodesMerge.each((d) => {\n        d.mapLevel = [];\n        d.mapLevel[0] = {\n            x0: d.x0,\n            x1: calcWidth(d) + d.x0,\n            y0: d.y0,\n            y1: calcHeight(d) + d.y0,\n            visible: true,\n            opacity: 1,\n        };\n    });\n    rootNode.mapLevel[0].levelRoot = true;\n    calculateTextOpacities(nodesMerge, 0);\n}\n\nexport const saveLabelMap = (nodes, treemapLevel) => {\n    nodes.each((d, i, nodes) => {\n        const label = select(nodes[i]).selectAll(\"text\");\n        d.mapLevel[treemapLevel].textAttributes = {\n            dx: label.attr(\"dx\"),\n            dy: label.attr(\"dy\"),\n            class: label.attr(\"class\"),\n            \"font-size\": label.style(\"font-size\"),\n        };\n    });\n};\n\nfunction approximateAttributesForAllNodes(\n    d,\n    crossValues,\n    nodesMerge,\n    treemapLevel,\n    rootNode\n) {\n    const oldDimensions = {\n        x: d.x0,\n        y: d.y0,\n        width: d.x1 - d.x0,\n        height: d.y1 - d.y0,\n    };\n    const newDimensions = {\n        width: rootNode.x1 - rootNode.x0,\n        height: rootNode.y1 - rootNode.y0,\n    };\n    const dimensionMultiplier = {\n        width: newDimensions.width / oldDimensions.width,\n        height: newDimensions.height / oldDimensions.height,\n    };\n\n    nodesMerge.each((d) => {\n        const x0 = (d.x0 - oldDimensions.x) * dimensionMultiplier.width;\n        const y0 = (d.y0 - oldDimensions.y) * dimensionMultiplier.height;\n        const width = calcWidth(d) * dimensionMultiplier.width;\n        const height = calcHeight(d) * dimensionMultiplier.height;\n        const visible =\n            includesAllCrossValues(d, crossValues) &&\n            d.data.name !== crossValues[treemapLevel - 1];\n\n        d.mapLevel[treemapLevel] = {\n            x0,\n            x1: width + x0,\n            y0,\n            y1: height + y0,\n            visible,\n            opacity: visible ? 1 : 0,\n        };\n    });\n    d.mapLevel[treemapLevel].levelRoot = true;\n}\n\nfunction recalculateVisibleSubTreeCoordinates(\n    subTreeRoot,\n    treeRootWidth,\n    treeRootHeight,\n    treemapLevel\n) {\n    const treemapBlueprinter = treemapLayout(treeRootWidth, treeRootHeight);\n    const treemapBlueprint = treemapBlueprinter(\n        hierarchy(subTreeRoot.data).sum((d) => d.size)\n    );\n\n    const dummiedDescendants = treemapBlueprint.descendants();\n    const descendants = subTreeRoot.descendants();\n\n    dummiedDescendants.forEach((_, i) => {\n        descendants[i].mapLevel[treemapLevel].x0 = dummiedDescendants[i].x0;\n        descendants[i].mapLevel[treemapLevel].x1 = dummiedDescendants[i].x1;\n        descendants[i].mapLevel[treemapLevel].y0 = dummiedDescendants[i].y0;\n        descendants[i].mapLevel[treemapLevel].y1 = dummiedDescendants[i].y1;\n    });\n}\n\nfunction calculateTextOpacities(nodesMerge, treemapLevel) {\n    nodesMerge.selectAll(\"text\").each((_, i, nodes) => {\n        const text = select(nodes[i]);\n        const d: any = select(nodes[i]).datum();\n        const textVis = text.attr(\"class\");\n        d.mapLevel[treemapLevel].textLockedAt = {\n            opacity: textOpacity[textVis],\n        };\n    });\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { calcWidth, calcHeight } from \"./treemapSeries\";\nimport {\n    labelMapExists,\n    toggleLabels,\n    preventTextCollisions,\n    lockTextOpacity,\n    unlockTextOpacity,\n    textOpacity,\n    selectVisibleNodes,\n    adjustLabelsThatOverflow,\n    restoreLabels,\n} from \"./treemapLabel\";\nimport { calculateSubTreeMap, saveLabelMap } from \"./treemapLevelCalculation\";\nimport { raiseEvent } from \"../../tooltip/selectionEvent\";\n\nexport function returnToLevel(\n    rects,\n    nodesMerge,\n    labels,\n    settings,\n    treemapDiv,\n    treemapSvg,\n    rootNode,\n    parentCtrls,\n    root_settings\n) {\n    if (settings.treemapLevel > 0) {\n        const crossValues = rootNode.crossValue;\n        executeTransition(\n            rootNode,\n            rects,\n            nodesMerge,\n            labels,\n            settings,\n            treemapDiv,\n            treemapSvg,\n            rootNode,\n            0,\n            crossValues,\n            parentCtrls,\n            root_settings,\n            1,\n            false\n        );\n\n        settings.treemapRoute\n            .slice(1, settings.treemapRoute.length)\n            .forEach((cv) => {\n                const d = nodesMerge.filter((d) => d.crossValue === cv).datum();\n                const crossValues = d.crossValue;\n                calculateSubTreeMap(\n                    d,\n                    crossValues,\n                    nodesMerge,\n                    d.depth,\n                    rootNode,\n                    treemapDiv\n                );\n                executeTransition(\n                    d,\n                    rects,\n                    nodesMerge,\n                    labels,\n                    settings,\n                    treemapDiv,\n                    treemapSvg,\n                    rootNode,\n                    d.depth,\n                    crossValues,\n                    parentCtrls,\n                    root_settings,\n                    1,\n                    false\n                );\n            });\n    }\n}\n\nexport function changeLevel(\n    d,\n    rects,\n    nodesMerge,\n    labels,\n    settings,\n    treemapDiv,\n    treemapSvg,\n    rootNode,\n    parentCtrls,\n    root_settings\n) {\n    if (!d.children) return;\n\n    if (settings.treemapLevel < d.depth) {\n        settings.treemapRoute.push(d.crossValue);\n    } else {\n        settings.treemapRoute.pop();\n    }\n\n    settings.treemapLevel = d.depth;\n\n    const crossValues = d.crossValue;\n\n    if (\n        !d.mapLevel[settings.treemapLevel] ||\n        !d.mapLevel[settings.treemapLevel].levelRoot\n    ) {\n        calculateSubTreeMap(\n            d,\n            crossValues,\n            nodesMerge,\n            settings.treemapLevel,\n            rootNode,\n            treemapDiv\n        );\n    }\n\n    executeTransition(\n        d,\n        rects,\n        nodesMerge,\n        labels,\n        settings,\n        treemapDiv,\n        treemapSvg,\n        rootNode,\n        settings.treemapLevel,\n        crossValues,\n        parentCtrls,\n        root_settings\n    );\n}\n\nfunction executeTransition(\n    d,\n    rects,\n    nodesMerge,\n    labels,\n    settings,\n    treemapDiv,\n    treemapSvg,\n    rootNode,\n    treemapLevel,\n    crossValues,\n    parentCtrls,\n    root_settings,\n    duration = 500,\n    recordLabelMap = true\n) {\n    const parent = d.parent;\n\n    const t = treemapSvg\n        .transition(\"main transition\")\n        .duration(duration)\n        .ease(d3.easeCubicOut);\n\n    nodesMerge.each((d) => (d.target = d.mapLevel[treemapLevel]));\n\n    if (!labelMapExists(d)) preventUserInteraction(nodesMerge, parentCtrls);\n\n    // hide hidden svgs\n    nodesMerge\n        .transition(t)\n        .tween(\"data\", (d) => {\n            const i = d3.interpolate(d.current, d.target);\n            return (t) => (d.current = i(t));\n        })\n        .styleTween(\"opacity\", (d) => () => d.current.opacity)\n        .attrTween(\n            \"pointer-events\",\n            (d) => () => d.target.visible ? \"all\" : \"none\"\n        );\n\n    rects\n        .transition(t)\n        .filter((d) => d.target.visible)\n        .styleTween(\"x\", (d) => () => `${d.current.x0}px`)\n        .styleTween(\"y\", (d) => () => `${d.current.y0}px`)\n        .styleTween(\"width\", (d) => () => `${d.current.x1 - d.current.x0}px`)\n        .styleTween(\"height\", (d) => () => `${d.current.y1 - d.current.y0}px`);\n\n    labels\n        .transition(t)\n        .filter((d) => d.target.visible)\n        .attrTween(\"x\", (d) => () => d.current.x0 + calcWidth(d.current) / 2)\n        .attrTween(\"y\", (d) => () => d.current.y0 + calcHeight(d.current) / 2)\n        .end()\n        .catch(() => enableUserInteraction(nodesMerge))\n        .then(() => {\n            if (!labelMapExists(d)) {\n                preventTextCollisions(visibleLabelNodes);\n                adjustLabelsThatOverflow(visibleLabelNodes);\n                fadeTextTransition(labels, treemapSvg, duration);\n                if (recordLabelMap) saveLabelMap(nodesMerge, treemapLevel);\n                enableUserInteraction(nodesMerge, parentCtrls);\n            }\n        })\n        .catch((ex) => {\n            console.error(\n                \"Exception completing promises after main transition\",\n                ex\n            );\n            enableUserInteraction(nodesMerge, parentCtrls);\n        });\n\n    if (!labelMapExists(d)) {\n        labels.each((_, i, labels) => lockTextOpacity(labels[i]));\n        toggleLabels(nodesMerge, treemapLevel, crossValues);\n    } else {\n        restoreLabels(nodesMerge);\n    }\n\n    const visibleLabelNodes = selectVisibleNodes(nodesMerge);\n\n    if (parent) {\n        parentCtrls\n            .hide(false)\n            .text(d.label)\n            .onClick(() => {\n                changeLevel(\n                    parent,\n                    rects,\n                    nodesMerge,\n                    labels,\n                    settings,\n                    treemapDiv,\n                    treemapSvg,\n                    rootNode,\n                    parentCtrls,\n                    root_settings\n                    // duration\n                );\n                const viewer = treemapDiv.node().getRootNode()\n                    .host.parentElement;\n                raiseEvent(viewer, parent, root_settings);\n            })();\n    } else {\n        parentCtrls.hide(true)();\n    }\n}\n\nasync function fadeTextTransition(labels, treemapSvg, duration = 400) {\n    const t = treemapSvg\n        .transition(\"text fade transition\")\n        .duration(duration)\n        .ease(d3.easeCubicOut);\n\n    await labels\n        .transition(t)\n        .filter((d) => d.target.visible)\n        .tween(\"data\", (d, i, labels) => {\n            const label = labels[i];\n            const interpolation = d3.interpolate(\n                lockedOpacity(d),\n                targetOpacity(label)\n            );\n            return (t) => (d.current.opacity = interpolation(t));\n        })\n        .styleTween(\"opacity\", (d) => () => d.current.opacity)\n        .end()\n        .catch((ex) => console.error(\"Exception in text fade transition\", ex))\n        .then(() =>\n            labels.each((_, i, labels) => unlockTextOpacity(labels[i]))\n        );\n}\n\nconst lockedOpacity = (d) => d.target.textLockedAt.opacity;\nconst targetOpacity = (d) => textOpacity[d3.select(d).attr(\"class\")];\n\nconst preventUserInteraction = (nodes, parentCtrls) => {\n    parentCtrls.deactivate(true);\n\n    nodes.each((_, i, nodes) => {\n        const rect = d3.select(nodes[i]).selectAll(\"rect\");\n        rect.style(\"pointer-events\", \"none\");\n    });\n};\n\nconst enableUserInteraction = (nodes, parentCtrls = undefined) => {\n    if (parentCtrls) parentCtrls.deactivate(false);\n\n    nodes.each((_, i, nodes) => {\n        const rect = d3.select(nodes[i]).selectAll(\"rect\");\n        rect.style(\"pointer-events\", null);\n    });\n};\n", "<button id=\"goto-parent\">Goto parent</button>\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { getOrCreateElement } from \"../../utils/utils\";\nimport template from \"../../../html/parent-controls.html\";\n\nexport function parentControls(container) {\n    let onClick = null;\n    let text = null;\n    let hide = true;\n    let deactivated = false;\n\n    const parent = getOrCreateElement(container, \".parent-controls\", () =>\n        container\n            .append(\"div\")\n            .attr(\"class\", \"parent-controls\")\n            .style(\"display\", hide ? \"none\" : \"\")\n            .html(template)\n    );\n\n    const controls = () => {\n        parent\n            .style(\"display\", hide ? \"none\" : \"\")\n            .select(\"#goto-parent\")\n            .style(\"pointer-events\", deactivated ? \"none\" : null)\n            .html(`\u21EA ${text}`)\n            .on(\"click\", () => onClick());\n    };\n\n    controls.deactivate = (...args) => {\n        if (!args.length) {\n            return deactivated;\n        }\n        deactivated = args[0];\n\n        const button = parent.select(\"#goto-parent\");\n        if (deactivated) {\n            button.style(\"pointer-events\", \"none\");\n        } else {\n            button.style(\"pointer-events\", null);\n        }\n\n        return controls;\n    };\n\n    controls.hide = (...args) => {\n        if (!args.length) {\n            return hide;\n        }\n        hide = args[0];\n        return controls;\n    };\n\n    controls.text = (...args) => {\n        if (!args.length) {\n            return text;\n        }\n        text = args[0];\n        return controls;\n    };\n\n    controls.onClick = (...args) => {\n        if (!args.length) {\n            return onClick;\n        }\n        onClick = args[0];\n        return controls;\n    };\n\n    return controls;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport {\n    toggleLabels,\n    adjustLabelsThatOverflow,\n    selectVisibleNodes,\n} from \"./treemapLabel\";\nimport treemapLayout from \"./treemapLayout\";\nimport { changeLevel, returnToLevel } from \"./treemapTransitions\";\nimport { parentControls } from \"./treemapControls\";\nimport { calculateRootLevelMap, saveLabelMap } from \"./treemapLevelCalculation\";\n\nexport const nodeLevel = {\n    leaf: \"leafnode\",\n    branch: \"branchnode\",\n    root: \"rootnode\",\n};\nexport const calcWidth = (d) => d.x1 - d.x0;\nexport const calcHeight = (d) => d.y1 - d.y0;\nconst isLeafNode = (maxDepth, d) => d.depth === maxDepth;\nconst nodeLevelHelper = (maxDepth, d) =>\n    d.depth === 0\n        ? nodeLevel.root\n        : isLeafNode(maxDepth, d)\n        ? nodeLevel.leaf\n        : nodeLevel.branch;\n\nexport function treemapSeries() {\n    let settings = null;\n    let root_settings = null;\n    let data = null;\n    let color = null;\n    let treemapDiv = null;\n    let parentCtrls = null;\n\n    const _treemapSeries = (treemapSvg) => {\n        parentCtrls = parentControls(treemapDiv);\n        parentCtrls();\n\n        const maxDepth = data.height;\n        if (!settings.treemapLevel) settings.treemapLevel = 0;\n        if (!settings.treemapRoute) settings.treemapRoute = [];\n        const treemap = treemapLayout(\n            treemapDiv.node().getBoundingClientRect().width,\n            treemapDiv.node().getBoundingClientRect().height\n        );\n        treemap(data);\n\n        const nodes = treemapSvg.selectAll(\"g\").data(data.descendants());\n        const nodesEnter = nodes.enter().append(\"g\");\n\n        nodesEnter.append(\"rect\");\n        nodesEnter.append(\"text\");\n\n        // Draw child nodes first\n        const nodesMerge = nodesEnter\n            .merge(nodes)\n            .sort((a, b) => b.depth - a.depth);\n\n        const rects = nodesMerge\n            .select(\"rect\")\n            .attr(\"class\", (d) => `treerect ${nodeLevelHelper(maxDepth, d)}`)\n            .style(\"x\", (d) => `${d.x0}px`)\n            .style(\"y\", (d) => `${d.y0}px`)\n            .style(\"width\", (d) => `${calcWidth(d)}px`)\n            .style(\"height\", (d) => `${calcHeight(d)}px`);\n\n        rects.style(\"fill\", (d) => {\n            if (nodeLevelHelper(maxDepth, d) === nodeLevel.leaf) {\n                if (d.data.color) {\n                    return color(d.data.color);\n                } else {\n                    return root_settings.colorStyles.series;\n                }\n            } else {\n                return \"transparent\";\n            }\n        });\n\n        const labels = nodesMerge\n            .filter((d) => d.value !== 0)\n            .select(\"text\")\n            .attr(\"x\", (d) => d.x0 + calcWidth(d) / 2)\n            .attr(\"y\", (d) => d.y0 + calcHeight(d) / 2)\n            .text((d) => d.label);\n\n        const rootNode = rects.filter((d) => d.crossValue.length === 0).datum();\n        calculateRootLevelMap(nodesMerge, rootNode);\n\n        toggleLabels(nodesMerge, 0, []);\n        adjustLabelsThatOverflow(selectVisibleNodes(nodesMerge));\n        saveLabelMap(nodesMerge, 0);\n\n        if (settings.treemapRoute.length === 0)\n            settings.treemapRoute.push(rootNode.crossValue);\n        rects\n            .filter((d) => d.children)\n            .on(\"click\", (_event, d) =>\n                changeLevel(\n                    d,\n                    rects,\n                    nodesMerge,\n                    labels,\n                    settings,\n                    treemapDiv,\n                    treemapSvg,\n                    rootNode,\n                    parentCtrls,\n                    root_settings\n                )\n            );\n\n        returnToLevel(\n            rects,\n            nodesMerge,\n            labels,\n            settings,\n            treemapDiv,\n            treemapSvg,\n            rootNode,\n            parentCtrls,\n            root_settings\n        );\n    };\n\n    _treemapSeries.settings = (...args) => {\n        if (!args.length) {\n            return settings;\n        }\n        settings = args[0];\n        root_settings = args[1];\n        return _treemapSeries;\n    };\n\n    _treemapSeries.data = (...args) => {\n        if (!args.length) {\n            return data;\n        }\n        data = args[0];\n        return _treemapSeries;\n    };\n\n    _treemapSeries.color = (...args) => {\n        if (!args.length) {\n            return color;\n        }\n        color = args[0];\n        return _treemapSeries;\n    };\n\n    _treemapSeries.container = (...args) => {\n        if (!args.length) {\n            return treemapDiv;\n        }\n        treemapDiv = args[0];\n        return _treemapSeries;\n    };\n\n    return _treemapSeries;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport { treeColor } from \"../series/treemap/treemapColor\";\nimport { treeData } from \"../data/treeData\";\nimport { treemapSeries } from \"../series/treemap/treemapSeries\";\nimport { tooltip } from \"../tooltip/tooltip\";\nimport { gridLayoutMultiChart } from \"../layout/gridLayoutMultiChart\";\nimport { colorRangeLegend } from \"../legend/colorRangeLegend\";\nimport { colorLegend } from \"../legend/legend\";\nimport { HTMLSelection, Settings } from \"../types\";\n\nfunction treemap(container: HTMLSelection, settings: Settings) {\n    if (!settings.treemaps) settings.treemaps = {};\n\n    const data = treeData(settings);\n    const color = treeColor(\n        settings,\n        data.map((d) => d.data)\n    );\n\n    if (color) {\n        this._container.classList.add(\"has-legend\");\n    }\n\n    const treemapGrid = gridLayoutMultiChart().elementsPrefix(\"treemap\");\n    container.datum(data).call(treemapGrid);\n    if (color) {\n        const color_column = settings.realValues[1];\n        if (\n            settings.mainValues.find((x) => x.name === color_column)?.type ===\n            \"string\"\n        ) {\n            const legend = colorLegend().settings(settings).scale(color);\n            container.call(legend);\n        } else {\n            const legend = colorRangeLegend().scale(color);\n            container.call(legend);\n        }\n    }\n\n    const treemapEnter = treemapGrid.chartEnter();\n    const treemapDiv = treemapGrid.chartDiv();\n    const treemapTitle = treemapGrid.chartTitle();\n\n    treemapTitle.each((d, i, nodes) => d3.select(nodes[i]).text(d.split));\n    treemapEnter\n        .merge(treemapDiv)\n        .select(\"svg\")\n        .select(\"g.treemap\")\n        .each(function ({ split, data }: { split: string; data: any[] }) {\n            const treemapSvg = d3.select(this);\n\n            // Can't tell if TreemapValue type should have optional properties, which means\n            // that this setting of `{}` should have some default values on it.\n            if (!settings.treemaps[split]) settings.treemaps[split] = {};\n\n            treemapSeries()\n                .settings(settings.treemaps[split], settings)\n                .data(data)\n                .container(\n                    d3.select(d3.select(this.parentNode).node().parentNode)\n                )\n                .color(color)(treemapSvg);\n\n            tooltip().settings(settings).centered(true)(\n                treemapSvg.selectAll(\"g\")\n            );\n        });\n}\n\ntreemap.plugin = {\n    type: \"Treemap\",\n    name: \"Treemap\",\n    category: \"Hierarchial Chart\",\n    max_cells: 3000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        type: \"number\",\n        count: 1,\n        names: [\"Size\", \"Color\", \"Tooltip\"],\n    },\n};\nexport default treemap;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport barChart from \"./bar\";\nimport columnChart from \"./column\";\nimport lineChart from \"./line\";\nimport xyLine from \"./xy-line\";\nimport areaChart from \"./area\";\nimport yScatter from \"./y-scatter\";\nimport xyScatter from \"./xy-scatter\";\nimport heatmap from \"./heatmap\";\nimport ohlc from \"./ohlc\";\nimport candlestick from \"./candlestick\";\nimport sunburst from \"./sunburst\";\nimport treemap from \"./treemap\";\n\nimport { Chart } from \"../types\";\n\nconst chartClasses: Chart[] = [\n    barChart,\n    columnChart,\n    lineChart,\n    xyLine,\n    areaChart,\n    yScatter,\n    xyScatter,\n    ohlc,\n    candlestick,\n    treemap,\n    sunburst,\n    heatmap,\n];\n\nexport default chartClasses;\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as d3 from \"d3\";\nimport * as gparser from \"gradient-parser\";\nimport { ColorStyles, Settings } from \"../types\";\n\nexport const initialiseStyles = (\n    container: HTMLElement,\n    settings: Settings\n) => {\n    if (!settings.colorStyles) {\n        const styles: ColorStyles = {\n            scheme: [],\n            gradient: {},\n            interpolator: {},\n            grid: {},\n        };\n\n        const computed = computedStyle(container);\n        styles[\"series\"] = computed(`--d3fc-series`);\n        for (let i = 1; ; i++) {\n            const key = `series-${i}`;\n            const color = computed(`--d3fc-${key}`);\n            if (!color) {\n                break;\n            }\n\n            styles[key] = color;\n            styles.scheme.push(color);\n        }\n\n        styles.opacity = getOpacityFromColor(styles.series);\n        styles.grid.gridLineColor = computed`--d3fc-gridline--color`;\n\n        const gradients = [\"full\", \"positive\", \"negative\"];\n        gradients.forEach((g) => {\n            const gradient = computed(`--d3fc-${g}--gradient`);\n            styles.gradient[g] = parseGradient(gradient, styles.opacity);\n        });\n\n        settings.colorStyles = styles;\n    }\n\n    if (!settings.textStyles) {\n        const css = window.getComputedStyle(container);\n        const color = css.getPropertyValue(\"color\");\n        const font = `12px ${css.getPropertyValue(\"font-family\")}`;\n        settings.textStyles = { color, font };\n    }\n};\n\nconst getOpacityFromColor = (color) => {\n    return d3.color(color).opacity;\n};\n\nconst stepAsColor = (value, opacity) => {\n    const color = d3.color(`#${value}`);\n    color.opacity = opacity;\n    return color + \"\";\n};\n\nconst computedStyle = (container) => {\n    const containerStyles = getComputedStyle(container);\n    return (d) => containerStyles?.getPropertyValue(d);\n};\n\nconst parseGradient = (gradient, opacity) => {\n    const parsed = gparser.parse(gradient)[0].colorStops;\n    return parsed\n        .map((g, i) => [\n            g.length ? g.length.value / 100 : i / (parsed.length - 1),\n            stepAsColor(g.value, opacity),\n        ])\n        .sort((a, b) => a[0] - b[0]);\n};\n", ":host{user-select:none;}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:12px;overflow:hidden;}:host .chart.yline .y-series:not(:first-child) .gridline-x{display:none;}:host .chart text{font-family:var(--interface-monospace--font-family);}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);}:host .chart .chart-label{display:none;}:host .chart.heatmap{padding-right:120px;}:host .chart.xyscatter{padding:0;font-size:14px;}:host .chart.xyscatter d3fc-group:first-child{padding:16px;padding-top:0px;width:calc(100% - 32px);height:calc(100% - 16px);}:host .chart.xyscatter .multi-xlabel{position:absolute;bottom:0;height:2.5em;width:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .multi-ylabel{position:absolute;top:0;width:2.5em;height:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .outer-container{height:100%;}:host .chart.xyscatter .inner-container{display:inline-grid;overflow-y:auto;width:calc(100% - 16px);height:100%;padding:0;margin:0;}:host .chart.xyscatter .inner-container div{overflow:hidden;}:host .chart.xyscatter .inner-container text.segment,:host .chart.xyscatter .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.xyscatter .inner-container div.xy-scatter-container{margin:5px 0;}:host .chart.sunburst{padding:0;font-size:14px;}:host .chart.sunburst .outer-container{height:100%;}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.sunburst .inner-container div{overflow:hidden;}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translate(0,-27px);}:host .chart.sunburst .inner-container svg{width:100%;height:100%;}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.sunburst .inner-container div.title-container{margin-top:5px;}:host .chart.has-legend{padding-right:120px;}:host .chart.treemap .treemap-container{position:relative;}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px);}:host .chart.treemap .outer-container{height:100%;}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.treemap .inner-container div{overflow:hidden;}:host .chart.treemap .inner-container svg{width:100%;height:100%;}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines,var(--d3fc-axis--lines,white));fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight,black);stroke-opacity:1;}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .branchnode{opacity:0;}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:0.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight,black);}:host .chart.treemap .inner-container .leafnode{fill-opacity:0.8;}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:0.5;}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none;}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:0.7;z-index:4;}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4;}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging;}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:12px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s;}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px#000;transition:box-shadow 0.2s;}:host .chart .x-label{height:1.2em!important;line-height:1em!important;}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color,inherit);font-size:14px;}:host .chart d3fc-canvas.plot-area{display:none;}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block;}:host .chart .y-axis text,:host .chart .y2-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color,rgb(80,80,80));font-size:11px;}:host .chart .y-axis path,:host .chart .y2-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer;}:host .chart .splitter-label::after{margin-left:5px;color:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label:hover::after{color:var(--d3fc-axis-ticks--color,rgb(80,80,80));}:host .chart .splitter-label.disabled::after{color:rgba(80,80,80,0.3);}:host .chart .splitter-label.disabled{cursor:default;}:host .chart .y-label.left-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:\"\";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}:host .chart .y-label.right-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:\"\";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.ybar .y2-axis path,:host .chart.yline .y2-axis path,:host .chart.xyline .y2-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.yarea .y2-axis path,:host .chart.yscatter .y2-axis path,:host .chart.xyscatter .y2-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden;}:host .chart .y-label{white-space:nowrap;}:host .chart .nearbyTip{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none;}:host #dragHandles rect{pointer-events:all;}:host .label rect{fill:none;}:host .legend-container{position:absolute;top:12px;right:12px;left:auto;width:150px;height:280px;}:host .legend-container.legend-color{width:90px;height:150px;}:host .legend-container[borderbox-on-hover=\"true\"]{transition:box-shadow 1s;}:host .legend-container[borderbox-on-hover=\"true\"]:hover{background-color:var(--d3fc-legend--background,#ffffff);transition:box-shadow 0.2s,background-color 0.2s;}:host .legend-container .legend{font-size:8pt;width:100%;}:host .legend-container .legend .cell{cursor:pointer;}:host .legend-container .legend .cell path{fill:var(--d3fc-series,rgba(31,119,180,0.5));stroke:var(--d3fc-series,rgb(31,119,180));}:host .legend-container .legend .cell.hidden path{fill:rgba(204,204,204,0.5);stroke:rgb(204,204,204);}:host .legend-container .legend .cell.hidden circle{fill:rgb(204,204,204)!important;}:host .legend-container text{fill:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .label:hover{fill:rgb(34,160,206);}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .legend-controls{margin-left:12px;}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:rgb(31,119,180);}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:rgb(51,51,51);}:host .heatmap .legend-container.legend-color{height:200px;}:host .treemap .legend-container.legend-color{height:200px;}:host .treemap .legend-container:not(.legend-color){width:100px;}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center;}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background,rgb(247,247,247));border:1px solid var(--inactive--color,rgb(204,204,204));color:var(--d3fc-label--color,inherit);font-size:12px;padding:8px;opacity:0.5;cursor:pointer;}:host .zoom-controls button:hover{opacity:1;}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right;}:host .parent-controls button{-webkit-appearance:none;background:rgb(247,247,247);border:1px solid rgb(204,204,204);padding:10px;opacity:0.5;cursor:pointer;}:host .parent-controls button:hover{background:rgb(230,230,230);}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:0.5em;background:var(--d3fc-tooltip--background,#ffffff);color:var(--d3fc-tooltip--color,black);border:1px solid var(--d3fc-tooltip--border-color,#777777);box-shadow:var(--d3fc-tooltip--box-shadow,none);pointer-events:none;}:host div.tooltip ul{margin:0;padding:0;list-style-type:none;}", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport \"./polyfills/index\";\nimport charts from \"../charts/charts\";\nimport { initialiseStyles } from \"../series/colorStyles\";\nimport style from \"../../../dist/css/perspective-viewer-d3fc.css\";\nimport { HTMLPerspectiveViewerElement } from \"@finos/perspective-viewer\";\nimport type * as psp_types from \"@finos/perspective-viewer\";\n\nimport * as d3 from \"d3\";\n\nimport { Chart, Settings, Type } from \"../types\";\n\nimport * as d3fc_style_1 from \"@d3fc/d3fc-chart/src/css.js\";\nimport * as d3fc_style_2 from \"@d3fc/d3fc-element/src/css.js\";\n\nconst DEFAULT_PLUGIN_SETTINGS = {\n    initial: {\n        type: \"number\",\n        count: 1,\n        names: [],\n    },\n    selectMode: \"select\",\n};\n\nconst D3FC_GLOBAL_STYLES = [d3fc_style_1.css, d3fc_style_2.css, style].map(\n    (x) => {\n        const sheet = new CSSStyleSheet();\n        sheet.replaceSync(x);\n        return sheet;\n    }\n);\n\nconst EXCLUDED_SETTINGS = [\n    \"crossValues\",\n    \"mainValues\",\n    \"realValues\",\n    \"splitValues\",\n    \"filter\",\n    \"data\",\n    \"size\",\n    \"colorStyles\",\n    \"textStyles\",\n    \"agg_paths\",\n    \"treemaps\",\n    \"axisMemo\",\n    \"columns_config\",\n];\n\nasync function register_element(plugin_name: string) {\n    const perspectiveViewerClass = customElements.get(\"perspective-viewer\");\n    await perspectiveViewerClass.registerPlugin(plugin_name);\n}\n\nexport function register(...plugin_names: string[]) {\n    const plugins = new Set(\n        plugin_names.length > 0\n            ? plugin_names\n            : charts.map((chart) => chart.plugin.name)\n    );\n\n    charts.forEach((chart) => {\n        if (plugins.has(chart.plugin.name)) {\n            const name = chart.plugin.name\n                .toLowerCase()\n                .replace(/[ \\t\\r\\n\\/]*/g, \"\");\n\n            const plugin_name = `perspective-viewer-d3fc-${name}`;\n            customElements.define(\n                plugin_name,\n                class extends HTMLPerspectiveViewerD3fcPluginElement {\n                    _chart = chart;\n                    static _chart = chart;\n                }\n            );\n\n            customElements\n                .whenDefined(\"perspective-viewer\")\n                .then(() => register_element(plugin_name));\n        }\n    });\n}\n\nif (!Element.prototype.matches) {\n    Element.prototype.matches = Element.prototype.msMatchesSelector;\n}\n\nclass HTMLPerspectiveViewerD3fcPluginElement extends HTMLElement {\n    _chart: Chart;\n    static _chart: Chart;\n    _settings: Settings | null;\n    render_warning: boolean;\n    _initialized: boolean;\n    _container: HTMLElement;\n    _staged_view;\n    config;\n\n    constructor() {\n        super();\n        this._settings = null;\n        this.render_warning = true;\n    }\n\n    connectedCallback() {\n        if (!this._initialized) {\n            this.attachShadow({ mode: \"open\" });\n            for (const sheet of D3FC_GLOBAL_STYLES) {\n                this.shadowRoot.adoptedStyleSheets.push(sheet);\n            }\n\n            this.shadowRoot.innerHTML += `<div id=\"container\" class=\"chart\"></div>`;\n            this._container = this.shadowRoot.querySelector(\".chart\");\n            this._initialized = true;\n        }\n    }\n\n    get name() {\n        return this._chart.plugin.name;\n    }\n\n    get category() {\n        return this._chart.plugin.category;\n    }\n\n    get select_mode() {\n        return this._chart.plugin.selectMode || \"select\";\n    }\n\n    get min_config_columns() {\n        return (\n            this._chart.plugin.initial?.count ||\n            DEFAULT_PLUGIN_SETTINGS.initial.count\n        );\n    }\n\n    get config_column_names() {\n        return (\n            this._chart.plugin.initial?.names ||\n            DEFAULT_PLUGIN_SETTINGS.initial.names\n        );\n    }\n\n    // get initial() {\n    //     return chart.plugin.initial\n    //        || DEFAULT_PLUGIN_SETTINGS.initial;\n    // }\n\n    static get max_cells() {\n        return this._chart.plugin.max_cells || 10_000;\n    }\n\n    static set max_cells(x) {\n        this._chart.plugin.max_cells = x;\n    }\n\n    static get max_columns() {\n        return this._chart.plugin.max_columns || 50;\n    }\n\n    static set max_columns(x) {\n        this._chart.plugin.max_columns = x;\n    }\n\n    get max_cells() {\n        return this._chart.plugin.max_cells || 10_000;\n    }\n\n    set max_cells(x) {\n        this._chart.plugin.max_cells = x;\n    }\n\n    get max_columns() {\n        return this._chart.plugin.max_columns || 50;\n    }\n\n    set max_columns(x) {\n        this._chart.plugin.max_columns = x;\n    }\n\n    can_render_column_styles(type: Type, group: string) {\n        return this._chart.can_render_column_styles?.call(this, type, group);\n    }\n\n    column_style_controls(type: Type, group: string) {\n        return this._chart.column_style_controls?.call(this, type, group);\n    }\n\n    async render() {\n        var canvas = document.createElement(\"canvas\");\n        var container: HTMLElement =\n            this.shadowRoot.querySelector(\"#container\");\n        canvas.width = container.offsetWidth;\n        canvas.height = container.offsetHeight;\n\n        const context = canvas.getContext(\"2d\");\n        context.fillStyle =\n            window\n                .getComputedStyle(this)\n                .getPropertyValue(\"--plugin--background\") || \"white\";\n        context.fillRect(0, 0, canvas.width, canvas.height);\n        const text_color = window\n            .getComputedStyle(this)\n            .getPropertyValue(\"color\");\n\n        const svgs = Array.from(\n            this.shadowRoot.querySelectorAll<SVGElement>(\n                \"svg:not(#dragHandles)\"\n            )\n        );\n\n        for (const svg of svgs.reverse()) {\n            var img = document.createElement(\"img\");\n\n            const defaultOffset = 0;\n            img.width = svg.parentElement\n                ? svg.parentElement.offsetWidth\n                : defaultOffset;\n\n            img.height = svg.parentElement\n                ? svg.parentElement.offsetHeight\n                : defaultOffset;\n\n            // Pretty sure this is a chrome bug - `drawImage()` call\n            // without this scales incorrectly.\n            const new_svg = svg.cloneNode(true) as SVGElement;\n            if (!new_svg.hasAttribute(\"viewBox\")) {\n                new_svg.setAttribute(\n                    \"viewBox\",\n                    `0 0 ${img.width} ${img.height}`\n                );\n            }\n\n            new_svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n\n            for (const text of new_svg.querySelectorAll(\"text\")) {\n                text.setAttribute(\"fill\", text_color);\n            }\n\n            var xml = new XMLSerializer().serializeToString(new_svg);\n\n            xml = xml.replace(/[^\\x00-\\x7F]/g, \"\");\n\n            const done = new Promise((x, y) => {\n                img.onload = x;\n                img.onerror = y;\n            });\n\n            try {\n                img.src = `data:image/svg+xml;base64,${btoa(xml)}`;\n                await done;\n            } catch (e) {\n                const done = new Promise((x, y) => {\n                    img.onload = x;\n                    img.onerror = y;\n                });\n                img.src = `data:image/svg+xml;utf8,${xml}`;\n                await done;\n            }\n\n            context.drawImage(\n                img,\n                (svg.parentNode as HTMLElement).offsetLeft,\n                (svg.parentNode as HTMLElement).offsetTop,\n                img.width,\n                img.height\n            );\n        }\n\n        const canvases = Array.from(this.shadowRoot.querySelectorAll(\"canvas\"));\n\n        for (const canvas of canvases.reverse()) {\n            context.drawImage(\n                canvas,\n                (canvas.parentNode as HTMLElement).offsetLeft,\n                (canvas.parentNode as HTMLElement).offsetTop,\n                canvas.width / window.devicePixelRatio,\n                canvas.height / window.devicePixelRatio\n            );\n        }\n\n        return await new Promise(\n            (x) => canvas.toBlob((blob) => x(blob)),\n            // @ts-ignore\n            \"image/png\" // uhhhh, what is going on here?\n        );\n    }\n\n    async draw(view, end_col, end_row) {\n        if (this.offsetParent === null) {\n            this._staged_view = [view, end_col, end_row];\n            return;\n        }\n\n        this._staged_view = undefined;\n        if (this._settings) {\n            this._settings.axisMemo = [\n                [Infinity, -Infinity],\n                [Infinity, -Infinity],\n            ];\n        }\n\n        await this.update(view, end_col, end_row, true);\n    }\n\n    async update(view, end_col, end_row, clear = false) {\n        if (this.offsetParent === null) {\n            return;\n        }\n\n        const viewer = this.parentElement as HTMLPerspectiveViewerElement;\n        let jsonp, metadata;\n        const leaves_only = this._chart.plugin.name !== \"Sunburst\";\n        if (end_col && end_row) {\n            jsonp = view.to_columns_string({\n                end_row,\n                end_col,\n                leaves_only,\n            });\n        } else if (end_col) {\n            jsonp = view.to_columns_string({\n                end_col,\n                leaves_only,\n            });\n        } else if (end_row) {\n            jsonp = view.to_columns_string({\n                end_row,\n                leaves_only,\n            });\n        } else {\n            jsonp = view.to_columns_string({ leaves_only });\n        }\n\n        metadata = await Promise.all([\n            viewer.save(),\n            viewer.getTable().then((table) => table.schema()),\n            view.expression_schema(false),\n            view.schema(false),\n            jsonp,\n            view.get_config(),\n        ]);\n        let [\n            real_config,\n            table_schema,\n            expression_schema,\n            view_schema,\n            json_string,\n            config,\n        ] = metadata;\n\n        let json2 = JSON.parse(json_string);\n        const keys = Object.keys(json2);\n        let json = {\n            row(ridx) {\n                const obj: { __ROW_PATH__?: any[] } = {};\n                for (const name of keys) {\n                    obj[name] = json2[name][ridx];\n                }\n\n                return obj;\n            },\n        };\n\n        this.config = real_config;\n        const realValues = this.config.columns;\n\n        /**\n         * Retrieve a tree axis column from the table and\n         * expression schemas, returning a String type or\n         * `undefined`.\n         * @param {String} column a column name\n         */\n        const get_pivot_column_type = function (column) {\n            let type = table_schema[column];\n            if (!type) {\n                type = expression_schema[column];\n            }\n            return type;\n        };\n\n        const { columns, group_by, split_by, filter } = config;\n        const first_col = json2[Object.keys(json2)[0]] || [];\n        const filtered =\n            group_by.length > 0\n                ? first_col.reduce(\n                      (acc, _, idx) => {\n                          const col = json.row(idx);\n                          if (\n                              col.__ROW_PATH__ &&\n                              col.__ROW_PATH__.length == group_by.length\n                          ) {\n                              acc.agg_paths.push(acc.aggs.slice());\n                              acc.rows.push(col);\n                          } else {\n                              const len = col.__ROW_PATH__.filter(\n                                  (x) => x !== undefined\n                              ).length;\n                              acc.aggs[len] = col;\n                              acc.aggs = acc.aggs.slice(0, len + 1);\n                          }\n                          return acc;\n                      },\n                      { rows: [], aggs: [], agg_paths: [] }\n                  )\n                : {\n                      rows: first_col.map((_, idx) => json.row(idx)),\n                  };\n\n        const dataMap = (col, i) =>\n            !group_by.length ? { ...col, __ROW_PATH__: [i] } : col;\n        const mapped = filtered.rows.map(dataMap);\n\n        let settings = {\n            realValues,\n            crossValues: group_by.map((r) => ({\n                name: r,\n                type: get_pivot_column_type(r),\n            })),\n            mainValues: columns.map((a) => ({\n                name: a,\n                type: view_schema[a],\n            })),\n            splitValues: split_by.map((r) => ({\n                name: r,\n                type: get_pivot_column_type(r),\n            })),\n            filter,\n            data: mapped,\n            agg_paths: filtered.agg_paths,\n            ...this.config.plugin_config,\n        };\n\n        const handler = {\n            set: (obj, prop, value) => {\n                if (!EXCLUDED_SETTINGS.includes(prop)) {\n                    this._container &&\n                        this._container.dispatchEvent(\n                            new Event(\"perspective-plugin-update\", {\n                                bubbles: true,\n                                composed: true,\n                            })\n                        );\n                }\n                obj[prop] = value;\n                return true;\n            },\n        };\n\n        const axisMemo = [\n            [Infinity, -Infinity],\n            [Infinity, -Infinity],\n        ];\n\n        this._settings = new Proxy(\n            {\n                axisMemo,\n                ...this._settings,\n                ...settings,\n            },\n            handler\n        );\n\n        // If only a right-axis Y axis remains, reset the alt\n        // axis list to default.\n        if (\n            this._settings.splitMainValues &&\n            this._settings.splitMainValues.length >= columns.length\n        ) {\n            this._settings.splitMainValues = [];\n        }\n\n        initialiseStyles(this._container, this._settings);\n\n        if (clear) {\n            this._container.innerHTML = \"\";\n        }\n\n        this._draw();\n\n        await new Promise((resolve) => requestAnimationFrame(resolve));\n    }\n\n    async clear() {\n        if (this._container) {\n            this._container.innerHTML = \"\";\n        }\n    }\n\n    _draw() {\n        if (this.offsetParent !== null) {\n            const containerDiv = d3.select(this._container);\n            const name = this._chart.plugin.name\n                .toLowerCase()\n                .replace(/[ \\t\\r\\n\\/]*/g, \"\");\n\n            const chartClass = `chart ${name}`;\n            this._settings.size = this._container.getBoundingClientRect();\n            if (this._settings.data.length > 0) {\n                this._chart(\n                    containerDiv.attr(\"class\", chartClass),\n                    this._settings\n                );\n            } else {\n                containerDiv.attr(\"class\", `${chartClass} disabled`);\n            }\n        }\n    }\n\n    /**\n     * TODO we need to `clear()` here unnecessarily due to a bug in the tremap module which\n     * causes non-cleared redraws duplicate column labels when calculating column name\n     * resize/repositions - see `treemapLabel.js`.\n     */\n    async resize(view) {\n        if (this.offsetParent !== null) {\n            if (this._settings?.data !== undefined) {\n                this._draw();\n            } else {\n                const [view, end_col, end_row] = this._staged_view;\n                this._staged_view = undefined;\n                this.draw(view, end_col, end_row);\n            }\n        }\n    }\n\n    async restyle(view, _end_col, _end_row) {\n        let settings = this._settings;\n        if (settings) {\n            delete settings[\"colorStyles\"];\n            delete settings[\"textStyles\"];\n            if (this.isConnected) {\n                initialiseStyles(this._container, this._settings);\n                this.resize(view);\n            }\n        }\n    }\n\n    async delete() {\n        this._container.innerHTML = \"\";\n    }\n\n    getContainer() {\n        return this._container;\n    }\n\n    save() {\n        const settings = { ...this._settings };\n        EXCLUDED_SETTINGS.forEach((s) => {\n            delete settings[s];\n        });\n        return settings;\n    }\n\n    restore(settings: Settings, columns_config: psp_types.ColumnConfigValues) {\n        const new_settings: Partial<Settings> = {};\n        for (const name of EXCLUDED_SETTINGS) {\n            if (this._settings?.[name] !== undefined) {\n                new_settings[name] = this._settings?.[name];\n            }\n        }\n        this._settings = {\n            ...new_settings,\n            ...settings,\n            columns_config,\n        };\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport type { IPerspectiveViewerPlugin } from \"@finos/perspective-viewer\";\nimport { register } from \"./plugin/plugin\";\n\nawait register();\n\ndeclare global {\n    interface CustomElementRegistry {\n        get(\n            tagName: \"perspective-viewer-d3fc-area\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-xbar\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-candlestick\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-ybar\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-heatmap\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-yline\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-ohlc\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-sunburst\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-treemap\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-xyline\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-xyscatter\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n        get(\n            tagName: \"perspective-viewer-d3fc-yscatter\"\n        ): typeof HTMLPerspectiveViewerD3FCPluginElement;\n\n        whenDefined(tagName: \"perspective-viewer-d3fc-area\"): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-xbar\"): Promise<void>;\n        whenDefined(\n            tagName: \"perspective-viewer-d3fc-candlestick\"\n        ): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-ybar\"): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-heatmap\"): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-xyline\"): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-ohlc\"): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-sunburst\"): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-treemap\"): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-xyline\"): Promise<void>;\n        whenDefined(\n            tagName: \"perspective-viewer-d3fc-xyscatter\"\n        ): Promise<void>;\n        whenDefined(tagName: \"perspective-viewer-d3fc-yscatter\"): Promise<void>;\n    }\n\n    export interface HTMLPerspectiveViewerD3FCPluginElement\n        extends IPerspectiveViewerPlugin {}\n\n    export class HTMLPerspectiveViewerD3FCPluginElement\n        extends HTMLElement\n        implements IPerspectiveViewerPlugin\n    {\n        static get max_cells(): number;\n        static set max_cells(value: number);\n    }\n}\n"],
  "mappings": "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",
  "names": ["require_node", "__commonJSMin", "exports", "GradientParser", "visitor", "node", "orientation", "result", "at", "style", "resultColor", "length", "elements", "size", "element", "i", "nodeVisitor", "root", "tokens", "input", "error", "msg", "err", "getAST", "ast", "matchListDefinitions", "matchListing", "matchDefinition", "matchGradient", "matchLinearOrientation", "matchListRadialOrientations", "gradientType", "pattern", "orientationMatcher", "matchCall", "captures", "scan", "matchColorStop", "callback", "matchSideOrCorner", "matchAngle", "match", "radialOrientations", "radialOrientation", "matchRadialOrientation", "lookaheadCache", "radialType", "matchCircle", "matchEllipse", "matchAtPosition", "extent", "matchExtentKeyword", "positionAt", "defaultPosition", "matchPositioning", "circle", "matchLength", "ellipse", "matchDistance", "positioning", "location", "matchCoordinates", "matcher", "color", "matchColor", "matchHexColor", "matchRGBAColor", "matchRGBColor", "matchLiteralColor", "matchNumber", "matchPositionKeyword", "type", "captureIndex", "regexp", "blankCaptures", "consume", "code", "s", "el", "ascending", "a", "b", "descending", "a", "b", "bisector", "f", "compare1", "compare2", "delta", "ascending", "d", "x", "descending", "zero", "left", "a", "lo", "hi", "mid", "right", "center", "i", "number", "x", "ascendingBisect", "bisector", "ascending", "bisectRight", "bisectLeft", "bisectCenter", "number", "bisect_default", "variance", "values", "valueof", "count", "delta", "mean", "sum", "value", "index", "deviation", "values", "valueof", "v", "variance", "InternMap", "entries", "key", "keyof", "value", "intern_get", "intern_set", "intern_delete", "intern_get", "_intern", "_key", "value", "key", "intern_set", "intern_delete", "keyof", "e10", "e5", "e2", "tickSpec", "start", "stop", "count", "step", "power", "error", "factor", "i1", "i2", "inc", "ticks", "reverse", "n", "i", "tickIncrement", "tickStep", "max", "values", "valueof", "value", "index", "min", "values", "valueof", "value", "index", "mean", "values", "valueof", "count", "sum", "value", "index", "pairs", "values", "pairof", "pair", "previous", "first", "value", "a", "b", "range", "start", "stop", "step", "n", "i", "createReboundMethod_default", "target", "source", "name", "method", "args", "value", "rebind_default", "target", "source", "names", "name", "createReboundMethod_default", "createTransform", "transforms", "name", "fn", "rebindAll_default", "target", "source", "transform", "result", "createReboundMethod_default", "regexify_default", "strsOrRegexes", "strOrRegex", "exclude_default", "exclusions", "regexify_default", "name", "exclusion", "include_default", "inclusions", "regexify_default", "name", "inclusion", "includeMap_default", "mappings", "name", "capitalizeFirstLetter", "str", "prefix_default", "prefix", "name", "identity", "d", "noop", "functor", "v", "convertNaN", "value", "slidingWindow_default", "period", "accumulator", "noop", "value", "identity", "defined", "d", "slidingWindow", "data", "size", "windowData", "i", "args", "functor", "bollingerBands_default", "multiplier", "slidingWindow", "slidingWindow_default", "values", "stdDev", "deviation", "average", "mean", "convertNaN", "bollingerBands", "data", "args", "rebind_default", "initRange", "domain", "range", "initInterpolator", "interpolator", "implicit", "ordinal", "index", "InternMap", "domain", "range", "unknown", "scale", "d", "_", "value", "initRange", "band", "scale", "ordinal", "domain", "ordinalRange", "r0", "r1", "step", "bandwidth", "round", "paddingInner", "paddingOuter", "align", "rescale", "n", "reverse", "start", "stop", "values", "range", "i", "_", "initRange", "define_default", "constructor", "factory", "prototype", "extend", "parent", "definition", "key", "Color", "darker", "brighter", "reI", "reN", "reP", "reHex", "reRgbInteger", "reRgbPercent", "reRgbaInteger", "reRgbaPercent", "reHslPercent", "reHslaPercent", "named", "define_default", "color", "channels", "color_formatHex", "color_formatHex8", "color_formatHsl", "color_formatRgb", "hslConvert", "format", "m", "l", "rgbn", "Rgb", "rgba", "hsla", "n", "r", "g", "b", "a", "rgbConvert", "o", "rgb", "opacity", "extend", "k", "clampi", "clampa", "rgb_formatHex", "rgb_formatHex8", "rgb_formatRgb", "hex", "value", "h", "s", "Hsl", "min", "max", "hsl", "m2", "m1", "hsl2rgb", "clamph", "clampt", "basis", "t1", "v0", "v1", "v2", "v3", "t2", "t3", "basis_default", "values", "n", "t", "i", "basisClosed_default", "values", "n", "t", "i", "v0", "v1", "v2", "v3", "basis", "constant_default", "x", "linear", "a", "d", "t", "exponential", "b", "y", "gamma", "y", "nogamma", "a", "b", "exponential", "constant_default", "d", "linear", "rgb_default", "rgbGamma", "y", "color", "gamma", "rgb", "start", "end", "r", "g", "b", "opacity", "nogamma", "t", "rgbSpline", "spline", "colors", "n", "rgbBasis", "basis_default", "rgbBasisClosed", "basisClosed_default", "numberArray_default", "a", "b", "n", "c", "i", "t", "isNumberArray", "x", "genericArray", "a", "b", "nb", "na", "x", "c", "value_default", "t", "date_default", "a", "b", "d", "t", "number_default", "a", "b", "t", "object_default", "a", "b", "i", "c", "k", "value_default", "t", "reA", "reB", "zero", "b", "one", "string_default", "a", "bi", "am", "bm", "bs", "s", "q", "number_default", "t", "i", "o", "value_default", "a", "b", "t", "c", "constant_default", "number_default", "color", "rgb_default", "string_default", "date_default", "isNumberArray", "numberArray_default", "genericArray", "object_default", "round_default", "a", "b", "t", "degrees", "identity", "decompose_default", "a", "b", "c", "d", "e", "f", "scaleX", "scaleY", "skewX", "svgNode", "parseCss", "value", "m", "identity", "decompose_default", "parseSvg", "interpolateTransform", "parse", "pxComma", "pxParen", "degParen", "pop", "s", "translate", "xa", "ya", "xb", "yb", "q", "i", "number_default", "rotate", "a", "b", "skewX", "scale", "t", "n", "o", "interpolateTransformCss", "parseCss", "interpolateTransformSvg", "parseSvg", "epsilon2", "cosh", "x", "sinh", "tanh", "zoom_default", "zoomRho", "rho", "rho2", "rho4", "zoom", "p0", "p1", "ux0", "uy0", "w0", "ux1", "uy1", "w1", "dx", "dy", "d2", "i", "S", "t", "d1", "b0", "b1", "r0", "r1", "s", "coshr0", "u", "_", "_1", "_2", "_4", "constants", "x", "number", "x", "unit", "identity", "x", "normalize", "a", "b", "constants", "clamper", "t", "bimap", "domain", "range", "interpolate", "d0", "d1", "r0", "r1", "polymap", "j", "d", "r", "i", "bisect_default", "copy", "source", "target", "transformer", "value_default", "transform", "untransform", "unknown", "clamp", "piecewise", "output", "input", "rescale", "n", "scale", "y", "number_default", "_", "number", "round_default", "u", "continuous", "formatDecimal_default", "x", "formatDecimalParts", "p", "i", "coefficient", "exponent_default", "x", "formatDecimalParts", "formatGroup_default", "grouping", "thousands", "value", "width", "i", "t", "j", "g", "length", "formatNumerals_default", "numerals", "value", "i", "re", "formatSpecifier", "specifier", "match", "FormatSpecifier", "formatTrim_default", "s", "out", "n", "i", "i0", "i1", "prefixExponent", "formatPrefixAuto_default", "x", "p", "d", "formatDecimalParts", "coefficient", "exponent", "i", "n", "formatRounded_default", "x", "p", "d", "formatDecimalParts", "coefficient", "exponent", "formatTypes_default", "x", "p", "formatDecimal_default", "formatRounded_default", "formatPrefixAuto_default", "identity_default", "x", "map", "prefixes", "locale_default", "locale", "group", "identity_default", "formatGroup_default", "currencyPrefix", "currencySuffix", "decimal", "numerals", "formatNumerals_default", "percent", "minus", "nan", "newFormat", "specifier", "formatSpecifier", "fill", "align", "sign", "symbol", "zero", "width", "comma", "precision", "trim", "type", "formatTypes_default", "prefix", "suffix", "formatType", "maybeSuffix", "format", "value", "valuePrefix", "valueSuffix", "i", "n", "c", "valueNegative", "formatTrim_default", "prefixExponent", "length", "padding", "formatPrefix", "f", "e", "exponent_default", "k", "locale", "format", "formatPrefix", "defaultLocale", "definition", "locale_default", "precisionFixed_default", "step", "exponent_default", "precisionPrefix_default", "step", "value", "exponent_default", "precisionRound_default", "step", "max", "exponent_default", "tickFormat", "start", "stop", "count", "specifier", "step", "tickStep", "precision", "formatSpecifier", "value", "precisionPrefix_default", "formatPrefix", "precisionRound_default", "precisionFixed_default", "format", "linearish", "scale", "domain", "count", "d", "ticks", "specifier", "tickFormat", "i0", "i1", "start", "stop", "prestep", "step", "maxIter", "tickIncrement", "linear", "continuous", "copy", "initRange", "identity", "domain", "unknown", "scale", "x", "_", "number", "linearish", "nice", "domain", "interval", "i0", "i1", "x0", "x1", "t", "transformLog", "x", "transformExp", "transformLogn", "transformExpn", "pow10", "powp", "base", "logp", "reflect", "f", "k", "loggish", "transform", "scale", "domain", "logs", "pows", "rescale", "_", "count", "d", "v", "r", "i", "j", "t", "n", "z", "ticks", "specifier", "formatSpecifier", "format", "nice", "log", "transformer", "copy", "initRange", "transformPow", "exponent", "x", "transformSqrt", "transformSquare", "powish", "transform", "scale", "identity", "rescale", "_", "linearish", "pow", "transformer", "copy", "initRange", "t0", "t1", "timeInterval", "floori", "offseti", "count", "field", "interval", "date", "d0", "d1", "step", "start", "stop", "range", "previous", "test", "end", "d", "millisecond", "timeInterval", "date", "step", "start", "end", "k", "milliseconds", "second", "timeInterval", "date", "step", "start", "end", "seconds", "timeMinute", "timeInterval", "date", "step", "start", "end", "timeMinutes", "utcMinute", "utcMinutes", "timeHour", "timeInterval", "date", "step", "start", "end", "timeHours", "utcHour", "utcHours", "timeDay", "timeInterval", "date", "step", "start", "end", "timeDays", "utcDay", "utcDays", "unixDay", "unixDays", "timeWeekday", "i", "timeInterval", "date", "step", "start", "end", "timeSunday", "timeMonday", "timeTuesday", "timeWednesday", "timeThursday", "timeFriday", "timeSaturday", "timeSundays", "timeMondays", "timeTuesdays", "timeWednesdays", "timeThursdays", "timeFridays", "timeSaturdays", "utcWeekday", "utcSunday", "utcMonday", "utcTuesday", "utcWednesday", "utcThursday", "utcFriday", "utcSaturday", "utcSundays", "utcMondays", "utcTuesdays", "utcWednesdays", "utcThursdays", "utcFridays", "utcSaturdays", "timeMonth", "timeInterval", "date", "step", "start", "end", "timeMonths", "utcMonth", "utcMonths", "timeYear", "timeInterval", "date", "step", "start", "end", "k", "timeYears", "utcYear", "utcYears", "ticker", "year", "month", "week", "day", "hour", "minute", "tickIntervals", "second", "ticks", "start", "stop", "count", "reverse", "interval", "tickInterval", "target", "i", "bisector", "step", "tickStep", "millisecond", "t", "utcTicks", "utcTickInterval", "utcYear", "utcMonth", "utcSunday", "unixDay", "utcHour", "utcMinute", "timeTicks", "timeTickInterval", "timeYear", "timeMonth", "timeSunday", "timeDay", "timeHour", "timeMinute", "localDate", "d", "date", "utcDate", "newDate", "y", "m", "formatLocale", "locale", "locale_dateTime", "locale_date", "locale_time", "locale_periods", "locale_weekdays", "locale_shortWeekdays", "locale_months", "locale_shortMonths", "periodRe", "formatRe", "periodLookup", "formatLookup", "weekdayRe", "weekdayLookup", "shortWeekdayRe", "shortWeekdayLookup", "monthRe", "monthLookup", "shortMonthRe", "shortMonthLookup", "formats", "formatShortWeekday", "formatWeekday", "formatShortMonth", "formatMonth", "formatDayOfMonth", "formatMicroseconds", "formatYearISO", "formatFullYearISO", "formatHour24", "formatHour12", "formatDayOfYear", "formatMilliseconds", "formatMonthNumber", "formatMinutes", "formatPeriod", "formatQuarter", "formatUnixTimestamp", "formatUnixTimestampSeconds", "formatSeconds", "formatWeekdayNumberMonday", "formatWeekNumberSunday", "formatWeekNumberISO", "formatWeekdayNumberSunday", "formatWeekNumberMonday", "formatYear", "formatFullYear", "formatZone", "formatLiteralPercent", "utcFormats", "formatUTCShortWeekday", "formatUTCWeekday", "formatUTCShortMonth", "formatUTCMonth", "formatUTCDayOfMonth", "formatUTCMicroseconds", "formatUTCYearISO", "formatUTCFullYearISO", "formatUTCHour24", "formatUTCHour12", "formatUTCDayOfYear", "formatUTCMilliseconds", "formatUTCMonthNumber", "formatUTCMinutes", "formatUTCPeriod", "formatUTCQuarter", "formatUTCSeconds", "formatUTCWeekdayNumberMonday", "formatUTCWeekNumberSunday", "formatUTCWeekNumberISO", "formatUTCWeekdayNumberSunday", "formatUTCWeekNumberMonday", "formatUTCYear", "formatUTCFullYear", "formatUTCZone", "parses", "parseShortWeekday", "parseWeekday", "parseShortMonth", "parseMonth", "parseLocaleDateTime", "parseDayOfMonth", "parseMicroseconds", "parseYear", "parseFullYear", "parseHour24", "parseDayOfYear", "parseMilliseconds", "parseMonthNumber", "parseMinutes", "parsePeriod", "parseQuarter", "parseUnixTimestamp", "parseUnixTimestampSeconds", "parseSeconds", "parseWeekdayNumberMonday", "parseWeekNumberSunday", "parseWeekNumberISO", "parseWeekdayNumberSunday", "parseWeekNumberMonday", "parseLocaleDate", "parseLocaleTime", "parseZone", "parseLiteralPercent", "newFormat", "specifier", "string", "i", "j", "n", "c", "pad", "format", "pads", "newParse", "Z", "parseSpecifier", "week", "day", "utcMonday", "utcDay", "timeMonday", "timeDay", "parse", "f", "p", "numberRe", "percentRe", "requoteRe", "value", "fill", "width", "sign", "length", "requote", "s", "names", "name", "timeYear", "timeSunday", "dISO", "timeThursday", "z", "utcYear", "dow", "utcSunday", "UTCdISO", "utcThursday", "locale", "timeFormat", "timeParse", "utcFormat", "utcParse", "defaultLocale", "definition", "formatLocale", "date", "t", "number", "calendar", "ticks", "tickInterval", "year", "month", "week", "day", "hour", "minute", "second", "format", "scale", "continuous", "invert", "domain", "formatMillisecond", "formatSecond", "formatMinute", "formatHour", "formatDay", "formatWeek", "formatMonth", "formatYear", "tickFormat", "_", "interval", "d", "count", "specifier", "nice", "copy", "time", "initRange", "timeTicks", "timeTickInterval", "timeYear", "timeMonth", "timeSunday", "timeDay", "timeHour", "timeMinute", "timeFormat", "transformer", "x0", "x1", "t0", "t1", "k10", "transform", "interpolator", "identity", "clamp", "unknown", "scale", "x", "_", "range", "interpolate", "r0", "r1", "value_default", "round_default", "t", "copy", "source", "target", "sequential", "linearish", "initInterpolator", "dateTimeUtility", "setTimeForDate", "getDay", "getTimeComponentArray", "dayInterval", "msInterval", "utility", "timeString", "date", "hh", "mm", "ss", "ms", "x", "offsetInmilliSeconds", "localDateTimeUtility", "dateTimeUtility", "date", "hh", "mm", "ss", "ms", "timeDay", "millisecond", "utcDateTimeUtility", "dateTimeUtility", "date", "hh", "mm", "ss", "ms", "utcDay", "millisecond", "linear_default", "accessors", "d", "pad", "padUnit", "symmetricalAbout", "include", "instance", "data", "values", "accessor", "i", "value", "extent", "min", "max", "halfRange", "delta", "args", "time_default", "accessors", "pad", "padUnit", "symmetricalAbout", "include", "extent", "linear_default", "valueOf", "date", "instance", "data", "adaptedAccessors", "accessor", "args", "value", "pi", "tau", "epsilon", "tauEpsilon", "append", "strings", "i", "n", "appendRound", "digits", "d", "k", "Path", "x", "y", "x1", "y1", "x2", "y2", "r", "x0", "y0", "x21", "y21", "x01", "y01", "l01_2", "x20", "y20", "l21_2", "l20_2", "l21", "l01", "l", "t01", "t21", "a0", "a1", "ccw", "dx", "dy", "cw", "da", "w", "h", "path", "functor_default", "v", "ohlc_default", "context", "x", "d", "open", "high", "low", "close", "orient", "width", "functor_default", "ohlc", "data", "drawingContext", "path", "i", "xValue", "yOpen", "yHigh", "yLow", "yClose", "halfWidth", "args", "bar_default", "context", "x", "d", "y", "horizontalAlign", "verticalAlign", "height", "width", "functor_default", "bar", "data", "index", "drawingContext", "path", "i", "xValue", "yValue", "barHeight", "barWidth", "horizontalOffset", "verticalOffset", "args", "candlestick_default", "context", "x", "d", "open", "high", "low", "close", "width", "functor_default", "candlestick", "data", "drawingContext", "path", "i", "xValue", "yOpen", "yHigh", "yLow", "yClose", "barWidth", "halfBarWidth", "args", "xhtml", "namespaces_default", "namespace_default", "name", "prefix", "i", "namespaces_default", "creatorInherit", "name", "document", "uri", "xhtml", "creatorFixed", "fullname", "creator_default", "namespace_default", "none", "selector_default", "selector", "select_default", "select", "selector_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "subnode", "i", "Selection", "array", "x", "empty", "selectorAll_default", "selector", "arrayAll", "select", "array", "selectAll_default", "selectorAll_default", "groups", "m", "subgroups", "parents", "j", "group", "n", "node", "i", "Selection", "matcher_default", "selector", "childMatcher", "node", "find", "childFind", "match", "childFirst", "selectChild_default", "childMatcher", "filter", "children", "childrenFilter", "match", "selectChildren_default", "childMatcher", "filter_default", "match", "matcher_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "i", "Selection", "sparse_default", "update", "enter_default", "Selection", "sparse_default", "EnterNode", "parent", "datum", "child", "next", "selector", "constant_default", "x", "bindIndex", "parent", "group", "enter", "update", "exit", "data", "node", "groupLength", "dataLength", "EnterNode", "bindKey", "key", "i", "nodeByKeyValue", "keyValues", "keyValue", "datum", "data_default", "value", "bind", "parents", "groups", "constant_default", "m", "j", "arraylike", "enterGroup", "updateGroup", "exitGroup", "i0", "i1", "previous", "next", "Selection", "exit_default", "Selection", "sparse_default", "join_default", "onenter", "onupdate", "onexit", "enter", "update", "exit", "merge_default", "context", "selection", "groups0", "groups1", "m0", "m1", "m", "merges", "j", "group0", "group1", "n", "merge", "node", "i", "Selection", "order_default", "groups", "j", "m", "group", "i", "next", "node", "sort_default", "compare", "ascending", "compareNode", "a", "b", "groups", "m", "sortgroups", "j", "group", "n", "sortgroup", "node", "i", "Selection", "call_default", "callback", "nodes_default", "node_default", "groups", "j", "m", "group", "i", "n", "node", "size_default", "size", "node", "empty_default", "each_default", "callback", "groups", "j", "m", "group", "i", "n", "node", "attrRemove", "name", "attrRemoveNS", "fullname", "attrConstant", "value", "attrConstantNS", "attrFunction", "v", "attrFunctionNS", "attr_default", "namespace_default", "node", "window_default", "node", "styleRemove", "name", "styleConstant", "value", "priority", "styleFunction", "v", "style_default", "styleValue", "node", "window_default", "propertyRemove", "name", "propertyConstant", "value", "propertyFunction", "v", "property_default", "classArray", "string", "classList", "node", "ClassList", "name", "i", "classedAdd", "names", "list", "n", "classedRemove", "classedTrue", "classedFalse", "classedFunction", "value", "classed_default", "textRemove", "textConstant", "value", "textFunction", "v", "text_default", "htmlRemove", "htmlConstant", "value", "htmlFunction", "v", "html_default", "raise", "raise_default", "lower", "lower_default", "append_default", "name", "create", "creator_default", "constantNull", "insert_default", "name", "before", "create", "creator_default", "select", "selector_default", "remove", "parent", "remove_default", "selection_cloneShallow", "clone", "parent", "selection_cloneDeep", "clone_default", "deep", "datum_default", "value", "contextListener", "listener", "event", "parseTypenames", "typenames", "name", "i", "onRemove", "typename", "on", "j", "m", "o", "onAdd", "value", "options", "on_default", "n", "t", "dispatchEvent", "node", "type", "params", "window", "window_default", "event", "dispatchConstant", "dispatchFunction", "dispatch_default", "iterator_default", "groups", "j", "m", "group", "i", "n", "node", "root", "Selection", "groups", "parents", "selection", "selection_selection", "select_default", "selectAll_default", "selectChild_default", "selectChildren_default", "filter_default", "data_default", "enter_default", "exit_default", "join_default", "merge_default", "order_default", "sort_default", "call_default", "nodes_default", "node_default", "size_default", "empty_default", "each_default", "attr_default", "style_default", "property_default", "classed_default", "text_default", "html_default", "raise_default", "lower_default", "append_default", "insert_default", "remove_default", "clone_default", "datum_default", "on_default", "dispatch_default", "iterator_default", "selection_default", "select_default", "selector", "Selection", "root", "sourceEvent_default", "event", "sourceEvent", "pointer_default", "event", "node", "sourceEvent_default", "svg", "point", "rect", "selectAll_default", "selector", "Selection", "array", "root", "isTransition", "selectionOrTransition", "dataJoin_default", "element", "className", "key", "_", "explicitTransition", "dataJoin", "container", "data", "d", "selection", "implicitTransition", "update", "enter", "exit", "transition", "args", "constant_default", "x", "abs", "atan2", "cos", "max", "min", "sin", "sqrt", "epsilon", "pi", "halfPi", "tau", "acos", "x", "asin", "withPath", "shape", "digits", "_", "d", "Path", "arcInnerRadius", "d", "arcOuterRadius", "arcStartAngle", "arcEndAngle", "arcPadAngle", "intersect", "x0", "y0", "x1", "y1", "x2", "y2", "x3", "y3", "x10", "y10", "x32", "y32", "t", "epsilon", "cornerTangents", "r1", "rc", "cw", "x01", "y01", "lo", "sqrt", "ox", "oy", "x11", "y11", "x00", "y00", "dx", "dy", "d2", "r", "D", "max", "cx0", "cy0", "cx1", "cy1", "dx0", "dy0", "dx1", "dy1", "arc_default", "innerRadius", "outerRadius", "cornerRadius", "constant_default", "padRadius", "startAngle", "endAngle", "padAngle", "context", "path", "withPath", "arc", "buffer", "r0", "a0", "halfPi", "a1", "da", "abs", "tau", "cos", "sin", "a01", "a11", "a00", "a10", "da0", "da1", "ap", "rp", "min", "rc0", "rc1", "t0", "t1", "p0", "asin", "p1", "oc", "pi", "ax", "ay", "bx", "by", "kc", "acos", "lc", "atan2", "a", "_", "slice", "array_default", "x", "Linear", "context", "x", "y", "linear_default", "x", "p", "y", "line_default", "x", "y", "defined", "constant_default", "context", "curve", "linear_default", "output", "path", "withPath", "line", "data", "i", "n", "array_default", "d", "defined0", "buffer", "_", "area_default", "x0", "y0", "y1", "x1", "defined", "constant_default", "context", "curve", "linear_default", "output", "path", "withPath", "area", "x", "y", "data", "i", "j", "k", "n", "array_default", "d", "defined0", "buffer", "x0z", "y0z", "arealine", "line_default", "_", "circle_default", "context", "size", "sqrt", "pi", "tau", "cross_default", "context", "size", "sqrt", "tan30", "sqrt", "tan30_2", "diamond_default", "context", "size", "y", "x", "square_default", "context", "size", "w", "sqrt", "x", "ka", "kr", "sin", "pi", "kx", "tau", "ky", "cos", "star_default", "context", "size", "sqrt", "x", "y", "i", "a", "c", "sqrt3", "sqrt", "triangle_default", "context", "size", "y", "c", "s", "sqrt", "k", "a", "wye_default", "context", "size", "x0", "y0", "x1", "y1", "x2", "y2", "Symbol", "type", "size", "context", "path", "withPath", "symbol", "constant_default", "circle_default", "buffer", "_", "functor_default", "d", "defined", "outerArguments", "d", "i", "c", "j", "alignOffset_default", "align", "width", "base_default", "initialValues", "env", "base", "key", "args", "xyBase_default", "baseValue", "crossValue", "d", "mainValue", "align", "bandwidth", "orient", "base", "base_default", "i", "defined", "identity", "width", "offset", "alignOffset_default", "xScale", "yScale", "y", "y0", "x", "args", "functor_default", "red", "green", "black", "gray", "darkGray", "colors_default", "line_default", "base", "xyBase_default", "lineData", "d", "i", "join", "dataJoin_default", "line", "selection", "isTransition", "data", "index", "group", "path", "select_default", "colors_default", "rebindAll_default", "exclude_default", "rebind_default", "line_default", "base", "xyBase_default", "lineData", "d", "i", "line", "data", "context", "colors_default", "rebindAll_default", "exclude_default", "rebind_default", "scaleLinearCopy", "linear", "scaleLogCopy", "log", "scalePowCopy", "pow", "scaleTimeCopy", "time", "identity", "epoch", "point_default", "symbol", "Symbol", "base", "xyBase_default", "join", "dataJoin_default", "containerTransform", "origin", "point", "selection", "isTransition", "data", "index", "group", "filteredData", "g", "select_default", "d", "i", "colors_default", "rebindAll_default", "exclude_default", "rebind_default", "point_default", "symbol", "Symbol", "base", "xyBase_default", "point", "data", "filteredData", "context", "d", "i", "values", "colors_default", "rebindAll_default", "exclude_default", "rebind_default", "bar_default", "pathGenerator", "base", "xyBase_default", "join", "dataJoin_default", "valueAxisDimension", "generator", "crossAxisDimension", "translation", "origin", "bar", "selection", "isTransition", "data", "index", "group", "orient", "filteredData", "projectedData", "g", "select_default", "_", "i", "colors_default", "d", "rebindAll_default", "rebind_default", "area_default", "base", "xyBase_default", "areaData", "join", "dataJoin_default", "area", "selection", "isTransition", "data", "index", "group", "projectedData", "_", "i", "valueComponent", "path", "select_default", "colors_default", "rebindAll_default", "exclude_default", "rebind_default", "area_default", "base", "xyBase_default", "areaData", "area", "data", "context", "projectedData", "_", "i", "valueComponent", "colors_default", "rebindAll_default", "exclude_default", "rebind_default", "ohlcBase_default", "base", "crossValue", "d", "openValue", "highValue", "lowValue", "closeValue", "bandwidth", "align", "crossValueScaled", "i", "base_default", "defined", "identity", "closeRaw", "openRaw", "width", "offset", "alignOffset_default", "direction", "args", "functor_default", "ohlcBase_default", "pathGenerator", "base", "candlestick", "data", "filteredData", "context", "d", "i", "values", "color", "colors_default", "rebind_default", "rebindAll_default", "candlestick_default", "ohlcBase_default", "ohlc_default", "ohlcBase_default", "multiBase_default", "series", "mapping", "d", "key", "_", "i", "multi", "base_default", "identity", "s", "a", "b", "args", "multi_default", "base", "multiBase_default", "innerJoin", "dataJoin_default", "join", "multi", "selection", "isTransition", "mapping", "series", "xScale", "yScale", "data", "index", "group", "container", "select_default", "dataSeries", "seriesIndex", "seriesGroup", "seriesData", "rebindAll_default", "rebind_default", "multi_default", "context", "base", "multiBase_default", "multi", "data", "mapping", "series", "xScale", "yScale", "dataSeries", "index", "seriesData", "adaptedDecorate", "c", "i", "args", "rebindAll_default", "groupedBase_default", "series", "bandwidth", "align", "offsetScale", "band", "grouped", "base_default", "linear", "data", "d", "i", "width", "offset", "alignOffset_default", "halfWidth", "range", "args", "functor_default", "rebindAll_default", "includeMap_default", "grouped_default", "series", "base", "groupedBase_default", "join", "dataJoin_default", "grouped", "selection", "isTransition", "data", "index", "group", "g", "select_default", "_", "container", "isVertical", "compositeScale", "d", "i", "offset", "s", "rebindAll_default", "exclude_default", "repeat_default", "orient", "series", "line_default", "multi", "multi_default", "repeat", "selection", "data", "index", "group", "_", "d", "select_default", "args", "rebindAll_default", "exclude_default", "sortUnique", "arr", "ascending", "value", "index", "self", "autoBandwidth_default", "adaptee", "widthFraction", "computeBandwidth", "screenValues", "neighbourDistances", "pairs", "tuple", "minDistance", "min", "determineBandwith", "crossScale", "data", "accessor", "crossValuePoints", "autoBandwidth", "arg", "computeWidth", "selection_default", "group", "select_default", "rebindAll_default", "args", "colors_default", "specifier", "n", "colors", "i", "ramp", "range", "n", "t", "viridis_default", "colors_default", "magma", "inferno", "plasma", "heatmapBase_default", "xValue", "d", "yValue", "colorValue", "yBandwidth", "xBandwidth", "colorInterpolate", "viridis_default", "heatmap", "base_default", "i", "defined", "identity", "bar_default", "data", "colorValues", "linear", "min", "max", "args", "functor_default", "rebindAll_default", "includeMap_default", "heatmap_default", "base", "heatmapBase_default", "heatmap", "data", "filteredData", "colorInterpolate", "colorScale", "context", "d", "i", "values", "rebind_default", "rebindAll_default", "ticks_default", "scale", "identity", "tickArguments", "tickValues", "ticks", "args", "identity", "d", "gridline_default", "xDecorate", "yDecorate", "xTicks", "ticks_default", "yTicks", "xJoin", "dataJoin_default", "yJoin", "instance", "selection", "isTransition", "data", "index", "nodes", "element", "container", "select_default", "xScale", "yScale", "xScaleOld", "xData", "xLines", "yScaleOld", "yData", "yLines", "args", "rebindAll_default", "includeMap_default", "prefix_default", "gridline_default", "xDecorate", "yDecorate", "xTicks", "ticks_default", "yTicks", "lineData", "line_default", "instance", "context", "xScale", "yScale", "xTick", "i", "d", "yTick", "args", "rebindAll_default", "prefix_default", "rebind_default", "identity", "d", "tryApply", "scale", "fn", "args", "defaultVal", "ticksArrayForAxis", "axis", "tickFormatterForAxis", "identity", "d", "axisBase", "orient", "scale", "custom", "tickArguments", "tickValues", "decorate", "tickFormat", "tickSizeOuter", "tickSizeInner", "tickPadding", "svgDomainLine", "line_default", "dataJoin", "dataJoin_default", "domainPathDataJoin", "defaultLabelOffset", "defaultTickPath", "labelOffset", "tickPath", "containerTranslate", "trans", "offset", "translate", "x", "y", "isVertical", "pathTranspose", "arr", "axis", "selection", "isTransition", "data", "index", "group", "element", "container", "select_default", "scaleOld", "ticksArray", "ticksArrayForAxis", "tickFormatter", "tickFormatterForAxis", "sign", "withSign", "range", "domainPathData", "domainLine", "g", "labelOffsets", "i", "tickPaths", "args", "axis", "orient", "scale", "tickCenterLabel", "base", "axisBase", "tick", "index", "ticksArray", "x", "y", "hidden", "thisPosition", "nextPosition", "selection", "args", "rebindAll_default", "axisTop", "axisBottom", "axisLeft", "axisRight", "axisOrdinal", "orient", "scale", "tickOffset", "step", "tick", "index", "ticksArray", "thisPosition", "base", "axisBase", "x", "axis", "selection", "args", "rebindAll_default", "axisOrdinalTop", "axisOrdinalBottom", "axisOrdinalLeft", "axisOrdinalRight", "key", "get", "element", "set", "data", "clear", "find", "element", "measure", "previousWidth", "previousHeight", "get", "pixelRatio", "width", "height", "resized", "child", "set", "resize", "detail", "event", "draw", "redraw_default", "elements", "allElements", "a", "b", "getQueue", "element", "get", "setQueue", "queue", "requestId", "redraw_default", "clearQueue", "set", "clear", "isDescendentOf", "ancestor", "node", "requestRedraw_default", "queuedElement", "queueExcludingDescendents", "addMeasureListener", "element", "event", "removeMeasureListener", "element_default", "createNode", "applyMeasurements", "name", "width", "height", "node", "other", "useDevicePixelRatio", "requestRedraw_default", "canvas_default", "element_default", "element", "node", "width", "height", "setWebglViewport", "updateAutoResize", "element", "addAutoResizeListener", "removeAutoResizeListener", "requestRedraw_default", "group_default", "autoResize", "name", "svg_default", "element_default", "element", "node", "width", "height", "css", "styleElement", "alreadyRegistered", "registerElement", "name", "element", "canvas_default", "group_default", "svg_default", "noop", "dispatch", "i", "n", "_", "t", "Dispatch", "parseTypenames", "typenames", "types", "name", "typename", "callback", "T", "get", "set", "copy", "type", "that", "args", "c", "dispatch_default", "pointer_default", "pointEvent", "dispatch_default", "mousemove", "event", "point", "mouseleave", "instance", "selection", "rebind_default", "store_default", "names", "data", "store", "target", "key", "name", "args", "css", "styleElement", "functor", "v", "cartesian_default", "args", "xScale", "yScale", "xAxis", "yAxis", "getArguments", "chartLabel", "xLabel", "yLabel", "xAxisHeight", "yAxisWidth", "yOrient", "xOrient", "webglPlotArea", "canvasPlotArea", "svgPlotArea", "isContextLost", "useDevicePixelRatio", "xAxisStore", "store_default", "xDecorate", "yAxisStore", "yDecorate", "decorate", "containerDataJoin", "dataJoin_default", "webglDataJoin", "canvasDataJoin", "svgDataJoin", "xAxisDataJoin", "d", "yAxisDataJoin", "chartLabelDataJoin", "xLabelDataJoin", "yLabelDataJoin", "propagateTransition", "maybeTransition", "selection", "isTransition", "cartesian", "transitionPropagator", "data", "index", "group", "container", "select_default", "event", "child", "pixelRatio", "context", "width", "height", "xAxisComponent", "yAxisComponent", "i", "nodes", "scaleExclusions", "exclude_default", "rebindAll_default", "prefix_default", "defaultSettings", "identity", "axisBottom", "axisTop", "axisRight", "axisLeft", "functor", "v", "cartesianBase_default", "setPlotArea", "defaultPlotArea", "args", "yLabel", "plotArea", "decorate", "cartesian", "cartesian_default", "cartesianBase", "selection", "container", "data", "index", "yOrientValue", "rebindAll_default", "include_default", "cartesian_default", "cartesianBase_default", "cartesian", "plotArea", "line_default", "cartesian_default", "cartesianBase_default", "cartesian", "plotArea", "line_default", "nonpassive", "nonpassivecapture", "nopropagation", "event", "noevent_default", "nodrag_default", "view", "root", "selection", "select_default", "noevent_default", "nonpassivecapture", "yesdrag", "noclick", "constant_default", "x", "DragEvent", "type", "sourceEvent", "subject", "target", "identifier", "active", "x", "y", "dx", "dy", "dispatch", "value", "defaultFilter", "event", "defaultContainer", "defaultSubject", "d", "defaultTouchable", "drag_default", "filter", "container", "subject", "touchable", "gestures", "listeners", "dispatch_default", "active", "mousedownx", "mousedowny", "mousemoving", "touchending", "clickDistance2", "drag", "selection", "mousedowned", "touchstarted", "touchmoved", "nonpassive", "touchended", "gesture", "beforestart", "select_default", "mousemoved", "nonpassivecapture", "mouseupped", "nodrag_default", "nopropagation", "noevent_default", "dx", "dy", "yesdrag", "touches", "c", "n", "i", "that", "identifier", "touch", "dispatch", "p", "pointer_default", "s", "DragEvent", "type", "p0", "_", "constant_default", "value", "frame", "timeout", "interval", "pokeDelay", "taskHead", "taskTail", "clockLast", "clockNow", "clockSkew", "clock", "setFrame", "f", "now", "clearNow", "Timer", "timer", "callback", "delay", "time", "sleep", "t", "timerFlush", "e", "wake", "nap", "poke", "t0", "t1", "t2", "timeout_default", "callback", "delay", "time", "t", "Timer", "elapsed", "emptyOn", "dispatch_default", "emptyTween", "CREATED", "SCHEDULED", "STARTING", "STARTED", "RUNNING", "ENDING", "ENDED", "schedule_default", "node", "name", "id", "index", "group", "timing", "schedules", "create", "init", "schedule", "get", "set", "self", "tween", "timer", "elapsed", "start", "i", "j", "n", "o", "stop", "timeout_default", "tick", "t", "interrupt_default", "node", "name", "schedules", "schedule", "active", "empty", "STARTING", "ENDING", "ENDED", "interrupt_default", "name", "tweenRemove", "id", "name", "tween0", "tween1", "schedule", "set", "tween", "n", "tweenFunction", "value", "t", "i", "tween_default", "get", "tweenValue", "transition", "node", "interpolate_default", "a", "b", "c", "number_default", "color", "rgb_default", "string_default", "attrRemove", "name", "attrRemoveNS", "fullname", "attrConstant", "interpolate", "value1", "string00", "string1", "interpolate0", "string0", "attrConstantNS", "attrFunction", "value", "string10", "attrFunctionNS", "attr_default", "namespace_default", "i", "interpolateTransformSvg", "interpolate_default", "tweenValue", "attrInterpolate", "name", "i", "t", "attrInterpolateNS", "fullname", "attrTweenNS", "value", "t0", "i0", "tween", "attrTween", "attrTween_default", "key", "namespace_default", "delayFunction", "id", "value", "init", "delayConstant", "delay_default", "get", "durationFunction", "id", "value", "set", "durationConstant", "duration_default", "get", "easeConstant", "id", "value", "set", "ease_default", "get", "easeVarying", "id", "value", "v", "set", "easeVarying_default", "filter_default", "match", "matcher_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "i", "Transition", "merge_default", "transition", "groups0", "groups1", "m0", "m1", "m", "merges", "j", "group0", "group1", "n", "merge", "node", "i", "Transition", "start", "name", "i", "onFunction", "id", "listener", "on0", "on1", "sit", "init", "set", "schedule", "on", "on_default", "get", "removeFunction", "id", "parent", "i", "remove_default", "select_default", "select", "name", "id", "selector_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "subnode", "i", "schedule_default", "get", "Transition", "selectAll_default", "select", "name", "id", "selectorAll_default", "groups", "m", "subgroups", "parents", "j", "group", "n", "node", "i", "children", "child", "inherit", "get", "k", "l", "schedule_default", "Transition", "Selection", "selection_default", "styleNull", "name", "interpolate", "string00", "string10", "interpolate0", "string0", "styleValue", "string1", "styleRemove", "styleConstant", "value1", "styleFunction", "value", "styleMaybeRemove", "id", "on0", "on1", "listener0", "key", "event", "remove", "schedule", "set", "on", "listener", "style_default", "priority", "i", "interpolateTransformCss", "interpolate_default", "tweenValue", "styleInterpolate", "name", "i", "priority", "t", "styleTween", "value", "i0", "tween", "styleTween_default", "key", "textConstant", "value", "textFunction", "value1", "text_default", "tweenValue", "textInterpolate", "i", "textTween", "value", "t0", "i0", "tween", "textTween_default", "key", "transition_default", "name", "id0", "id1", "newId", "groups", "m", "j", "group", "n", "node", "i", "inherit", "get", "schedule_default", "Transition", "end_default", "on0", "on1", "that", "id", "size", "resolve", "reject", "cancel", "end", "schedule", "set", "on", "id", "Transition", "groups", "parents", "name", "transition", "selection_default", "newId", "selection_prototype", "select_default", "selectAll_default", "filter_default", "merge_default", "transition_default", "on_default", "attr_default", "attrTween_default", "style_default", "styleTween_default", "text_default", "textTween_default", "remove_default", "tween_default", "delay_default", "duration_default", "ease_default", "easeVarying_default", "end_default", "cubicOut", "t", "cubicInOut", "defaultTiming", "cubicInOut", "inherit", "node", "id", "timing", "transition_default", "name", "Transition", "newId", "now", "groups", "m", "j", "group", "n", "i", "schedule_default", "selection_default", "interrupt_default", "transition_default", "abs", "max", "min", "number1", "number2", "X", "type", "x", "e", "xy", "Y", "y", "XY", "type", "t", "constant_default", "x", "ZoomEvent", "type", "sourceEvent", "target", "transform", "dispatch", "Transform", "k", "x", "y", "point", "location", "identity", "transform", "node", "nopropagation", "event", "noevent_default", "defaultFilter", "event", "defaultExtent", "defaultTransform", "identity", "defaultWheelDelta", "defaultTouchable", "defaultConstrain", "transform", "extent", "translateExtent", "dx0", "dx1", "dy0", "dy1", "zoom_default", "filter", "constrain", "wheelDelta", "touchable", "scaleExtent", "duration", "interpolate", "listeners", "dispatch_default", "touchstarting", "touchfirst", "touchending", "touchDelay", "wheelDelay", "clickDistance2", "tapDistance", "zoom", "selection", "wheeled", "mousedowned", "dblclicked", "touchstarted", "touchmoved", "touchended", "collection", "point", "schedule", "gesture", "p", "k0", "k1", "e", "t0", "p0", "centroid", "p1", "translate", "scale", "x", "y", "t", "Transform", "transition", "that", "args", "g", "w", "a", "b", "i", "l", "k", "clean", "Gesture", "key", "type", "d", "select_default", "ZoomEvent", "pointer_default", "interrupt_default", "noevent_default", "wheelidled", "currentTarget", "v", "mousemoved", "mouseupped", "x0", "y0", "nodrag_default", "nopropagation", "dx", "dy", "yesdrag", "t1", "touches", "n", "started", "l0", "l1", "dp", "dl", "_", "constant_default", "value", "symbol", "AXIS_TYPES", "axisType", "settings", "settingName", "settingValue", "excludeType", "getType", "checkTypes", "types", "list", "args", "noAxis_exports", "__export", "domain", "labelFunction", "scale", "count", "node", "sum", "children", "i", "count_default", "each_default", "callback", "that", "index", "node", "eachBefore_default", "callback", "that", "node", "nodes", "children", "i", "index", "eachAfter_default", "callback", "that", "node", "nodes", "next", "children", "n", "index", "find_default", "callback", "that", "index", "node", "sum_default", "value", "node", "sum", "children", "i", "sort_default", "compare", "node", "path_default", "end", "start", "ancestor", "leastCommonAncestor", "nodes", "k", "a", "b", "aNodes", "bNodes", "c", "ancestors_default", "node", "nodes", "descendants_default", "leaves_default", "leaves", "node", "links_default", "root", "links", "node", "iterator_default", "node", "current", "next", "children", "i", "n", "hierarchy", "data", "children", "mapChildren", "objectChildren", "root", "Node", "node", "nodes", "child", "childs", "i", "n", "computeHeight", "node_copy", "copyData", "d", "height", "count_default", "each_default", "eachAfter_default", "eachBefore_default", "find_default", "sum_default", "sort_default", "path_default", "ancestors_default", "descendants_default", "leaves_default", "links_default", "iterator_default", "required", "f", "constantZero", "constant_default", "x", "round_default", "node", "dice_default", "parent", "x0", "y0", "x1", "y1", "nodes", "node", "i", "n", "k", "partition_default", "dx", "dy", "padding", "round", "partition", "root", "n", "positionNode", "round_default", "node", "dice_default", "x0", "y0", "x1", "y1", "x", "slice_default", "parent", "x0", "y0", "x1", "y1", "nodes", "node", "i", "n", "k", "phi", "squarifyRatio", "ratio", "parent", "x0", "y0", "x1", "y1", "rows", "nodes", "row", "nodeValue", "i0", "i1", "n", "dx", "dy", "value", "sumValue", "minValue", "maxValue", "newRatio", "minRatio", "alpha", "beta", "dice_default", "slice_default", "squarify_default", "custom", "squarify", "x", "treemap_default", "tile", "squarify_default", "round", "dx", "dy", "paddingStack", "paddingInner", "constantZero", "paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "treemap", "root", "positionNode", "round_default", "node", "p", "x0", "y0", "x1", "y1", "x", "required", "constant_default", "binary_default", "parent", "x0", "y0", "x1", "y1", "nodes", "n", "sum", "sums", "partition", "i", "j", "value", "node", "valueOffset", "valueTarget", "k", "hi", "mid", "valueLeft", "valueRight", "xk", "yk", "flattenExtent", "array", "withUndefined", "fn", "a", "b", "v", "flattenArray", "MIN_BANDWIDTH", "minBandwidth_default", "adaptee", "minBandwidth", "arg", "rebindAll_default", "args", "withoutTicks_default", "adaptee", "withoutTicks", "arg", "rebindAll_default", "scale", "withoutTicks_default", "minBandwidth_default", "band", "domain", "valueNames", "orient", "_domain", "data", "flattenedData", "flattenArray", "transformDomain", "d", "args", "labelFunction", "valueName", "linearAxis_exports", "__export", "component", "domain", "labelFunction", "scale", "tickFormatFunction", "defaultPadding", "pad", "padUnit", "padding", "extent", "delta", "args", "extentLinear", "accessors", "d", "symmetricalAbout", "include", "paddingStrategy", "defaultPadding", "instance", "data", "values", "_iteratorNormalCompletion", "_didIteratorError", "_iteratorError", "_iterator", "_step", "accessor", "i", "value", "toConsumableArray", "err", "extent$$1", "min", "max", "halfRange", "args", "arr", "arr2", "SI_MIN", "getValueFormatterForRange", "min", "max", "precision", "d", "format", "getChartElement", "element", "getChartContainer", "scale", "linear", "domain", "base", "extentLinear", "valueNames", "_domain", "data", "v", "d", "getDataExtent", "flattenArray", "rebindAll_default", "getMinimumGap", "gaps", "valueName", "a", "b", "i", "acc", "src", "dataWidth", "args", "labelFunction", "tickFormatFunction", "getValueFormatterForRange", "component", "_settings", "orient", "settingName", "getAxis", "s", "getChartContainer", "shrinkTickLabel", "node", "text", "select_default", "shrinkTicks", "axis", "axisBox", "nodes", "tickBox", "decorate", "_index", "getComponent", "axisBottom", "axisLeft", "axisTop", "axisRight", "timeAxis_exports", "__export", "domain", "labelFunction", "scale", "scale", "time", "domain", "base", "time_default", "valueNames", "_domain", "data", "v", "d", "getDataExtent", "flattenArray", "rebindAll_default", "exclude_default", "getMinimumGap", "gaps", "valueName", "a", "b", "i", "acc", "src", "dataWidth", "args", "labelFunction", "ordinalAxis_exports", "__export", "component", "domain", "labelFunction", "scale", "store_default", "names", "data", "store", "target", "key", "name", "args", "multiAxis", "orient", "baseAxis", "scale", "tickSizeOuter", "tickSizeInner", "axisStore", "store_default", "decorate", "args", "groups", "groupDataJoin", "dataJoin_default", "domainPathDataJoin", "translate", "x", "y", "isVertical", "pathTranspose", "arr", "d", "selection", "data", "index", "group", "element", "container", "select_default", "sign", "range", "domainPathData", "line_default", "g", "getAxisSize", "i", "getAxisOffset", "sum", "n", "nodes", "groupElement", "groupScale", "scaleFromGroup", "s", "customScale", "value", "values", "rebindAll_default", "exclude_default", "multiAxisTop", "axisOrdinalTop", "multiAxisBottom", "axisOrdinalBottom", "multiAxisLeft", "axisOrdinalLeft", "multiAxisRight", "axisOrdinalRight", "scale", "minBandwidth_default", "band", "domain", "valueNames", "orient", "_domain", "data", "flattenedData", "flattenArray", "transformDomain", "d", "args", "labelFunction", "valueName", "settings", "value", "i", "ty", "component", "settingName", "getComponent", "multiLevel", "levelGroups", "axisGroups", "groupTickLayout", "getGroupTickLayout", "tickSizeInner", "l", "tickSizeOuter", "s", "v", "createAxis", "base", "axis", "decorate", "index", "rotation", "applyLabelRotation", "hideOverlappingLabels", "axisSet", "getAxisSet", "multiAxisBottom", "multiAxisLeft", "multiAxisTop", "multiAxisRight", "axisOrdinalBottom", "axisOrdinalLeft", "axisOrdinalTop", "axisOrdinalRight", "groups", "tick", "group", "width", "maxLength", "g", "rotated", "getTransformCoords", "transform", "splitOn", "coords", "c", "isOverlap", "r1", "r2", "rectangleContained", "boundsRect", "getXAxisBoundsRect", "previousRectangles", "nodes", "select_default", "transformCoords", "tickRect", "rect", "hidden", "r", "container", "getChartContainer", "chart", "chartRect", "axisRect", "getLabelTransform", "anchor", "axisTypes", "noAxis_exports", "ordinalAxis_exports", "timeAxis_exports", "linearAxis_exports", "axisFactory", "settings", "excludeType", "orient", "settingName", "settingValue", "valueNames", "modifyDomain", "memoValue", "optionalParams", "optional", "_factory", "data", "useType", "axisType", "axis", "domainFunction", "p", "domain", "component", "createComponent", "defaultComponent", "tickFormatFunction", "axisBottom", "axisLeft", "axisTop", "axisRight", "args", "nextModifyDomain", "chartSvgFactory", "xAxis", "yAxis", "chartFactory", "x", "y", "chartCanvasFactory", "point_default", "cartesian", "canvas", "axisSplitter", "altAxis", "chart", "cartesian_default", "args", "oldDecorate", "container", "data", "plotArea", "node", "axis", "svgPlotArea", "canvasPlotArea", "selectAll_default", "altData", "y2AxisDataJoin", "dataJoin_default", "d", "ySeriesDataJoin", "y2Scale", "yAxisComponent", "event", "width", "height", "select_default", "drawMultiCanvasSeries", "selection", "yScales", "i", "drawMultiSvgSeries", "nodes", "getOrCreateElement", "container", "selector", "createCallback", "element", "isElementOverflowing", "containerRect", "innerElementRect", "direction", "isElementOverlapping", "axis", "immovableRect", "elementRect", "fuzz", "dimension", "immovableInnerPoint", "immovableOuterPoint", "elementInnerPoint", "elementOuterPoint", "innerPointInside", "outerPointInside", "pointsEitherSide", "tooltip_default", "toValue", "type", "value", "getGroupValues", "data", "settings", "cross", "i", "getSplitValues", "splitValues", "split", "getDataValues", "main", "getDataRowKey", "key", "realValues", "splitKey", "generateHtml", "tooltipDiv", "data", "settings", "tooltipValues", "getGroupValues", "getSplitValues", "getDataValues", "addDataValues", "values", "d", "select_default", "formatNumber", "value", "mapToFilter", "d", "raiseEvent", "node", "data", "settings", "column_names", "getDataValues", "groupFilters", "getGroupValues", "splitFilters", "getSplitValues", "filter", "selectionEvent", "_event", "selection", "args", "tooltip", "alwaysShow", "tooltipDiv", "settings", "centered", "_tooltip", "selection", "node", "hideTooltip", "container", "select_default", "getChartContainer", "getTooltipDiv", "showTip", "_event", "data", "generateHtml", "nodes", "i", "showTooltip", "hideTip", "_data", "selectionEvent", "args", "getOrCreateElement", "tooltip_default", "containerNode", "containerRect", "rect", "left", "top", "centerTip", "shiftIfOverflowingChartArea", "tooltipDivRect", "leftAdjust", "newLeft", "topAdjust", "newTop", "isElementOverflowing", "barSeries", "settings", "color", "series", "grouped_default", "bar_default", "selection", "tooltip", "d", "autoBandwidth_default", "minBandwidth", "adaptee", "min", "arg", "rebindAll_default", "args", "groupFromKey", "key", "getValuesByColumn", "settings", "column", "row", "k", "v", "_", "seriesColors", "settings", "col", "domain", "k", "colorScale", "seriesColorsFromColumn", "column", "data", "getValuesByColumn", "seriesColorsFromDistinct", "seriesColorsFromGroups", "inner", "groupFromKey", "defaultColors", "mapFunction", "d", "withOpacity", "colors", "styles", "defaults", "range", "ordinal", "args", "withoutOpacity", "color", "setOpacity", "opacity", "decoded", "labelFunctions", "labelFunction", "settings", "base", "axisType", "valueName", "fn", "label", "d", "_i", "rebindAll_default", "args", "splitIntoMultiSeries", "settings", "data", "stack", "excludeEmpty", "useData", "splitByValuesIntoMultiSeries", "multiSeries", "col", "baseValues", "split", "key", "labels", "label", "value", "baseKey", "splitName", "splitValues", "baseValue", "k", "series", "groupData", "settings", "data", "stack", "groupedSeries", "splitIntoMultiSeries", "groupPointDataByMainValue", "b", "groupAndStackData", "seriesDataFn", "labelfn", "labelFunction", "mainValue", "baseValue", "col", "series", "i", "seriesFn", "xhtml", "namespaces_default", "namespace_default", "name", "prefix", "i", "namespaces_default", "creatorInherit", "name", "document", "uri", "xhtml", "creatorFixed", "fullname", "creator_default", "namespace_default", "nextId", "local", "Local", "node", "id", "value", "matcher", "selector", "element", "vendorMatches", "matcher_default", "filterEvents", "event", "element", "filterContextListener", "listener", "index", "group", "contextListener", "related", "event1", "event0", "parseTypenames", "typenames", "name", "i", "onRemove", "typename", "on", "j", "m", "o", "onAdd", "value", "capture", "wrap", "d", "on_default", "n", "t", "none", "selector_default", "selector", "select_default", "select", "selector_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "subnode", "i", "Selection", "empty", "selectorAll_default", "selector", "selectAll_default", "select", "selectorAll_default", "groups", "m", "subgroups", "parents", "j", "group", "n", "node", "i", "Selection", "filter_default", "match", "matcher_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "i", "Selection", "sparse_default", "update", "enter_default", "Selection", "sparse_default", "EnterNode", "parent", "datum", "child", "next", "selector", "constant_default", "x", "keyPrefix", "bindIndex", "parent", "group", "enter", "update", "exit", "data", "node", "groupLength", "dataLength", "EnterNode", "bindKey", "key", "i", "nodeByKeyValue", "keyValues", "keyValue", "data_default", "value", "j", "d", "bind", "parents", "groups", "constant_default", "m", "enterGroup", "updateGroup", "exitGroup", "i0", "i1", "previous", "next", "Selection", "exit_default", "Selection", "sparse_default", "merge_default", "selection", "groups0", "groups1", "m0", "m1", "m", "merges", "j", "group0", "group1", "n", "merge", "node", "i", "Selection", "order_default", "groups", "j", "m", "group", "i", "next", "node", "sort_default", "compare", "ascending", "compareNode", "a", "b", "groups", "m", "sortgroups", "j", "group", "n", "sortgroup", "node", "i", "Selection", "call_default", "callback", "nodes_default", "nodes", "i", "node_default", "groups", "j", "m", "group", "i", "n", "node", "size_default", "size", "empty_default", "each_default", "callback", "groups", "j", "m", "group", "i", "n", "node", "attrRemove", "name", "attrRemoveNS", "fullname", "attrConstant", "value", "attrConstantNS", "attrFunction", "v", "attrFunctionNS", "attr_default", "namespace_default", "node", "window_default", "node", "styleRemove", "name", "styleConstant", "value", "priority", "styleFunction", "v", "style_default", "node", "window_default", "propertyRemove", "name", "propertyConstant", "value", "propertyFunction", "v", "property_default", "classArray", "string", "classList", "node", "ClassList", "name", "i", "classedAdd", "names", "list", "n", "classedRemove", "classedTrue", "classedFalse", "classedFunction", "value", "classed_default", "textRemove", "textConstant", "value", "textFunction", "v", "text_default", "htmlRemove", "htmlConstant", "value", "htmlFunction", "v", "html_default", "raise", "raise_default", "lower", "lower_default", "append_default", "name", "create", "creator_default", "constantNull", "insert_default", "name", "before", "create", "creator_default", "select", "selector_default", "remove", "parent", "remove_default", "datum_default", "value", "dispatchEvent", "node", "type", "params", "window", "window_default", "event", "dispatchConstant", "dispatchFunction", "dispatch_default", "root", "Selection", "groups", "parents", "selection", "select_default", "selectAll_default", "filter_default", "data_default", "enter_default", "exit_default", "merge_default", "order_default", "sort_default", "call_default", "nodes_default", "node_default", "size_default", "empty_default", "each_default", "attr_default", "style_default", "property_default", "classed_default", "text_default", "html_default", "raise_default", "lower_default", "append_default", "insert_default", "remove_default", "datum_default", "on_default", "dispatch_default", "select_default", "selector", "Selection", "root", "formatDecimal_default", "x", "p", "i", "coefficient", "exponent_default", "x", "formatDecimal_default", "formatGroup_default", "grouping", "thousands", "value", "width", "i", "t", "j", "g", "length", "formatDefault_default", "x", "p", "out", "n", "i", "i0", "i1", "prefixExponent", "formatPrefixAuto_default", "x", "p", "d", "formatDecimal_default", "coefficient", "exponent", "i", "n", "formatRounded_default", "x", "p", "d", "formatDecimal_default", "coefficient", "exponent", "formatTypes_default", "formatDefault_default", "x", "p", "formatRounded_default", "formatPrefixAuto_default", "re", "formatSpecifier_default", "specifier", "FormatSpecifier", "match", "fill", "align", "sign", "symbol", "zero", "width", "comma", "precision", "type", "formatTypes_default", "prefixes", "identity", "x", "locale_default", "locale", "group", "formatGroup_default", "currency", "decimal", "newFormat", "specifier", "formatSpecifier_default", "fill", "align", "sign", "symbol", "zero", "width", "comma", "precision", "type", "prefix", "suffix", "formatType", "formatTypes_default", "maybeSuffix", "format", "value", "valuePrefix", "valueSuffix", "i", "n", "c", "valueNegative", "prefixExponent", "length", "padding", "formatPrefix", "f", "e", "exponent_default", "k", "locale", "format", "formatPrefix", "defaultLocale", "definition", "locale_default", "precisionFixed_default", "step", "exponent_default", "precisionPrefix_default", "step", "value", "exponent_default", "precisionRound_default", "step", "max", "exponent_default", "noop", "dispatch", "i", "n", "_", "t", "Dispatch", "parseTypenames", "typenames", "types", "name", "typename", "callback", "T", "get", "set", "copy", "type", "that", "args", "c", "dispatch_default", "ascending_default", "a", "b", "bisector_default", "compare", "ascendingComparator", "a", "x", "lo", "hi", "mid", "f", "d", "ascending_default", "ascendingBisect", "bisector_default", "ascending_default", "bisectRight", "bisectLeft", "bisect_default", "array", "slice", "map", "e10", "e5", "e2", "ticks_default", "start", "stop", "count", "reverse", "i", "n", "ticks", "step", "tickIncrement", "power", "error", "tickStep", "step0", "step1", "prefix", "Map", "map", "key", "value", "property", "keys", "values", "entries", "size", "f", "object", "i", "n", "o", "map_default", "Set", "proto", "map_default", "set", "value", "prefix", "object", "f", "i", "n", "array", "map", "slice", "define_default", "constructor", "factory", "prototype", "extend", "parent", "definition", "key", "Color", "darker", "brighter", "reI", "reN", "reP", "reHex", "reRgbInteger", "reRgbPercent", "reRgbaInteger", "reRgbaPercent", "reHslPercent", "reHslaPercent", "named", "define_default", "color", "channels", "color_formatHex", "color_formatHsl", "color_formatRgb", "hslConvert", "format", "m", "l", "rgbn", "Rgb", "rgba", "hsla", "n", "r", "g", "b", "a", "rgbConvert", "o", "rgb", "opacity", "extend", "k", "rgb_formatHex", "rgb_formatRgb", "hex", "value", "h", "s", "Hsl", "min", "max", "hsl", "m2", "m1", "hsl2rgb", "deg2rad", "rad2deg", "A", "B", "C", "D", "E", "ED", "EB", "BC_DA", "cubehelixConvert", "o", "Cubehelix", "Rgb", "rgbConvert", "r", "g", "b", "l", "bl", "k", "s", "h", "rad2deg", "cubehelix", "opacity", "define_default", "extend", "Color", "brighter", "darker", "deg2rad", "a", "cosh", "sinh", "basis", "t1", "v0", "v1", "v2", "v3", "t2", "t3", "basis_default", "values", "n", "t", "i", "basisClosed_default", "values", "n", "t", "i", "v0", "v1", "v2", "v3", "basis", "constant_default", "x", "linear", "a", "d", "t", "exponential", "b", "y", "hue", "constant_default", "gamma", "nogamma", "rgb_default", "rgbGamma", "y", "color", "gamma", "rgb", "start", "end", "r", "g", "b", "opacity", "nogamma", "t", "rgbSpline", "spline", "colors", "n", "rgbBasis", "basis_default", "rgbBasisClosed", "basisClosed_default", "numberArray_default", "a", "b", "n", "c", "i", "t", "isNumberArray", "x", "genericArray", "a", "b", "nb", "na", "x", "c", "value_default", "t", "date_default", "a", "b", "d", "t", "number_default", "a", "b", "t", "object_default", "a", "b", "i", "c", "k", "value_default", "t", "reA", "reB", "zero", "b", "one", "string_default", "a", "bi", "am", "bm", "bs", "s", "q", "number_default", "t", "i", "o", "value_default", "a", "b", "t", "c", "constant_default", "number_default", "color", "rgb_default", "string_default", "date_default", "isNumberArray", "numberArray_default", "genericArray", "object_default", "round_default", "a", "b", "t", "cubehelix", "hue", "cubehelixGamma", "y", "start", "end", "h", "s", "nogamma", "l", "opacity", "t", "cubehelix_default", "cubehelixLong", "constant_default", "x", "number_default", "x", "unit", "deinterpolateLinear", "a", "b", "x", "constant_default", "deinterpolateClamp", "deinterpolate", "d", "reinterpolateClamp", "reinterpolate", "r", "t", "bimap", "domain", "range", "d0", "d1", "r0", "r1", "polymap", "j", "i", "bisect_default", "copy", "source", "target", "continuous", "interpolate", "value_default", "clamp", "piecewise", "output", "input", "rescale", "scale", "y", "_", "map", "number_default", "slice", "round_default", "tickFormat_default", "domain", "count", "specifier", "start", "stop", "step", "tickStep", "precision", "formatSpecifier_default", "value", "precisionPrefix_default", "formatPrefix", "precisionRound_default", "precisionFixed_default", "format", "linearish", "scale", "domain", "count", "d", "ticks_default", "specifier", "tickFormat_default", "i", "n", "start", "stop", "step", "tickStep", "linear", "continuous", "deinterpolateLinear", "number_default", "copy", "durationSecond", "durationMinute", "durationHour", "durationDay", "durationWeek", "durationMonth", "durationYear", "colors_default", "s", "x", "category10_default", "colors_default", "category20b_default", "colors_default", "category20c_default", "colors_default", "category20_default", "colors_default", "cubehelix_default", "cubehelixLong", "cubehelix", "warm", "cubehelixLong", "cubehelix", "cool", "rainbow", "ramp", "range", "n", "t", "viridis_default", "colors_default", "magma", "inferno", "plasma", "ascending_default", "a", "b", "bisector_default", "compare", "ascendingComparator", "a", "x", "lo", "hi", "mid", "f", "d", "ascending_default", "ascendingBisect", "bisector_default", "ascending_default", "bisectRight", "bisectLeft", "array", "slice", "map", "e10", "e5", "e2", "max_default", "array", "f", "i", "a", "b", "sum_default", "array", "f", "s", "a", "i", "d3_identity", "d", "d3_reverse", "arr", "mirror", "i", "l", "length", "d3_textWrapping", "text", "width", "each", "select", "words", "split", "reverse", "word", "line", "lineNumber", "lineHeight", "attr", "dy", "parseFloat", "tspan", "append", "pop", "push", "join", "node", "getComputedTextLength", "d3_mergeLabels", "gen", "labels", "domain", "range", "labelDelimiter", "_typeof", "customLabels", "genLength", "d3_linearLegend", "scale", "cells", "labelFormat", "data", "increment", "map", "d3_quantLegend", "invert", "invertExtent", "d3_ordinalLegend", "d3_cellOver", "cellDispatcher", "obj", "call", "d3_cellOut", "d3_cellClick", "helper", "shape", "shapes", "shapeHeight", "shapeWidth", "shapeRadius", "path", "svg", "enter", "classPrefix", "labelWidth", "selectAll", "ascending", "type", "ticks", "cellFilter", "filterCells", "label", "filter", "dataValues", "labelValues", "indexOf", "orient", "cell", "cellTrans", "textTrans", "labelAlign", "style", "dispatcher", "on", "title", "titleWidth", "titleText", "cellsSvg", "yOffset", "nodes", "getBBox", "height", "xOffset", "x", "color", "scaleLinear", "shapePadding", "useClass", "locale", "d3_defaultLocale", "specifier", "d3_defaultFormatSpecifier", "labelOffset", "d3_defaultDelimiter", "labelWrap", "legendDispatcher", "dispatch", "legend", "d3_calcType", "format", "legendG", "d3_filterCells", "cellEnter", "d3_addEvents", "exit", "transition", "remove", "merge", "d3_drawShapes", "d3_addText", "textSize", "shapeSize", "feature", "textAlign", "cellSize", "Math", "max", "sum", "slice", "y", "d3_placement", "d3_title", "_", "arguments", "formatLocale", "formatSpecifier", "toLowerCase", "textWrap", "value", "apply", "symbol", "scale", "scaleLinear", "shape", "shapeWidth", "shapeHeight", "shapeRadius", "shapePadding", "cells", "cellFilter", "labels", "classPrefix", "title", "locale", "helper", "d3_defaultLocale", "specifier", "d3_defaultFormatSpecifier", "labelAlign", "labelOffset", "labelDelimiter", "d3_defaultDelimiter", "labelWrap", "orient", "ascending", "titleWidth", "legendDispatcher", "dispatch", "legend", "svg", "type", "d3_calcType", "format", "legendG", "selectAll", "data", "d3_filterCells", "enter", "append", "attr", "cell", "select", "cellEnter", "shapes", "d3_addEvents", "exit", "transition", "style", "remove", "merge", "d3_drawShapes", "feature", "text", "d3_addText", "textSize", "nodes", "map", "d", "getBBox", "shapeSize", "maxH", "max", "height", "maxW", "width", "cellTrans", "textTrans", "textAlign", "cellSize", "i", "Math", "sum", "slice", "y", "x", "d3_placement", "d3_title", "_", "arguments", "length", "formatLocale", "labelFormat", "formatSpecifier", "toLowerCase", "on", "value", "apply", "legend_controls_default", "cropCellContents", "legendDiv", "legendCells", "legendDivRect", "isElementOverflowing", "svg", "d", "i", "nodes", "cell", "cutoffCharIndex", "getCutoffCharacterIndex", "cellRect", "cutoffCoord", "fuzzyFactor", "margin", "enforceContainerBoundaries", "innerNode", "offsetX", "offsetY", "chartNodeRect", "select_default", "getChartElement", "innerNodeRect", "draggedInnerNodeRect", "adjustedOffsets", "bound", "isElementOverflowing", "adjustment", "resizeForDraggingEvent", "draggableComponent", "pinned", "settings", "draggable", "element", "node", "viewer", "drag", "drag_default", "event", "offsets", "enforceContainerBoundaries", "position", "isNodeInTopRight", "pinNodeToTopRight", "unpinNodeFromTopRight", "select_default", "args", "nodeRect", "containerRect", "getChartContainer", "fuzz", "margin", "horizontalHandleClass", "verticalHandleClass", "cornerHandleClass", "handlesContainerId", "fillOpacity", "resizeEvent", "resizableComponent", "handleWidthPx", "zIndex", "settings", "minDimensionsPx", "maxDimensionsPx", "callbacks", "executeCallbacks", "event", "direction", "callback", "resizable", "container", "handlesContainerExists", "dragHelper", "dragLeft", "dragTop", "dragRight", "dragBottom", "containerNode", "containerRect", "handles", "handlesGroup", "isVertical", "d", "xCoordHelper", "yCoordHelper", "edgeHandles", "leftHandle", "topHandle", "rightHandle", "bottomHandle", "edge", "drag_default", "concatCornerEdges", "corner", "cornerCursorHelper", "cornerHandles", "topLeftHandle", "topRightHandle", "bottomRightHandle", "bottomLeftHandle", "enforceMaxDimensions", "pinCorners", "offset", "enforceDistToParallelBarConstraints", "enforceContainerBoundaries", "x", "y", "updateSettings", "resizeAndRelocateHandles", "pointerFallenBehindAbsoluteCoordinates", "dimensions", "handle", "dimension", "axis", "extendHandlesBox", "pinHandleToHandleBoxEdge", "extendPerpendicularHandles", "relativeHandle", "input", "args", "becauseCrossedMinSize", "becauseExitedCoordinateSpace", "dragHandleContainer", "operatorFunction", "anticipatedDimension", "difference", "orientationClass", "_", "nodes", "handleNode", "select_default", "averageCellHeightPx", "controlsHeightPx", "scrollableLegend_default", "fromLegend", "settings", "legend", "color", "domain", "pageCount", "pageSize", "pageIndex", "decorate", "draggable", "draggableComponent", "resizable", "scrollableLegend", "selection", "resizableComponent", "render", "calculatePageSize", "renderControls", "renderLegend", "cropCellContents", "controls", "getLegendControls", "setPage", "cellFilter", "legendElement", "getLegendElement", "cellContainerSize", "index", "_", "i", "legendContainerRect", "proposedPageSize", "calculatePageCount", "container", "getOrCreateElement", "legend_controls_default", "args", "rebindAll_default", "scrollColorLegend", "settings", "scrollableLegend_default", "color", "scrollSymbolLegend", "symbol", "colorLegend", "legendComponent", "symbolLegend", "symbolScale", "colorGroupLegend", "fromScale", "domain", "range", "r", "Symbol", "ordinal", "scrollLegendComponent", "scaleModifier", "scale", "legend", "container", "scrollLegend", "_d", "d", "k", "getChartElement", "options", "parts", "legendSelection", "getOrCreateElement", "selection", "isHidden", "data", "cells", "withoutOpacity", "args", "filterData", "settings", "data", "useData", "col", "clone", "k", "filterDataByGroup", "newData", "hideKeysLen", "splitValsLen", "row", "res", "val", "entries", "key", "_val", "groupFromKey", "mainGridSvg", "settings", "x", "xTick", "axis_color", "mainGridCanvas", "c", "crossGridSvg", "_", "crossGridCanvas", "gridlines_default", "series", "orient", "canvas", "xScale", "yScale", "context", "seriesMulti", "multi_default", "annotationGridline", "gridline_default", "mainGrid", "crossGrid", "_withGridLines", "args", "multi", "xStyle", "yStyle", "gridlines", "hardLimitZeroPadding", "_defaultPadding", "defaultPadding", "padding", "extent", "pad", "padUnit", "delta", "paddedLowerExtent", "paddedUpperExtent", "_args", "rebindAll_default", "zoom_controls_default", "zoomableChart_default", "chart", "settings", "xScale", "xCopy", "yScale", "yCopy", "bound", "canvas", "onChange", "zoomableChart", "selection", "chartPlotArea", "dateAxis", "zoom", "zoom_default", "event", "transform", "applyTransform", "noZoom", "zoomControls", "getZoomControls", "identity", "oneYear", "sixMonths", "oneMonth", "dateClick", "endCalculation", "start", "end", "xRange", "k", "x", "y", "yMiddle", "a", "b", "oldDecorate", "sel", "data", "plotArea", "device_pixel_factor", "initialTransform", "args", "zoomableScale", "yDomain", "changeArgs", "yZoomDomain", "container", "getOrCreateElement", "zoom_controls_default", "scale", "barChart", "container", "settings", "data", "groupAndStackData", "filterData", "color", "seriesColors", "legend", "colorLegend", "bars", "barSeries", "series", "multi_default", "index", "xAxis", "axisFactory", "AXIS_TYPES", "hardLimitZeroPadding", "yAxis", "chart", "chartSvgFactory", "gridlines_default", "zoomChart", "zoomableChart_default", "bar_default", "domainMatchOrigins_default", "domain1", "domain2", "isMatchable", "ratio1", "originRatio", "ratio2", "adjustLowerBound", "domain", "ratio", "splitterLabels", "settings", "labels", "alt", "color", "_render", "selection", "labelDataJoin", "dataJoin_default", "d", "disabled", "coloured", "withoutOpacity", "event", "v", "redrawChart", "chartElement", "getChartElement", "args", "axisSplitter", "settings", "sourceData", "splitFn", "dataSplitFunction", "color", "data", "altData", "splitMainValues", "altValue", "name", "split", "haveSplit", "m", "key", "splitter", "selection", "labelsInfo", "v", "i", "mainLabels", "altLabels", "labeller", "splitterLabels", "args", "isIncludedFn", "d", "dataBlankFunction", "series", "groupedBlankFunction", "group", "columnChart", "container", "settings", "data", "groupAndStackData", "filterData", "color", "seriesColors", "legend", "colorLegend", "bars", "barSeries", "series", "multi_default", "index", "xAxis", "axisFactory", "AXIS_TYPES", "yAxisFactory", "hardLimitZeroPadding", "blankFunction", "groupedBlankFunction", "dataBlankFunction", "splitter", "axisSplitter", "yAxis1", "plotSeries", "gridlines_default", "chart", "chartSvgFactory", "zoomChart", "zoomableChart_default", "yAxis2", "domainMatchOrigins_default", "column_default", "lineSeries", "settings", "color", "series", "line_default", "estimated_size", "stroke_width", "selection", "d", "withoutOpacity", "splitData", "settings", "data", "labelfn", "labelFunction", "col", "i", "key", "transposeData", "x", "columns", "row", "col", "findBestFromData", "array", "valueFn", "compareFn", "findBestFromArray", "best", "v", "thisValue", "findBestFromItem", "item", "value", "bestItem", "nearbyTip_default", "base", "tooltip", "xScale", "yScale", "color", "size", "canvas", "data", "xValueName", "yValueName", "altDataWithScale", "scale_factor", "nearbyTip", "selection", "chartPlotArea", "tooltipData", "pointer", "pointer_default", "event", "closest", "getClosestDataPoint", "useYScale", "renderTip", "raiseEvent", "tipData", "tips", "d", "withOpacity", "pos", "distFn", "scale", "v", "dist1", "best1", "findBestFromData", "dist2", "best2", "args", "rebindAll_default", "lineChart", "container", "settings", "data", "splitData", "filterData", "color", "seriesColors", "legend", "colorLegend", "series", "repeat_default", "lineSeries", "paddingStrategy", "hardLimitZeroPadding", "splitter", "axisSplitter", "transposeData", "xAxis", "axisFactory", "AXIS_TYPES", "yAxisFactory", "yAxis1", "plotSeries", "gridlines_default", "chart", "chartSvgFactory", "zoomChart", "zoomableChart_default", "toolTip", "nearbyTip_default", "yAxis2", "transposed_data", "line_default", "sqrt3", "nabla", "context", "size", "y", "symbols", "circle_default", "cross_default", "diamond_default", "square_default", "star_default", "triangle_default", "wye_default", "symbolsObj", "fromDomain", "domain", "ordinal", "LABEL_PADDING", "LABEL_COSINE", "pointSeriesCanvas", "settings", "symbolKey", "size", "color", "label", "symbols", "scale_factor", "series", "point_default", "d", "data", "context", "colorValue", "opacity", "type", "x", "value", "toValue", "magnitude", "mag_with_padding", "withoutOpacity", "withOpacity", "symbolTypeFromColumn", "column", "rows", "getValuesByColumn", "fromDomain", "symbolTypeFromGroups", "col", "domain", "key", "group", "groupFromKey", "xySplitData", "settings", "data", "n_cols", "col", "cols", "key", "row", "groupFromKey", "xyLine", "container", "settings", "data", "transposeData", "xySplitData", "filterDataByGroup", "color", "seriesColorsFromGroups", "symbols", "symbolTypeFromGroups", "legend", "colorGroupLegend", "series", "repeat_default", "lineSeries", "paddingStrategy", "hardLimitZeroPadding", "xAxisFactory", "axisFactory", "yAxis", "xAxis", "plotSeries", "gridlines_default", "chart", "chartSvgFactory", "zoomChart", "zoomableChart_default", "toolTip", "nearbyTip_default", "xy_line_default", "areaSeries", "_settings", "color", "series", "area_default", "selection", "d", "splitAndBaseData", "settings", "data", "labelfn", "labelFunction", "col", "i", "baseValues", "key", "labels", "label", "baseValue", "value", "areaChart", "container", "settings", "data", "splitAndBaseData", "filterData", "color", "seriesColors", "legend", "colorLegend", "area_series", "repeat_default", "areaSeries", "line_series", "lineSeries", "series", "multi_default", "xAxis", "axisFactory", "AXIS_TYPES", "yAxisFactory", "hardLimitZeroPadding", "splitter", "axisSplitter", "yAxis1", "plotSeries", "gridlines_default", "chart", "chartSvgFactory", "zoomChart", "zoomableChart_default", "toolTip", "nearbyTip_default", "yAxis2", "area_default", "categoryPointSeries", "settings", "seriesKey", "color", "symbols", "series", "point_default", "opacity", "selection", "d", "withoutOpacity", "withOpacity", "symbolType", "col", "domain", "k", "fromDomain", "yScatter", "container", "settings", "data", "groupData", "filterData", "symbols", "symbolType", "color", "seriesColors", "legend", "symbolLegend", "series", "multi_default", "index", "categoryPointSeries", "paddingStrategy", "hardLimitZeroPadding", "xAxis", "axisFactory", "AXIS_TYPES", "yAxisFactory", "splitter", "axisSplitter", "yAxis1", "plotSeries", "gridlines_default", "chart", "chartSvgFactory", "zoomChart", "zoomableChart_default", "toolTip", "nearbyTip_default", "yAxis2", "y_scatter_default", "pointData", "settings", "data", "splitIntoMultiSeries", "seriesToPoints", "labelfn", "labelFunction", "mappedSeries", "col", "i", "v", "seriesLinearRange", "_settings", "data", "valueName", "customExtent", "linear", "getExtent", "seriesColorRange", "settings", "extent", "gradient", "maxVal", "interpolator", "multiInterpolator", "sequential", "domain", "gradientPairs", "interpolators", "p", "i", "value_default", "value", "index", "value1", "value2", "colorRangeLegend", "scale", "legend", "container", "legendSelection", "getOrCreateElement", "width", "height", "xScale", "band", "domain", "paddedDomain", "linear_default", "min", "max", "expandedDomain", "range", "yScale", "linear", "svgBar", "autoBandwidth_default", "bar_default", "_", "i", "d", "selection", "middle", "tickValues", "valueformatter", "getValueFormatterForRange", "axisLabel", "axisRight", "legendSvg", "legendBar", "barWidth", "args", "gridLayoutMultiChart", "elementsPrefix", "chartContainer", "chartEnter", "chartDiv", "chartTitle", "color", "containerSize", "svg", "padding", "_gridLayoutMultiChart", "container", "outerContainer", "getOrCreateElement", "scrollContainer", "innerRect", "containerHeight", "containerWidth", "minSize", "data", "cols", "rows", "d", "args", "interpolate_scale", "x1", "y1", "x2", "y2", "m", "b", "container", "node", "shortest_axis", "xyScatterSeries", "settings", "data", "color", "symbols", "_xyScatterSeries", "hasColorBy", "symbolCol", "size", "seriesLinearRange", "label", "scale_factor", "series", "multi_default", "index", "pointSeriesCanvas", "axisDefault", "axisFactory", "hardLimitZeroPadding", "xAxis", "yAxis", "xLabel", "yLabel", "chart", "chartCanvasFactory", "gridlines_default", "zoomChart", "zoomableChart_default", "toolTip", "nearbyTip_default", "args", "overrideSymbols", "settings", "symbols", "symbolCol", "columnType", "val", "domain", "range", "len", "i", "_", "maybeSymbols", "key", "value", "symbolType", "symbolsObj", "circle_default", "xyScatter", "container", "colorBy", "hasColorBy", "isColoredByString", "x", "color", "legend", "temp", "symbolTypeFromColumn", "data", "pointData", "filterDataByGroup", "seriesColorsFromDistinct", "symbolLegend", "seriesColorsFromColumn", "colorLegend", "seriesColorRange", "colorRangeLegend", "colorScale", "xyGrid", "gridLayoutMultiChart", "xyContainer", "xyEnter", "xyDiv", "xyTitle", "containerSize", "d", "nodes", "select_default", "xyElement", "xyScatterSeries", "type", "group", "xy_scatter_default", "heatmapSeries", "_settings", "color", "series", "heatmap_default", "ctx", "d", "autoBandwidth_default", "heatmapData", "settings", "data", "labelfn", "labelFunction", "mainType", "axisType", "AXIS_TYPES", "col", "crossValue", "key", "mainValue", "getMainValues", "labels", "heatmapChart", "container", "settings", "data", "heatmapData", "filterData", "color", "seriesColorRange", "series", "heatmapSeries", "legend", "colorRangeLegend", "xAxis", "axisFactory", "AXIS_TYPES", "yAxis", "d", "chart", "chartCanvasFactory", "gridlines_default", "zoomChart", "zoomableChart_default", "toolTip", "nearbyTip_default", "heatmap_default", "ohlcData", "settings", "data", "splitIntoMultiSeries", "seriesToOHLC", "labelfn", "labelFunction", "getNextOpen", "i", "mappedSeries", "col", "openValue", "closeValue", "v", "isUp", "d", "ohlcCandleSeries", "settings", "seriesCanvas", "upColor", "domain", "downColor", "colorScale", "setOpacity", "avgColor", "series", "context", "color", "bollingerAverageSeries", "line_default", "bollingerAreaSeries", "area_default", "multi_default", "ohlcCandle", "seriesCanvas", "container", "settings", "srcData", "ohlcData", "filterDataByGroup", "bollinger", "bollingerBands_default", "d", "data", "seriesData", "bollingerData", "i", "keys", "k", "upColor", "colorScale", "setOpacity", "legend", "colorLegend", "series", "ohlcCandleSeries", "multi", "multi_default", "index", "paddingStrategy", "hardLimitZeroPadding", "xAxis", "axisFactory", "yAxis", "chart", "chartCanvasFactory", "gridlines_default", "zoomChart", "zoomableChart_default", "zoom", "zoomedData", "toolTip", "nearbyTip_default", "ohlcCandle_default", "ohlc", "ohlcCandle_default", "ohlc_default", "candlestick", "ohlcCandle_default", "candlestick_default", "treeColor", "settings", "data", "color_column", "x", "colors", "d", "getColors", "a", "b", "seriesColorsFromDistinct", "seriesColorRange", "flattenExtent", "nodes", "child", "treeData", "settings", "sets", "real_aggs", "x", "y", "d", "j", "groups", "getSplitNames", "split", "currentLevel", "group", "i", "element", "e", "is_leaf", "colorValue", "getDataValue", "size", "set", "tree", "root", "hierarchy", "chartData", "partition_default", "cross", "toValue", "getExtents", "aggregate", "data", "min", "max", "splits", "key", "splitValue", "drawArc", "radius", "arc_default", "d", "arcVisible", "labelVisible", "d", "labelTransform", "radius", "x", "y", "cropLabel", "targetWidth", "actualWidth", "labelText", "textSelection", "select_default", "clickHandler", "data", "g", "parent", "parentTitle", "path", "label", "radius", "split", "settings", "p", "skipTransition", "d", "t", "i", "value_default", "arcVisible", "drawArc", "labelVisible", "labelTransform", "sunburstSeries", "settings", "split", "data", "color", "radius", "_sunburstSeries", "sunburstElement", "segment", "segmentEnter", "segmentMerge", "path", "d", "arcVisible", "drawArc", "label", "labelVisible", "labelTransform", "cropLabel", "parentTitle", "parent", "onClick", "clickHandler", "currentLevel", "args", "sunburst", "container", "settings", "data", "treeData", "color", "treeColor", "sunburstGrid", "gridLayoutMultiChart", "color_column", "x", "legend", "colorLegend", "colorRangeLegend", "sunburstContainer", "sunburstEnter", "sunburstDiv", "sunburstTitle", "containerSize", "d", "i", "nodes", "select_default", "split", "sunburstElement", "svgNode", "width", "height", "radius", "sunburstSeries", "tooltip", "sunburst_default", "treeColor", "settings", "data", "color_column", "colors", "x", "getColors", "a", "b", "seriesColorsFromDistinct", "min", "max", "seriesColorRange", "nodes", "child", "minTextSize", "labelMapExists", "d", "toggleLabels", "nodes", "treemapLevel", "crossValues", "i", "help", "textLevelHelper", "visibleNodes", "selectVisibleNodes", "centerLabels", "preventTextCollisions", "restoreLabels", "select_default", "rect", "element", "topNodes", "_", "textVisibility", "lowerNode", "topNode", "isElementOverlapping", "lockTextOpacity", "textOpacity", "unlockTextOpacity", "adjustLabelsThatOverflow", "shrinkOrHideText", "centerText", "nodeSelect", "textRect", "rectRect", "needsToShrinkOrHide", "resize_factor", "fontSize", "newFontSize", "x", "treemapLayout_default", "width", "height", "treemapLayout", "treemap_default", "d", "binary_default", "includesAllCrossValues", "d", "crossValues", "val", "calculateSubTreeMap", "nodesMerge", "treemapLevel", "rootNode", "treemapDiv", "approximateAttributesForAllNodes", "recalculateVisibleSubTreeCoordinates", "calculateTextOpacities", "calculateRootLevelMap", "calcWidth", "calcHeight", "saveLabelMap", "nodes", "i", "label", "select_default", "oldDimensions", "newDimensions", "dimensionMultiplier", "x0", "y0", "width", "height", "visible", "subTreeRoot", "treeRootWidth", "treeRootHeight", "dummiedDescendants", "treemapLayout_default", "hierarchy", "descendants", "_", "text", "textVis", "textOpacity", "returnToLevel", "rects", "nodesMerge", "labels", "settings", "treemapDiv", "treemapSvg", "rootNode", "parentCtrls", "root_settings", "crossValues", "executeTransition", "cv", "d", "calculateSubTreeMap", "changeLevel", "treemapLevel", "duration", "recordLabelMap", "parent", "t", "cubicOut", "labelMapExists", "preventUserInteraction", "i", "value_default", "calcWidth", "calcHeight", "enableUserInteraction", "preventTextCollisions", "visibleLabelNodes", "adjustLabelsThatOverflow", "fadeTextTransition", "saveLabelMap", "ex", "restoreLabels", "_", "lockTextOpacity", "toggleLabels", "selectVisibleNodes", "viewer", "raiseEvent", "label", "interpolation", "lockedOpacity", "targetOpacity", "unlockTextOpacity", "textOpacity", "select_default", "nodes", "parent_controls_default", "parentControls", "container", "onClick", "text", "hide", "deactivated", "parent", "getOrCreateElement", "parent_controls_default", "controls", "args", "button", "nodeLevel", "calcWidth", "d", "calcHeight", "isLeafNode", "maxDepth", "nodeLevelHelper", "treemapSeries", "settings", "root_settings", "data", "color", "treemapDiv", "parentCtrls", "_treemapSeries", "treemapSvg", "parentControls", "treemapLayout_default", "nodes", "nodesEnter", "nodesMerge", "a", "b", "rects", "labels", "rootNode", "calculateRootLevelMap", "toggleLabels", "adjustLabelsThatOverflow", "selectVisibleNodes", "saveLabelMap", "_event", "changeLevel", "returnToLevel", "args", "treemap", "container", "settings", "data", "treeData", "color", "treeColor", "d", "treemapGrid", "gridLayoutMultiChart", "color_column", "x", "legend", "colorLegend", "colorRangeLegend", "treemapEnter", "treemapDiv", "i", "nodes", "select_default", "split", "treemapSvg", "treemapSeries", "tooltip", "treemap_default", "chartClasses", "bar_default", "column_default", "line_default", "xy_line_default", "area_default", "y_scatter_default", "xy_scatter_default", "ohlc_default", "candlestick_default", "treemap_default", "sunburst_default", "heatmap_default", "charts_default", "gparser", "initialiseStyles", "container", "settings", "styles", "computed", "computedStyle", "i", "key", "color", "getOpacityFromColor", "g", "gradient", "parseGradient", "css", "font", "stepAsColor", "value", "opacity", "containerStyles", "d", "parsed", "a", "b", "perspective_viewer_d3fc_default", "DEFAULT_PLUGIN_SETTINGS", "D3FC_GLOBAL_STYLES", "css", "perspective_viewer_d3fc_default", "x", "sheet", "EXCLUDED_SETTINGS", "register_element", "plugin_name", "register", "plugin_names", "plugins", "charts_default", "chart", "HTMLPerspectiveViewerD3fcPluginElement", "type", "group", "canvas", "container", "context", "text_color", "svgs", "svg", "img", "defaultOffset", "new_svg", "text", "xml", "done", "y", "canvases", "blob", "view", "end_col", "end_row", "clear", "viewer", "jsonp", "metadata", "leaves_only", "table", "real_config", "table_schema", "expression_schema", "view_schema", "json_string", "config", "json2", "keys", "json", "ridx", "obj", "name", "realValues", "get_pivot_column_type", "column", "columns", "group_by", "split_by", "filter", "first_col", "filtered", "acc", "idx", "col", "len", "_", "dataMap", "i", "mapped", "settings", "r", "a", "handler", "prop", "value", "axisMemo", "initialiseStyles", "resolve", "containerDiv", "select_default", "chartClass", "_end_col", "_end_row", "s", "columns_config", "new_settings", "register"]
}
