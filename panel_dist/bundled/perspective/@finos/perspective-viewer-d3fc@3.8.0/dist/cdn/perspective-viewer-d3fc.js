var k0=Object.create;var Yl=Object.defineProperty;var D0=Object.getOwnPropertyDescriptor;var N0=Object.getOwnPropertyNames;var E0=Object.getPrototypeOf,P0=Object.prototype.hasOwnProperty;var L0=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Aa=(e,t)=>{for(var r in t)Yl(e,r,{get:t[r],enumerable:!0})},z0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of N0(t))!P0.call(e,o)&&o!==r&&Yl(e,o,{get:()=>t[o],enumerable:!(n=D0(t,o))||n.enumerable});return e};var B0=(e,t,r)=>(r=e!=null?k0(E0(e)):{},z0(t||!e||!e.__esModule?Yl(r,"default",{value:e,enumerable:!0}):r,e));var A0=L0(fc=>{var vn=vn||{};vn.stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var r=e.visit(t.orientation);return r&&(r+=", "),t.type+"("+r+e.visit(t.colorStops)+")"},visit_shape:function(t){var r=t.value,n=e.visit(t.at),o=e.visit(t.style);return o&&(r+=" "+o),n&&(r+=" at "+n),r},"visit_default-radial":function(t){var r="",n=e.visit(t.at);return n&&(r+=n),r},"visit_extent-keyword":function(t){var r=t.value,n=e.visit(t.at);return n&&(r+=" at "+n),r},"visit_position-keyword":function(t){return t.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,r){var n=t,o=e.visit(r.length);return o&&(n+=" "+o),n},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(t){var r="",n=t.length;return t.forEach(function(o,a){r+=e.visit(o),a<n-1&&(r+=", ")}),r},visit:function(t){if(!t)return"";var r="";if(t instanceof Array)return e.visit_array(t,r);if(t.type){var n=e["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}else throw Error("Invalid node.")}};return function(t){return e.visit(t)}}();var vn=vn||{};vn.parse=function(){var e={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function r(T){var C=new Error(t+": "+T);throw C.source=t,C}function n(){var T=o();return t.length>0&&r("Invalid input not EOF"),T}function o(){return A(a)}function a(){return i("linear-gradient",e.linearGradient,s)||i("repeating-linear-gradient",e.repeatingLinearGradient,s)||i("radial-gradient",e.radialGradient,m)||i("repeating-radial-gradient",e.repeatingRadialGradient,m)}function i(T,C,B){return l(C,function(L){var W=B();return W&&(k(e.comma)||r("Missing comma before color stops")),{type:T,orientation:W,colorStops:A(v)}})}function l(T,C){var B=k(T);if(B){k(e.startCall)||r("Missing (");var L=C(B);return k(e.endCall)||r("Missing )"),L}}function s(){return u()||c()}function u(){return w("directional",e.sideOrCorner,1)}function c(){return w("angular",e.angleValue,1)}function m(){var T,C=f(),B;return C&&(T=[],T.push(C),B=t,k(e.comma)&&(C=f(),C?T.push(C):t=B)),T}function f(){var T=d()||p();if(T)T.at=x();else{var C=h();if(C){T=C;var B=x();B&&(T.at=B)}else{var L=g();L&&(T={type:"default-radial",at:L})}}return T}function d(){var T=w("shape",/^(circle)/i,0);return T&&(T.style=E()||h()),T}function p(){var T=w("shape",/^(ellipse)/i,0);return T&&(T.style=N()||h()),T}function h(){return w("extent-keyword",e.extentKeywords,1)}function x(){if(w("position",/^at/,0)){var T=g();return T||r("Missing positioning value"),T}}function g(){var T=S();if(T.x||T.y)return{type:"position",value:T}}function S(){return{x:N(),y:N()}}function A(T){var C=T(),B=[];if(C)for(B.push(C);k(e.comma);)C=T(),C?B.push(C):r("One extra comma");return B}function v(){var T=b();return T||r("Expected color definition"),T.length=N(),T}function b(){return M()||F()||V()||y()}function y(){return w("literal",e.literalColor,0)}function M(){return w("hex",e.hexColor,1)}function V(){return l(e.rgbColor,function(){return{type:"rgb",value:A(R)}})}function F(){return l(e.rgbaColor,function(){return{type:"rgba",value:A(R)}})}function R(){return k(e.number)[1]}function N(){return w("%",e.percentageValue,1)||Y()||E()}function Y(){return w("position-keyword",e.positionKeywords,1)}function E(){return w("px",e.pixelValue,1)||w("em",e.emValue,1)}function w(T,C,B){var L=k(C);if(L)return{type:T,value:L[B]}}function k(T){var C,B;return B=/^[\n\r\t\s]+/.exec(t),B&&_(B[0].length),C=T.exec(t),C&&_(C[0].length),C}function _(T){t=t.substr(T)}return function(T){return t=T.toString(),n()}}();fc.parse=vn.parse;fc.stringify=vn.stringify});Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null});function At(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Er(e){let t,r,n;e.length!==2?(t=At,r=(l,s)=>At(e(l),s),n=(l,s)=>e(l)-s):(t=e===At||e===Wl?e:O0,r=e,n=e);function o(l,s,u=0,c=l.length){if(u<c){if(t(s,s)!==0)return c;do{let m=u+c>>>1;r(l[m],s)<0?u=m+1:c=m}while(u<c)}return u}function a(l,s,u=0,c=l.length){if(u<c){if(t(s,s)!==0)return c;do{let m=u+c>>>1;r(l[m],s)<=0?u=m+1:c=m}while(u<c)}return u}function i(l,s,u=0,c=l.length){let m=o(l,s,u,c-1);return m>u&&n(l[m-1],s)>-n(l[m],s)?m-1:m}return{left:o,center:i,right:a}}function O0(){return 0}function ql(e){return e===null?NaN:+e}var gc=Er(At),xc=gc.right,I0=gc.left,R0=Er(ql).center,Gl=xc;function Ul(e,t){let r=0,n,o=0,a=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(n=i-o,o+=n/++r,a+=n*(i-o));else{let i=-1;for(let l of e)(l=t(l,++i,e))!=null&&(l=+l)>=l&&(n=l-o,o+=n/++r,a+=n*(l-o))}if(r>1)return a/(r-1)}function Ca(e,t){let r=Ul(e,t);return r&&Math.sqrt(r)}var wn=class extends Map{constructor(t,r=H0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let[n,o]of t)this.set(n,o)}get(t){return super.get(yc(this,t))}has(t){return super.has(yc(this,t))}set(t,r){return super.set(F0(this,t),r)}delete(t){return super.delete($0(this,t))}};function yc({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function F0({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function $0({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function H0(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Y0=Math.sqrt(50),W0=Math.sqrt(10),q0=Math.sqrt(2);function Ma(e,t,r){let n=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),i=a>=Y0?10:a>=W0?5:a>=q0?2:1,l,s,u;return o<0?(u=Math.pow(10,-o)/i,l=Math.round(e*u),s=Math.round(t*u),l/u<e&&++l,s/u>t&&--s,u=-u):(u=Math.pow(10,o)*i,l=Math.round(e/u),s=Math.round(t/u),l*u<e&&++l,s*u>t&&--s),s<l&&.5<=r&&r<2?Ma(e,t,r*2):[l,s,u]}function Pr(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];let n=t<e,[o,a,i]=n?Ma(t,e,r):Ma(e,t,r);if(!(a>=o))return[];let l=a-o+1,s=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)s[u]=(a-u)/-i;else for(let u=0;u<l;++u)s[u]=(a-u)*i;else if(i<0)for(let u=0;u<l;++u)s[u]=(o+u)/-i;else for(let u=0;u<l;++u)s[u]=(o+u)*i;return s}function fo(e,t,r){return t=+t,e=+e,r=+r,Ma(e,t,r)[2]}function Sn(e,t,r){t=+t,e=+e,r=+r;let n=t<e,o=n?fo(t,e,r):fo(e,t,r);return(n?-1:1)*(o<0?1/-o:o)}function ot(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function Fe(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function Ta(e,t){let r=0,n=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(++r,n+=o);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(++r,n+=a)}if(r)return n/r}function Va(e,t=G0){let r=[],n,o=!1;for(let a of e)o&&r.push(t(n,a)),n=a,o=!0;return r}function G0(e,t){return[e,t]}function Kt(e,t,r){e=+e,t=+t,r=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(o);++n<o;)a[n]=e+n*r;return a}var ka=(e,t,r)=>{let n=t[r];if(typeof n!="function")throw new Error(`Attempt to rebind ${r} which isn't a function on the source object`);return(...o)=>{var a=n.apply(t,o);return a===t?e:a}};var H=(e,t,...r)=>{for(let n of r)e[n]=ka(e,t,n);return e};var X0=e=>t=>e.reduce((r,n)=>r&&n(r),t),z=(e,t,...r)=>{let n=X0(r);for(let o of Object.keys(t)){let a=n(o);a&&(e[a]=ka(e,t,o))}return e};var Da=e=>e.map(t=>typeof t=="string"?new RegExp(`^${t}$`):t);var Q=(...e)=>(e=Da(e),t=>e.every(r=>!r.test(t))&&t);var Lr=(...e)=>(e=Da(e),t=>e.some(r=>r.test(t))&&t);var Ct=e=>t=>e[t];var j0=e=>e[0].toUpperCase()+e.slice(1),$e=e=>t=>e+j0(t);function mo(e){return e}function bc(e){}function Xl(e){return typeof e=="function"?e:()=>e}function Ft(e){return typeof e=="number"&&isNaN(e)?void 0:e}function _n(){let e=()=>10,t=bc,r=mo,n=a=>a!=null;var o=function(a){let i=e.apply(this,arguments),l=a.slice(0,i).map(r);return a.map((s,u)=>(u>=i&&(l.shift(),l.push(r(s,u))),u<i-1||l.some(c=>!n(c))?t(void 0,u):t(l,u)))};return o.period=(...a)=>a.length?(e=Xl(a[0]),o):e,o.accumulator=(...a)=>a.length?(t=a[0],o):t,o.defined=(...a)=>a.length?(n=a[0],o):n,o.value=(...a)=>a.length?(r=a[0],o):r,o}function jl(){let e=2,t=_n().accumulator(n=>{let o=n&&Ca(n),a=n&&Ta(n);return{average:a,upper:Ft(a+e*o),lower:Ft(a-e*o)}}),r=n=>t(n);return r.multiplier=(...n)=>n.length?(e=n[0],r):e,H(r,t,"period","value"),r}function at(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function vc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var Kl=Symbol("implicit");function mt(){var e=new wn,t=[],r=[],n=Kl;function o(a){let i=e.get(a);if(i===void 0){if(n!==Kl)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new wn;for(let i of a)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(a){return arguments.length?(r=Array.from(a),o):r.slice()},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return mt(t,r).unknown(n)},at.apply(o,arguments),o}function dt(){var e=mt().unknown(void 0),t=e.domain,r=e.range,n=0,o=1,a,i,l=!1,s=0,u=0,c=.5;delete e.unknown;function m(){var f=t().length,d=o<n,p=d?o:n,h=d?n:o;a=(h-p)/Math.max(1,f-s+u*2),l&&(a=Math.floor(a)),p+=(h-p-a*(f-s))*c,i=a*(1-s),l&&(p=Math.round(p),i=Math.round(i));var x=Kt(f).map(function(g){return p+a*g});return r(d?x.reverse():x)}return e.domain=function(f){return arguments.length?(t(f),m()):t()},e.range=function(f){return arguments.length?([n,o]=f,n=+n,o=+o,m()):[n,o]},e.rangeRound=function(f){return[n,o]=f,n=+n,o=+o,l=!0,m()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(f){return arguments.length?(l=!!f,m()):l},e.padding=function(f){return arguments.length?(s=Math.min(1,u=+f),m()):s},e.paddingInner=function(f){return arguments.length?(s=Math.min(1,f),m()):s},e.paddingOuter=function(f){return arguments.length?(u=+f,m()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),m()):c},e.copy=function(){return dt(t(),[n,o]).round(l).paddingInner(s).paddingOuter(u).align(c)},at.apply(m(),arguments)}function Na(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Jl(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function go(){}var po=.7,La=1/po,An="\\s*([+-]?\\d+)\\s*",ho="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K0=/^#([0-9a-f]{3,8})$/,J0=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),Z0=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),ex=new RegExp(`^rgba\\(${An},${An},${An},${ho}\\)$`),tx=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${ho}\\)$`),rx=new RegExp(`^hsl\\(${ho},${Mt},${Mt}\\)$`),nx=new RegExp(`^hsla\\(${ho},${Mt},${Mt},${ho}\\)$`),wc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Na(go,Te,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Sc,formatHex:Sc,formatHex8:ox,formatHsl:ax,formatRgb:_c,toString:_c});function Sc(){return this.rgb().formatHex()}function ox(){return this.rgb().formatHex8()}function ax(){return kc(this).formatHsl()}function _c(){return this.rgb().formatRgb()}function Te(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=K0.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Ac(t):r===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ea(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ea(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=J0.exec(e))?new He(t[1],t[2],t[3],1):(t=Z0.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ex.exec(e))?Ea(t[1],t[2],t[3],t[4]):(t=tx.exec(e))?Ea(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=rx.exec(e))?Tc(t[1],t[2]/100,t[3]/100,1):(t=nx.exec(e))?Tc(t[1],t[2]/100,t[3]/100,t[4]):wc.hasOwnProperty(e)?Ac(wc[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function Ac(e){return new He(e>>16&255,e>>8&255,e&255,1)}function Ea(e,t,r,n){return n<=0&&(e=t=r=NaN),new He(e,t,r,n)}function ix(e){return e instanceof go||(e=Te(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function Cn(e,t,r,n){return arguments.length===1?ix(e):new He(e,t,r,n??1)}function He(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Na(He,Cn,Jl(go,{brighter(e){return e=e==null?La:Math.pow(La,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?po:Math.pow(po,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(Br(this.r),Br(this.g),Br(this.b),za(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cc,formatHex:Cc,formatHex8:lx,formatRgb:Mc,toString:Mc}));function Cc(){return`#${zr(this.r)}${zr(this.g)}${zr(this.b)}`}function lx(){return`#${zr(this.r)}${zr(this.g)}${zr(this.b)}${zr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mc(){let e=za(this.opacity);return`${e===1?"rgb(":"rgba("}${Br(this.r)}, ${Br(this.g)}, ${Br(this.b)}${e===1?")":`, ${e})`}`}function za(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Br(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zr(e){return e=Br(e),(e<16?"0":"")+e.toString(16)}function Tc(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pt(e,t,r,n)}function kc(e){if(e instanceof pt)return new pt(e.h,e.s,e.l,e.opacity);if(e instanceof go||(e=Te(e)),!e)return new pt;if(e instanceof pt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,l=a-o,s=(a+o)/2;return l?(t===a?i=(r-n)/l+(r<n)*6:r===a?i=(n-t)/l+2:i=(t-r)/l+4,l/=s<.5?a+o:2-a-o,i*=60):l=s>0&&s<1?0:i,new pt(i,l,s,e.opacity)}function Dc(e,t,r,n){return arguments.length===1?kc(e):new pt(e,t,r,n??1)}function pt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Na(pt,Dc,Jl(go,{brighter(e){return e=e==null?La:Math.pow(La,e),new pt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?po:Math.pow(po,e),new pt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new He(Zl(e>=240?e-240:e+120,o,n),Zl(e,o,n),Zl(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new pt(Vc(this.h),Pa(this.s),Pa(this.l),za(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=za(this.opacity);return`${e===1?"hsl(":"hsla("}${Vc(this.h)}, ${Pa(this.s)*100}%, ${Pa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vc(e){return e=(e||0)%360,e<0?e+360:e}function Pa(e){return Math.max(0,Math.min(1,e||0))}function Zl(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function es(e,t,r,n,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*r+(1+3*e+3*a-3*i)*n+i*o)/6}function Nc(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],a=e[n+1],i=n>0?e[n-1]:2*o-a,l=n<t-1?e[n+2]:2*a-o;return es((r-n/t)*t,i,o,a,l)}}function Ec(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],a=e[n%t],i=e[(n+1)%t],l=e[(n+2)%t];return es((r-n/t)*t,o,a,i,l)}}var xo=e=>()=>e;function sx(e,t){return function(r){return e+r*t}}function ux(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Pc(e){return(e=+e)==1?Ba:function(t,r){return r-t?ux(t,r,e):xo(isNaN(t)?r:t)}}function Ba(e,t){var r=t-e;return r?sx(e,r):xo(isNaN(e)?t:e)}var Or=function e(t){var r=Pc(t);function n(o,a){var i=r((o=Cn(o)).r,(a=Cn(a)).r),l=r(o.g,a.g),s=r(o.b,a.b),u=Ba(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=l(c),o.b=s(c),o.opacity=u(c),o+""}}return n.gamma=e,n}(1);function Lc(e){return function(t){var r=t.length,n=new Array(r),o=new Array(r),a=new Array(r),i,l;for(i=0;i<r;++i)l=Cn(t[i]),n[i]=l.r||0,o[i]=l.g||0,a[i]=l.b||0;return n=e(n),o=e(o),a=e(a),l.opacity=1,function(s){return l.r=n(s),l.g=o(s),l.b=a(s),l+""}}}var cx=Lc(Nc),fx=Lc(Ec);function zc(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=e[o]*(1-a)+t[o]*a;return n}}function Bc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Oc(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=Ve(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(l){for(i=0;i<n;++i)a[i]=o[i](l);return a}}function Ic(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function _e(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Rc(e,t){var r={},n={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=Ve(e[o],t[o]):n[o]=t[o];return function(a){for(o in r)n[o]=r[o](a);return n}}var rs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ts=new RegExp(rs.source,"g");function mx(e){return function(){return e}}function dx(e){return function(t){return e(t)+""}}function yo(e,t){var r=rs.lastIndex=ts.lastIndex=0,n,o,a,i=-1,l=[],s=[];for(e=e+"",t=t+"";(n=rs.exec(e))&&(o=ts.exec(t));)(a=o.index)>r&&(a=t.slice(r,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,s.push({i,x:_e(n,o)})),r=ts.lastIndex;return r<t.length&&(a=t.slice(r),l[i]?l[i]+=a:l[++i]=a),l.length<2?s[0]?dx(s[0].x):mx(t):(t=s.length,function(u){for(var c=0,m;c<t;++c)l[(m=s[c]).i]=m.x(u);return l.join("")})}function Ve(e,t){var r=typeof t,n;return t==null||r==="boolean"?xo(t):(r==="number"?_e:r==="string"?(n=Te(t))?(t=n,Or):yo:t instanceof Te?Or:t instanceof Date?Ic:Bc(t)?zc:Array.isArray(t)?Oc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Rc:_e)(e,t)}function bo(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var Fc=180/Math.PI,Oa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ns(e,t,r,n,o,a){var i,l,s;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(s=e*r+t*n)&&(r-=e*s,n-=t*s),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,s/=l),e*n<t*r&&(e=-e,t=-t,s=-s,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Fc,skewX:Math.atan(s)*Fc,scaleX:i,scaleY:l}}var Ia;function $c(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Oa:ns(t.a,t.b,t.c,t.d,t.e,t.f)}function Hc(e){return e==null?Oa:(Ia||(Ia=document.createElementNS("http://www.w3.org/2000/svg","g")),Ia.setAttribute("transform",e),(e=Ia.transform.baseVal.consolidate())?(e=e.matrix,ns(e.a,e.b,e.c,e.d,e.e,e.f)):Oa)}function Yc(e,t,r,n){function o(u){return u.length?u.pop()+" ":""}function a(u,c,m,f,d,p){if(u!==m||c!==f){var h=d.push("translate(",null,t,null,r);p.push({i:h-4,x:_e(u,m)},{i:h-2,x:_e(c,f)})}else(m||f)&&d.push("translate("+m+t+f+r)}function i(u,c,m,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:m.push(o(m)+"rotate(",null,n)-2,x:_e(u,c)})):c&&m.push(o(m)+"rotate("+c+n)}function l(u,c,m,f){u!==c?f.push({i:m.push(o(m)+"skewX(",null,n)-2,x:_e(u,c)}):c&&m.push(o(m)+"skewX("+c+n)}function s(u,c,m,f,d,p){if(u!==m||c!==f){var h=d.push(o(d)+"scale(",null,",",null,")");p.push({i:h-4,x:_e(u,m)},{i:h-2,x:_e(c,f)})}else(m!==1||f!==1)&&d.push(o(d)+"scale("+m+","+f+")")}return function(u,c){var m=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,m,f),i(u.rotate,c.rotate,m,f),l(u.skewX,c.skewX,m,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,m,f),u=c=null,function(d){for(var p=-1,h=f.length,x;++p<h;)m[(x=f[p]).i]=x.x(d);return m.join("")}}}var os=Yc($c,"px, ","px)","deg)"),as=Yc(Hc,", ",")",")");var px=1e-12;function Wc(e){return((e=Math.exp(e))+1/e)/2}function hx(e){return((e=Math.exp(e))-1/e)/2}function gx(e){return((e=Math.exp(2*e))-1)/(e+1)}var is=function e(t,r,n){function o(a,i){var l=a[0],s=a[1],u=a[2],c=i[0],m=i[1],f=i[2],d=c-l,p=m-s,h=d*d+p*p,x,g;if(h<px)g=Math.log(f/u)/t,x=function(M){return[l+M*d,s+M*p,u*Math.exp(t*M*g)]};else{var S=Math.sqrt(h),A=(f*f-u*u+n*h)/(2*u*r*S),v=(f*f-u*u-n*h)/(2*f*r*S),b=Math.log(Math.sqrt(A*A+1)-A),y=Math.log(Math.sqrt(v*v+1)-v);g=(y-b)/t,x=function(M){var V=M*g,F=Wc(b),R=u/(r*S)*(F*gx(t*V+b)-hx(b));return[l+R*d,s+R*p,u*F/Wc(t*V+b)]}}return x.duration=g*1e3*t/Math.SQRT2,x}return o.rho=function(a){var i=Math.max(.001,+a),l=i*i,s=l*l;return e(i,l,s)},o}(Math.SQRT2,2,4);function ls(e){return function(){return e}}function Mn(e){return+e}var qc=[0,1];function Ye(e){return e}function ss(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ls(isNaN(t)?NaN:.5)}function xx(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function yx(e,t,r){var n=e[0],o=e[1],a=t[0],i=t[1];return o<n?(n=ss(o,n),a=r(i,a)):(n=ss(n,o),a=r(a,i)),function(l){return a(n(l))}}function bx(e,t,r){var n=Math.min(e.length,t.length)-1,o=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)o[i]=ss(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(l){var s=Gl(e,l,1,n)-1;return a[s](o[s](l))}}function Jt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vo(){var e=qc,t=qc,r=Ve,n,o,a,i=Ye,l,s,u;function c(){var f=Math.min(e.length,t.length);return i!==Ye&&(i=xx(e[0],e[f-1])),l=f>2?bx:yx,s=u=null,m}function m(f){return f==null||isNaN(f=+f)?a:(s||(s=l(e.map(n),t,r)))(n(i(f)))}return m.invert=function(f){return i(o((u||(u=l(t,e.map(n),_e)))(f)))},m.domain=function(f){return arguments.length?(e=Array.from(f,Mn),c()):e.slice()},m.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},m.rangeRound=function(f){return t=Array.from(f),r=bo,c()},m.clamp=function(f){return arguments.length?(i=f?!0:Ye,c()):i!==Ye},m.interpolate=function(f){return arguments.length?(r=f,c()):r},m.unknown=function(f){return arguments.length?(a=f,m):a},function(f,d){return n=f,o=d,c()}}function wo(){return vo()(Ye,Ye)}function Gc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ir(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Tt(e){return e=Ir(Math.abs(e)),e?e[1]:NaN}function Uc(e,t){return function(r,n){for(var o=r.length,a=[],i=0,l=e[0],s=0;o>0&&l>0&&(s+l+1>n&&(l=Math.max(1,n-s)),a.push(r.substring(o-=l,o+l)),!((s+=l+1)>n));)l=e[i=(i+1)%e.length];return a.reverse().join(t)}}function Xc(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var vx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vt(e){if(!(t=vx.exec(e)))throw new Error("invalid format: "+e);var t;return new Ra({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vt.prototype=Ra.prototype;function Ra(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jc(e){e:for(var t=e.length,r=1,n=-1,o;r<t;++r)switch(e[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(o+1):e}var us;function Qc(e,t){var r=Ir(e,t);if(!r)return e+"";var n=r[0],o=r[1],a=o-(us=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Ir(e,Math.max(0,t+a-1))[0]}function cs(e,t){var r=Ir(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var fs={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Gc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>cs(e*100,t),r:cs,s:Qc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ms(e){return e}var Kc=Array.prototype.map,Jc=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Zc(e){var t=e.grouping===void 0||e.thousands===void 0?ms:Uc(Kc.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?ms:Xc(Kc.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(m){m=Vt(m);var f=m.fill,d=m.align,p=m.sign,h=m.symbol,x=m.zero,g=m.width,S=m.comma,A=m.precision,v=m.trim,b=m.type;b==="n"?(S=!0,b="g"):fs[b]||(A===void 0&&(A=12),v=!0,b="g"),(x||f==="0"&&d==="=")&&(x=!0,f="0",d="=");var y=h==="$"?r:h==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",M=h==="$"?n:/[%p]/.test(b)?i:"",V=fs[b],F=/[defgprs%]/.test(b);A=A===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function R(N){var Y=y,E=M,w,k,_;if(b==="c")E=V(N)+E,N="";else{N=+N;var T=N<0||1/N<0;if(N=isNaN(N)?s:V(Math.abs(N),A),v&&(N=jc(N)),T&&+N==0&&p!=="+"&&(T=!1),Y=(T?p==="("?p:l:p==="-"||p==="("?"":p)+Y,E=(b==="s"?Jc[8+us/3]:"")+E+(T&&p==="("?")":""),F){for(w=-1,k=N.length;++w<k;)if(_=N.charCodeAt(w),48>_||_>57){E=(_===46?o+N.slice(w+1):N.slice(w))+E,N=N.slice(0,w);break}}}S&&!x&&(N=t(N,1/0));var C=Y.length+N.length+E.length,B=C<g?new Array(g-C+1).join(f):"";switch(S&&x&&(N=t(B+N,B.length?g-E.length:1/0),B=""),d){case"<":N=Y+N+E+B;break;case"=":N=Y+B+N+E;break;case"^":N=B.slice(0,C=B.length>>1)+Y+N+E+B.slice(C);break;default:N=B+Y+N+E;break}return a(N)}return R.toString=function(){return m+""},R}function c(m,f){var d=u((m=Vt(m),m.type="f",m)),p=Math.max(-8,Math.min(8,Math.floor(Tt(f)/3)))*3,h=Math.pow(10,-p),x=Jc[8+p/3];return function(g){return d(h*g)+x}}return{format:u,formatPrefix:c}}var Fa,kt,$a;ds({thousands:",",grouping:[3],currency:["$",""]});function ds(e){return Fa=Zc(e),kt=Fa.format,$a=Fa.formatPrefix,Fa}function ps(e){return Math.max(0,-Tt(Math.abs(e)))}function hs(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tt(t)/3)))*3-Tt(Math.abs(e)))}function gs(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tt(t)-Tt(e))+1}function xs(e,t,r,n){var o=Sn(e,t,r),a;switch(n=Vt(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=hs(o,i))&&(n.precision=a),$a(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=gs(o,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=ps(o))&&(n.precision=a-(n.type==="%")*2);break}}return kt(n)}function Rr(e){var t=e.domain;return e.ticks=function(r){var n=t();return Pr(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var o=t();return xs(o[0],o[o.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),o=0,a=n.length-1,i=n[o],l=n[a],s,u,c=10;for(l<i&&(u=i,i=l,l=u,u=o,o=a,a=u);c-- >0;){if(u=fo(i,l,r),u===s)return n[o]=i,n[a]=l,t(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function ke(){var e=wo();return e.copy=function(){return Jt(e,ke())},at.apply(e,arguments),Rr(e)}function pe(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Mn),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return pe(e).unknown(t)},e=arguments.length?Array.from(e,Mn):[0,1],Rr(r)}function So(e,t){e=e.slice();var r=0,n=e.length-1,o=e[r],a=e[n],i;return a<o&&(i=r,r=n,n=i,i=o,o=a,a=i),e[r]=t.floor(o),e[n]=t.ceil(a),e}function ef(e){return Math.log(e)}function tf(e){return Math.exp(e)}function wx(e){return-Math.log(-e)}function Sx(e){return-Math.exp(-e)}function _x(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ax(e){return e===10?_x:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Cx(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rf(e){return(t,r)=>-e(-t,r)}function Mx(e){let t=e(ef,tf),r=t.domain,n=10,o,a;function i(){return o=Cx(n),a=Ax(n),r()[0]<0?(o=rf(o),a=rf(a),e(wx,Sx)):e(ef,tf),t}return t.base=function(l){return arguments.length?(n=+l,i()):n},t.domain=function(l){return arguments.length?(r(l),i()):r()},t.ticks=l=>{let s=r(),u=s[0],c=s[s.length-1],m=c<u;m&&([u,c]=[c,u]);let f=o(u),d=o(c),p,h,x=l==null?10:+l,g=[];if(!(n%1)&&d-f<x){if(f=Math.floor(f),d=Math.ceil(d),u>0){for(;f<=d;++f)for(p=1;p<n;++p)if(h=f<0?p/a(-f):p*a(f),!(h<u)){if(h>c)break;g.push(h)}}else for(;f<=d;++f)for(p=n-1;p>=1;--p)if(h=f>0?p/a(-f):p*a(f),!(h<u)){if(h>c)break;g.push(h)}g.length*2<x&&(g=Pr(u,c,x))}else g=Pr(f,d,Math.min(d-f,x)).map(a);return m?g.reverse():g},t.tickFormat=(l,s)=>{if(l==null&&(l=10),s==null&&(s=n===10?"s":","),typeof s!="function"&&(!(n%1)&&(s=Vt(s)).precision==null&&(s.trim=!0),s=kt(s)),l===1/0)return s;let u=Math.max(1,n*l/t.ticks().length);return c=>{let m=c/a(Math.round(o(c)));return m*n<n-.5&&(m*=n),m<=u?s(c):""}},t.nice=()=>r(So(r(),{floor:l=>a(Math.floor(o(l))),ceil:l=>a(Math.ceil(o(l)))})),t}function _o(){let e=Mx(vo()).domain([1,10]);return e.copy=()=>Jt(e,_o()).base(e.base()),at.apply(e,arguments),e}function nf(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Tx(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Vx(e){return e<0?-e*e:e*e}function kx(e){var t=e(Ye,Ye),r=1;function n(){return r===1?e(Ye,Ye):r===.5?e(Tx,Vx):e(nf(r),nf(1/r))}return t.exponent=function(o){return arguments.length?(r=+o,n()):r},Rr(t)}function Ao(){var e=kx(vo());return e.copy=function(){return Jt(e,Ao()).exponent(e.exponent())},at.apply(e,arguments),e}var ys=new Date,bs=new Date;function te(e,t,r,n){function o(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return o.floor=a=>(e(a=new Date(+a)),a),o.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),o.round=a=>{let i=o(a),l=o.ceil(a);return a-i<l-a?i:l},o.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),o.range=(a,i,l)=>{let s=[];if(a=o.ceil(a),l=l==null?1:Math.floor(l),!(a<i)||!(l>0))return s;let u;do s.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<i);return s},o.filter=a=>te(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!a(i););else for(;--l>=0;)for(;t(i,1),!a(i););}),r&&(o.count=(a,i)=>(ys.setTime(+a),bs.setTime(+i),e(ys),e(bs),Math.floor(r(ys,bs))),o.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?o.filter(n?i=>n(i)%a===0:i=>o.count(0,i)%a===0):o)),o}var ht=te(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ht.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?te(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):ht);var of=ht.range;var Dt=te(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),af=Dt.range;var Tn=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),Dx=Tn.range,Ha=te(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),Nx=Ha.range;var Vn=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),Ex=Vn.range,Ya=te(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),Px=Ya.range;var gt=te(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),Lx=gt.range,Hr=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),zx=Hr.range,Wa=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),Bx=Wa.range;function Yr(e){return te(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var $t=Yr(0),kn=Yr(1),sf=Yr(2),uf=Yr(3),Zt=Yr(4),cf=Yr(5),ff=Yr(6),mf=$t.range,Ox=kn.range,Ix=sf.range,Rx=uf.range,Fx=Zt.range,$x=cf.range,Hx=ff.range;function Wr(e){return te(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/6048e5)}var qr=Wr(0),Dn=Wr(1),df=Wr(2),pf=Wr(3),er=Wr(4),hf=Wr(5),gf=Wr(6),xf=qr.range,Yx=Dn.range,Wx=df.range,qx=pf.range,Gx=er.range,Ux=hf.range,Xx=gf.range;var Nn=te(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),jx=Nn.range,qa=te(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),Qx=qa.range;var Je=te(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Je.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});var Kx=Je.range,xt=te(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});var Jx=xt.range;function bf(e,t,r,n,o,a){let i=[[Dt,1,1e3],[Dt,5,5*1e3],[Dt,15,15*1e3],[Dt,30,30*1e3],[a,1,6e4],[a,5,5*6e4],[a,15,15*6e4],[a,30,30*6e4],[o,1,36e5],[o,3,3*36e5],[o,6,6*36e5],[o,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function l(u,c,m){let f=c<u;f&&([u,c]=[c,u]);let d=m&&typeof m.range=="function"?m:s(u,c,m),p=d?d.range(u,+c+1):[];return f?p.reverse():p}function s(u,c,m){let f=Math.abs(c-u)/m,d=Er(([,,x])=>x).right(i,f);if(d===i.length)return e.every(Sn(u/31536e6,c/31536e6,m));if(d===0)return ht.every(Math.max(Sn(u,c,m),1));let[p,h]=i[f/i[d-1][2]<i[d][2]/f?d-1:d];return p.every(h)}return[l,s]}var[ey,ty]=bf(xt,qa,qr,Wa,Ya,Ha),[vs,ws]=bf(Je,Nn,$t,gt,Vn,Tn);function Ss(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function _s(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mo(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function As(e){var t=e.dateTime,r=e.date,n=e.time,o=e.periods,a=e.days,i=e.shortDays,l=e.months,s=e.shortMonths,u=To(o),c=Vo(o),m=To(a),f=Vo(a),d=To(i),p=Vo(i),h=To(l),x=Vo(l),g=To(s),S=Vo(s),A={a:T,A:C,b:B,B:L,c:null,d:Cf,e:Cf,f:Ay,g:Ly,G:By,H:wy,I:Sy,j:_y,L:Df,m:Cy,M:My,p:W,q,Q:Vf,s:kf,S:Ty,u:Vy,U:ky,V:Dy,w:Ny,W:Ey,x:null,X:null,y:Py,Y:zy,Z:Oy,"%":Tf},v={a:D,A:O,b:G,B:X,c:null,d:Mf,e:Mf,f:$y,g:Ky,G:Zy,H:Iy,I:Ry,j:Fy,L:Ef,m:Hy,M:Yy,p:J,q:ue,Q:Vf,s:kf,S:Wy,u:qy,U:Gy,V:Uy,w:Xy,W:jy,x:null,X:null,y:Qy,Y:Jy,Z:eb,"%":Tf},b={a:R,A:N,b:Y,B:E,c:w,d:_f,e:_f,f:xy,g:Sf,G:wf,H:Af,I:Af,j:dy,L:gy,m:my,M:py,p:F,q:fy,Q:by,s:vy,S:hy,u:iy,U:ly,V:sy,w:ay,W:uy,x:k,X:_,y:Sf,Y:wf,Z:cy,"%":yy};A.x=y(r,A),A.X=y(n,A),A.c=y(t,A),v.x=y(r,v),v.X=y(n,v),v.c=y(t,v);function y($,j){return function(K){var I=[],Re=-1,ne=0,Qe=$.length,Ke,Nr,hc;for(K instanceof Date||(K=new Date(+K));++Re<Qe;)$.charCodeAt(Re)===37&&(I.push($.slice(ne,Re)),(Nr=vf[Ke=$.charAt(++Re)])!=null?Ke=$.charAt(++Re):Nr=Ke==="e"?" ":"0",(hc=j[Ke])&&(Ke=hc(K,Nr)),I.push(Ke),ne=Re+1);return I.push($.slice(ne,Re)),I.join("")}}function M($,j){return function(K){var I=Mo(1900,void 0,1),Re=V(I,$,K+="",0),ne,Qe;if(Re!=K.length)return null;if("Q"in I)return new Date(I.Q);if("s"in I)return new Date(I.s*1e3+("L"in I?I.L:0));if(j&&!("Z"in I)&&(I.Z=0),"p"in I&&(I.H=I.H%12+I.p*12),I.m===void 0&&(I.m="q"in I?I.q:0),"V"in I){if(I.V<1||I.V>53)return null;"w"in I||(I.w=1),"Z"in I?(ne=_s(Mo(I.y,0,1)),Qe=ne.getUTCDay(),ne=Qe>4||Qe===0?Dn.ceil(ne):Dn(ne),ne=Hr.offset(ne,(I.V-1)*7),I.y=ne.getUTCFullYear(),I.m=ne.getUTCMonth(),I.d=ne.getUTCDate()+(I.w+6)%7):(ne=Ss(Mo(I.y,0,1)),Qe=ne.getDay(),ne=Qe>4||Qe===0?kn.ceil(ne):kn(ne),ne=gt.offset(ne,(I.V-1)*7),I.y=ne.getFullYear(),I.m=ne.getMonth(),I.d=ne.getDate()+(I.w+6)%7)}else("W"in I||"U"in I)&&("w"in I||(I.w="u"in I?I.u%7:"W"in I?1:0),Qe="Z"in I?_s(Mo(I.y,0,1)).getUTCDay():Ss(Mo(I.y,0,1)).getDay(),I.m=0,I.d="W"in I?(I.w+6)%7+I.W*7-(Qe+5)%7:I.w+I.U*7-(Qe+6)%7);return"Z"in I?(I.H+=I.Z/100|0,I.M+=I.Z%100,_s(I)):Ss(I)}}function V($,j,K,I){for(var Re=0,ne=j.length,Qe=K.length,Ke,Nr;Re<ne;){if(I>=Qe)return-1;if(Ke=j.charCodeAt(Re++),Ke===37){if(Ke=j.charAt(Re++),Nr=b[Ke in vf?j.charAt(Re++):Ke],!Nr||(I=Nr($,K,I))<0)return-1}else if(Ke!=K.charCodeAt(I++))return-1}return I}function F($,j,K){var I=u.exec(j.slice(K));return I?($.p=c.get(I[0].toLowerCase()),K+I[0].length):-1}function R($,j,K){var I=d.exec(j.slice(K));return I?($.w=p.get(I[0].toLowerCase()),K+I[0].length):-1}function N($,j,K){var I=m.exec(j.slice(K));return I?($.w=f.get(I[0].toLowerCase()),K+I[0].length):-1}function Y($,j,K){var I=g.exec(j.slice(K));return I?($.m=S.get(I[0].toLowerCase()),K+I[0].length):-1}function E($,j,K){var I=h.exec(j.slice(K));return I?($.m=x.get(I[0].toLowerCase()),K+I[0].length):-1}function w($,j,K){return V($,t,j,K)}function k($,j,K){return V($,r,j,K)}function _($,j,K){return V($,n,j,K)}function T($){return i[$.getDay()]}function C($){return a[$.getDay()]}function B($){return s[$.getMonth()]}function L($){return l[$.getMonth()]}function W($){return o[+($.getHours()>=12)]}function q($){return 1+~~($.getMonth()/3)}function D($){return i[$.getUTCDay()]}function O($){return a[$.getUTCDay()]}function G($){return s[$.getUTCMonth()]}function X($){return l[$.getUTCMonth()]}function J($){return o[+($.getUTCHours()>=12)]}function ue($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var j=y($+="",A);return j.toString=function(){return $},j},parse:function($){var j=M($+="",!1);return j.toString=function(){return $},j},utcFormat:function($){var j=y($+="",v);return j.toString=function(){return $},j},utcParse:function($){var j=M($+="",!0);return j.toString=function(){return $},j}}}var vf={"-":"",_:" ",0:"0"},ve=/^\s*\d+/,ry=/^%/,ny=/[\\^$*+?|[\]().{}]/g;function ee(e,t,r){var n=e<0?"-":"",o=(n?-e:e)+"",a=o.length;return n+(a<r?new Array(r-a+1).join(t)+o:o)}function oy(e){return e.replace(ny,"\\$&")}function To(e){return new RegExp("^(?:"+e.map(oy).join("|")+")","i")}function Vo(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function ay(e,t,r){var n=ve.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function iy(e,t,r){var n=ve.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ly(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function sy(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function uy(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function wf(e,t,r){var n=ve.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Sf(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cy(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function fy(e,t,r){var n=ve.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function my(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function _f(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function dy(e,t,r){var n=ve.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Af(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function py(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function hy(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function gy(e,t,r){var n=ve.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function xy(e,t,r){var n=ve.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function yy(e,t,r){var n=ry.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function by(e,t,r){var n=ve.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function vy(e,t,r){var n=ve.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Cf(e,t){return ee(e.getDate(),t,2)}function wy(e,t){return ee(e.getHours(),t,2)}function Sy(e,t){return ee(e.getHours()%12||12,t,2)}function _y(e,t){return ee(1+gt.count(Je(e),e),t,3)}function Df(e,t){return ee(e.getMilliseconds(),t,3)}function Ay(e,t){return Df(e,t)+"000"}function Cy(e,t){return ee(e.getMonth()+1,t,2)}function My(e,t){return ee(e.getMinutes(),t,2)}function Ty(e,t){return ee(e.getSeconds(),t,2)}function Vy(e){var t=e.getDay();return t===0?7:t}function ky(e,t){return ee($t.count(Je(e)-1,e),t,2)}function Nf(e){var t=e.getDay();return t>=4||t===0?Zt(e):Zt.ceil(e)}function Dy(e,t){return e=Nf(e),ee(Zt.count(Je(e),e)+(Je(e).getDay()===4),t,2)}function Ny(e){return e.getDay()}function Ey(e,t){return ee(kn.count(Je(e)-1,e),t,2)}function Py(e,t){return ee(e.getFullYear()%100,t,2)}function Ly(e,t){return e=Nf(e),ee(e.getFullYear()%100,t,2)}function zy(e,t){return ee(e.getFullYear()%1e4,t,4)}function By(e,t){var r=e.getDay();return e=r>=4||r===0?Zt(e):Zt.ceil(e),ee(e.getFullYear()%1e4,t,4)}function Oy(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ee(t/60|0,"0",2)+ee(t%60,"0",2)}function Mf(e,t){return ee(e.getUTCDate(),t,2)}function Iy(e,t){return ee(e.getUTCHours(),t,2)}function Ry(e,t){return ee(e.getUTCHours()%12||12,t,2)}function Fy(e,t){return ee(1+Hr.count(xt(e),e),t,3)}function Ef(e,t){return ee(e.getUTCMilliseconds(),t,3)}function $y(e,t){return Ef(e,t)+"000"}function Hy(e,t){return ee(e.getUTCMonth()+1,t,2)}function Yy(e,t){return ee(e.getUTCMinutes(),t,2)}function Wy(e,t){return ee(e.getUTCSeconds(),t,2)}function qy(e){var t=e.getUTCDay();return t===0?7:t}function Gy(e,t){return ee(qr.count(xt(e)-1,e),t,2)}function Pf(e){var t=e.getUTCDay();return t>=4||t===0?er(e):er.ceil(e)}function Uy(e,t){return e=Pf(e),ee(er.count(xt(e),e)+(xt(e).getUTCDay()===4),t,2)}function Xy(e){return e.getUTCDay()}function jy(e,t){return ee(Dn.count(xt(e)-1,e),t,2)}function Qy(e,t){return ee(e.getUTCFullYear()%100,t,2)}function Ky(e,t){return e=Pf(e),ee(e.getUTCFullYear()%100,t,2)}function Jy(e,t){return ee(e.getUTCFullYear()%1e4,t,4)}function Zy(e,t){var r=e.getUTCDay();return e=r>=4||r===0?er(e):er.ceil(e),ee(e.getUTCFullYear()%1e4,t,4)}function eb(){return"+0000"}function Tf(){return"%"}function Vf(e){return+e}function kf(e){return Math.floor(+e/1e3)}var En,Ga,Lf,zf,Bf;Cs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Cs(e){return En=As(e),Ga=En.format,Lf=En.parse,zf=En.utcFormat,Bf=En.utcParse,En}function tb(e){return new Date(e)}function rb(e){return e instanceof Date?+e:+new Date(+e)}function Of(e,t,r,n,o,a,i,l,s,u){var c=wo(),m=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),h=u("%I:%M"),x=u("%I %p"),g=u("%a %d"),S=u("%b %d"),A=u("%B"),v=u("%Y");function b(y){return(s(y)<y?d:l(y)<y?p:i(y)<y?h:a(y)<y?x:n(y)<y?o(y)<y?g:S:r(y)<y?A:v)(y)}return c.invert=function(y){return new Date(m(y))},c.domain=function(y){return arguments.length?f(Array.from(y,rb)):f().map(tb)},c.ticks=function(y){var M=f();return e(M[0],M[M.length-1],y??10)},c.tickFormat=function(y,M){return M==null?b:u(M)},c.nice=function(y){var M=f();return(!y||typeof y.range!="function")&&(y=t(M[0],M[M.length-1],y??10)),y?f(So(M,y)):c},c.copy=function(){return Jt(c,Of(e,t,r,n,o,a,i,l,s,u))},c}function Pn(){return at.apply(Of(vs,ws,Je,Nn,$t,gt,Vn,Tn,Dt,Ga).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nb(){var e=0,t=1,r,n,o,a,i=Ye,l=!1,s;function u(m){return m==null||isNaN(m=+m)?s:i(o===0?.5:(m=(a(m)-r)*o,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=a(e=+e),n=a(t=+t),o=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(i=m,u):i};function c(m){return function(f){var d,p;return arguments.length?([d,p]=f,i=m(d,p),u):[i(0),i(1)]}}return u.range=c(Ve),u.rangeRound=c(bo),u.unknown=function(m){return arguments.length?(s=m,u):s},function(m){return a=m,r=m(e),n=m(t),o=r===n?0:1/(n-r),u}}function ob(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ko(){var e=Rr(nb()(Ye));return e.copy=function(){return ob(e,ko())},vc.apply(e,arguments)}var Ua=(e,t,r,n,o)=>{let a={};return a.getTimeComponentArrayFromString=i=>[i.slice(0,2),i.slice(3,5),i.slice(6,8),i.slice(9,12)],a.getTimeString=i=>{let[l,s,u,c]=r(i).map(m=>m.toString(10).padStart(2,"0"));return`${l}:${s}:${u}.${c.padStart(3,"0")}`},a.setTime=(i,l,s=0)=>{let[u,c,m,f]=a.getTimeComponentArrayFromString(l);return o.offset(e(i,u,c,m,f),s)},a.getStartOfNextDay=i=>n.offset(n.floor(i),1),a.getEndOfPreviousDay=i=>o.offset(n.floor(i),-1),a.dayInterval=n,a.msInterval=o,a.getDay=t,a};var nC=Ua((e,t,r,n,o)=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,r,n,o),e=>e.getDay(),e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],gt,ht);var uC=Ua((e,t,r,n,o)=>new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t,r,n,o)),e=>e.getUTCDay(),e=>[e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()],Hr,ht);function Do(){let e=[i=>i],t=[0,0],r="percent",n=null,o=[],a=i=>{let l=new Array(i.length);for(let u of e)for(let c=0;c<i.length;c++){let m=u(i[c],c);Array.isArray(m)?l.push(...m):l.push(m)}let s=[Fe(l),ot(l)];if(s[0]=s[0]==null?Fe(o):Fe([s[0],...o]),s[1]=s[1]==null?ot(o):ot([s[1],...o]),n!=null){let u=Math.max(Math.abs(s[1]-n),Math.abs(s[0]-n));s[0]=n-u,s[1]=n+u}switch(r){case"domain":{s[0]-=t[0],s[1]+=t[1];break}case"percent":{let u=s[1]-s[0];s[0]-=t[0]*u,s[1]+=t[1]*u;break}default:throw new Error(`Unknown padUnit: ${r}`)}return s};return a.accessors=(...i)=>i.length?(e=i[0],a):e,a.pad=(...i)=>i.length?(t=i[0],a):t,a.padUnit=(...i)=>i.length?(r=i[0],a):r,a.include=(...i)=>i.length?(o=i[0],a):o,a.symmetricalAbout=(...i)=>i.length?(n=i[0],a):n,a}function No(){let e=[],t=[0,0],r="percent",n=null,o=[],a=Do(),i=s=>s!=null?s.valueOf():null,l=s=>{let u=e.map(c=>(...m)=>{let f=c(...m);return Array.isArray(f)?f.map(i):i(f)});return a.accessors(u).pad(t).padUnit(r).symmetricalAbout(n!=null?n.valueOf():null).include(o.map(c=>c.valueOf())),a(s).map(c=>new Date(c))};return l.accessors=(...s)=>s.length?(e=s[0],l):e,l.pad=(...s)=>s.length?(t=s[0],l):t,l.padUnit=(...s)=>s.length?(r=s[0],l):r,l.include=(...s)=>s.length?(o=s[0],l):o,l.symmetricalAbout=(...s)=>s.length?(n=s[0],l):n,l}var Ts=Math.PI,Vs=2*Ts,Gr=1e-6,lb=Vs-Gr;function Ff(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function sb(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ff;let r=10**t;return function(n){this._+=n[0];for(let o=1,a=n.length;o<a;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var Ur=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ff:sb(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,o){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,r,n,o,a,i){this._append`C${+t},${+r},${+n},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,o,a){if(t=+t,r=+r,n=+n,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,l=this._y1,s=n-t,u=o-r,c=i-t,m=l-r,f=c*c+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Gr)if(!(Math.abs(m*s-u*c)>Gr)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let d=n-i,p=o-l,h=s*s+u*u,x=d*d+p*p,g=Math.sqrt(h),S=Math.sqrt(f),A=a*Math.tan((Ts-Math.acos((h+f-x)/(2*g*S)))/2),v=A/S,b=A/g;Math.abs(v-1)>Gr&&this._append`L${t+v*c},${r+v*m}`,this._append`A${a},${a},0,0,${+(m*d>c*p)},${this._x1=t+b*s},${this._y1=r+b*u}`}}arc(t,r,n,o,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(o),s=n*Math.sin(o),u=t+l,c=r+s,m=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Gr||Math.abs(this._y1-c)>Gr)&&this._append`L${u},${c}`,n&&(f<0&&(f=f%Vs+Vs),f>lb?this._append`A${n},${n},0,1,${m},${t-l},${r-s}A${n},${n},0,1,${m},${this._x1=u},${this._y1=c}`:f>Gr&&this._append`A${n},${n},0,${+(f>=Ts)},${m},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function tr(){return new Ur}tr.prototype=Ur.prototype;var ce=e=>typeof e=="function"?e:()=>e;var Xa=()=>{let e=null,t=u=>u.date,r=u=>u.open,n=u=>u.high,o=u=>u.low,a=u=>u.close,i="vertical",l=ce(3),s=function(u){let c=e||tr();return u.forEach(function(m,f){let d=t(m,f),p=r(m,f),h=n(m,f),x=o(m,f),g=a(m,f),S=l(m,f)/2;i==="vertical"?(c.moveTo(d,x),c.lineTo(d,h),c.moveTo(d,p),c.lineTo(d-S,p),c.moveTo(d,g),c.lineTo(d+S,g)):(c.moveTo(x,d),c.lineTo(h,d),c.moveTo(p,d),c.lineTo(p,d+S),c.moveTo(g,d),c.lineTo(g,d-S))}),e?null:c.toString()};return s.context=(...u)=>u.length?(e=u[0],s):e,s.x=(...u)=>u.length?(t=ce(u[0]),s):t,s.open=(...u)=>u.length?(r=ce(u[0]),s):r,s.high=(...u)=>u.length?(n=ce(u[0]),s):n,s.low=(...u)=>u.length?(o=ce(u[0]),s):o,s.close=(...u)=>u.length?(a=ce(u[0]),s):a,s.width=(...u)=>u.length?(l=ce(u[0]),s):l,s.orient=(...u)=>u.length?(i=u[0],s):i,s};var rr=()=>{let e=null,t=s=>s.x,r=s=>s.y,n="center",o="center",a=s=>s.height,i=ce(3),l=function(s,u){let c=e||tr();return s.forEach(function(m,f){let d=t.call(this,m,u||f),p=r.call(this,m,u||f),h=a.call(this,m,u||f),x=i.call(this,m,u||f),g;switch(n){case"left":g=x;break;case"right":g=0;break;case"center":g=x/2;break;default:throw new Error("Invalid horizontal alignment "+n)}let S;switch(o){case"bottom":S=-h;break;case"top":S=0;break;case"center":S=h/2;break;default:throw new Error("Invalid vertical alignment "+o)}c.rect(d-g,p-S,x,h)},this),e?null:c.toString()};return l.context=(...s)=>s.length?(e=s[0],l):e,l.x=(...s)=>s.length?(t=ce(s[0]),l):t,l.y=(...s)=>s.length?(r=ce(s[0]),l):r,l.width=(...s)=>s.length?(i=ce(s[0]),l):i,l.horizontalAlign=(...s)=>s.length?(n=s[0],l):n,l.height=(...s)=>s.length?(a=ce(s[0]),l):a,l.verticalAlign=(...s)=>s.length?(o=s[0],l):o,l};var ja=()=>{let e=null,t=s=>s.date,r=s=>s.open,n=s=>s.high,o=s=>s.low,a=s=>s.close,i=ce(3),l=function(s){let u=e||tr();return s.forEach(function(c,m){let f=t(c,m),d=r(c,m),p=n(c,m),h=o(c,m),x=a(c,m),g=i(c,m),S=g/2;u.rect(f-S,d,g,x-d),u.moveTo(f,Math.min(x,d)),u.lineTo(f,p),u.moveTo(f,Math.max(x,d)),u.lineTo(f,h)}),e?null:u.toString()};return l.context=(...s)=>s.length?(e=s[0],l):e,l.x=(...s)=>s.length?(t=ce(s[0]),l):t,l.open=(...s)=>s.length?(r=ce(s[0]),l):r,l.high=(...s)=>s.length?(n=ce(s[0]),l):n,l.low=(...s)=>s.length?(o=ce(s[0]),l):o,l.close=(...s)=>s.length?(a=ce(s[0]),l):a,l.width=(...s)=>s.length?(i=ce(s[0]),l):i,l};var Qa="http://www.w3.org/1999/xhtml",ks={svg:"http://www.w3.org/2000/svg",xhtml:Qa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ht(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),ks.hasOwnProperty(t)?{space:ks[t],local:e}:e}function ub(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Qa&&t.documentElement.namespaceURI===Qa?t.createElement(e):t.createElementNS(r,e)}}function cb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ka(e){var t=Ht(e);return(t.local?cb:ub)(t)}function fb(){}function Xr(e){return e==null?fb:function(){return this.querySelector(e)}}function Yf(e){typeof e!="function"&&(e=Xr(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=new Array(i),s,u,c=0;c<i;++c)(s=a[c])&&(u=e.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new ie(n,this._parents)}function Eo(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mb(){return[]}function Po(e){return e==null?mb:function(){return this.querySelectorAll(e)}}function db(e){return function(){return Eo(e.apply(this,arguments))}}function Wf(e){typeof e=="function"?e=db(e):e=Po(e);for(var t=this._groups,r=t.length,n=[],o=[],a=0;a<r;++a)for(var i=t[a],l=i.length,s,u=0;u<l;++u)(s=i[u])&&(n.push(e.call(s,s.__data__,u,i)),o.push(s));return new ie(n,o)}function Lo(e){return function(){return this.matches(e)}}function Ja(e){return function(t){return t.matches(e)}}var pb=Array.prototype.find;function hb(e){return function(){return pb.call(this.children,e)}}function gb(){return this.firstElementChild}function qf(e){return this.select(e==null?gb:hb(typeof e=="function"?e:Ja(e)))}var xb=Array.prototype.filter;function yb(){return Array.from(this.children)}function bb(e){return function(){return xb.call(this.children,e)}}function Gf(e){return this.selectAll(e==null?yb:bb(typeof e=="function"?e:Ja(e)))}function Uf(e){typeof e!="function"&&(e=Lo(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=[],s,u=0;u<i;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new ie(n,this._parents)}function Za(e){return new Array(e.length)}function Xf(){return new ie(this._enter||this._groups.map(Za),this._parents)}function zo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zo.prototype={constructor:zo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jf(e){return function(){return e}}function vb(e,t,r,n,o,a){for(var i=0,l,s=t.length,u=a.length;i<u;++i)(l=t[i])?(l.__data__=a[i],n[i]=l):r[i]=new zo(e,a[i]);for(;i<s;++i)(l=t[i])&&(o[i]=l)}function wb(e,t,r,n,o,a,i){var l,s,u=new Map,c=t.length,m=a.length,f=new Array(c),d;for(l=0;l<c;++l)(s=t[l])&&(f[l]=d=i.call(s,s.__data__,l,t)+"",u.has(d)?o[l]=s:u.set(d,s));for(l=0;l<m;++l)d=i.call(e,a[l],l,a)+"",(s=u.get(d))?(n[l]=s,s.__data__=a[l],u.delete(d)):r[l]=new zo(e,a[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(f[l])===s&&(o[l]=s)}function Sb(e){return e.__data__}function Qf(e,t){if(!arguments.length)return Array.from(this,Sb);var r=t?wb:vb,n=this._parents,o=this._groups;typeof e!="function"&&(e=jf(e));for(var a=o.length,i=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=n[u],m=o[u],f=m.length,d=_b(e.call(c,c&&c.__data__,u,n)),p=d.length,h=l[u]=new Array(p),x=i[u]=new Array(p),g=s[u]=new Array(f);r(c,m,h,x,g,d,t);for(var S=0,A=0,v,b;S<p;++S)if(v=h[S]){for(S>=A&&(A=S+1);!(b=x[A])&&++A<p;);v._next=b||null}}return i=new ie(i,n),i._enter=l,i._exit=s,i}function _b(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Kf(){return new ie(this._exit||this._groups.map(Za),this._parents)}function Jf(e,t,r){var n=this.enter(),o=this,a=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?a.remove():r(a),n&&o?n.merge(o).order():o}function Zf(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,a=n.length,i=Math.min(o,a),l=new Array(o),s=0;s<i;++s)for(var u=r[s],c=n[s],m=u.length,f=l[s]=new Array(m),d,p=0;p<m;++p)(d=u[p]||c[p])&&(f[p]=d);for(;s<o;++s)l[s]=r[s];return new ie(l,this._parents)}function em(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,a=n[o],i;--o>=0;)(i=n[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function tm(e){e||(e=Ab);function t(m,f){return m&&f?e(m.__data__,f.__data__):!m-!f}for(var r=this._groups,n=r.length,o=new Array(n),a=0;a<n;++a){for(var i=r[a],l=i.length,s=o[a]=new Array(l),u,c=0;c<l;++c)(u=i[c])&&(s[c]=u);s.sort(t)}return new ie(o,this._parents).order()}function Ab(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function nm(){return Array.from(this)}function om(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,a=n.length;o<a;++o){var i=n[o];if(i)return i}return null}function am(){let e=0;for(let t of this)++e;return e}function im(){return!this.node()}function lm(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],a=0,i=o.length,l;a<i;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function Cb(e){return function(){this.removeAttribute(e)}}function Mb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tb(e,t){return function(){this.setAttribute(e,t)}}function Vb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function kb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Db(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function sm(e,t){var r=Ht(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Mb:Cb:typeof t=="function"?r.local?Db:kb:r.local?Vb:Tb)(r,t))}function ei(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nb(e){return function(){this.style.removeProperty(e)}}function Eb(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Pb(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function um(e,t,r){return arguments.length>1?this.each((t==null?Nb:typeof t=="function"?Pb:Eb)(e,t,r??"")):nr(this.node(),e)}function nr(e,t){return e.style.getPropertyValue(t)||ei(e).getComputedStyle(e,null).getPropertyValue(t)}function Lb(e){return function(){delete this[e]}}function zb(e,t){return function(){this[e]=t}}function Bb(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function cm(e,t){return arguments.length>1?this.each((t==null?Lb:typeof t=="function"?Bb:zb)(e,t)):this.node()[e]}function fm(e){return e.trim().split(/^|\s+/)}function Ds(e){return e.classList||new mm(e)}function mm(e){this._node=e,this._names=fm(e.getAttribute("class")||"")}mm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dm(e,t){for(var r=Ds(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function pm(e,t){for(var r=Ds(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function Ob(e){return function(){dm(this,e)}}function Ib(e){return function(){pm(this,e)}}function Rb(e,t){return function(){(t.apply(this,arguments)?dm:pm)(this,e)}}function hm(e,t){var r=fm(e+"");if(arguments.length<2){for(var n=Ds(this.node()),o=-1,a=r.length;++o<a;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?Rb:t?Ob:Ib)(r,t))}function Fb(){this.textContent=""}function $b(e){return function(){this.textContent=e}}function Hb(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gm(e){return arguments.length?this.each(e==null?Fb:(typeof e=="function"?Hb:$b)(e)):this.node().textContent}function Yb(){this.innerHTML=""}function Wb(e){return function(){this.innerHTML=e}}function qb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xm(e){return arguments.length?this.each(e==null?Yb:(typeof e=="function"?qb:Wb)(e)):this.node().innerHTML}function Gb(){this.nextSibling&&this.parentNode.appendChild(this)}function ym(){return this.each(Gb)}function Ub(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bm(){return this.each(Ub)}function vm(e){var t=typeof e=="function"?e:Ka(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Xb(){return null}function wm(e,t){var r=typeof e=="function"?e:Ka(e),n=t==null?Xb:typeof t=="function"?t:Xr(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function jb(){var e=this.parentNode;e&&e.removeChild(this)}function Sm(){return this.each(jb)}function Qb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _m(e){return this.select(e?Kb:Qb)}function Am(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jb(e){return function(t){e.call(this,t,this.__data__)}}function Zb(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function e1(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,a;r<o;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++n]=a;++n?t.length=n:delete this.__on}}}function t1(e,t,r){return function(){var n=this.__on,o,a=Jb(t);if(n){for(var i=0,l=n.length;i<l;++i)if((o=n[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=r),o.value=t;return}}this.addEventListener(e.type,a,r),o={type:e.type,name:e.name,value:t,listener:a,options:r},n?n.push(o):this.__on=[o]}}function Cm(e,t,r){var n=Zb(e+""),o,a=n.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(o=0,c=l[s];o<a;++o)if((i=n[o]).type===c.type&&i.name===c.name)return c.value}return}for(l=t?t1:e1,o=0;o<a;++o)this.each(l(n[o],t,r));return this}function Mm(e,t,r){var n=ei(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function r1(e,t){return function(){return Mm(this,e,t)}}function n1(e,t){return function(){return Mm(this,e,t.apply(this,arguments))}}function Tm(e,t){return this.each((typeof t=="function"?n1:r1)(e,t))}function*Vm(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,a=n.length,i;o<a;++o)(i=n[o])&&(yield i)}var Bo=[null];function ie(e,t){this._groups=e,this._parents=t}function km(){return new ie([[document.documentElement]],Bo)}function o1(){return this}ie.prototype=km.prototype={constructor:ie,select:Yf,selectAll:Wf,selectChild:qf,selectChildren:Gf,filter:Uf,data:Qf,enter:Xf,exit:Kf,join:Jf,merge:Zf,selection:o1,order:em,sort:tm,call:rm,nodes:nm,node:om,size:am,empty:im,each:lm,attr:sm,style:um,property:cm,classed:hm,text:gm,html:xm,raise:ym,lower:bm,append:vm,insert:wm,remove:Sm,clone:_m,datum:Am,on:Cm,dispatch:Tm,[Symbol.iterator]:Vm};var yt=km;function P(e){return typeof e=="string"?new ie([[document.querySelector(e)]],[document.documentElement]):new ie([[e]],Bo)}function Dm(e){let t;for(;t=e.sourceEvent;)e=t;return e}function We(e,t){if(e=Dm(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ns(e){return typeof e=="string"?new ie([document.querySelectorAll(e)],[document.documentElement]):new ie([Eo(e)],Bo)}var oe=e=>e.selection()!==e,U=(e,t)=>{e=e||"g";let r=(a,i)=>i,n=null,o=function(a,i){i=i||(p=>p);let l=a.selection(),s=oe(a)?a:null,c=l.selectChildren(t==null?e:`${e}.${t}`).data(i,r),m=c.enter().append(e).attr("class",t),f=c.exit();c=c.merge(m);let d=s||n;return d&&(c=c.transition(d).style("opacity",1),m.style("opacity",1e-6),f=f.transition(d).style("opacity",1e-6)),f.remove(),c.enter=()=>m,c.exit=()=>f,c};return o.element=(...a)=>a.length?(e=a[0],o):e,o.className=(...a)=>a.length?(t=a[0],o):t,o.key=(...a)=>a.length?(r=a[0],o):r,o.transition=(...a)=>a.length?(n=a[0],o):n,o};function Z(e){return function(){return e}}var Es=Math.abs,Ae=Math.atan2,bt=Math.cos,Pm=Math.max,ti=Math.min,De=Math.sin,le=Math.sqrt,Le=1e-12,vt=Math.PI,Oo=vt/2,or=2*vt;function Lm(e){return e>1?0:e<-1?vt:Math.acos(e)}function Ps(e){return e>=1?Oo:e<=-1?-Oo:Math.asin(e)}function ar(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Ur(t)}function s1(e){return e.innerRadius}function u1(e){return e.outerRadius}function c1(e){return e.startAngle}function f1(e){return e.endAngle}function m1(e){return e&&e.padAngle}function d1(e,t,r,n,o,a,i,l){var s=r-e,u=n-t,c=i-o,m=l-a,f=m*s-c*u;if(!(f*f<Le))return f=(c*(t-a)-m*(e-o))/f,[e+f*s,t+f*u]}function ri(e,t,r,n,o,a,i){var l=e-r,s=t-n,u=(i?a:-a)/le(l*l+s*s),c=u*s,m=-u*l,f=e+c,d=t+m,p=r+c,h=n+m,x=(f+p)/2,g=(d+h)/2,S=p-f,A=h-d,v=S*S+A*A,b=o-a,y=f*h-p*d,M=(A<0?-1:1)*le(Pm(0,b*b*v-y*y)),V=(y*A-S*M)/v,F=(-y*S-A*M)/v,R=(y*A+S*M)/v,N=(-y*S+A*M)/v,Y=V-x,E=F-g,w=R-x,k=N-g;return Y*Y+E*E>w*w+k*k&&(V=R,F=N),{cx:V,cy:F,x01:-c,y01:-m,x11:V*(o/b-1),y11:F*(o/b-1)}}function Ls(){var e=s1,t=u1,r=Z(0),n=null,o=c1,a=f1,i=m1,l=null,s=ar(u);function u(){var c,m,f=+e.apply(this,arguments),d=+t.apply(this,arguments),p=o.apply(this,arguments)-Oo,h=a.apply(this,arguments)-Oo,x=Es(h-p),g=h>p;if(l||(l=c=s()),d<f&&(m=d,d=f,f=m),!(d>Le))l.moveTo(0,0);else if(x>or-Le)l.moveTo(d*bt(p),d*De(p)),l.arc(0,0,d,p,h,!g),f>Le&&(l.moveTo(f*bt(h),f*De(h)),l.arc(0,0,f,h,p,g));else{var S=p,A=h,v=p,b=h,y=x,M=x,V=i.apply(this,arguments)/2,F=V>Le&&(n?+n.apply(this,arguments):le(f*f+d*d)),R=ti(Es(d-f)/2,+r.apply(this,arguments)),N=R,Y=R,E,w;if(F>Le){var k=Ps(F/f*De(V)),_=Ps(F/d*De(V));(y-=k*2)>Le?(k*=g?1:-1,v+=k,b-=k):(y=0,v=b=(p+h)/2),(M-=_*2)>Le?(_*=g?1:-1,S+=_,A-=_):(M=0,S=A=(p+h)/2)}var T=d*bt(S),C=d*De(S),B=f*bt(b),L=f*De(b);if(R>Le){var W=d*bt(A),q=d*De(A),D=f*bt(v),O=f*De(v),G;if(x<vt)if(G=d1(T,C,D,O,W,q,B,L)){var X=T-G[0],J=C-G[1],ue=W-G[0],$=q-G[1],j=1/De(Lm((X*ue+J*$)/(le(X*X+J*J)*le(ue*ue+$*$)))/2),K=le(G[0]*G[0]+G[1]*G[1]);N=ti(R,(f-K)/(j-1)),Y=ti(R,(d-K)/(j+1))}else N=Y=0}M>Le?Y>Le?(E=ri(D,O,T,C,d,Y,g),w=ri(W,q,B,L,d,Y,g),l.moveTo(E.cx+E.x01,E.cy+E.y01),Y<R?l.arc(E.cx,E.cy,Y,Ae(E.y01,E.x01),Ae(w.y01,w.x01),!g):(l.arc(E.cx,E.cy,Y,Ae(E.y01,E.x01),Ae(E.y11,E.x11),!g),l.arc(0,0,d,Ae(E.cy+E.y11,E.cx+E.x11),Ae(w.cy+w.y11,w.cx+w.x11),!g),l.arc(w.cx,w.cy,Y,Ae(w.y11,w.x11),Ae(w.y01,w.x01),!g))):(l.moveTo(T,C),l.arc(0,0,d,S,A,!g)):l.moveTo(T,C),!(f>Le)||!(y>Le)?l.lineTo(B,L):N>Le?(E=ri(B,L,W,q,f,-N,g),w=ri(T,C,D,O,f,-N,g),l.lineTo(E.cx+E.x01,E.cy+E.y01),N<R?l.arc(E.cx,E.cy,N,Ae(E.y01,E.x01),Ae(w.y01,w.x01),!g):(l.arc(E.cx,E.cy,N,Ae(E.y01,E.x01),Ae(E.y11,E.x11),!g),l.arc(0,0,f,Ae(E.cy+E.y11,E.cx+E.x11),Ae(w.cy+w.y11,w.cx+w.x11),g),l.arc(w.cx,w.cy,N,Ae(w.y11,w.x11),Ae(w.y01,w.x01),!g))):l.arc(0,0,f,b,v,g)}if(l.closePath(),c)return l=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,m=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-vt/2;return[bt(m)*c,De(m)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Z(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Z(+c),u):t},u.cornerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:Z(+c),u):r},u.padRadius=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Z(+c),u):n},u.startAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Z(+c),u):o},u.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Z(+c),u):a},u.padAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Z(+c),u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}var t7=Array.prototype.slice;function ni(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zm(e){this._context=e}zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function oi(e){return new zm(e)}function ai(e){return e[0]}function ii(e){return e[1]}function Ze(e,t){var r=Z(!0),n=null,o=oi,a=null,i=ar(l);e=typeof e=="function"?e:e===void 0?ai:Z(e),t=typeof t=="function"?t:t===void 0?ii:Z(t);function l(s){var u,c=(s=ni(s)).length,m,f=!1,d;for(n==null&&(a=o(d=i())),u=0;u<=c;++u)!(u<c&&r(m=s[u],u,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(m,u,s),+t(m,u,s));if(d)return a=null,d+""||null}return l.x=function(s){return arguments.length?(e=typeof s=="function"?s:Z(+s),l):e},l.y=function(s){return arguments.length?(t=typeof s=="function"?s:Z(+s),l):t},l.defined=function(s){return arguments.length?(r=typeof s=="function"?s:Z(!!s),l):r},l.curve=function(s){return arguments.length?(o=s,n!=null&&(a=o(n)),l):o},l.context=function(s){return arguments.length?(s==null?n=a=null:a=o(n=s),l):n},l}function Io(e,t,r){var n=null,o=Z(!0),a=null,i=oi,l=null,s=ar(u);e=typeof e=="function"?e:e===void 0?ai:Z(+e),t=typeof t=="function"?t:t===void 0?Z(0):Z(+t),r=typeof r=="function"?r:r===void 0?ii:Z(+r);function u(m){var f,d,p,h=(m=ni(m)).length,x,g=!1,S,A=new Array(h),v=new Array(h);for(a==null&&(l=i(S=s())),f=0;f<=h;++f){if(!(f<h&&o(x=m[f],f,m))===g)if(g=!g)d=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=d;--p)l.point(A[p],v[p]);l.lineEnd(),l.areaEnd()}g&&(A[f]=+e(x,f,m),v[f]=+t(x,f,m),l.point(n?+n(x,f,m):A[f],r?+r(x,f,m):v[f]))}if(S)return l=null,S+""||null}function c(){return Ze().defined(o).curve(i).context(a)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:Z(+m),n=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Z(+m),u):e},u.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Z(+m),u):n},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:Z(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Z(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Z(+m),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(n).y(t)},u.defined=function(m){return arguments.length?(o=typeof m=="function"?m:Z(!!m),u):o},u.curve=function(m){return arguments.length?(i=m,a!=null&&(l=i(a)),u):i},u.context=function(m){return arguments.length?(m==null?a=l=null:l=i(a=m),u):a},u}var ir={draw(e,t){let r=le(t/vt);e.moveTo(r,0),e.arc(0,0,r,0,or)}};var li={draw(e,t){let r=le(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}};var Bm=le(1/3),p1=Bm*2,si={draw(e,t){let r=le(t/p1),n=r*Bm;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}};var ui={draw(e,t){let r=le(t),n=-r/2;e.rect(n,n,r,r)}};var h1=.8908130915292852,Om=De(vt/10)/De(7*vt/10),g1=De(or/10)*Om,x1=-bt(or/10)*Om,ci={draw(e,t){let r=le(t*h1),n=g1*r,o=x1*r;e.moveTo(0,-r),e.lineTo(n,o);for(let a=1;a<5;++a){let i=or*a/5,l=bt(i),s=De(i);e.lineTo(s*r,-l*r),e.lineTo(l*n-s*o,s*n+l*o)}e.closePath()}};var zs=le(3),fi={draw(e,t){let r=-le(t/(zs*3));e.moveTo(0,r*2),e.lineTo(-zs*r,-r),e.lineTo(zs*r,-r),e.closePath()}};var it=-.5,lt=le(3)/2,Bs=1/le(12),y1=(Bs/2+1)*3,mi={draw(e,t){let r=le(t/y1),n=r/2,o=r*Bs,a=n,i=r*Bs+r,l=-a,s=i;e.moveTo(n,o),e.lineTo(a,i),e.lineTo(l,s),e.lineTo(it*n-lt*o,lt*n+it*o),e.lineTo(it*a-lt*i,lt*a+it*i),e.lineTo(it*l-lt*s,lt*l+it*s),e.lineTo(it*n+lt*o,it*o-lt*n),e.lineTo(it*a+lt*i,it*i-lt*a),e.lineTo(it*l+lt*s,it*s-lt*l),e.closePath()}};function lr(e,t){let r=null,n=ar(o);e=typeof e=="function"?e:Z(e||ir),t=typeof t=="function"?t:Z(t===void 0?64:+t);function o(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return o.type=function(a){return arguments.length?(e=typeof a=="function"?a:Z(a),o):e},o.size=function(a){return arguments.length?(t=typeof a=="function"?a:Z(+a),o):t},o.context=function(a){return arguments.length?(r=a??null,o):r},o}var ge=e=>typeof e=="function"?e:()=>e;function Yt(){let e=arguments;return function(t,r){for(let n=0,o=e.length;n<o;n++)if(e[n](t,r)==null)return!1;return!0}}var sr=(e,t)=>{switch(e){case"left":return t/2;case"right":return-t/2;default:return 0}};var st=e=>{let t=Object.assign({},e),r=()=>{};return Object.keys(t).forEach(n=>{r[n]=(...o)=>o.length?(t[n]=o[0],r):t[n]}),r};var xe=()=>{let e=()=>0,t=l=>l.x,r=l=>l.y,n="center",o=()=>5,a="vertical",i=st({decorate:()=>{},defined:(l,s)=>Yt(e,t,r)(l,s),xScale:pe(),yScale:pe()});return i.values=(l,s)=>{let u=o(l,s),c=sr(n,u),m=i.xScale(),f=i.yScale();if(a==="vertical"){let d=f(r(l,s),s),p=f(e(l,s),s),h=m(t(l,s),s)+c;return{d:l,x:h,y:d,y0:p,width:u,height:d-p,origin:[h,d],baseOrigin:[h,p],transposedX:h,transposedY:d}}else{let d=m(r(l,s),s),p=m(e(l,s),s),h=f(t(l,s),s)+c;return{d:l,x:h,y:d,y0:p,width:u,height:d-p,origin:[d,h],baseOrigin:[p,h],transposedX:d,transposedY:h}}},i.xValues=()=>a==="vertical"?[t]:[e,r],i.yValues=()=>a!=="vertical"?[t]:[e,r],i.baseValue=(...l)=>l.length?(e=ge(l[0]),i):e,i.crossValue=(...l)=>l.length?(t=ge(l[0]),i):t,i.mainValue=(...l)=>l.length?(r=ge(l[0]),i):r,i.bandwidth=(...l)=>l.length?(o=ge(l[0]),i):o,i.align=(...l)=>l.length?(n=l[0],i):n,i.orient=(...l)=>l.length?(a=l[0],i):a,i};var v1="#c60",w1="#6c0",S1="#000",_1="#ddd",A1="#999",se={red:v1,green:w1,black:S1,gray:_1,darkGray:A1};var jr=()=>{let e=xe(),t=Ze().x((o,a)=>e.values(o,a).transposedX).y((o,a)=>e.values(o,a).transposedY),r=U("path","line"),n=o=>{oe(o)&&r.transition(o),t.defined(e.defined()),o.each((a,i,l)=>{let s=r(P(l[i]),[a]);s.enter().attr("fill","none").attr("stroke",se.black),s.attr("d",t),e.decorate()(s,a,i)})};return z(n,e,Q("baseValue","bandwidth","align")),H(n,r,"key"),H(n,t,"curve"),n};var Ln=()=>{let e=xe(),t=Ze().x((n,o)=>e.values(n,o).transposedX).y((n,o)=>e.values(n,o).transposedY),r=n=>{let o=t.context();o.beginPath(),o.strokeStyle=se.black,o.fillStyle="transparent",e.decorate()(o,n),t.defined(e.defined())(n),o.fill(),o.stroke(),o.closePath()};return z(r,e,Q("baseValue","bandwidth","align")),H(r,t,"curve","context"),r};var vE=ke().copy.toString(),wE=_o().copy.toString(),SE=Ao().copy.toString(),_E=Pn().copy.toString(),AE=pe(),CE=Date.now();var Bn=()=>{let e=lr(),t=xe(),r=U("g","point"),n=a=>"translate("+a[0]+", "+a[1]+")",o=a=>{oe(a)&&r.transition(a),a.each((i,l,s)=>{let u=i.filter(t.defined()),c=r(P(s[l]),u);c.enter().attr("transform",(m,f)=>n(t.values(m,f).origin)).attr("fill",se.gray).attr("stroke",se.black).append("path"),c.attr("transform",(m,f)=>n(t.values(m,f).origin)).select("path").attr("d",e),t.decorate()(c,i,l)})};return z(o,t,Q("baseValue","bandwidth","align")),H(o,r,"key"),H(o,e,"type","size"),o};var pi=()=>{let e=lr(),t=xe(),r=n=>{let o=n.filter(t.defined()),a=e.context();o.forEach((i,l)=>{a.save();let s=t.values(i,l);a.translate(s.origin[0],s.origin[1]),a.beginPath(),a.strokeStyle=se.black,a.fillStyle=se.gray,t.decorate()(a,i,l),e(i,l),a.fill(),a.stroke(),a.closePath(),a.restore()})};return z(r,t,Q("baseValue","bandwidth","align")),H(r,e,"size","type","context"),r};var On=()=>{let e=rr().x(0).y(0),t=xe(),r=U("g","bar"),n=l=>t.orient()==="vertical"?l.height:l.width,o=l=>t.orient()==="vertical"?l.width:l.height,a=l=>"translate("+l[0]+", "+l[1]+")",i=l=>{oe(l)&&r.transition(l),l.each((s,u,c)=>{let m=t.orient();if(m!=="vertical"&&m!=="horizontal")throw new Error("The bar series does not support an orientation of "+m);let f=s.filter(t.defined()),d=f.map(t.values);e.width(0).height(0),t.orient()==="vertical"?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));let p=r(P(c[u]),f);p.enter().attr("transform",(h,x)=>a(d[x].baseOrigin)).attr("class","bar "+t.orient()).attr("fill",se.darkGray).append("path").attr("d",(h,x)=>(o(e)(d[x].width),e([h]))),p.attr("transform",(h,x)=>a(d[x].origin)).select("path").attr("d",(h,x)=>(o(e)(d[x].width),n(e)(-d[x].height),e([h]))),t.decorate()(p,f,u)})};return z(i,t),H(i,r,"key"),i};var Is=()=>{let e=xe(),t=Io(),r=U("path","area"),n=o=>{oe(o)&&r.transition(o),t.defined(e.defined()),o.each((a,i,l)=>{let s=a.map(e.values);t.x((m,f)=>s[f].transposedX).y((m,f)=>s[f].transposedY);let u=e.orient()==="vertical"?"y":"x";t[u+"0"]((m,f)=>s[f].y0),t[u+"1"]((m,f)=>s[f].y);let c=r(P(l[i]),[a]);c.enter().attr("fill",se.gray),c.attr("d",t),e.decorate()(c,a,i)})};return z(n,e,Q("bandwidth","align")),H(n,r,"key"),H(n,t,"curve"),n};var Rs=()=>{let e=xe(),t=Io(),r=n=>{let o=t.context();t.defined(e.defined());let a=n.map(e.values);t.x((l,s)=>a[s].transposedX).y((l,s)=>a[s].transposedY);let i=e.orient()==="vertical"?"y":"x";t[i+"0"]((l,s)=>a[s].y0),t[i+"1"]((l,s)=>a[s].y),o.beginPath(),o.fillStyle=se.gray,o.strokeStyle="transparent",e.decorate()(o,n),t(n),o.fill(),o.stroke(),o.closePath()};return z(r,e,Q("bandwidth","align")),H(r,t,"curve","context"),r};var hi=()=>{let e,t=u=>u.date,r=u=>u.open,n=u=>u.high,o=u=>u.low,a=u=>u.close,i=()=>5,l="center",s=(u,c)=>e.xScale()(t(u,c));return e=st({decorate:()=>{},defined:(u,c)=>Yt(t,r,o,n,a)(u,c),xScale:pe(),yScale:pe()}),e.values=(u,c)=>{let m=a(u,c),f=r(u,c),d=i(u,c),p=sr(l,d),h="";return m>f?h="up":m<f&&(h="down"),{cross:s(u,c)+p,open:e.yScale()(f),high:e.yScale()(n(u,c)),low:e.yScale()(o(u,c)),close:e.yScale()(m),width:d,direction:h}},e.xValues=()=>[t],e.yValues=()=>[r,n,o,a],e.crossValue=(...u)=>u.length?(t=u[0],e):t,e.openValue=(...u)=>u.length?(r=u[0],e):r,e.highValue=(...u)=>u.length?(n=u[0],e):n,e.lowValue=(...u)=>u.length?(o=u[0],e):o,e.yValue=e.closeValue=(...u)=>u.length?(a=u[0],e):a,e.bandwidth=(...u)=>u.length?(i=ge(u[0]),e):i,e.align=(...u)=>u.length?(l=u[0],e):l,e};var gi=e=>{let t=hi(),r=n=>{let o=n.filter(t.defined()),a=e.context();o.forEach((i,l)=>{a.save();let s=t.values(i,l);a.translate(s.cross,s.high),a.beginPath(),e.x(0).open(()=>s.open-s.high).width(s.width).high(0).low(()=>s.low-s.high).close(()=>s.close-s.high)([i]);let u=s.direction==="up"?se.green:se.red;a.strokeStyle=u,a.fillStyle=u,t.decorate()(a,i,l),a.fill(),a.stroke(),a.closePath(),a.restore()})};return H(r,e,"context"),z(r,t),r};var Fs=()=>gi(ja());var $s=()=>gi(Xa());var Fo=()=>{let e=[],t=o=>o,r=(o,a)=>a,n=st({decorate:()=>{},xScale:pe(),yScale:pe()});return n.xValues=()=>e.map(o=>o.xValues()).reduce((o,a)=>o.concat(a)),n.yValues=()=>e.map(o=>o.yValues()).reduce((o,a)=>o.concat(a)),n.mapping=(...o)=>o.length?(t=o[0],n):t,n.key=(...o)=>o.length?(r=o[0],n):r,n.series=(...o)=>o.length?(e=o[0],n):e,n};var Ue=()=>{let e=Fo(),t=U("g"),r=U("g","multi"),n=o=>{oe(o)&&(r.transition(o),t.transition(o));let a=e.mapping(),i=e.series(),l=e.xScale(),s=e.yScale();o.each((u,c,m)=>{let f=r(P(m[c]),i);f.each((d,p,h)=>{d.xScale(l).yScale(s);let x=a(u,p,i);t(P(h[p]),[x]).call(d)}),f.selection().order(),e.decorate()(f,u,c)})};return z(n,e),H(n,r,"key"),n};var wt=()=>{let e=null,t=Fo(),r=n=>{let o=t.mapping(),a=t.series(),i=t.xScale(),l=t.yScale();a.forEach((s,u)=>{let c=o(n,u,a);s.context(e).xScale(i).yScale(l);let m;s.decorate?(m=s.decorate(),s.decorate((f,d,p)=>{t.decorate()(f,n,u),m(f,d,p)})):t.decorate()(e,n,u),s(c),m&&s.decorate(m)})};return r.context=(...n)=>n.length?(e=n[0],r):e,z(r,t),r};var Hs=e=>{let t=()=>50,r="center",n=dt(),o=st({decorate:()=>{},xScale:ke(),yScale:ke()});return o.offsetScaleForDatum=(a,i,l)=>{let s=t(i,l),u=sr(r,s),c=s/2;return n.domain(Kt(0,a.length)).range([-c+u,c+u])},o.bandwidth=(...a)=>a.length?(t=ge(a[0]),o):t,o.align=(...a)=>a.length?(r=a[0],o):r,z(o,n,Ct({paddingInner:"paddingOuter"})),o};var Ys=e=>{let t=Hs(e),r=U("g","grouped"),n=o=>{oe(o)&&r.transition(o),o.each((a,i,l)=>{let s=r(P(l[i]),a);s.enter().append("g"),s.select("g").each((u,c,m)=>{let f=P(m[c]),d=e.orient()!=="horizontal",p=(h,x)=>{let g=t.offsetScaleForDatum(a,h,x);return(d?t.xScale():t.yScale())(h)+g(c)+g.bandwidth()/2};d?(e.xScale(p),e.yScale(t.yScale())):(e.yScale(p),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth((h,x)=>t.offsetScaleForDatum(a,h,x).bandwidth()),e.decorate((h,x)=>t.decorate()(h,x,c)),f.call(e)})})};return z(n,e,Q("decorate","xScale","yScale")),z(n,t,Q("offsetScaleForDatum")),n};var fr=()=>{let e="vertical",t=jr(),r=Ue(),n=o=>o.each((a,i,l)=>{e==="vertical"?r.series(a[0].map(s=>t)).mapping((s,u)=>s.map(c=>c[u])):r.series(a.map(s=>t)).mapping((s,u)=>s[u]),P(l[i]).call(r)});return n.series=(...o)=>o.length?(t=o[0],n):t,n.orient=(...o)=>o.length?(e=o[0],n):e,z(n,r,Q("series","mapping")),n};var q1=e=>e.sort(At).filter((t,r,n)=>n.indexOf(t,r+1)===-1),Jr=e=>{let t=.75,r=a=>{if(a.length<=1)return 10;a=q1(a);let i=Va(a).map(s=>Math.abs(s[0]-s[1])),l=Fe(i);return t*l},n=(a,i,l)=>{if(a.bandwidth)return a.bandwidth();{let u=(Array.isArray(i)?[].concat(...i):i).filter(e.defined()).map(l()).map(a);return r(u)}},o=a=>{let i=l=>{if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(n(e.xScale(),l,e.xValue)),e.yBandwidth(n(e.yScale(),l,e.yValue));else{let s=e.orient&&e.orient()==="horizontal"?e.yScale():e.xScale();e.bandwidth(n(s,l,e.crossValue))}};a instanceof yt?a.each((l,s,u)=>{i(l),e(P(u[s]))}):(i(a),e(a))};return z(o,e),o.widthFraction=(...a)=>a.length?(t=a[0],o):t,o};function $o(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}function xi(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var Ws=xi($o("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),G1=xi($o("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),U1=xi($o("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),X1=xi($o("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var qs=()=>{let e=l=>l.x,t=l=>l.y,r=l=>l.color,n=()=>5,o=()=>5,a=Ws,i=st({decorate:()=>{},defined:(l,s)=>Yt(e,t,r)(l,s),xScale:pe(),yScale:pe()});return i.pathGenerator=rr().x(0).y(0),i.colorScale=l=>{let s=l.map(r);return ke().domain([Fe(s),ot(s)])},i.values=(l,s)=>({x:i.xScale()(e(l,s)),y:i.yScale()(t(l,s)),colorValue:r(l,s),width:o(l,s),height:n(l,s)}),i.xValues=()=>[e],i.yValues=()=>[t],i.xValue=(...l)=>l.length?(e=ge(l[0]),i):e,i.yValue=(...l)=>l.length?(t=ge(l[0]),i):t,i.colorValue=(...l)=>l.length?(r=ge(l[0]),i):r,i.colorInterpolate=(...l)=>l.length?(a=l[0],i):a,i.xBandwidth=(...l)=>l.length?(o=ge(l[0]),i):o,i.yBandwidth=(...l)=>l.length?(n=ge(l[0]),i):n,z(i,i.pathGenerator,Ct({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),i};var Gs=()=>{let e=qs(),t=r=>{let n=r.filter(e.defined()),o=e.colorInterpolate(),a=e.colorScale(n),i=e.pathGenerator.context();n.forEach((l,s)=>{i.save(),i.beginPath();let u=e.values(l,s);i.translate(u.x,u.y),i.fillStyle=o(a(u.colorValue)),i.strokeStyle="transparent",e.decorate()(i,l,s),e.pathGenerator.height(u.height).width(u.width)([l]),i.fill(),i.stroke(),i.closePath(),i.restore()})};return H(t,e.pathGenerator,"context"),z(t,e),t};var In=()=>{let e=pe(),t=[10],r=null,n=()=>r??(e.ticks?e.ticks(...t):e.domain());return n.scale=(...o)=>o.length?(e=o[0],n):e,n.ticks=(...o)=>(t=o,n),n.tickArguments=(...o)=>o.length?(t=o[0],n):t,n.tickValues=(...o)=>o.length?(r=o[0],n):r,n};var $m=e=>e,Xs=()=>{let e=()=>{},t=()=>{},r=In(),n=In(),o=U("line","gridline-y").key($m),a=U("line","gridline-x").key($m),i=l=>{oe(l)&&(o.transition(l),a.transition(l)),l.each((s,u,c)=>{let m=c[u],f=P(c[u]),d=r.scale(),p=n.scale(),h=m.__x_scale__||d;m.__x_scale__=d.copy();let x=r(),g=o(f,x);g.enter().attr("x1",h).attr("x2",h).attr("y1",p.range()[0]).attr("y2",p.range()[1]).attr("stroke","#bbb"),g.attr("x1",d).attr("x2",d).attr("y1",p.range()[0]).attr("y2",p.range()[1]),g.exit().attr("x1",d).attr("x2",d),e(g,x,u);let S=m.__y_scale__||p;m.__y_scale__=p.copy();let A=n(),v=a(f,A);v.enter().attr("y1",S).attr("y2",S).attr("x1",d.range()[0]).attr("x2",d.range()[1]).attr("stroke","#bbb"),v.attr("y1",p).attr("y2",p).attr("x1",d.range()[0]).attr("x2",d.range()[1]),v.exit().attr("y1",p).attr("y2",p),t(v,A,u)})};return i.yDecorate=(...l)=>l.length?(t=l[0],i):t,i.xDecorate=(...l)=>l.length?(e=l[0],i):e,z(i,o,Ct({key:"xKey"})),z(i,a,Ct({key:"yKey"})),z(i,r,$e("x")),z(i,n,$e("y")),i};var js=()=>{let e=()=>{},t=()=>{},r=In(),n=In(),o=Ze(),a=()=>{let i=o.context(),l=r.scale(),s=n.scale();r().forEach((u,c)=>{i.save(),i.beginPath(),i.strokeStyle="#bbb",i.fillStyle="transparent",e(i,u,c),o.context(i)(s.domain().map(m=>[l(u),s(m)])),i.fill(),i.stroke(),i.closePath(),i.restore()}),n().forEach((u,c)=>{i.save(),i.beginPath(),i.strokeStyle="#bbb",i.fillStyle="transparent",t(i,u,c),o.context(i)(l.domain().map(m=>[l(m),s(u)])),i.fill(),i.stroke(),i.closePath(),i.restore()})};return a.yDecorate=(...i)=>i.length?(t=i[0],a):t,a.xDecorate=(...i)=>i.length?(e=i[0],a):e,z(a,r,$e("x")),z(a,n,$e("y")),H(a,o,"context"),a};var K1=e=>e,Hm=(e,t,r,n)=>e[t]?e[t].apply(e,r):n,Qs=e=>e.tickValues()??Hm(e.scale(),"ticks",e.tickArguments(),e.scale().domain()),Ks=e=>e.tickFormat()??Hm(e.scale(),"tickFormat",e.tickArguments(),K1);var J1=e=>e,yi=(e,t,r={})=>{let n=[10],o=null,a=()=>{},i=null,l=6,s=6,u=3,c=Ze(),m=U("g","tick").key(J1),f=U("path","domain"),d=()=>({offset:[0,s+u]}),p=()=>({path:[[0,0],[0,s]]}),h=r.labelOffset||d,x=r.tickPath||p,g=(y,M)=>{let V=0;return y.bandwidth&&(V=y.bandwidth()/2,y.round()&&(V=Math.round(V))),F=>M(y(F)+V,0)},S=(y,M)=>v()?`translate(${M}, ${y})`:`translate(${y}, ${M})`,A=y=>v()?y.map(M=>[M[1],M[0]]):y,v=()=>e==="left"||e==="right",b=y=>{oe(y)&&(m.transition(y),f.transition(y)),y.each((M,V,F)=>{let R=F[V],N=P(R);R.__scale__||N.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e==="right"?"start":e==="left"?"end":"middle");let Y=R.__scale__||t;R.__scale__=t.copy();let E=Qs(b),w=Ks(b),k=e==="bottom"||e==="right"?1:-1,_=([D,O])=>[D,k*O],T=t.range(),C=A([[T[0],k*l],[T[0],0],[T[1],0],[T[1],k*l]]),B=f(N,[M]);B.enter().attr("stroke","#000"),B.attr("d",c(C));let L=m(N,E),W=E.map((D,O)=>h(D,O,E)),q=E.map((D,O)=>x(D,O,E));L.enter().attr("transform",g(Y,S)).append("path").attr("stroke","#000"),L.enter().append("text").attr("transform",(D,O)=>S(..._(W[O].offset))).attr("fill","#000"),L.exit().attr("transform",g(t,S)),L.select("path").attr("visibility",(D,O)=>q[O].hidden&&"hidden").attr("d",(D,O)=>c(A(q[O].path.map(_)))),L.select("text").attr("visibility",(D,O)=>W[O].hidden&&"hidden").attr("transform",(D,O)=>S(..._(W[O].offset))).attr("dy",()=>{let D="0em";return v()?D="0.32em":e==="bottom"&&(D="0.71em"),D}).text(w),L.attr("transform",g(t,S)),a(L,M,V)})};return b.tickFormat=(...y)=>y.length?(i=y[0],b):i,b.tickSize=(...y)=>y.length?(s=l=Number(y[0]),b):s,b.tickSizeInner=(...y)=>y.length?(s=Number(y[0]),b):s,b.tickSizeOuter=(...y)=>y.length?(l=Number(y[0]),b):l,b.tickPadding=(...y)=>y.length?(u=y[0],b):u,b.decorate=(...y)=>y.length?(a=y[0],b):a,b.scale=(...y)=>y.length?(t=y[0],b):t,b.ticks=(...y)=>(n=[...y],b),b.tickArguments=(...y)=>y.length?(n=y[0]==null?[]:[...y[0]],b):n!==null?n.slice():null,b.tickValues=(...y)=>y.length?(o=y[0]==null?[]:[...y[0]],b):o!==null?o.slice():null,b.orient=()=>e,b};var bi=(e,t)=>{let r=!1,o=yi(e,t,{labelOffset:(i,l,s)=>{let u=0,c=o.tickSizeInner()+o.tickPadding(),m=!1;if(r){let f=t(i),d=l<s.length-1?t(s[l+1]):t.range()[1];u=(d-f)/2,c=o.tickPadding(),m=l===s.length-1&&f===d}return{offset:[u,c],hidden:m}}}),a=i=>o(i);return a.tickCenterLabel=(...i)=>i.length?(r=i[0],a):r,z(a,o),a},Rn=e=>bi("top",e),Fn=e=>bi("bottom",e),$n=e=>bi("left",e),mr=e=>bi("right",e);var vi=(e,t)=>{let r=null,n=(s,u,c)=>{if(t.step)return t.step();let m=t(s);return u<c.length-1?t(c[u+1])/m:(t.range()[1]-m)*2},i=yi(e,t,{labelOffset:()=>({offset:[0,i.tickPadding()]}),tickPath:(s,u,c)=>{let m=0;return r?m=r(s,u):m=n(s,u,c)/2,{path:[[m,0],[m,i.tickSizeInner()]],hidden:u===c.length-1}}}),l=s=>{i(s)};return l.tickOffset=(...s)=>s.length?(r=s[0],l):r,z(l,i),l},wi=e=>vi("top",e),Si=e=>vi("bottom",e),_i=e=>vi("left",e),Ai=e=>vi("right",e);var Js="__d3fc-elements__",Zr=e=>e[Js]||{},Ci=(e,t)=>void(e[Js]=t),Ym=e=>delete e[Js];var ev=e=>e.tagName==="D3FC-GROUP"?[e,...e.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg")]:[e],tv=e=>{let{width:t,height:r}=Zr(e),n=e.useDevicePixelRatio&&window.devicePixelRatio!=null?window.devicePixelRatio:1,o=e.clientWidth*n,a=e.clientHeight*n,i=o!==t||a!==r,l=e.children[0];Ci(e,{pixelRatio:n,width:o,height:a,resized:i,child:l})};if(typeof CustomEvent!="function")throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var rv=e=>{let t=Zr(e),r=new CustomEvent("measure",{detail:t});e.dispatchEvent(r)},nv=e=>{let t=Zr(e),r=new CustomEvent("draw",{detail:t});e.dispatchEvent(r)},qm=e=>{let t=e.map(ev).reduce((r,n)=>r.concat(n));t.forEach(tv),t.forEach(rv),t.forEach(nv)};var Um=e=>Zr(e.ownerDocument).queue||[],ov=(e,t)=>{let{requestId:r}=Zr(e.ownerDocument);r==null&&(r=requestAnimationFrame(()=>{let n=Um(e);qm(n),av(e)})),Ci(e.ownerDocument,{queue:t,requestId:r})},av=e=>Ym(e.ownerDocument),Gm=(e,t)=>{let r=e;do if(r.parentNode===t)return!0;while(r=r.parentNode);return!1},Ho=e=>{let t=Um(e);if(t.indexOf(e)>-1||t.some(a=>Gm(e,a)))return;let o=t.filter(a=>!Gm(a,e));o.push(e),ov(e,o)};if(typeof HTMLElement!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var iv=e=>{e.__measureListener__==null&&(e.__measureListener__=t=>e.setMeasurements(t.detail),e.addEventListener("measure",e.__measureListener__))},lv=e=>{e.__measureListener__!=null&&(e.removeEventListener("measure",e.__measureListener__),e.__measureListener__=null)},Mi=(e,t)=>class extends HTMLElement{static get observedAttributes(){return["use-device-pixel-ratio"]}attributeChangedCallback(r){switch(r){case"use-device-pixel-ratio":this.requestRedraw();break}}connectedCallback(){this.childNodes.length===0&&this.appendChild(e()),iv(this)}disconnectedCallback(){lv(this)}setMeasurements({width:r,height:n}){let{childNodes:[o,...a]}=this;if(a.length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");t(this,o,{width:r,height:n})}get useDevicePixelRatio(){return this.hasAttribute("use-device-pixel-ratio")&&this.getAttribute("use-device-pixel-ratio")!=="false"}set useDevicePixelRatio(r){r&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!r&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}requestRedraw(){Ho(this)}};var Ti=class extends Mi(()=>document.createElement("canvas"),(e,t,{width:r,height:n})=>{t.setAttribute("width",r),t.setAttribute("height",n),e.setWebglViewport&&t.getContext("webgl").viewport(0,0,r,n)}){get setWebglViewport(){return this.hasAttribute("set-webgl-viewport")&&this.getAttribute("set-webgl-viewport")!=="false"}set setWebglViewport(e){e&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!e&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}};var Zs=e=>{e.autoResize?sv(e):Xm(e)},sv=e=>{e.__autoResizeListener__==null&&(e.__autoResizeListener__=()=>Ho(e),addEventListener("resize",e.__autoResizeListener__))},Xm=e=>{e.__autoResizeListener__!=null&&(removeEventListener("resize",e.__autoResizeListener__),e.__autoResizeListener__=null)},Vi=class extends HTMLElement{connectedCallback(){Zs(this)}disconnectedCallback(){Xm(this)}requestRedraw(){Ho(this)}get autoResize(){return this.hasAttribute("auto-resize")&&this.getAttribute("auto-resize")!=="false"}set autoResize(e){e&&!this.autoResize?this.setAttribute("auto-resize",""):!e&&this.autoResize&&this.removeAttribute("auto-resize"),Zs(this)}static get observedAttributes(){return["auto-resize"]}attributeChangedCallback(e){switch(e){case"auto-resize":Zs(this);break}}};var jm=Mi(()=>document.createElementNS("http://www.w3.org/2000/svg","svg"),(e,t,{width:r,height:n})=>{t.setAttribute("viewBox",`0 0 ${r} ${n}`)});var ki="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",Yo=document.createElement("style");Yo.setAttribute("type","text/css");document.querySelector("head").appendChild(Yo);Yo.styleSheet?Yo.styleSheet.cssText+=ki:Yo.textContent+=ki;if(typeof customElements!="object"||typeof customElements.define!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var eu=[],tu=(e,t)=>{customElements.get(e)?eu.push(e):customElements.define(e,t)};tu("d3fc-canvas",Ti);tu("d3fc-group",Vi);tu("d3fc-svg",jm);eu.length>0&&console.warn(`The d3fc components "${eu.join(", ")}" is/are already registered on window. Be aware that this can create compatibility issues if different versions are used.`);var cv={value:()=>{}};function Km(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Di(r)}function Di(e){this._=e}function fv(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Di.prototype=Km.prototype={constructor:Di,on:function(e,t){var r=this._,n=fv(e+"",r),o,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((o=(e=n[a]).type)&&(o=mv(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=n[a]).type)r[o]=Qm(r[o],e.name,t);else if(t==null)for(o in r)r[o]=Qm(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Di(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,a;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,o=a.length;n<o;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,a=n.length;o<a;++o)n[o].value.apply(t,r)}};function mv(e,t){for(var r=0,n=e.length,o;r<n;++r)if((o=e[r]).name===t)return o.value}function Qm(e,t,r){for(var n=0,o=e.length;n<o;++n)if(e[n].name===t){e[n]=cv,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Wt=Km;var ru=()=>{let e=Wt("point");function t(o){let a=We(o);e.call("point",this,[{x:a[0],y:a[1]}])}function r(){e.call("point",this,[])}let n=o=>{o.on("mouseenter.pointer",t).on("mousemove.pointer",t).on("mouseleave.pointer",r)};return H(n,e,"on"),n};var nu=(...e)=>{let t={},r=n=>{for(let o of Object.keys(t))n[o].apply(null,t[o]);return n};for(let n of e)r[n]=(...o)=>o.length?(t[n]=o,r):t[n];return r};var Ni=`d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}
d3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}
d3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}
d3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}
d3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}
d3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}`,Wo=document.createElement("style");Wo.setAttribute("type","text/css");document.querySelector("head").appendChild(Wo);Wo.styleSheet?Wo.styleSheet.cssText+=Ni:Wo.textContent+=Ni;var Xe=e=>typeof e=="function"?e:()=>e,qo=(...e)=>{let{xScale:t,yScale:r,xAxis:n,yAxis:o}=pv(...e),a=Xe(""),i=Xe(""),l=Xe(""),s=Xe(null),u=Xe(null),c=Xe("right"),m=Xe("bottom"),f=null,d=null,p=null,h=!1,x=!0,g=nu("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),S=()=>{},A=nu("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),v=()=>{},b=()=>{},y=U("d3fc-group","cartesian-chart"),M=U("d3fc-canvas","webgl-plot-area"),V=U("d3fc-canvas","canvas-plot-area"),F=U("d3fc-svg","svg-plot-area"),R=U("d3fc-svg","x-axis").key(C=>C),N=U("d3fc-svg","y-axis").key(C=>C),Y=U("div","chart-label"),E=U("div","x-label").key(C=>C),w=U("div","y-label").key(C=>C),k=C=>B=>oe(C)?B.transition(C):B,_=C=>{let B=k(C);C.each((L,W,q)=>{let D=y(P(q[W]),[L]);D.enter().attr("auto-resize",""),Y(D,[m(L)]).attr("class",O=>O==="top"?"chart-label bottom-label":"chart-label top-label").style("margin-bottom",O=>O==="top"?0:"1em").style("margin-top",O=>O==="top"?"1em":0).text(a(L)),E(D,[m(L)]).attr("class",O=>`x-label ${O}-label`).text(i(L)),w(D,[c(L)]).attr("class",O=>`y-label ${O}-label`).text(l(L)),M(D,f?[L]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",x).on("draw",(O,G)=>{let{child:X,pixelRatio:J}=O.detail;f.context(h?null:X.getContext("webgl")).pixelRatio(J).xScale(t).yScale(r),f(G)}),D.select(".webgl-plot-area>canvas").on("webglcontextlost",O=>{console.warn("WebGLRenderingContext lost"),O.preventDefault(),h=!0,D.node().requestRedraw()}).on("webglcontextrestored",()=>{console.info("WebGLRenderingContext restored"),h=!1,D.node().requestRedraw()}),V(D,d?[L]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",x).on("draw",(O,G)=>{let{child:X,pixelRatio:J}=O.detail,ue=X.getContext("2d");ue.save(),x&&ue.scale(J,J),d.context(ue).xScale(t).yScale(r),d(G),ue.restore()}),F(D,p?[L]:[]).classed("plot-area",!0).on("draw",(O,G)=>{let{child:X}=O.detail;p.xScale(t).yScale(r),B(P(X).datum(G)).call(p)}),R(D,[m(L)]).attr("class",O=>`x-axis ${O}-axis`).style("height",s(L)).on("measure",(O,G)=>{let{width:X,height:J,child:ue}=O.detail;G==="top"&&P(ue).attr("viewBox",`0 ${-J} ${X} ${J}`),t.range([0,X])}).on("draw",(O,G)=>{let{child:X}=O.detail,J=G==="top"?n.top(t):n.bottom(t);J.decorate(S),B(P(X).datum(G)).call(g(J))}),N(D,[c(L)]).attr("class",O=>`y-axis ${O}-axis`).style("width",u(L)).on("measure",(O,G)=>{let{width:X,height:J,child:ue}=O.detail;G==="left"&&P(ue).attr("viewBox",`${-X} 0 ${X} ${J}`),r.range([J,0])}).on("draw",(O,G)=>{let{child:X}=O.detail,J=G==="left"?o.left(r):o.right(r);J.decorate(v),B(P(X).datum(G)).call(A(J))}),D.each((O,G,X)=>X[G].requestRedraw()),b(D,L,W)})},T=Q(/range\w*/,/tickFormat/);return z(_,t,T,$e("x")),z(_,r,T,$e("y")),z(_,g,$e("x")),z(_,A,$e("y")),_.xOrient=(...C)=>C.length?(m=Xe(C[0]),_):m,_.yOrient=(...C)=>C.length?(c=Xe(C[0]),_):c,_.xDecorate=(...C)=>C.length?(S=C[0],_):S,_.yDecorate=(...C)=>C.length?(v=C[0],_):v,_.chartLabel=(...C)=>C.length?(a=Xe(C[0]),_):a,_.xLabel=(...C)=>C.length?(i=Xe(C[0]),_):i,_.yLabel=(...C)=>C.length?(l=Xe(C[0]),_):l,_.xAxisHeight=(...C)=>C.length?(s=Xe(C[0]),_):s,_.yAxisWidth=(...C)=>C.length?(u=Xe(C[0]),_):u,_.webglPlotArea=(...C)=>C.length?(f=C[0],_):f,_.canvasPlotArea=(...C)=>C.length?(d=C[0],_):d,_.svgPlotArea=(...C)=>C.length?(p=C[0],_):p,_.decorate=(...C)=>C.length?(b=C[0],_):b,_.useDevicePixelRatio=(...C)=>C.length?(x=C[0],_):x,_},pv=(...e)=>{let t={xScale:pe(),yScale:pe(),xAxis:{bottom:Fn,top:Rn},yAxis:{right:mr,left:$n}};return e.length===1&&!e[0].domain&&!e[0].range?Object.assign(t,e[0]):Object.assign(t,{xScale:e[0]||t.xScale,yScale:e[1]||t.yScale})};var Jm=e=>typeof e=="function"?e:()=>e,Ei=(e,t)=>(...r)=>{let n=Jm(""),o=t,a=()=>{},i=qo(...r),l=s=>{e(i,o),i.decorate((u,c,m)=>{u.enter().select(".x-label").style("height","1em").style("line-height","1em");let f=i.yOrient()(c);u.enter().append("div").attr("class","y-label-container").style("grid-column",f==="left"?1:5).style("-ms-grid-column",f==="left"?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),u.select(".y-label-container>.y-label").text(n),a(u,c,m)}),s.call(i)};return z(l,i,Lr(/^x/,/^y/,"chartLabel")),l.yLabel=(...s)=>s.length?(n=Jm(s[0]),l):n,l.plotArea=(...s)=>s.length?(o=s[0],l):o,l.decorate=(...s)=>s.length?(a=s[0],l):a,l};var hv=Ei((e,t)=>e.svgPlotArea(t),jr);var gv=Ei((e,t)=>e.canvasPlotArea(t),Ln);var Zm={passive:!1},en={capture:!0,passive:!1};function Pi(e){e.stopImmediatePropagation()}function dr(e){e.preventDefault(),e.stopImmediatePropagation()}function Go(e){var t=e.document.documentElement,r=P(e).on("dragstart.drag",dr,en);"onselectstart"in t?r.on("selectstart.drag",dr,en):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Uo(e,t){var r=e.document.documentElement,n=P(e).on("dragstart.drag",null);t&&(n.on("click.drag",dr,en),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var Xo=e=>()=>e;function jo(e,{sourceEvent:t,subject:r,target:n,identifier:o,active:a,x:i,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}jo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xv(e){return!e.ctrlKey&&!e.button}function yv(){return this.parentNode}function bv(e,t){return t??{x:e.x,y:e.y}}function vv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hn(){var e=xv,t=yv,r=bv,n=vv,o={},a=Wt("start","drag","end"),i=0,l,s,u,c,m=0;function f(v){v.on("mousedown.drag",d).filter(n).on("touchstart.drag",x).on("touchmove.drag",g,Zm).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(v,b){if(!(c||!e.call(this,v,b))){var y=A(this,t.call(this,v,b),v,b,"mouse");y&&(P(v.view).on("mousemove.drag",p,en).on("mouseup.drag",h,en),Go(v.view),Pi(v),u=!1,l=v.clientX,s=v.clientY,y("start",v))}}function p(v){if(dr(v),!u){var b=v.clientX-l,y=v.clientY-s;u=b*b+y*y>m}o.mouse("drag",v)}function h(v){P(v.view).on("mousemove.drag mouseup.drag",null),Uo(v.view,u),dr(v),o.mouse("end",v)}function x(v,b){if(e.call(this,v,b)){var y=v.changedTouches,M=t.call(this,v,b),V=y.length,F,R;for(F=0;F<V;++F)(R=A(this,M,v,b,y[F].identifier,y[F]))&&(Pi(v),R("start",v,y[F]))}}function g(v){var b=v.changedTouches,y=b.length,M,V;for(M=0;M<y;++M)(V=o[b[M].identifier])&&(dr(v),V("drag",v,b[M]))}function S(v){var b=v.changedTouches,y=b.length,M,V;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),M=0;M<y;++M)(V=o[b[M].identifier])&&(Pi(v),V("end",v,b[M]))}function A(v,b,y,M,V,F){var R=a.copy(),N=We(F||y,b),Y,E,w;if((w=r.call(v,new jo("beforestart",{sourceEvent:y,target:f,identifier:V,active:i,x:N[0],y:N[1],dx:0,dy:0,dispatch:R}),M))!=null)return Y=w.x-N[0]||0,E=w.y-N[1]||0,function k(_,T,C){var B=N,L;switch(_){case"start":o[V]=k,L=i++;break;case"end":delete o[V],--i;case"drag":N=We(C||T,b),L=i;break}R.call(_,v,new jo(_,{sourceEvent:T,subject:w,target:f,identifier:V,active:L,x:N[0]+Y,y:N[1]+E,dx:N[0]-B[0],dy:N[1]-B[1],dispatch:R}),M)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Xo(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Xo(v),f):t},f.subject=function(v){return arguments.length?(r=typeof v=="function"?v:Xo(v),f):r},f.touchable=function(v){return arguments.length?(n=typeof v=="function"?v:Xo(!!v),f):n},f.on=function(){var v=a.on.apply(a,arguments);return v===a?f:v},f.clickDistance=function(v){return arguments.length?(m=(v=+v)*v,f):Math.sqrt(m)},f}var Yn=0,Ko=0,Qo=0,td=1e3,Li,Jo,zi=0,tn=0,Bi=0,Zo=typeof performance=="object"&&performance.now?performance:Date,rd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ta(){return tn||(rd(wv),tn=Zo.now()+Bi)}function wv(){tn=0}function ea(){this._call=this._time=this._next=null}ea.prototype=Oi.prototype={constructor:ea,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?ta():+r)+(t==null?0:+t),!this._next&&Jo!==this&&(Jo?Jo._next=this:Li=this,Jo=this),this._call=e,this._time=r,ou()},stop:function(){this._call&&(this._call=null,this._time=1/0,ou())}};function Oi(e,t,r){var n=new ea;return n.restart(e,t,r),n}function nd(){ta(),++Yn;for(var e=Li,t;e;)(t=tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Yn}function ed(){tn=(zi=Zo.now())+Bi,Yn=Ko=0;try{nd()}finally{Yn=0,_v(),tn=0}}function Sv(){var e=Zo.now(),t=e-zi;t>td&&(Bi-=t,zi=e)}function _v(){for(var e,t=Li,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Li=r);Jo=e,ou(n)}function ou(e){if(!Yn){Ko&&(Ko=clearTimeout(Ko));var t=e-tn;t>24?(e<1/0&&(Ko=setTimeout(ed,e-Zo.now()-Bi)),Qo&&(Qo=clearInterval(Qo))):(Qo||(zi=Zo.now(),Qo=setInterval(Sv,td)),Yn=1,rd(ed))}}function Ii(e,t,r){var n=new ea;return t=t==null?0:+t,n.restart(o=>{n.stop(),e(o+t)},t,r),n}var Av=Wt("start","end","cancel","interrupt"),Cv=[],id=0,od=1,Fi=2,Ri=3,ad=4,$i=5,ra=6;function pr(e,t,r,n,o,a){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;Mv(e,r,{name:t,index:n,group:o,on:Av,tween:Cv,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:id})}function na(e,t){var r=ye(e,t);if(r.state>id)throw new Error("too late; already scheduled");return r}function Me(e,t){var r=ye(e,t);if(r.state>Ri)throw new Error("too late; already running");return r}function ye(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Mv(e,t,r){var n=e.__transition,o;n[t]=r,r.timer=Oi(a,0,r.time);function a(u){r.state=od,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var c,m,f,d;if(r.state!==od)return s();for(c in n)if(d=n[c],d.name===r.name){if(d.state===Ri)return Ii(i);d.state===ad?(d.state=ra,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete n[c]):+c<t&&(d.state=ra,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete n[c])}if(Ii(function(){r.state===Ri&&(r.state=ad,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=Fi,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Fi){for(r.state=Ri,o=new Array(f=r.tween.length),c=0,m=-1;c<f;++c)(d=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(o[++m]=d);o.length=m+1}}function l(u){for(var c=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(s),r.state=$i,1),m=-1,f=o.length;++m<f;)o[m].call(e,c);r.state===$i&&(r.on.call("end",e,e.__data__,r.index,r.group),s())}function s(){r.state=ra,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function hr(e,t){var r=e.__transition,n,o,a=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){a=!1;continue}o=n.state>Fi&&n.state<$i,n.state=ra,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}a&&delete e.__transition}}function ld(e){return this.each(function(){hr(this,e)})}function Tv(e,t){var r,n;return function(){var o=Me(this,e),a=o.tween;if(a!==r){n=r=a;for(var i=0,l=n.length;i<l;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}o.tween=n}}function Vv(e,t,r){var n,o;if(typeof r!="function")throw new Error;return function(){var a=Me(this,e),i=a.tween;if(i!==n){o=(n=i).slice();for(var l={name:t,value:r},s=0,u=o.length;s<u;++s)if(o[s].name===t){o[s]=l;break}s===u&&o.push(l)}a.tween=o}}function sd(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=ye(this.node(),r).tween,o=0,a=n.length,i;o<a;++o)if((i=n[o]).name===e)return i.value;return null}return this.each((t==null?Tv:Vv)(r,e,t))}function Wn(e,t,r){var n=e._id;return e.each(function(){var o=Me(this,n);(o.value||(o.value={}))[t]=r.apply(this,arguments)}),function(o){return ye(o,n).value[t]}}function Hi(e,t){var r;return(typeof t=="number"?_e:t instanceof Te?Or:(r=Te(t))?(t=r,Or):yo)(e,t)}function kv(e){return function(){this.removeAttribute(e)}}function Dv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nv(e,t,r){var n,o=r+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===n?a:a=t(n=i,r)}}function Ev(e,t,r){var n,o=r+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===n?a:a=t(n=i,r)}}function Pv(e,t,r){var n,o,a;return function(){var i,l=r(this),s;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),s=l+"",i===s?null:i===n&&s===o?a:(o=s,a=t(n=i,l)))}}function Lv(e,t,r){var n,o,a;return function(){var i,l=r(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),s=l+"",i===s?null:i===n&&s===o?a:(o=s,a=t(n=i,l)))}}function ud(e,t){var r=Ht(e),n=r==="transform"?as:Hi;return this.attrTween(e,typeof t=="function"?(r.local?Lv:Pv)(r,n,Wn(this,"attr."+e,t)):t==null?(r.local?Dv:kv)(r):(r.local?Ev:Nv)(r,n,t))}function zv(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Bv(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Ov(e,t){var r,n;function o(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&Bv(e,a)),r}return o._value=t,o}function Iv(e,t){var r,n;function o(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&zv(e,a)),r}return o._value=t,o}function cd(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Ht(e);return this.tween(r,(n.local?Ov:Iv)(n,t))}function Rv(e,t){return function(){na(this,e).delay=+t.apply(this,arguments)}}function Fv(e,t){return t=+t,function(){na(this,e).delay=t}}function fd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rv:Fv)(t,e)):ye(this.node(),t).delay}function $v(e,t){return function(){Me(this,e).duration=+t.apply(this,arguments)}}function Hv(e,t){return t=+t,function(){Me(this,e).duration=t}}function md(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$v:Hv)(t,e)):ye(this.node(),t).duration}function Yv(e,t){if(typeof t!="function")throw new Error;return function(){Me(this,e).ease=t}}function dd(e){var t=this._id;return arguments.length?this.each(Yv(t,e)):ye(this.node(),t).ease}function Wv(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Me(this,e).ease=r}}function pd(e){if(typeof e!="function")throw new Error;return this.each(Wv(this._id,e))}function hd(e){typeof e!="function"&&(e=Lo(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=[],s,u=0;u<i;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new Oe(n,this._parents,this._name,this._id)}function gd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,o=r.length,a=Math.min(n,o),i=new Array(n),l=0;l<a;++l)for(var s=t[l],u=r[l],c=s.length,m=i[l]=new Array(c),f,d=0;d<c;++d)(f=s[d]||u[d])&&(m[d]=f);for(;l<n;++l)i[l]=t[l];return new Oe(i,this._parents,this._name,this._id)}function qv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Gv(e,t,r){var n,o,a=qv(t)?na:Me;return function(){var i=a(this,e),l=i.on;l!==n&&(o=(n=l).copy()).on(t,r),i.on=o}}function xd(e,t){var r=this._id;return arguments.length<2?ye(this.node(),r).on.on(e):this.each(Gv(r,e,t))}function Uv(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function yd(){return this.on("end.remove",Uv(this._id))}function bd(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Xr(e));for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i)for(var l=n[i],s=l.length,u=a[i]=new Array(s),c,m,f=0;f<s;++f)(c=l[f])&&(m=e.call(c,c.__data__,f,l))&&("__data__"in c&&(m.__data__=c.__data__),u[f]=m,pr(u[f],t,r,f,u,ye(c,r)));return new Oe(a,this._parents,t,r)}function vd(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Po(e));for(var n=this._groups,o=n.length,a=[],i=[],l=0;l<o;++l)for(var s=n[l],u=s.length,c,m=0;m<u;++m)if(c=s[m]){for(var f=e.call(c,c.__data__,m,s),d,p=ye(c,r),h=0,x=f.length;h<x;++h)(d=f[h])&&pr(d,t,r,h,f,p);a.push(f),i.push(c)}return new Oe(a,i,t,r)}var Xv=yt.prototype.constructor;function wd(){return new Xv(this._groups,this._parents)}function jv(e,t){var r,n,o;return function(){var a=nr(this,e),i=(this.style.removeProperty(e),nr(this,e));return a===i?null:a===r&&i===n?o:o=t(r=a,n=i)}}function Sd(e){return function(){this.style.removeProperty(e)}}function Qv(e,t,r){var n,o=r+"",a;return function(){var i=nr(this,e);return i===o?null:i===n?a:a=t(n=i,r)}}function Kv(e,t,r){var n,o,a;return function(){var i=nr(this,e),l=r(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),nr(this,e))),i===s?null:i===n&&s===o?a:(o=s,a=t(n=i,l))}}function Jv(e,t){var r,n,o,a="style."+t,i="end."+a,l;return function(){var s=Me(this,e),u=s.on,c=s.value[a]==null?l||(l=Sd(t)):void 0;(u!==r||o!==c)&&(n=(r=u).copy()).on(i,o=c),s.on=n}}function _d(e,t,r){var n=(e+="")=="transform"?os:Hi;return t==null?this.styleTween(e,jv(e,n)).on("end.style."+e,Sd(e)):typeof t=="function"?this.styleTween(e,Kv(e,n,Wn(this,"style."+e,t))).each(Jv(this._id,e)):this.styleTween(e,Qv(e,n,t),r).on("end.style."+e,null)}function Zv(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function ew(e,t,r){var n,o;function a(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Zv(e,i,r)),n}return a._value=t,a}function Ad(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,ew(e,t,r??""))}function tw(e){return function(){this.textContent=e}}function rw(e){return function(){var t=e(this);this.textContent=t??""}}function Cd(e){return this.tween("text",typeof e=="function"?rw(Wn(this,"text",e)):tw(e==null?"":e+""))}function nw(e){return function(t){this.textContent=e.call(this,t)}}function ow(e){var t,r;function n(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&nw(o)),t}return n._value=e,n}function Md(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ow(e))}function Td(){for(var e=this._name,t=this._id,r=Yi(),n=this._groups,o=n.length,a=0;a<o;++a)for(var i=n[a],l=i.length,s,u=0;u<l;++u)if(s=i[u]){var c=ye(s,t);pr(s,e,r,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Oe(n,this._parents,e,r)}function Vd(){var e,t,r=this,n=r._id,o=r.size();return new Promise(function(a,i){var l={value:i},s={value:function(){--o===0&&a()}};r.each(function(){var u=Me(this,n),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),o===0&&a()})}var aw=0;function Oe(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function kd(e){return yt().transition(e)}function Yi(){return++aw}var qt=yt.prototype;Oe.prototype=kd.prototype={constructor:Oe,select:bd,selectAll:vd,selectChild:qt.selectChild,selectChildren:qt.selectChildren,filter:hd,merge:gd,selection:wd,transition:Td,call:qt.call,nodes:qt.nodes,node:qt.node,size:qt.size,empty:qt.empty,each:qt.each,on:xd,attr:ud,attrTween:cd,style:_d,styleTween:Ad,text:Cd,textTween:Md,remove:yd,tween:sd,delay:fd,duration:md,ease:dd,easeVarying:pd,end:Vd,[Symbol.iterator]:qt[Symbol.iterator]};function Wi(e){return--e*e*e+1}function qi(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var iw={time:null,delay:0,duration:250,ease:qi};function lw(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Dd(e){var t,r;e instanceof Oe?(t=e._id,e=e._name):(t=Yi(),(r=iw).time=ta(),e=e==null?null:e+"");for(var n=this._groups,o=n.length,a=0;a<o;++a)for(var i=n[a],l=i.length,s,u=0;u<l;++u)(s=i[u])&&pr(s,e,t,u,i,r||lw(s,t));return new Oe(n,this._parents,e,t)}yt.prototype.interrupt=ld;yt.prototype.transition=Dd;var{abs:AY,max:CY,min:MY}=Math;function Nd(e){return[+e[0],+e[1]]}function sw(e){return[Nd(e[0]),Nd(e[1])]}var TY={name:"x",handles:["w","e"].map(au),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},VY={name:"y",handles:["n","s"].map(au),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},kY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(au),input:function(e){return e==null?null:sw(e)},output:function(e){return e}};function au(e){return{type:e}}var oa=e=>()=>e;function iu(e,{sourceEvent:t,target:r,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function St(e,t,r){this.k=e,this.x=t,this.y=r}St.prototype={constructor:St,scale:function(e){return e===1?this:new St(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new St(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pt=new St(1,0,0);lu.prototype=St.prototype;function lu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Pt;return e.__zoom}function Gi(e){e.stopImmediatePropagation()}function qn(e){e.preventDefault(),e.stopImmediatePropagation()}function mw(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function dw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ed(){return this.__zoom||Pt}function pw(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function hw(){return navigator.maxTouchPoints||"ontouchstart"in this}function gw(e,t,r){var n=e.invertX(t[0][0])-r[0][0],o=e.invertX(t[1][0])-r[1][0],a=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function Ui(){var e=mw,t=dw,r=gw,n=pw,o=hw,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,s=is,u=Wt("start","zoom","end"),c,m,f,d=500,p=150,h=0,x=10;function g(w){w.property("__zoom",Ed).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",N).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(w,k,_,T){var C=w.selection?w.selection():w;C.property("__zoom",Ed),w!==C?b(w,k,_,T):C.interrupt().each(function(){y(this,arguments).event(T).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},g.scaleBy=function(w,k,_,T){g.scaleTo(w,function(){var C=this.__zoom.k,B=typeof k=="function"?k.apply(this,arguments):k;return C*B},_,T)},g.scaleTo=function(w,k,_,T){g.transform(w,function(){var C=t.apply(this,arguments),B=this.__zoom,L=_==null?v(C):typeof _=="function"?_.apply(this,arguments):_,W=B.invert(L),q=typeof k=="function"?k.apply(this,arguments):k;return r(A(S(B,q),L,W),C,i)},_,T)},g.translateBy=function(w,k,_,T){g.transform(w,function(){return r(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),i)},null,T)},g.translateTo=function(w,k,_,T,C){g.transform(w,function(){var B=t.apply(this,arguments),L=this.__zoom,W=T==null?v(B):typeof T=="function"?T.apply(this,arguments):T;return r(Pt.translate(W[0],W[1]).scale(L.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof _=="function"?-_.apply(this,arguments):-_),B,i)},T,C)};function S(w,k){return k=Math.max(a[0],Math.min(a[1],k)),k===w.k?w:new St(k,w.x,w.y)}function A(w,k,_){var T=k[0]-_[0]*w.k,C=k[1]-_[1]*w.k;return T===w.x&&C===w.y?w:new St(w.k,T,C)}function v(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function b(w,k,_,T){w.on("start.zoom",function(){y(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(T).end()}).tween("zoom",function(){var C=this,B=arguments,L=y(C,B).event(T),W=t.apply(C,B),q=_==null?v(W):typeof _=="function"?_.apply(C,B):_,D=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),O=C.__zoom,G=typeof k=="function"?k.apply(C,B):k,X=s(O.invert(q).concat(D/O.k),G.invert(q).concat(D/G.k));return function(J){if(J===1)J=G;else{var ue=X(J),$=D/ue[2];J=new St($,q[0]-ue[0]*$,q[1]-ue[1]*$)}L.zoom(null,J)}})}function y(w,k,_){return!_&&w.__zooming||new M(w,k)}function M(w,k){this.that=w,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,k),this.taps=0}M.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,k){return this.mouse&&w!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var k=P(this.that).datum();u.call(w,this.that,new iu(w,{sourceEvent:this.sourceEvent,target:g,type:w,transform:this.that.__zoom,dispatch:u}),k)}};function V(w,...k){if(!e.apply(this,arguments))return;var _=y(this,k).event(w),T=this.__zoom,C=Math.max(a[0],Math.min(a[1],T.k*Math.pow(2,n.apply(this,arguments)))),B=We(w);if(_.wheel)(_.mouse[0][0]!==B[0]||_.mouse[0][1]!==B[1])&&(_.mouse[1]=T.invert(_.mouse[0]=B)),clearTimeout(_.wheel);else{if(T.k===C)return;_.mouse=[B,T.invert(B)],hr(this),_.start()}qn(w),_.wheel=setTimeout(L,p),_.zoom("mouse",r(A(S(T,C),_.mouse[0],_.mouse[1]),_.extent,i));function L(){_.wheel=null,_.end()}}function F(w,...k){if(f||!e.apply(this,arguments))return;var _=w.currentTarget,T=y(this,k,!0).event(w),C=P(w.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",D,!0),B=We(w,_),L=w.clientX,W=w.clientY;Go(w.view),Gi(w),T.mouse=[B,this.__zoom.invert(B)],hr(this),T.start();function q(O){if(qn(O),!T.moved){var G=O.clientX-L,X=O.clientY-W;T.moved=G*G+X*X>h}T.event(O).zoom("mouse",r(A(T.that.__zoom,T.mouse[0]=We(O,_),T.mouse[1]),T.extent,i))}function D(O){C.on("mousemove.zoom mouseup.zoom",null),Uo(O.view,T.moved),qn(O),T.event(O).end()}}function R(w,...k){if(e.apply(this,arguments)){var _=this.__zoom,T=We(w.changedTouches?w.changedTouches[0]:w,this),C=_.invert(T),B=_.k*(w.shiftKey?.5:2),L=r(A(S(_,B),T,C),t.apply(this,k),i);qn(w),l>0?P(this).transition().duration(l).call(b,L,T,w):P(this).call(g.transform,L,T,w)}}function N(w,...k){if(e.apply(this,arguments)){var _=w.touches,T=_.length,C=y(this,k,w.changedTouches.length===T).event(w),B,L,W,q;for(Gi(w),L=0;L<T;++L)W=_[L],q=We(W,this),q=[q,this.__zoom.invert(q),W.identifier],C.touch0?!C.touch1&&C.touch0[2]!==q[2]&&(C.touch1=q,C.taps=0):(C.touch0=q,B=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),B&&(C.taps<2&&(m=q[0],c=setTimeout(function(){c=null},d)),hr(this),C.start())}}function Y(w,...k){if(this.__zooming){var _=y(this,k).event(w),T=w.changedTouches,C=T.length,B,L,W,q;for(qn(w),B=0;B<C;++B)L=T[B],W=We(L,this),_.touch0&&_.touch0[2]===L.identifier?_.touch0[0]=W:_.touch1&&_.touch1[2]===L.identifier&&(_.touch1[0]=W);if(L=_.that.__zoom,_.touch1){var D=_.touch0[0],O=_.touch0[1],G=_.touch1[0],X=_.touch1[1],J=(J=G[0]-D[0])*J+(J=G[1]-D[1])*J,ue=(ue=X[0]-O[0])*ue+(ue=X[1]-O[1])*ue;L=S(L,Math.sqrt(J/ue)),W=[(D[0]+G[0])/2,(D[1]+G[1])/2],q=[(O[0]+X[0])/2,(O[1]+X[1])/2]}else if(_.touch0)W=_.touch0[0],q=_.touch0[1];else return;_.zoom("touch",r(A(L,W,q),_.extent,i))}}function E(w,...k){if(this.__zooming){var _=y(this,k).event(w),T=w.changedTouches,C=T.length,B,L;for(Gi(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),B=0;B<C;++B)L=T[B],_.touch0&&_.touch0[2]===L.identifier?delete _.touch0:_.touch1&&_.touch1[2]===L.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(L=We(L,this),Math.hypot(m[0]-L[0],m[1]-L[1])<x)){var W=P(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return g.wheelDelta=function(w){return arguments.length?(n=typeof w=="function"?w:oa(+w),g):n},g.filter=function(w){return arguments.length?(e=typeof w=="function"?w:oa(!!w),g):e},g.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:oa(!!w),g):o},g.extent=function(w){return arguments.length?(t=typeof w=="function"?w:oa([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),g):t},g.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],g):[a[0],a[1]]},g.translateExtent=function(w){return arguments.length?(i[0][0]=+w[0][0],i[1][0]=+w[1][0],i[0][1]=+w[0][1],i[1][1]=+w[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(w){return arguments.length?(r=w,g):r},g.duration=function(w){return arguments.length?(l=+w,g):l},g.interpolate=function(w){return arguments.length?(s=w,g):s},g.on=function(){var w=u.on.apply(u,arguments);return w===u?g:w},g.clickDistance=function(w){return arguments.length?(h=(w=+w)*w,g):Math.sqrt(h)},g.tapDistance=function(w){return arguments.length?(x=+w,g):x},g}var aW=Symbol("d3fc-domain-zoom");var re={none:"none",ordinal:"ordinal",time:"time",linear:"linear"},Gn=e=>{let t="crossValues",r=null,n=null,o=()=>{let a=i=>{let l=r?e[t].filter(s=>r==s.name):e[t];return t=="crossValues"&&l.length>1?!1:l.some(s=>i.includes(s.type))};return e[t].length===0?re.none:n!=re.time&&a(["datetime","date"])?re.time:n!=re.linear&&a(["integer","float"])||n==re.ordinal?re.linear:re.ordinal};return o.settingName=(...a)=>a.length?(t=a[0],o):t,o.settingValue=(...a)=>a.length?(r=a[0],o):r,o.excludeType=(...a)=>a.length?(n=a[0],o):n,o};var mu={};Aa(mu,{domain:()=>Vw,labelFunction:()=>fu,scale:()=>Tw});function xw(e){var t=0,r=e.children,n=r&&r.length;if(!n)t=1;else for(;--n>=0;)t+=r[n].value;e.value=t}function Pd(){return this.eachAfter(xw)}function Ld(e,t){let r=-1;for(let n of this)e.call(t,n,++r,this);return this}function zd(e,t){for(var r=this,n=[r],o,a,i=-1;r=n.pop();)if(e.call(t,r,++i,this),o=r.children)for(a=o.length-1;a>=0;--a)n.push(o[a]);return this}function Bd(e,t){for(var r=this,n=[r],o=[],a,i,l,s=-1;r=n.pop();)if(o.push(r),a=r.children)for(i=0,l=a.length;i<l;++i)n.push(a[i]);for(;r=o.pop();)e.call(t,r,++s,this);return this}function Od(e,t){let r=-1;for(let n of this)if(e.call(t,n,++r,this))return n}function Id(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,n=t.children,o=n&&n.length;--o>=0;)r+=n[o].value;t.value=r})}function Rd(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Fd(e){for(var t=this,r=yw(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var o=n.length;e!==r;)n.splice(o,0,e),e=e.parent;return n}function yw(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),o=null;for(e=r.pop(),t=n.pop();e===t;)o=e,e=r.pop(),t=n.pop();return o}function $d(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Hd(){return Array.from(this)}function Yd(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Wd(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*qd(){var e=this,t,r=[e],n,o,a;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,n=e.children)for(o=0,a=n.length;o<a;++o)r.push(n[o]);while(r.length)}function gr(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=ww)):t===void 0&&(t=vw);for(var r=new aa(e),n,o=[r],a,i,l,s;n=o.pop();)if((i=t(n.data))&&(s=(i=Array.from(i)).length))for(n.children=i,l=s-1;l>=0;--l)o.push(a=i[l]=new aa(i[l])),a.parent=n,a.depth=n.depth+1;return r.eachBefore(_w)}function bw(){return gr(this).eachBefore(Sw)}function vw(e){return e.children}function ww(e){return Array.isArray(e)?e[1]:null}function Sw(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function _w(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function aa(e){this.data=e,this.depth=this.height=0,this.parent=null}aa.prototype=gr.prototype={constructor:aa,count:Pd,each:Ld,eachAfter:Bd,eachBefore:zd,find:Od,sum:Id,sort:Rd,path:Fd,ancestors:$d,descendants:Hd,leaves:Yd,links:Wd,copy:bw,[Symbol.iterator]:qd};function Gd(e){if(typeof e!="function")throw new Error;return e}function Un(){return 0}function Xn(e){return function(){return e}}function Xi(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ji(e,t,r,n,o){for(var a=e.children,i,l=-1,s=a.length,u=e.value&&(n-t)/e.value;++l<s;)i=a[l],i.y0=r,i.y1=o,i.x0=t,i.x1=t+=i.value*u}function su(){var e=1,t=1,r=0,n=!1;function o(i){var l=i.height+1;return i.x0=i.y0=r,i.x1=e,i.y1=t/l,i.eachBefore(a(t,l)),n&&i.eachBefore(Xi),i}function a(i,l){return function(s){s.children&&ji(s,s.x0,i*(s.depth+1)/l,s.x1,i*(s.depth+2)/l);var u=s.x0,c=s.y0,m=s.x1-r,f=s.y1-r;m<u&&(u=m=(u+m)/2),f<c&&(c=f=(c+f)/2),s.x0=u,s.y0=c,s.x1=m,s.y1=f}}return o.round=function(i){return arguments.length?(n=!!i,o):n},o.size=function(i){return arguments.length?(e=+i[0],t=+i[1],o):[e,t]},o.padding=function(i){return arguments.length?(r=+i,o):r},o}function Ud(e,t,r,n,o){for(var a=e.children,i,l=-1,s=a.length,u=e.value&&(o-r)/e.value;++l<s;)i=a[l],i.x0=t,i.x1=n,i.y0=r,i.y1=r+=i.value*u}var Aw=(1+Math.sqrt(5))/2;function Cw(e,t,r,n,o,a){for(var i=[],l=t.children,s,u,c=0,m=0,f=l.length,d,p,h=t.value,x,g,S,A,v,b,y;c<f;){d=o-r,p=a-n;do x=l[m++].value;while(!x&&m<f);for(g=S=x,b=Math.max(p/d,d/p)/(h*e),y=x*x*b,v=Math.max(S/y,y/g);m<f;++m){if(x+=u=l[m].value,u<g&&(g=u),u>S&&(S=u),y=x*x*b,A=Math.max(S/y,y/g),A>v){x-=u;break}v=A}i.push(s={value:x,dice:d<p,children:l.slice(c,m)}),s.dice?ji(s,r,n,o,h?n+=p*x/h:a):Ud(s,r,n,h?r+=d*x/h:o,a),h-=x,c=m}return i}var Xd=function e(t){function r(n,o,a,i,l){Cw(t,n,o,a,i,l)}return r.ratio=function(n){return e((n=+n)>1?n:1)},r}(Aw);function uu(){var e=Xd,t=!1,r=1,n=1,o=[0],a=Un,i=Un,l=Un,s=Un,u=Un;function c(f){return f.x0=f.y0=0,f.x1=r,f.y1=n,f.eachBefore(m),o=[0],t&&f.eachBefore(Xi),f}function m(f){var d=o[f.depth],p=f.x0+d,h=f.y0+d,x=f.x1-d,g=f.y1-d;x<p&&(p=x=(p+x)/2),g<h&&(h=g=(h+g)/2),f.x0=p,f.y0=h,f.x1=x,f.y1=g,f.children&&(d=o[f.depth+1]=a(f)/2,p+=u(f)-d,h+=i(f)-d,x-=l(f)-d,g-=s(f)-d,x<p&&(p=x=(p+x)/2),g<h&&(h=g=(h+g)/2),e(f,p,h,x,g))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(r=+f[0],n=+f[1],c):[r,n]},c.tile=function(f){return arguments.length?(e=Gd(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(a=typeof f=="function"?f:Xn(+f),c):a},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(i=typeof f=="function"?f:Xn(+f),c):i},c.paddingRight=function(f){return arguments.length?(l=typeof f=="function"?f:Xn(+f),c):l},c.paddingBottom=function(f){return arguments.length?(s=typeof f=="function"?f:Xn(+f),c):s},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:Xn(+f),c):u},c}function cu(e,t,r,n,o){var a=e.children,i,l=a.length,s,u=new Array(l+1);for(u[0]=s=i=0;i<l;++i)u[i+1]=s+=a[i].value;c(0,l,e.value,t,r,n,o);function c(m,f,d,p,h,x,g){if(m>=f-1){var S=a[m];S.x0=p,S.y0=h,S.x1=x,S.y1=g;return}for(var A=u[m],v=d/2+A,b=m+1,y=f-1;b<y;){var M=b+y>>>1;u[M]<v?b=M+1:y=M}v-u[b-1]<u[b]-v&&m+1<b&&--b;var V=u[b]-A,F=d-V;if(x-p>g-h){var R=d?(p*F+x*V)/d:x;c(m,b,V,p,h,R,g),c(b,f,F,R,h,x,g)}else{var N=d?(h*F+g*V)/d:g;c(m,b,V,p,h,x,N),c(b,f,F,p,N,x,g)}}}var jd=e=>{let t=r=>(n,o)=>n===void 0?o:o===void 0?n:r(n,o);return e.reduce((r,n)=>[t(Math.min)(r[0],n[0]),t(Math.max)(r[1],n[1])],[void 0,void 0])},xr=e=>Array.isArray(e)?e.flat(1/0):[e];var Mw=1,Qi=e=>{let t=r=>e(r);return z(t,e),t.bandwidth=(...r)=>r.length?(e.bandwidth(...r),t):Math.max(e.bandwidth(),Mw),t};var Qd=e=>{let t=r=>e(r);return z(t,e),t.ticks=function(){return[]},t};var Tw=()=>Qd(Qi(dt())),Vw=()=>{let e=["crossValue"],t="horizontal",r=o=>{let a=xr(o);return n([...new Set(a.map(i=>i[e[0]]))])},n=o=>t=="vertical"?o.reverse():o;return r.valueName=(...o)=>o.length?(e=[o[0]],r):e[0],r.valueNames=(...o)=>o.length?(e=o[0],r):e,r.orient=(...o)=>o.length?(t=o[0],r):t,r},fu=e=>t=>t[e].join("|");var Zi={};Aa(Zi,{component:()=>Nw,domain:()=>pu,labelFunction:()=>hu,scale:()=>Dw,tickFormatFunction:()=>gu});var Ki=()=>{let e=[0,0],t="percent",r=n=>{switch(t){case"domain":{n[0]-=e[0],n[1]+=e[1];break}case"percent":{let o=n[1]-n[0];n[0]-=e[0]*o,n[1]+=e[1]*o;break}default:throw new Error("Unknown padUnit: "+t)}return n};return r.pad=function(...n){return n.length?(e=n[0],r):e},r.padUnit=function(...n){return n.length?(t=n[0],r):t},r};var Kd=function(){let e=[function(a){return a}],t=null,r=[],n=Ki(),o=function(i){let l=new Array(i.length),s=!0,u=!1,c,m=e[Symbol.iterator]();try{for(let d;!(s=(d=m.next()).done);s=!0){let p=d.value;for(let h=0;h<i.length;h++){let x=p(i[h],h);Array.isArray(x)?l.push.apply(l,du(x)):l.push(x)}}}catch(d){u=!0,c=d}finally{try{!s&&m.return&&m.return()}finally{if(u)throw c}}let f=[Fe(l),ot(l)];if(f[0]=f[0]==null?Fe(r):Fe([f[0]].concat(du(r))),f[1]=f[1]==null?ot(r):ot([f[1]].concat(du(r))),t!=null){let d=Math.max(Math.abs(f[1]-t),Math.abs(f[0]-t));f[0]=t-d,f[1]=t+d}return n(f)};return o.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.pad=function(...a){return a.length?(n.pad(a[0]),o):n.pad},o.padUnit=function(...a){return a.length?(n.padUnit(a[0]),o):n.padUnit},o.include=function(...a){return a.length?(r=a[0],o):r},o.symmetricalAbout=function(...a){return a.length?(t=a[0],o):t},o.paddingStrategy=function(...a){return a.length?(n=a[0],o):n},o},du=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)};var kw=1e7,Ji=(e,t)=>{let r=Math.ceil(Math.abs(Math.log10(t-e)))+1;return n=>Math.abs(n)>=kw?kt(".3s")(n):Number.isInteger(n)?kt(",.0f")(n):kt(`,.${r}f`)(n)};function jn(e){return e.getRootNode().host}function yr(e){return e.closest("#container.chart")}var Dw=()=>ke(),pu=()=>{let e=Kd().pad([0,.1]).padUnit("percent"),t=["crossValue"],r=a=>(e.accessors(t.map(i=>l=>parseFloat(l[i]))),o(xr(a)));z(r,e);let n=a=>{let i=t.map(l=>a.map(s=>s[l]).sort((s,u)=>s-u).filter((s,u,c)=>u===0||s!==c[u-1]).reduce((s,u,c,m)=>c===0||s<=u-m[c-1]?s:Math.abs(u-m[c-1])));return Math.min(...i)},o=a=>{if(e.padUnit()=="domain"){let i=n(a);return e.pad([i/2,i/2])(a)}else return e(a)};return r.valueName=(...a)=>a.length?(t=[a[0]],r):t[0],r.valueNames=(...a)=>a.length?(t=a[0],r):t,r},hu=e=>t=>t[e][0],gu=Ji,Nw=e=>{let t=null,r="horizontal",n=null,o=(u,c)=>{try{return yr(u.node()).querySelector(".cartesian-chart").querySelector(`.${c}-axis`)}catch{return null}},a=u=>{let c=P(u).select("text").node();c.style.fontSize="80%"},i=(u,c)=>{let m=u.getBoundingClientRect();c.each((f,d,p)=>{let h=P(p[d]).node().getBoundingClientRect();(r=="vertical"&&m.width<h.width||r=="horizontal"&&m.height<h.height)&&a(p[d])})},l=(u,c,m)=>{let f=o(u,c);f&&i(f,u)},s=()=>({bottom:Fn,left:$n,top:Rn,right:mr,decorate:l});return s.domain=(...u)=>u.length?(t=u[0],s):t,s.orient=(...u)=>u.length?(r=u[0],s):r,s.settingName=(...u)=>u.length?(n=u[0],s):n,s};var yu={};Aa(yu,{domain:()=>Pw,labelFunction:()=>xu,scale:()=>Ew});var Ew=()=>Pn(),Pw=()=>{let e=No(),t=["crossValue"],r=a=>(e.accessors(t.map(i=>l=>new Date(l[i]))),o(xr(a)));z(r,e,Q("include","paddingStrategy"));let n=a=>{let i=t.map(l=>a.map(s=>new Date(s[l]).getTime()).sort((s,u)=>s-u).filter((s,u,c)=>u===0||s!==c[u-1]).reduce((s,u,c,m)=>c===0||Math.abs(s)<=Math.abs(u-m[c-1])?Math.abs(s):Math.abs(u-m[c-1])));return Math.min(...i)},o=a=>{let i=Math.abs(n(a));return e.padUnit("domain").pad([i/2,i/2])(a)};return r.valueName=(...a)=>a.length?(t=[a[0]],r):t[0],r.valueNames=(...a)=>a.length?(t=a[0],r):t,r},xu=e=>t=>new Date(t[e][0]);var vu={};Aa(vu,{component:()=>Bw,domain:()=>zw,labelFunction:()=>bu,scale:()=>Lw});var Jd=(...e)=>{let t={},r=n=>{for(let o of Object.keys(t))n[o](t[o]);return n};for(let n of e)r[n]=(...o)=>o.length?(t[n]=o[0],r):t[n];return r};var el=(e,t,r)=>{let n=6,o=6,a=Jd("tickFormat","ticks","tickArguments","tickValues","tickPadding"),i=(...h)=>{},l=null,s=U("g","group"),u=U("path","domain"),c=(h,x)=>f()?`translate(${x}, ${h})`:`translate(${h}, ${x})`,m=h=>f()?h.map(x=>[x[1],x[0]]):h,f=()=>e==="left"||e==="right",d=h=>{if(!l){a(t(r).decorate(i))(h);return}h.each((x,g,S)=>{let A=S[g],v=P(A),b=e==="bottom"||e==="right"?1:-1,y=r.range(),M=m([[y[0],b*n],[y[0],0],[y[1],0],[y[1],b*n]]);u(v,[x]).attr("d",Ze()(M)).attr("stroke","#000").attr("fill","none");let F=s(v,l),R=Y=>Array.isArray(o)?o[Y]:o,N=Y=>{let E=0;for(let w=0;w<Y;w++)E+=R(w);return E};F.attr("transform",(Y,E)=>c(0,b*N(E))).each((Y,E,w)=>{let k=P(w[E]),_=p(r,Y);a(t(_)).decorate((C,B)=>i(C,B,E)).tickSizeInner(R(E)).tickOffset(C=>_.step(C)/2)(k),k.select("path.domain").attr("visibility","hidden")}),F.exit().attr("transform",(Y,E)=>c(0,b*N(E)))})},p=(h,x)=>{function g(S){let A=S.domain;return A.reduce((v,b)=>v+h(b),0)/A.length}return g.ticks=()=>x,g.tickFormat=()=>S=>S.text,g.copy=()=>p(h,x),g.step=S=>S.domain.length*h.step(),z(g,h,Q("ticks","step","copy")),g};return d.tickSize=(...h)=>h.length?(o=n=Number(h[0]),d):o,d.tickSizeInner=(...h)=>h.length?(o=Array.isArray(h[0])?h[0]:Number(h[0]),d):o,d.tickSizeOuter=(...h)=>h.length?(n=Number(h[0]),d):n,d.decorate=(...h)=>h.length?(i=h[0],d):i,d.groups=(...h)=>h.length?(l=h[0],d):l,z(d,a),d},Zd=e=>el("top",wi,e),ep=e=>el("bottom",Si,e),tp=e=>el("left",_i,e),rp=e=>el("right",Ai,e);var Lw=()=>Qi(dt()).padding(.5),zw=()=>{let e=["crossValue"],t="horizontal",r=o=>{let a=xr(o);return n([...Array.from(new Set(a.map(i=>i[e[0]])))])},n=o=>t=="vertical"?o.reverse():o;return r.valueName=(...o)=>o.length?(e=[o[0]],r):e[0],r.valueNames=(...o)=>o.length?(e=o[0],r):e,r.orient=(...o)=>o.length?(t=o[0],r):t,r},bu=(e,t)=>r=>r[e].map((n,o)=>{let a=t.crossValues[o].type;return a==="datetime"?new Date(n).toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3}):a==="date"?new Date(n).toLocaleDateString():n}).join("|"),Bw=e=>{let t="horizontal",r="crossValues",n=null,o=()=>{let f=e[r].length>1,d=i(n),p=d.map(l),h=f?p.map(v=>v.size):p[0].size,x=p.reduce((v,b)=>v+b.size,0),g=v=>b=>{let y=v(b);return f&&y.groups(d).tickSizeInner(h).tickSizeOuter(x),t!=="horizontal"&&y.tickPadding(10),y},S=(v,b,y)=>{let M=p[y].rotation;t==="horizontal"&&m(v,M),s(v,M)},A=a(f);return{bottom:g(A.bottom),left:g(A.left),right:g(A.right),top:g(A.top),size:`${x+10}px`,decorate:S}},a=f=>f?{bottom:ep,left:tp,top:Zd,right:rp}:{bottom:Si,left:_i,top:wi,right:Ai},i=f=>{let d=[];return f.forEach(p=>{(p&&p.split?p.split("|"):[p]).forEach((x,g)=>{for(;d.length<=g;)d.push([]);let S=d[g];S.length>0&&S[S.length-1].text===x?S[S.length-1].domain.push(p):S.push({text:x,domain:[p]})})}),d.reverse()},l=f=>{let d=e.size.width,p=Math.max(...f.map(h=>h.text?h.text.length:0));return t==="horizontal"?f&&f.length*16>d-100?{size:p*6.62+10,rotation:90}:f&&f.length*(p*6+10)>d-100?{size:p*4+20,rotation:45}:{size:25,rotation:0}:{size:p*6.62+10,rotation:0}},s=(f,d)=>{let p=b=>{let y=b.indexOf(",")!==-1?",":" ",M=b.substring(b.indexOf("(")+1,b.indexOf(")")).split(y).map(V=>parseInt(V));for(;M.length<2;)M.push(0);return M},g=d?(b,y)=>b.x+b.width+14>y.x+y.width:(b,y)=>b.x<=y.x+y.width&&y.x<=b.x+b.width&&b.y<=y.y+y.height&&y.y<=b.y+b.height,S=(b,y)=>b.x>=y.x&&b.x+b.width<=y.x+y.width&&b.y>=y.y&&b.y+b.height<=y.y+y.height,A=t=="horizontal"?u(f):null,v=[];f.each((b,y,M)=>{let V=P(M[y]),F=p(V.attr("transform")),R=V.node().getBBox(),N={x:R.x+F[0],y:R.y+F[1],width:R.width,height:R.height},E=v.some(w=>g(w,N))||A&&!S(N,A);V.attr("visibility",E?"hidden":""),E||v.push(N)})},u=f=>{let d=yr(f.node());if(d===null)return;let p=d.querySelector(".cartesian-chart"),h=p.querySelector(".x-axis"),x=p.getBoundingClientRect(),g=h.getBoundingClientRect();return{x:x.left-g.left,width:x.width,y:x.top-g.top,height:x.height}},c=f=>f?f<60?`rotate(-${f} 5 5)`:`rotate(-${f} 3 7)`:"translate(0, 8)",m=(f,d)=>{let p=c(d),h=d?"end":"";f.each((x,g,S)=>{P(S[g]).select("text").attr("transform",p).style("text-anchor",h)})};return o.orient=(...f)=>f.length?(t=f[0],o):t,o.settingName=(...f)=>f.length?(r=f[0],o):r,o.domain=(...f)=>f.length?(n=f[0],o):n,o};var Ow={none:mu,ordinal:vu,time:yu,linear:Zi},ae=e=>{let t=null,r="horizontal",n="crossValues",o,a=["crossValue"],i=null,l=null,s=["include","paddingStrategy","pad"],u={},c=d=>{let p=Gn(e).excludeType(t).settingName(n).settingValue(o)(),h=Ow[p],x=h.domain().valueNames(a);s.forEach(v=>{u[v]&&x[v]&&x[v](u[v])}),x.orient&&x.orient(r);let g=x(d);i!==null&&(g=i(g)),l&&typeof g[0]=="number"&&(l[0]=g[0]=Math.min(g[0],l[0]),l[1]=g[1]=Math.max(g[1],l[1]));let S=h.hasOwnProperty("component")?m(h,g,d):f(),A=h==Zi?gu(g[0],g[1]):void 0;return{scale:h.scale(),domain:g,domainFunction:x,labelFunction:h.labelFunction,component:{bottom:S.bottom,left:S.left,top:S.top,right:S.right},size:S.size,decorate:S.decorate,label:e[n].map(v=>v.name).join(", "),tickFormatFunction:A}},m=(d,p,h)=>d.component(e).orient(r).settingName(n).domain(p)(h),f=()=>({bottom:Fn,left:$n,top:Rn,right:mr,decorate:()=>{}});return c.memoValue=(...d)=>d.length?(l=d[0],c):l,c.excludeType=(...d)=>d.length?(t=d[0],c):t,c.orient=(...d)=>d.length?(r=d[0],c):r,c.settingName=(...d)=>d.length?(n=d[0],c):n,c.settingValue=(...d)=>d.length?(o=d[0],c):o,c.valueName=(...d)=>d.length?(a=[d[0]],c):a[0],c.valueNames=(...d)=>d.length?(a=d[0],c):a,c.modifyDomain=d=>d?(i=d,c):i,s.forEach(d=>{c[d]=(...p)=>p.length?(u[d]=p[0],c):u[d]}),c};var ut=(e,t)=>np(e,t,(r,n)=>r.svgPlotArea(n),!1),Qn=(e,t)=>np(e,t,(r,n)=>r.canvasPlotArea(n).svgPlotArea(Bn()),!0),np=(e,t,r,n)=>{let o=null,a=null,i=qo({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&i.xDecorate(e.decorate),t.decorate&&i.yDecorate(t.decorate),i.xPaddingInner&&i.xPaddingInner(1),i.xPaddingOuter&&i.xPaddingOuter(.5),i.yPaddingInner&&i.yPaddingInner(1),i.yPaddingOuter&&i.yPaddingOuter(.5),i.axisSplitter=(...s)=>s.length?(o=s[0],i):o,i.altAxis=(...s)=>s.length?(a=s[0],i):a,i.plotArea=function(...s){return s.length==0?n?this.canvasPlotArea():this.svgPlotArea():r(this,...s)};let l=i.decorate();return i.decorate((s,u)=>{let c=s.select("d3fc-svg.plot-area"),m=c.select("svg").node();m.setAttribute("viewBox",`0 0 ${c.node().clientWidth} ${c.node().clientHeight}`),m.setAttribute("preserveAspectRatio","none");for(let f of["x-axis","y-axis"])s.select(`d3fc-svg.${f} svg`).node().setAttribute("preserveAspectRatio","none");if(l(s,u),n){let f=s.select(".svg-plot-area").node(),d=s.select(".canvas-plot-area").node();Ns([f,d]).order()}if(o){if(o.haveSplit()){let f=o.altData(),d=U("d3fc-svg","y2-axis").key(g=>g),p=U("g","y-series").key(g=>g);s.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",a.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");let h=a.scale.domain(a.domain),x=a.component.right(h);if(x.tickFormat(a.tickFormatFunction),a.decorate&&x.decorate(a.decorate),d(s,["right"]).attr("class",g=>`y2-axis ${g}-axis`).on("measure",function(g,S){let{width:A,height:v}=g.detail;S==="left"&&P(g.currentTarget).select("svg").attr("viewBox",`${-A} 0 ${A} ${v}`).attr("preserveAspectRatio","none"),h.range([v,0])}).on("draw",function(g,S){P(g.currentTarget).select("svg").call(x)}),n){let g=S=>{let A=i.plotArea();A.context(S.node().getContext("2d")).xScale(e.scale);let v=[t.scale,h];[u,f].forEach((b,y)=>{A.yScale(v[y]),A(b)})};s.select("d3fc-canvas.plot-area").on("draw",function(S,A){g(P(S.currentTarget).select("canvas"))})}else{let g=function(S){let A=i.plotArea();A.xScale(e.scale);let v=[t.scale,h];p(S,[u,f]).each((b,y,M)=>{A.yScale(v[y]),P(M[y]).datum(b).call(A)})};s.select("d3fc-svg.plot-area").on("draw",function(S,A){g(P(S.currentTarget).select("svg"))})}}o(s)}}),i};function be(e,t,r){let n=e.select(t);return n.size()>0?n:r()}function Lt(e,t,r="right"){if(r==="right"||r==="bottom")return e[r]<t[r];if(r==="left"||r==="top")return e[r]>t[r];throw`Direction being checked for overflow is invalid: ${r}`}function wu(e,t,r,n=0){let o=e==="x"?"width":"height",a=t[e],i=t[e]+t[o],l=r[e],s=r[e]+r[o],u=l+n>a&&l-n<i,c=s+n>a&&s-n<i,m=l+n<a&&s-n>i;return u||c||m}var op=`<ul id="tooltip-values"></ul>
`;function Gt(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString([],{dateStyle:"short",timeStyle:"medium"});case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function tl(e,t){return t.crossValues.length===0?[]:e.crossValue.length===0?[]:((e.crossValue.split?e.crossValue.split("|"):Array.isArray(e.crossValue)?e.crossValue:[e.crossValue])||[e.key]).map((n,o)=>({name:t.crossValues[o].name,value:Gt(t.crossValues[o].type,n)}))}function rl(e,t){if(t.splitValues.length===0)return[];let r=[e.mainValue];return e.key?r=e.key.split("|"):e.mainValue?.split&&(r=e.mainValue.split("|")),t.splitValues.map((n,o)=>({name:n.name,value:Gt(n.type,r[o])}))}function nl(e,t){return t.mainValues.length>1?e.mainValues?t.mainValues.map((r,n)=>({name:r.name,value:Gt(r.type,e.mainValues[n])})):t.mainValues.map(r=>({name:r.name,value:Gt(r.type,e.row[Rw(e.key,r,t.realValues)])})):[{name:t.mainValues[0].name,value:Gt(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}function Rw(e,t,r){if(!e)return t.name;if(e.includes("|")){let o=e.split("|");return o[o.length-1]===t.name?e:`${r.includes(o[o.length-1])?o.slice(0,o.length-1).join("|"):e}|${t.name}`}return r.includes(e)?t.name:`${e}|${t.name}`}function ap(e,t,r){let n=tl(t,r).concat(rl(t,r)).concat(nl(t,r));Fw(e,n)}function Fw(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each(function(r){P(this).text(`${r.name}: `).append("b").text($w(r.value))})}var $w=e=>e==null?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});var ip=e=>[e.name,"==",e.value],ia=(e,t,r)=>{let n=nl(t,r).map(l=>l.name),o=tl(t,r).map(ip),a=rl(t,r).map(ip),i=r.filter.concat(o).concat(a);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:n,config:{filter:i},row:t.row}}))},lp=()=>{let e=null,t=r=>{let n=r.node();r.on("click",(o,a)=>ia(n,a,e))};return t.settings=(...r)=>r.length?(e=r[0],t):e,t};var br=()=>{let e=!1,t=null,r=null,n=!1,o=a=>{let i=a.node();if(!i||!i.isConnected){sp(t);return}let l=P(yr(i));t=Hw(l);let s=function(c,m){ap(t,m,r);let f=a.nodes(),d=f.indexOf(this);Yw(l.node(),f[d],t,n),P(f[d]).style("opacity","0.7")},u=function(c,m){sp(t);let f=a.nodes(),d=f.indexOf(this);f&&P(f[d]).style("opacity","1")};e?a.each(function(c){return s.call(this,void 0,c)}):(a.on("mouseover",s).on("mouseout",u),lp().settings(r)(a))};return o.alwaysShow=(...a)=>a.length?(e=a[0],o):e,o.centered=(...a)=>a.length?(n=a[0],o):n,o.settings=(...a)=>a.length?(r=a[0],o):r,o};function Hw(e){return be(e,"div.tooltip",()=>e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(op))}function Yw(e,t,r,n){let o=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=a.left+a.width/2-o.left,l=a.top-o.top+e.scrollTop;n&&(l=a.top+a.height/2-o.top+e.scrollTop),r.style("left",`${i}px`).style("top",`${l}px`).style("opacity",.9),n&&([i,l]=Ww(r,o)),qw(r,o,i,l,n)}function Ww(e,t){let r=e.node().getBoundingClientRect(),n=r.width/2,o=r.left-n-t.left;e.style("left",`${o}px`);let a=r.height/2,i=r.top-a-t.top;return e.style("top",`${i}px`),[o,i]}function qw(e,t,r,n,o=!1){let a=e.node().getBoundingClientRect();if(Lt(t,a)){let i=a.right-t.right;e.style("left",`${r-i}px`)}if(Lt(t,a,"bottom")){let i=a.bottom-t.bottom;e.style("top",`${n-i}px`)}if(o){if(Lt(t,a,"left")){let i=a.left-t.left;e.style("left",`${r-i}px`)}if(Lt(t,a,"top")){let i=a.top-t.top;e.style("top",`${n-i}px`)}}}function sp(e){e&&e.style("opacity",0)}function ol(e,t){let r=e.mainValues.length>1?Ys(On()):On();return r=r.decorate(n=>{br().settings(e)(n),n.style("fill",o=>t(o.key))}),Jr(Gw(r)).crossValue(n=>n.crossValue).mainValue(n=>n.mainValue?n.mainValue:0).baseValue(n=>n.baseValue)}var Gw=e=>{let t=r=>e(r);return z(t,e),t.bandwidth=(...r)=>r.length?(e.bandwidth(Math.max(r[0],1)),t):e.bandwidth(),t};function vr(e){return e.split("|").slice(0,-1).join("|")}function al(e,t){return e.data.map(r=>Object.entries(r).filter(([n,o])=>n.split("|").at(-1)===t&&!!o).map(([n,o])=>o)).flat()}function zt(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=Object.keys(t).filter(n=>n!=="__ROW_PATH__");return _t().settings(e).domain(r)()}function up(e,t){let r=al(e,t),n=[...new Set(r)].sort();return _t().settings(e).domain(n)()}function rn(e,t){let r=[...new Set(t)];return _t().settings(e).domain(r)()}function cp(e){let t=e.data[0]??{},r=Object.keys(t).filter(o=>o!=="__ROW_PATH__").map(o=>vr(o)),n=[...new Set(r)];return _t().settings(e).domain(n)()}function _t(){let e=null,t=null,r={},n=a=>nn(a,r.colorStyles&&r.colorStyles.opacity),o=()=>{let a=r.colorStyles,i=t||[a.series];if(i||e.length>1){let l=e.length>1?a.scheme:i;return mt(l.map(n)).domain(e)}return null};return o.domain=(...a)=>a.length===0?e:(e=a[0],o),o.defaultColors=(...a)=>a.length?(t=a[0],o):t,o.mapFunction=(...a)=>a.length?(n=a[0],o):n,o.settings=(...a)=>a.length?(r=a[0],o):r,o}function Bt(e){return on(1)(e)}function nn(e,t=.5){return on(t)(e)}function on(e){return t=>{let r=Te(t);return r!=null&&(r.opacity=e),r+""}}var Uw={none:fu,ordinal:bu,time:xu,linear:hu},ct=e=>{let t=Gn(e),r="__ROW_PATH__",n=Uw[t()],o=(a,i)=>n(r,e)(a);return z(o,t),o.valueName=(...a)=>a.length?(r=a[0],o):r,o};function an(e,t,{stack:r=!1,excludeEmpty:n=!1}={}){let o=t||e.data;return e.splitValues.length>0?Xw(e,o,{stack:r,excludeEmpty:n}):[o]}function Xw(e,t,{stack:r=!1,excludeEmpty:n=!1}){let o={};return t.forEach(a=>{let i={},l={};Object.keys(a).filter(s=>s!=="__ROW_PATH__").filter(s=>!n||a[s]!=null&&a[s]!=null).forEach(s=>{let u=s.split("|"),c=u[u.length-1],m=a[s]||0,f=`${c}${m>=0?"+ve":"-ve"}`,d=u.slice(0,u.length-1).join("|"),p=l[d]=l[d]||{__ROW_PATH__:a.__ROW_PATH__},h=i[f]||0;p.__KEY__=d,r?(p[c]=h+m,p[`__BASE_VALUE__${c}`]=h,i[f]=p[c]):p[c]=m,p.row=a}),Object.keys(l).forEach(s=>{(o[s]=o[s]||[]).push(l[s])})}),Object.keys(o).map(a=>{let i=o[a];return i.key=a,i})}function fp(e,t){let r={stack:!1},n=an(e,t,r).map(o=>mp(e,o,r));return e.mainValues.length>1?n.reduce((a,i)=>a.concat(i)):n}function il(e,t){let r={stack:!0};return an(e,t,r).map(n=>mp(e,n,r))}function jw(e,t,{stack:r=!1}){let n=ct(e);return o=>{let a=l=>r&&l[`__BASE_VALUE__${o.name}`]||0,i=t.map((l,s)=>({crossValue:n(l,s),mainValue:l[o.name]?l[o.name]:null,baseValue:a(l),key:l.__KEY__?`${l.__KEY__}|${o.name}`:o.name,row:l.row||l}));return i.key=i[0].key,i}}function mp(e,t,{stack:r=!1}){let n=jw(e,t,{stack:r});return e.mainValues.length>1?e.mainValues.map(n):n(e.mainValues[0])}var ll="http://www.w3.org/1999/xhtml",sl={svg:"http://www.w3.org/2000/svg",xhtml:ll,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function la(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),sl.hasOwnProperty(t)?{space:sl[t],local:e}:e}function Qw(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===ll&&t.documentElement.namespaceURI===ll?t.createElement(e):t.createElementNS(r,e)}}function Kw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sa(e){var t=la(e);return(t.local?Kw:Qw)(t)}var Jw=0;function _u(){return new Su}function Su(){this._="@"+(++Jw).toString(36)}Su.prototype=_u.prototype={constructor:Su,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var pp=function(e){return function(){return this.matches(e)}};typeof document<"u"&&(Kn=document.documentElement,Kn.matches||(dp=Kn.webkitMatchesSelector||Kn.msMatchesSelector||Kn.mozMatchesSelector||Kn.oMatchesSelector,pp=function(e){return function(){return dp.call(this,e)}}));var Kn,dp,Au=pp;var gp={},ua=null;typeof document<"u"&&(hp=document.documentElement,"onmouseenter"in hp||(gp={mouseenter:"mouseover",mouseleave:"mouseout"}));var hp;function Zw(e,t,r){return e=xp(e,t,r),function(n){var o=n.relatedTarget;(!o||o!==this&&!(o.compareDocumentPosition(this)&8))&&e.call(this,n)}}function xp(e,t,r){return function(n){var o=ua;ua=n;try{e.call(this,this.__data__,t,r)}finally{ua=o}}}function eS(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function tS(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,a;r<o;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.capture):t[++n]=a;++n?t.length=n:delete this.__on}}}function rS(e,t,r){var n=gp.hasOwnProperty(e.type)?Zw:xp;return function(o,a,i){var l=this.__on,s,u=n(t,a,i);if(l){for(var c=0,m=l.length;c<m;++c)if((s=l[c]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=r),s.value=t;return}}this.addEventListener(e.type,u,r),s={type:e.type,name:e.name,value:t,listener:u,capture:r},l?l.push(s):this.__on=[s]}}function yp(e,t,r){var n=eS(e+""),o,a=n.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(o=0,c=l[s];o<a;++o)if((i=n[o]).type===c.type&&i.name===c.name)return c.value}return}for(l=t?rS:tS,r==null&&(r=!1),o=0;o<a;++o)this.each(l(n[o],t,r));return this}function nS(){}function ca(e){return e==null?nS:function(){return this.querySelector(e)}}function wp(e){typeof e!="function"&&(e=ca(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=new Array(i),s,u,c=0;c<i;++c)(s=a[c])&&(u=e.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new de(n,this._parents)}function oS(){return[]}function Cu(e){return e==null?oS:function(){return this.querySelectorAll(e)}}function Sp(e){typeof e!="function"&&(e=Cu(e));for(var t=this._groups,r=t.length,n=[],o=[],a=0;a<r;++a)for(var i=t[a],l=i.length,s,u=0;u<l;++u)(s=i[u])&&(n.push(e.call(s,s.__data__,u,i)),o.push(s));return new de(n,o)}function _p(e){typeof e!="function"&&(e=Au(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=[],s,u=0;u<i;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new de(n,this._parents)}function ul(e){return new Array(e.length)}function Ap(){return new de(this._enter||this._groups.map(ul),this._parents)}function fa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fa.prototype={constructor:fa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Cp(e){return function(){return e}}var Mp="$";function aS(e,t,r,n,o,a){for(var i=0,l,s=t.length,u=a.length;i<u;++i)(l=t[i])?(l.__data__=a[i],n[i]=l):r[i]=new fa(e,a[i]);for(;i<s;++i)(l=t[i])&&(o[i]=l)}function iS(e,t,r,n,o,a,i){var l,s,u={},c=t.length,m=a.length,f=new Array(c),d;for(l=0;l<c;++l)(s=t[l])&&(f[l]=d=Mp+i.call(s,s.__data__,l,t),d in u?o[l]=s:u[d]=s);for(l=0;l<m;++l)d=Mp+i.call(e,a[l],l,a),(s=u[d])?(n[l]=s,s.__data__=a[l],u[d]=null):r[l]=new fa(e,a[l]);for(l=0;l<c;++l)(s=t[l])&&u[f[l]]===s&&(o[l]=s)}function Tp(e,t){if(!e)return d=new Array(this.size()),u=-1,this.each(function(y){d[++u]=y}),d;var r=t?iS:aS,n=this._parents,o=this._groups;typeof e!="function"&&(e=Cp(e));for(var a=o.length,i=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=n[u],m=o[u],f=m.length,d=e.call(c,c&&c.__data__,u,n),p=d.length,h=l[u]=new Array(p),x=i[u]=new Array(p),g=s[u]=new Array(f);r(c,m,h,x,g,d,t);for(var S=0,A=0,v,b;S<p;++S)if(v=h[S]){for(S>=A&&(A=S+1);!(b=x[A])&&++A<p;);v._next=b||null}}return i=new de(i,n),i._enter=l,i._exit=s,i}function Vp(){return new de(this._exit||this._groups.map(ul),this._parents)}function kp(e){for(var t=this._groups,r=e._groups,n=t.length,o=r.length,a=Math.min(n,o),i=new Array(n),l=0;l<a;++l)for(var s=t[l],u=r[l],c=s.length,m=i[l]=new Array(c),f,d=0;d<c;++d)(f=s[d]||u[d])&&(m[d]=f);for(;l<n;++l)i[l]=t[l];return new de(i,this._parents)}function Dp(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,a=n[o],i;--o>=0;)(i=n[o])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this}function Np(e){e||(e=lS);function t(m,f){return m&&f?e(m.__data__,f.__data__):!m-!f}for(var r=this._groups,n=r.length,o=new Array(n),a=0;a<n;++a){for(var i=r[a],l=i.length,s=o[a]=new Array(l),u,c=0;c<l;++c)(u=i[c])&&(s[c]=u);s.sort(t)}return new de(o,this._parents).order()}function lS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ep(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Pp(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function Lp(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,a=n.length;o<a;++o){var i=n[o];if(i)return i}return null}function zp(){var e=0;return this.each(function(){++e}),e}function Bp(){return!this.node()}function Op(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],a=0,i=o.length,l;a<i;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function sS(e){return function(){this.removeAttribute(e)}}function uS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cS(e,t){return function(){this.setAttribute(e,t)}}function fS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mS(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function dS(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Ip(e,t){var r=la(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?uS:sS:typeof t=="function"?r.local?dS:mS:r.local?fS:cS)(r,t))}function ma(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pS(e){return function(){this.style.removeProperty(e)}}function hS(e,t,r){return function(){this.style.setProperty(e,t,r)}}function gS(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Rp(e,t,r){var n;return arguments.length>1?this.each((t==null?pS:typeof t=="function"?gS:hS)(e,t,r??"")):ma(n=this.node()).getComputedStyle(n,null).getPropertyValue(e)}function xS(e){return function(){delete this[e]}}function yS(e,t){return function(){this[e]=t}}function bS(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Fp(e,t){return arguments.length>1?this.each((t==null?xS:typeof t=="function"?bS:yS)(e,t)):this.node()[e]}function $p(e){return e.trim().split(/^|\s+/)}function Mu(e){return e.classList||new Hp(e)}function Hp(e){this._node=e,this._names=$p(e.getAttribute("class")||"")}Hp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yp(e,t){for(var r=Mu(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function Wp(e,t){for(var r=Mu(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function vS(e){return function(){Yp(this,e)}}function wS(e){return function(){Wp(this,e)}}function SS(e,t){return function(){(t.apply(this,arguments)?Yp:Wp)(this,e)}}function qp(e,t){var r=$p(e+"");if(arguments.length<2){for(var n=Mu(this.node()),o=-1,a=r.length;++o<a;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?SS:t?vS:wS)(r,t))}function _S(){this.textContent=""}function AS(e){return function(){this.textContent=e}}function CS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gp(e){return arguments.length?this.each(e==null?_S:(typeof e=="function"?CS:AS)(e)):this.node().textContent}function MS(){this.innerHTML=""}function TS(e){return function(){this.innerHTML=e}}function VS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Up(e){return arguments.length?this.each(e==null?MS:(typeof e=="function"?VS:TS)(e)):this.node().innerHTML}function kS(){this.nextSibling&&this.parentNode.appendChild(this)}function Xp(){return this.each(kS)}function DS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jp(){return this.each(DS)}function Qp(e){var t=typeof e=="function"?e:sa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function NS(){return null}function Kp(e,t){var r=typeof e=="function"?e:sa(e),n=t==null?NS:typeof t=="function"?t:ca(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function ES(){var e=this.parentNode;e&&e.removeChild(this)}function Jp(){return this.each(ES)}function Zp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eh(e,t,r){var n=ma(e),o=n.CustomEvent;o?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function PS(e,t){return function(){return eh(this,e,t)}}function LS(e,t){return function(){return eh(this,e,t.apply(this,arguments))}}function th(e,t){return this.each((typeof t=="function"?LS:PS)(e,t))}var cl=[null];function de(e,t){this._groups=e,this._parents=t}function zS(){return new de([[document.documentElement]],cl)}de.prototype=zS.prototype={constructor:de,select:wp,selectAll:Sp,filter:_p,data:Tp,enter:Ap,exit:Vp,merge:kp,order:Dp,sort:Np,call:Ep,nodes:Pp,node:Lp,size:zp,empty:Bp,each:Op,attr:Ip,style:Rp,property:Fp,classed:qp,text:Gp,html:Up,raise:Xp,lower:jp,append:Qp,insert:Kp,remove:Jp,datum:Zp,on:yp,dispatch:th};function Tu(e){return typeof e=="string"?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],cl)}function ln(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ot(e){return e=ln(Math.abs(e)),e?e[1]:NaN}function rh(e,t){return function(r,n){for(var o=r.length,a=[],i=0,l=e[0],s=0;o>0&&l>0&&(s+l+1>n&&(l=Math.max(1,n-s)),a.push(r.substring(o-=l,o+l)),!((s+=l+1)>n));)l=e[i=(i+1)%e.length];return a.reverse().join(t)}}function nh(e,t){e=e.toPrecision(t);e:for(var r=e.length,n=1,o=-1,a;n<r;++n)switch(e[n]){case".":o=a=n;break;case"0":o===0&&(o=n),a=n;break;case"e":break e;default:o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(a+1):e}var Vu;function oh(e,t){var r=ln(e,t);if(!r)return e+"";var n=r[0],o=r[1],a=o-(Vu=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+ln(e,Math.max(0,t+a-1))[0]}function ku(e,t){var r=ln(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var fl={"":nh,"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return ku(e*100,t)},r:ku,s:oh,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};var BS=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Ut(e){return new ah(e)}function ah(e){if(!(t=BS.exec(e)))throw new Error("invalid format: "+e);var t,r=t[1]||" ",n=t[2]||">",o=t[3]||"-",a=t[4]||"",i=!!t[5],l=t[6]&&+t[6],s=!!t[7],u=t[8]&&+t[8].slice(1),c=t[9]||"";c==="n"?(s=!0,c="g"):fl[c]||(c=""),(i||r==="0"&&n==="=")&&(i=!0,r="0",n="="),this.fill=r,this.align=n,this.sign=o,this.symbol=a,this.zero=i,this.width=l,this.comma=s,this.precision=u,this.type=c}ah.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var ih=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function OS(e){return e}function Jn(e){var t=e.grouping&&e.thousands?rh(e.grouping,e.thousands):OS,r=e.currency,n=e.decimal;function o(i){i=Ut(i);var l=i.fill,s=i.align,u=i.sign,c=i.symbol,m=i.zero,f=i.width,d=i.comma,p=i.precision,h=i.type,x=c==="$"?r[0]:c==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",g=c==="$"?r[1]:/[%p]/.test(h)?"%":"",S=fl[h],A=!h||/[defgprs%]/.test(h);p=p==null?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function v(b){var y=x,M=g,V,F,R;if(h==="c")M=S(b)+M,b="";else{b=+b;var N=(b<0||1/b<0)&&(b*=-1,!0);if(b=S(b,p),N){for(V=-1,F=b.length,N=!1;++V<F;)if(R=b.charCodeAt(V),48<R&&R<58||h==="x"&&96<R&&R<103||h==="X"&&64<R&&R<71){N=!0;break}}if(y=(N?u==="("?u:"-":u==="-"||u==="("?"":u)+y,M=M+(h==="s"?ih[8+Vu/3]:"")+(N&&u==="("?")":""),A){for(V=-1,F=b.length;++V<F;)if(R=b.charCodeAt(V),48>R||R>57){M=(R===46?n+b.slice(V+1):b.slice(V))+M,b=b.slice(0,V);break}}}d&&!m&&(b=t(b,1/0));var Y=y.length+b.length+M.length,E=Y<f?new Array(f-Y+1).join(l):"";switch(d&&m&&(b=t(E+b,E.length?f-M.length:1/0),E=""),s){case"<":return y+b+M+E;case"=":return y+E+b+M;case"^":return E.slice(0,Y=E.length>>1)+y+b+M+E.slice(Y)}return E+y+b+M}return v.toString=function(){return i+""},v}function a(i,l){var s=o((i=Ut(i),i.type="f",i)),u=Math.max(-8,Math.min(8,Math.floor(Ot(l)/3)))*3,c=Math.pow(10,-u),m=ih[8+u/3];return function(f){return s(c*f)+m}}return{format:o,formatPrefix:a}}var ml,sn,Zn;Du({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function Du(e){return ml=Jn(e),sn=ml.format,Zn=ml.formatPrefix,ml}function Nu(e){return Math.max(0,-Ot(Math.abs(e)))}function Eu(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ot(t)/3)))*3-Ot(Math.abs(e)))}function Pu(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ot(t)-Ot(e))+1}var IS={value:function(){}};function sh(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new dl(r)}function dl(e){this._=e}function RS(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}dl.prototype=sh.prototype={constructor:dl,on:function(e,t){var r=this._,n=RS(e+"",r),o,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((o=(e=n[a]).type)&&(o=FS(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=n[a]).type)r[o]=lh(r[o],e.name,t);else if(t==null)for(o in r)r[o]=lh(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new dl(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,a;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,o=a.length;n<o;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,a=n.length;o<a;++o)n[o].value.apply(t,r)}};function FS(e,t){for(var r=0,n=e.length,o;r<n;++r)if((o=e[r]).name===t)return o.value}function lh(e,t,r){for(var n=0,o=e.length;n<o;++n)if(e[n].name===t){e[n]=IS,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var pl=sh;function Xt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hl(e){return e.length===1&&(e=$S(e)),{left:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)<0?n=a+1:o=a}return n},right:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)>0?o=a:n=a+1}return n}}}function $S(e){return function(t,r){return Xt(e(t),r)}}var uh=hl(Xt),ch=uh.right,HS=uh.left,un=ch;var fh=Array.prototype,WS=fh.slice,qS=fh.map;var Lu=Math.sqrt(50),zu=Math.sqrt(10),Bu=Math.sqrt(2);function xl(e,t,r){var n,o=-1,a,i,l;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((n=t<e)&&(a=e,e=t,t=a),(l=mh(e,t,r))===0||!isFinite(l))return[];if(l>0)for(e=Math.ceil(e/l),t=Math.floor(t/l),i=new Array(a=Math.ceil(t-e+1));++o<a;)i[o]=(e+o)*l;else for(e=Math.floor(e*l),t=Math.ceil(t*l),i=new Array(a=Math.ceil(e-t+1));++o<a;)i[o]=(e-o)/l;return n&&i.reverse(),i}function mh(e,t,r){var n=(t-e)/Math.max(0,r),o=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,o);return o>=0?(a>=Lu?10:a>=zu?5:a>=Bu?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=Lu?10:a>=zu?5:a>=Bu?2:1)}function wr(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/o;return a>=Lu?o*=10:a>=zu?o*=5:a>=Bu&&(o*=2),t<e?-o:o}var rt="$";function yl(){}yl.prototype=ph.prototype={constructor:yl,has:function(e){return rt+e in this},get:function(e){return this[rt+e]},set:function(e,t){return this[rt+e]=t,this},remove:function(e){var t=rt+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===rt&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===rt&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===rt&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===rt&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===rt&&++e;return e},empty:function(){for(var e in this)if(e[0]===rt)return!1;return!0},each:function(e){for(var t in this)t[0]===rt&&e(this[t],t.slice(1),this)}};function ph(e,t){var r=new yl;if(e instanceof yl)e.each(function(l,s){r.set(s,l)});else if(Array.isArray(e)){var n=-1,o=e.length,a;if(t==null)for(;++n<o;)r.set(n,e[n]);else for(;++n<o;)r.set(t(a=e[n],n,e),a)}else if(e)for(var i in e)r.set(i,e[i]);return r}var da=ph;function bl(){}var cn=da.prototype;bl.prototype=KS.prototype={constructor:bl,has:cn.has,add:function(e){return e+="",this[rt+e]=e,this},remove:cn.remove,clear:cn.clear,values:cn.keys,size:cn.size,empty:cn.empty,each:cn.each};function KS(e,t){var r=new bl;if(e instanceof bl)e.each(function(a){r.add(a)});else if(e){var n=-1,o=e.length;if(t==null)for(;++n<o;)r.add(e[n]);else for(;++n<o;)r.add(t(e[n],n,e))}return r}var hh=Array.prototype,vl=hh.map,fn=hh.slice;function eo(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function pa(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function dn(){}var Sr=.7,mn=1/Sr,to="\\s*([+-]?\\d+)\\s*",ha="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZS=/^#([0-9a-f]{3,8})$/,e2=new RegExp("^rgb\\("+[to,to,to]+"\\)$"),t2=new RegExp("^rgb\\("+[Rt,Rt,Rt]+"\\)$"),r2=new RegExp("^rgba\\("+[to,to,to,ha]+"\\)$"),n2=new RegExp("^rgba\\("+[Rt,Rt,Rt,ha]+"\\)$"),o2=new RegExp("^hsl\\("+[ha,Rt,Rt]+"\\)$"),a2=new RegExp("^hsla\\("+[ha,Rt,Rt,ha]+"\\)$"),gh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eo(dn,_r,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:xh,formatHex:xh,formatHsl:i2,formatRgb:yh,toString:yh});function xh(){return this.rgb().formatHex()}function i2(){return _h(this).formatHsl()}function yh(){return this.rgb().formatRgb()}function _r(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ZS.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?bh(t):r===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?wl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?wl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=e2.exec(e))?new Ne(t[1],t[2],t[3],1):(t=t2.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=r2.exec(e))?wl(t[1],t[2],t[3],t[4]):(t=n2.exec(e))?wl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o2.exec(e))?Sh(t[1],t[2]/100,t[3]/100,1):(t=a2.exec(e))?Sh(t[1],t[2]/100,t[3]/100,t[4]):gh.hasOwnProperty(e)?bh(gh[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function bh(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function wl(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ne(e,t,r,n)}function Fu(e){return e instanceof dn||(e=_r(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function ro(e,t,r,n){return arguments.length===1?Fu(e):new Ne(e,t,r,n??1)}function Ne(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}eo(Ne,ro,pa(dn,{brighter:function(e){return e=e==null?mn:Math.pow(mn,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Sr:Math.pow(Sr,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vh,formatHex:vh,formatRgb:wh,toString:wh}));function vh(){return"#"+Iu(this.r)+Iu(this.g)+Iu(this.b)}function wh(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Iu(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Sh(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new It(e,t,r,n)}function _h(e){if(e instanceof It)return new It(e.h,e.s,e.l,e.opacity);if(e instanceof dn||(e=_r(e)),!e)return new It;if(e instanceof It)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,l=a-o,s=(a+o)/2;return l?(t===a?i=(r-n)/l+(r<n)*6:r===a?i=(n-t)/l+2:i=(t-r)/l+4,l/=s<.5?a+o:2-a-o,i*=60):l=s>0&&s<1?0:i,new It(i,l,s,e.opacity)}function Ah(e,t,r,n){return arguments.length===1?_h(e):new It(e,t,r,n??1)}function It(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}eo(It,Ah,pa(dn,{brighter:function(e){return e=e==null?mn:Math.pow(mn,e),new It(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Sr:Math.pow(Sr,e),new It(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new Ne(Ru(e>=240?e-240:e+120,o,n),Ru(e,o,n),Ru(e<120?e+240:e-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Ru(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var Ch=Math.PI/180,Mh=180/Math.PI;var Dh=-.14861,$u=1.78277,Hu=-.29227,Sl=-.90649,ga=1.97294,Th=ga*Sl,Vh=ga*$u,kh=$u*Hu-Sl*Dh;function l2(e){if(e instanceof pn)return new pn(e.h,e.s,e.l,e.opacity);e instanceof Ne||(e=Fu(e));var t=e.r/255,r=e.g/255,n=e.b/255,o=(kh*n+Th*t-Vh*r)/(kh+Th-Vh),a=n-o,i=(ga*(r-o)-Hu*a)/Sl,l=Math.sqrt(i*i+a*a)/(ga*o*(1-o)),s=l?Math.atan2(i,a)*Mh-120:NaN;return new pn(s<0?s+360:s,l,o,e.opacity)}function Ie(e,t,r,n){return arguments.length===1?l2(e):new pn(e,t,r,n??1)}function pn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}eo(pn,Ie,pa(dn,{brighter:function(e){return e=e==null?mn:Math.pow(mn,e),new pn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Sr:Math.pow(Sr,e),new pn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Ch,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),o=Math.sin(e);return new Ne(255*(t+r*(Dh*n+$u*o)),255*(t+r*(Hu*n+Sl*o)),255*(t+r*(ga*n)),this.opacity)}}));function Yu(e,t,r,n,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*r+(1+3*e+3*a-3*i)*n+i*o)/6}function Nh(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],a=e[n+1],i=n>0?e[n-1]:2*o-a,l=n<t-1?e[n+2]:2*a-o;return Yu((r-n/t)*t,i,o,a,l)}}function Eh(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],a=e[n%t],i=e[(n+1)%t],l=e[(n+2)%t];return Yu((r-n/t)*t,o,a,i,l)}}function no(e){return function(){return e}}function Ph(e,t){return function(r){return e+r*t}}function s2(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Lh(e,t){var r=t-e;return r?Ph(e,r>180||r<-180?r-360*Math.round(r/360):r):no(isNaN(e)?t:e)}function zh(e){return(e=+e)==1?jt:function(t,r){return r-t?s2(t,r,e):no(isNaN(t)?r:t)}}function jt(e,t){var r=t-e;return r?Ph(e,r):no(isNaN(e)?t:e)}var Wu=function e(t){var r=zh(t);function n(o,a){var i=r((o=ro(o)).r,(a=ro(a)).r),l=r(o.g,a.g),s=r(o.b,a.b),u=jt(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=l(c),o.b=s(c),o.opacity=u(c),o+""}}return n.gamma=e,n}(1);function Bh(e){return function(t){var r=t.length,n=new Array(r),o=new Array(r),a=new Array(r),i,l;for(i=0;i<r;++i)l=ro(t[i]),n[i]=l.r||0,o[i]=l.g||0,a[i]=l.b||0;return n=e(n),o=e(o),a=e(a),l.opacity=1,function(s){return l.r=n(s),l.g=o(s),l.b=a(s),l+""}}}var cZ=Bh(Nh),fZ=Bh(Eh);function Oh(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=e[o]*(1-a)+t[o]*a;return n}}function Ih(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rh(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=hn(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(l){for(i=0;i<n;++i)a[i]=o[i](l);return a}}function Fh(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ar(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function $h(e,t){var r={},n={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=hn(e[o],t[o]):n[o]=t[o];return function(a){for(o in r)n[o]=r[o](a);return n}}var Gu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qu=new RegExp(Gu.source,"g");function u2(e){return function(){return e}}function c2(e){return function(t){return e(t)+""}}function Hh(e,t){var r=Gu.lastIndex=qu.lastIndex=0,n,o,a,i=-1,l=[],s=[];for(e=e+"",t=t+"";(n=Gu.exec(e))&&(o=qu.exec(t));)(a=o.index)>r&&(a=t.slice(r,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,s.push({i,x:Ar(n,o)})),r=qu.lastIndex;return r<t.length&&(a=t.slice(r),l[i]?l[i]+=a:l[++i]=a),l.length<2?s[0]?c2(s[0].x):u2(t):(t=s.length,function(u){for(var c=0,m;c<t;++c)l[(m=s[c]).i]=m.x(u);return l.join("")})}function hn(e,t){var r=typeof t,n;return t==null||r==="boolean"?no(t):(r==="number"?Ar:r==="string"?(n=_r(t))?(t=n,Wu):Hh:t instanceof _r?Wu:t instanceof Date?Fh:Ih(t)?Oh:Array.isArray(t)?Rh:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$h:Ar)(e,t)}function Uu(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Yh(e){return function t(r){r=+r;function n(o,a){var i=e((o=Ie(o)).h,(a=Ie(a)).h),l=jt(o.s,a.s),s=jt(o.l,a.l),u=jt(o.opacity,a.opacity);return function(c){return o.h=i(c),o.s=l(c),o.l=s(Math.pow(c,r)),o.opacity=u(c),o+""}}return n.gamma=t,n}(1)}var f2=Yh(Lh),oo=Yh(jt);function _l(e){return function(){return e}}function Xu(e){return+e}var Wh=[0,1];function Al(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:_l(t)}function m2(e){return function(t,r){var n=e(t=+t,r=+r);return function(o){return o<=t?0:o>=r?1:n(o)}}}function d2(e){return function(t,r){var n=e(t=+t,r=+r);return function(o){return o<=0?t:o>=1?r:n(o)}}}function p2(e,t,r,n){var o=e[0],a=e[1],i=t[0],l=t[1];return a<o?(o=r(a,o),i=n(l,i)):(o=r(o,a),i=n(i,l)),function(s){return i(o(s))}}function h2(e,t,r,n){var o=Math.min(e.length,t.length)-1,a=new Array(o),i=new Array(o),l=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<o;)a[l]=r(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(s){var u=un(e,s,1,o)-1;return i[u](a[u](s))}}function xa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function ao(e,t){var r=Wh,n=Wh,o=hn,a=!1,i,l,s;function u(){return i=Math.min(r.length,n.length)>2?h2:p2,l=s=null,c}function c(m){return(l||(l=i(r,n,a?m2(e):e,o)))(+m)}return c.invert=function(m){return(s||(s=i(n,r,Al,a?d2(t):t)))(+m)},c.domain=function(m){return arguments.length?(r=vl.call(m,Xu),u()):r.slice()},c.range=function(m){return arguments.length?(n=fn.call(m),u()):n.slice()},c.rangeRound=function(m){return n=fn.call(m),o=Uu,u()},c.clamp=function(m){return arguments.length?(a=!!m,u()):a},c.interpolate=function(m){return arguments.length?(o=m,u()):o},u()}function qh(e,t,r){var n=e[0],o=e[e.length-1],a=wr(n,o,t??10),i;switch(r=Ut(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(n),Math.abs(o));return r.precision==null&&!isNaN(i=Eu(a,l))&&(r.precision=i),Zn(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Pu(a,Math.max(Math.abs(n),Math.abs(o))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Nu(a))&&(r.precision=i-(r.type==="%")*2);break}}return sn(r)}function ya(e){var t=e.domain;return e.ticks=function(r){var n=t();return xl(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){return qh(t(),r,n)},e.nice=function(r){var n=t(),o=n.length-1,a=r??10,i=n[0],l=n[o],s=wr(i,l,a);return s&&(s=wr(Math.floor(i/s)*s,Math.ceil(l/s)*s,a),n[0]=Math.floor(i/s)*s,n[o]=Math.ceil(l/s)*s,t(n)),e},e}function io(){var e=ao(Al,Ar);return e.copy=function(){return xa(e,io())},ya(e)}var x2=1e3,y2=x2*60,b2=y2*60,ju=b2*24,Eee=ju*7,Pee=ju*30,Lee=ju*365;function nt(e){return e.match(/.{6}/g).map(function(t){return"#"+t})}var v2=nt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var w2=nt("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var S2=nt("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var _2=nt("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var A2=oo(Ie(300,.5,0),Ie(-240,.5,1));var C2=oo(Ie(-100,.75,.35),Ie(80,1.5,.8)),M2=oo(Ie(260,.75,.35),Ie(80,1.5,.8)),Zee=Ie();function Cl(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var T2=Cl(nt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),V2=Cl(nt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),k2=Cl(nt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),D2=Cl(nt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Cr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Qu(e){return e.length===1&&(e=N2(e)),{left:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)<0?n=a+1:o=a}return n},right:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)>0?o=a:n=a+1}return n}}}function N2(e){return function(t,r){return Cr(e(t),r)}}var Gh=Qu(Cr),E2=Gh.right,P2=Gh.left;var Uh=Array.prototype,z2=Uh.slice,B2=Uh.map;var nre=Math.sqrt(50),ore=Math.sqrt(10),are=Math.sqrt(2);function Tl(e,t){var r=-1,n=e.length,o,a;if(t==null){for(;++r<n;)if((a=e[r])!=null&&a>=a){o=a;break}for(;++r<n;)(a=e[r])!=null&&a>o&&(o=a)}else{for(;++r<n;)if((a=t(e[r],r,e))!=null&&a>=a){o=a;break}for(;++r<n;)(a=t(e[r],r,e))!=null&&a>o&&(o=a)}return o}function Vl(e,t){var r=0,n=e.length,o,a=-1;if(t==null)for(;++a<n;)(o=+e[a])&&(r+=o);else for(;++a<n;)(o=+t(e[a],a,e))&&(r+=o);return r}var q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh=function(t){return t},jh=function(t){for(var r=[],n=0,o=t.length;n<o;n++)r[n]=t[o-n-1];return r},Qh=function(t,r){t.each(function(){for(var n=Tu(this),o=n.text().split(/\s+/).reverse(),a,i=[],l=0,s=1.2,u=n.attr("y"),c=parseFloat(n.attr("dy"))||0,m=n.text(null).append("tspan").attr("x",0).attr("dy",c+"em");a=o.pop();)i.push(a),m.text(i.join(" ")),m.node().getComputedTextLength()>r&&i.length>1&&(i.pop(),m.text(i.join(" ")),i=[a],m=n.append("tspan").attr("x",0).attr("dy",s+c+"em").text(a))})},G2=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments[1],n=arguments[2],o=arguments[3],a=arguments[4];if((typeof r>"u"?"undefined":q2(r))==="object"){if(r.length===0)return t;for(var i=r.length;i<t.length;i++)r.push(t[i]);return r}else if(typeof r=="function"){for(var l=[],s=t.length,u=0;u<s;u++)l.push(r({i:u,genLength:s,generatedLabels:t,domain:n,range:o,labelDelimiter:a}));return l}return t},U2=function(t,r,n){var o=[];if(r.length>1)o=r;else for(var a=t.domain(),i=(a[a.length-1]-a[0])/(r-1),l=0;l<r;l++)o.push(a[0]+l*i);var s=o.map(n);return{data:o,labels:s,feature:function(c){return t(c)}}},X2=function(t,r,n){var o=t.range().map(function(a){var i=t.invertExtent(a);return r(i[0])+" "+n+" "+r(i[1])});return{data:t.range(),labels:o,feature:Kh}},j2=function(t){return{data:t.domain(),labels:t.domain(),feature:function(n){return t(n)}}},Q2=function(t,r,n){t.call("cellover",n,r)},K2=function(t,r,n){t.call("cellout",n,r)},J2=function(t,r,n){t.call("cellclick",n,r)},he={d3_drawShapes:function(t,r,n,o,a,i){t==="rect"?r.attr("height",n).attr("width",o):t==="circle"?r.attr("r",a):t==="line"?r.attr("x1",0).attr("x2",o).attr("y1",0).attr("y2",0):t==="path"&&r.attr("d",i)},d3_addText:function(t,r,n,o,a){r.append("text").attr("class",o+"label");var i=t.selectAll("g."+o+"cell text."+o+"label").data(n).text(Kh);return a&&t.selectAll("g."+o+"cell text."+o+"label").call(Qh,a),i},d3_calcType:function(t,r,n,o,a,i){var l=t.invertExtent?X2(t,a,i):t.ticks?U2(t,n,a):j2(t),s=t.range&&t.range()||t.domain();return l.labels=G2(l.labels,o,t.domain(),s,i),r&&(l.labels=jh(l.labels),l.data=jh(l.data)),l},d3_filterCells:function(t,r){var n=t.data.map(function(i,l){return{data:i,label:t.labels[l]}}).filter(r),o=n.map(function(i){return i.data}),a=n.map(function(i){return i.label});return t.data=t.data.filter(function(i){return o.indexOf(i)!==-1}),t.labels=t.labels.filter(function(i){return a.indexOf(i)!==-1}),t},d3_placement:function(t,r,n,o,a,i){r.attr("transform",n),o.attr("transform",a),t==="horizontal"&&o.style("text-anchor",i)},d3_addEvents:function(t,r){t.on("mouseover.legend",function(n){Q2(r,n,this)}).on("mouseout.legend",function(n){K2(r,n,this)}).on("click.legend",function(n){J2(r,n,this)})},d3_title:function(t,r,n,o){if(r!==""){var a=t.selectAll("text."+n+"legendTitle");a.data([r]).enter().append("text").attr("class",n+"legendTitle"),t.selectAll("text."+n+"legendTitle").text(r),o&&t.selectAll("text."+n+"legendTitle").call(Qh,o);var i=t.select("."+n+"legendCells"),l=t.select("."+n+"legendTitle").nodes().map(function(u){return u.getBBox().height})[0],s=-i.nodes().map(function(u){return u.getBBox().x})[0];i.attr("transform","translate("+s+","+l+")")}},d3_defaultLocale:{format:sn,formatPrefix:Zn},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};function kl(){var e=io(),t="rect",r=15,n=15,o=10,a=2,i=[5],l=void 0,s=[],u="",c=!1,m="",f=he.d3_defaultLocale,d=he.d3_defaultFormatSpecifier,p=10,h="middle",x=he.d3_defaultDelimiter,g=void 0,S="vertical",A=!1,v=void 0,b=void 0,y=pl("cellover","cellout","cellclick");function M(V){var F=he.d3_calcType(e,A,i,s,f.format(d),x),R=V.selectAll("g").data([e]);R.enter().append("g").attr("class",u+"legendCells"),l&&he.d3_filterCells(F,l);var N=V.select("."+u+"legendCells").selectAll("."+u+"cell").data(F.data),Y=N.enter().append("g").attr("class",u+"cell");Y.append(t).attr("class",u+"swatch");var E=V.selectAll("g."+u+"cell "+t+"."+u+"swatch").data(F.data);he.d3_addEvents(Y,y),N.exit().transition().style("opacity",0).remove(),E.exit().transition().style("opacity",0).remove(),E=E.merge(E),he.d3_drawShapes(t,E,n,r,o,v);var w=he.d3_addText(V,Y,F.labels,u,g);N=Y.merge(N);var k=w.nodes().map(function(L){return L.getBBox()}),_=E.nodes().map(function(L){return L.getBBox()});c?E.attr("class",function(L){return u+"swatch "+F.feature(L)}):t=="line"?E.style("stroke",F.feature):E.style("fill",F.feature);var T=void 0,C=void 0,B=h=="start"?0:h=="middle"?.5:1;S==="vertical"?function(){var L=k.map(function(W,q){return Math.max(W.height,_[q].height)});T=function(q,D){var O=Vl(L.slice(0,D));return"translate(0, "+(O+D*a)+")"},C=function(q,D){return"translate( "+(_[D].width+_[D].x+p)+", "+(_[D].y+_[D].height/2+5)+")"}}():S==="horizontal"&&(T=function(W,q){return"translate("+q*(_[q].width+a)+",0)"},C=function(W,q){return"translate("+(_[q].width*B+_[q].x)+`,
          `+(_[q].height+_[q].y+p+8)+")"}),he.d3_placement(S,N,T,w,C,h),he.d3_title(V,m,u,b),N.transition().style("opacity",1)}return M.scale=function(V){return arguments.length?(e=V,M):e},M.cells=function(V){return arguments.length?((V.length>1||V>=2)&&(i=V),M):i},M.cellFilter=function(V){return arguments.length?(l=V,M):l},M.shape=function(V,F){return arguments.length?((V=="rect"||V=="circle"||V=="line"||V=="path"&&typeof F=="string")&&(t=V,v=F),M):t},M.shapeWidth=function(V){return arguments.length?(r=+V,M):r},M.shapeHeight=function(V){return arguments.length?(n=+V,M):n},M.shapeRadius=function(V){return arguments.length?(o=+V,M):o},M.shapePadding=function(V){return arguments.length?(a=+V,M):a},M.labels=function(V){return arguments.length?(s=V,M):s},M.labelAlign=function(V){return arguments.length?((V=="start"||V=="end"||V=="middle")&&(h=V),M):h},M.locale=function(V){return arguments.length?(f=Jn(V),M):f},M.labelFormat=function(V){return arguments.length?(d=Ut(V),M):M.locale().format(d)},M.labelOffset=function(V){return arguments.length?(p=+V,M):p},M.labelDelimiter=function(V){return arguments.length?(x=V,M):x},M.labelWrap=function(V){return arguments.length?(g=V,M):g},M.useClass=function(V){return arguments.length?((V===!0||V===!1)&&(c=V),M):c},M.orient=function(V){return arguments.length?(V=V.toLowerCase(),(V=="horizontal"||V=="vertical")&&(S=V),M):S},M.ascending=function(V){return arguments.length?(A=!!V,M):A},M.classPrefix=function(V){return arguments.length?(u=V,M):u},M.title=function(V){return arguments.length?(m=V,M):m},M.titleWidth=function(V){return arguments.length?(b=V,M):b},M.textWrap=function(V){return arguments.length?(textWrap=V,M):textWrap},M.on=function(){var V=y.on.apply(y,arguments);return V===y?M:V},M}function Jh(){var e=io(),t="path",r=15,n=15,o=10,a=5,i=[5],l=void 0,s=[],u="",c="",m=he.d3_defaultLocale,f=he.d3_defaultFormatSpecifier,d="middle",p=10,h=he.d3_defaultDelimiter,x=void 0,g="vertical",S=!1,A=void 0,v=pl("cellover","cellout","cellclick");function b(y){var M=he.d3_calcType(e,S,i,s,m.format(f),h),V=y.selectAll("g").data([e]);l&&he.d3_filterCells(M,l),V.enter().append("g").attr("class",u+"legendCells");var F=y.select("."+u+"legendCells").selectAll("."+u+"cell").data(M.data),R=F.enter().append("g").attr("class",u+"cell");R.append(t).attr("class",u+"swatch");var N=y.selectAll("g."+u+"cell "+t+"."+u+"swatch");he.d3_addEvents(R,v),F.exit().transition().style("opacity",0).remove(),N.exit().transition().style("opacity",0).remove(),N=N.merge(N),he.d3_drawShapes(t,N,n,r,o,M.feature);var Y=he.d3_addText(y,R,M.labels,u,x);F=R.merge(F);var E=Y.nodes().map(function(L){return L.getBBox()}),w=N.nodes().map(function(L){return L.getBBox()}),k=Tl(w,function(L){return L.height}),_=Tl(w,function(L){return L.width}),T=void 0,C=void 0,B=d=="start"?0:d=="middle"?.5:1;g==="vertical"?function(){var L=E.map(function(W,q){return Math.max(k,W.height)});T=function(q,D){var O=Vl(L.slice(0,D));return"translate(0, "+(O+D*a)+" )"},C=function(q,D){return"translate( "+(_+p)+`,
              `+(w[D].y+w[D].height/2+5)+")"}}():g==="horizontal"&&(T=function(W,q){return"translate( "+q*(_+a)+",0)"},C=function(W,q){return"translate( "+(w[q].width*B+w[q].x)+`,
              `+(k+p)+")"}),he.d3_placement(g,F,T,Y,C,d),he.d3_title(y,c,u,A),F.transition().style("opacity",1)}return b.scale=function(y){return arguments.length?(e=y,b):e},b.cells=function(y){return arguments.length?((y.length>1||y>=2)&&(i=y),b):i},b.cellFilter=function(y){return arguments.length?(l=y,b):l},b.shapePadding=function(y){return arguments.length?(a=+y,b):a},b.labels=function(y){return arguments.length?(s=y,b):s},b.labelAlign=function(y){return arguments.length?((y=="start"||y=="end"||y=="middle")&&(d=y),b):d},b.locale=function(y){return arguments.length?(m=Jn(y),b):m},b.labelFormat=function(y){return arguments.length?(f=Ut(y),b):b.locale().format(f)},b.labelOffset=function(y){return arguments.length?(p=+y,b):p},b.labelDelimiter=function(y){return arguments.length?(h=y,b):h},b.labelWrap=function(y){return arguments.length?(x=y,b):x},b.orient=function(y){return arguments.length?(y=y.toLowerCase(),(y=="horizontal"||y=="vertical")&&(g=y),b):g},b.ascending=function(y){return arguments.length?(S=!!y,b):S},b.classPrefix=function(y){return arguments.length?(u=y,b):u},b.title=function(y){return arguments.length?(c=y,b):c},b.titleWidth=function(y){return arguments.length?(A=y,b):A},b.on=function(){var y=v.on.apply(v,arguments);return y===v?b:y},b}var eg=`<span id="up-arrow">&#9650;</span>
<span id="page-text"></span>
<span id="down-arrow">&#9660;</span>
`;function tg(e){let t=e.select("g.legendCells"),r=e.node().getBoundingClientRect();if(!Lt(r,t.node().getBoundingClientRect()))return;let n=e.select(".legend");t.selectAll(".label").text((o,a,i)=>{let l=i[a];if(Lt(r,l.getBoundingClientRect())){let s=e3(l,n,r);return`${o.substring(0,s-3)}...`}else return o})}function e3(e,t,r){let n=e.getBoundingClientRect(),o=t.node().createSVGPoint(),a=3;return o.x=r.right-n.left-a,o.y=0,e.getCharNumAtPosition(o)}var gn=10;function Mr(e,t,r){let n=P(jn(e).getContainer()).node().getBoundingClientRect(),o=e.getBoundingClientRect(),a={top:o.top+r-gn,right:o.right+t+gn,bottom:o.bottom+r+gn,left:o.left+t-gn},i={x:t,y:r};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach(s=>{if(Lt(n,a,s.edge)){let u=a[s.edge]-n[s.edge];i[s.dimension]=i[s.dimension]-u}}),i}var Ku="resize.for-dragging";function rg(){let e=!0,t=null,r=n=>{let o=n.node(),a=o.getRootNode().host.closest("perspective-viewer");o.style.cursor="move",t.legend&&(o.style.left=t.legend.left,o.style.top=t.legend.top);let i=Hn().on("drag",function(l){let s=Mr(this,l.dx,l.dy);this.style.left=`${this.offsetLeft+s.x}px`,this.style.top=`${this.offsetTop+s.y}px`;let u={left:this.style.left,top:this.style.top};t.legend={...t.legend,...u},e=n3(o)?r3(o):t3(o,e)});i.on("end",function(l){P(window).on(Ku,null),a?.dispatchEvent(new Event("perspective-config-update"))}),n.call(i)};return r.settings=(...n)=>n.length?(t=n[0],r):t,r}function t3(e,t){return t!==!1&&P(window).on(Ku,function(){let r=Mr(e,0,0);e.style.left=`${e.offsetLeft+r.x}px`,e.style.top=`${e.offsetTop+r.y}px`}),!1}function r3(e){return P(window).on(Ku,null),e.style.left="auto",!0}function n3(e){let t=e.getBoundingClientRect(),r=P(yr(e)).node().getBoundingClientRect(),n=5;return t.right+gn+n>=r.right&&t.top-gn-n<=r.top}var ng="horizontal-drag-handle",og="vertical-drag-handle",o3="corner-drag-handle",ig="dragHandles",ag=0,Tr="resize";function lg(){let e=9,t=3,r=null,n={height:100,width:100},o={height:null,width:null},a=[],i=(c,m)=>a.filter(f=>f.event===c).forEach(f=>f.execute(m)),l=c=>{if(i3(c))return;let m={left:D=>i(Tr,{horizontal:k(D),vertical:!1}),top:D=>i(Tr,{horizontal:!1,vertical:T(D)}),right:D=>i(Tr,{horizontal:_(D),vertical:!1}),bottom:D=>i(Tr,{horizontal:!1,vertical:C(D)}),topleft:D=>i(Tr,{horizontal:k(D),vertical:T(D)}),topright:D=>i(Tr,{horizontal:_(D),vertical:T(D)}),bottomright:D=>i(Tr,{horizontal:_(D),vertical:C(D)}),bottomleft:D=>i(Tr,{horizontal:k(D),vertical:C(D)})},f=c.node();r.legend&&(f.style.height=r.legend.height,f.style.width=r.legend.width);let d=f.getBoundingClientRect(),p=c.append("svg").attr("id",ig).attr("width",d.width).attr("height",d.height),h=p.append("g"),x=D=>D==="left"||D==="right",g={left:0,top:e,right:d.width-e,bottom:e},S={left:e,top:0,right:e,bottom:d.height-e},A=["left","top","right","bottom"],[v,b,y,M]=A.map(D=>h.append("rect").attr("id",`drag${D}`).attr("class",x(D)?og:ng).attr("y",S[D]).attr("x",g[D]).attr("height",x(D)?d.height-e*2:e).attr("width",x(D)?e:d.width-e*2).attr("fill",x(D)?"lightgreen":"lightblue").attr("fill-opacity",ag).style("z-index",t).attr("cursor",x(D)?"ew-resize":"ns-resize").call(Hn().on("drag",m[D]))),V=D=>`${D[0]}${D[1]}`,F={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},R=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]],[N,Y,E,w]=R.map(D=>h.append("rect").attr("id",`drag${V(D)}`).attr("class",`${o3} ${D[0]} ${D[1]}`).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",ag).style("z-index",t).attr("cursor",`${F[V(D)]}-resize`).call(Hn().on("drag",m[V(D)])));q("height","y",M),q("width","x",y),W(p);function k(D){let O=u(Mr(v.node(),D.x,0).x,p,"width",(G,X)=>G-X);return f.style.left=`${f.offsetLeft+O}px`,f.style.width=`${f.offsetWidth-O}px`,B(),L(y,O,"width","x")}function _(D){let O=-u(Mr(y.node(),D.dx,0).x,p,"width",(G,X)=>G+X);return s(O,"x",y,D)?!1:(f.style.width=`${f.offsetWidth-O}px`,B(),L(y,O,"width","x"))}function T(D){let O=u(Mr(b.node(),0,D.y).y,p,"height",(G,X)=>G-X);return f.style.top=`${f.offsetTop+O}px`,f.style.height=`${f.offsetHeight-O}px`,B(),L(M,O,"height","y")}function C(D){let O=-u(Mr(M.node(),0,D.dy).y,p,"height",(G,X)=>G+X);return s(O,"y",M,D)?!1:(f.style.height=`${f.offsetHeight-O}px`,B(),L(M,O,"height","y"))}function B(){let D={top:f.style.top,left:f.style.left,height:f.style.height,width:f.style.width};r.legend={...r.legend,...D}}function L(D,O,G,X){return s3(p,G,O),l3(D,X,O),a3(p,O,G,G==="height"?og:ng),W(p),O!=0}function W(D){N.attr("y",0),Y.attr("y",0).attr("x",D.attr("width")-e),E.attr("y",D.attr("height")-e).attr("x",D.attr("width")-e),w.attr("y",D.attr("height")-e).attr("x",0)}function q(D,O,G){o[D]&&o[D]<d[D]&&(f.style[D]=`${o[D]}px`,L(G,d[D]-o[D],D,O))}};l.on=(c,m)=>(a.push({event:c,execute:m}),l),l.zIndex=c=>(t=c,l),l.settings=(...c)=>c.length?(r=c[0],l):r,l.minWidth=c=>(n.width=c,o.width&&(o.width=Math.max(n.width,o.width)),l),l.minHeight=c=>(n.height=c,o.height&&(o.height=Math.max(n.height,o.height)),l),l.handleWidth=c=>(e=c,l),l.maxWidth=c=>(o.width=c,n.width=Math.min(n.width,o.width),l),l.maxHeight=c=>(o.height=c,n.height=Math.min(n.height,o.height),l);function s(c,m,f,d){let p=(x,g,S,A)=>x<0&&A[g]<Number(S.attr(g)),h=(x,g,S,A)=>x>0&&A[g]>Number(S.attr(g));return p(c,m,f,d)||h(c,m,f,d)}function u(c,m,f,d){let p=d(Number(m.attr(f)),c);if(p<n[f]){let h=n[f]-p;return d(c,h)}if(o[f]&&p>o[f]){let h=o[f]-p;return d(c,h)}return c}return l}var a3=(e,t,r,n)=>{e.selectAll(`.${n}`).each((a,i,l)=>{let s=l[i];P(s).attr(r,s.getBoundingClientRect()[r]-t)})},i3=e=>e.select(`#${ig}`).size()>0,l3=(e,t,r)=>e.attr(t,Number(e.attr(t))-r),s3=(e,t,r)=>e.attr(t,e.node().getBoundingClientRect()[t]-r);var sg=16,ug=20,Ju=(e,t)=>{let r=e||kl(),n=[],o=1,a,i=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,l=()=>{},s=rg().settings(t),u,c=v=>{n=r.scale().domain(),u=lg().settings(t).maxHeight(n.length*sg+ug).on("resize",()=>m(v)),u(v),s(v),m(v)},m=v=>{x(v),f(v),d(v),tg(v)},f=v=>{let b=S(v);b.style("display",o<=1?"none":"block"),b.select("#page-text").text(`${i+1}/${o}`),b.select("#up-arrow").attr("class",i===0?"disabled":"").on("click",()=>{i>0&&(p(i-1),m(v))}),b.select("#down-arrow").attr("class",i>=o-1?"disabled":"").on("click",()=>{i<o-1&&(p(i+1),m(v))})},d=v=>{o>1&&r.cellFilter(h()),v.select("g.legendCells").remove();let b=A(v);b.call(r);let y=v.select("g.legendCells").node().getBBox();b.attr("height",y.height+ug),l(v)},p=v=>{i=v,t.legend={...t.legend,pageIndex:i}},h=()=>(v,b)=>b>=a*i&&b<a*i+a,x=v=>{let b=v.node().getBoundingClientRect(),y=Math.floor(b.height/sg)-1;a=y<n.length?y-1:y,o=g(y),i=Math.min(i,o-1)},g=v=>Math.ceil(n.length/v),S=v=>be(v,".legend-controls",()=>v.append("g").attr("class","legend-controls").html(eg)),A=v=>be(v,".legend",()=>v.append("svg").attr("class","legend"));return c.decorate=(...v)=>v.length?(l=v[0],c):l,z(c,r),c};var cg=e=>Ju(kl().shape("circle").shapeRadius(6),e),u3=e=>Ju(Jh().shapePadding(1).labelOffset(3),e),Ee=()=>Zu(cg),ba=()=>Zu(u3,mg),fg=()=>Zu(cg,mg);function mg(e){if(!e)return null;let t=e.domain(),r=e.range().map(n=>lr().type(n)());return mt().domain(t).range(r)}function Zu(e,t=void 0){let r={},n=null,o=null,a=i=>{if(n&&n.range().length>1){let l=e(r);l.scale(n).orient("vertical").on("cellclick",function(u){let c=this.__data__;r.hideKeys=r.hideKeys||[],r.hideKeys.includes(c)?r.hideKeys=r.hideKeys.filter(m=>m!==c):r.hideKeys.push(c),jn(this)._draw()}),l.labels(u=>{let c=String(u.domain[u.i]).split("|");return r.mainValues.length<=1&&c.length>1?c.slice(0,c.length-1).join("|"):u.domain[u.i]});let s=be(i,"div.legend-container",()=>i.append("div"));l.decorate(u=>{let c=f=>r.hideKeys&&r.hideKeys.includes(f),m=u.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");m.classed("hidden",c),m.append("title").html(f=>f),o&&m.select("circle, path").style("fill",f=>c(f)?null:o(f)).style("stroke",f=>c(f)?null:Bt(o(f)))}),s.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(l)}};return a.settings=(...i)=>i.length===0?r:(r=i[0],a),a.scale=(...i)=>i.length?(n=t?t(i[0]):i[0],a):n,a.color=(...i)=>i.length?(o=i[0],a):o,a}function ft(e,t=void 0){let r=t||e.data;return(e.hideKeys?.length??0)>0?r.map(o=>{let a={...o};return e.hideKeys.forEach(i=>{delete a[i]}),a}):r}function lo(e){let t=e.data,r=e.hideKeys?.length??0,n=e.splitValues.length;return r>0?n===0?t.filter(o=>Object.values(o).reduce((a,i)=>a&&!e.hideKeys.includes(i),!0)):t.map(o=>{let a=Object.entries(o).filter(([i,l])=>!e.hideKeys.includes(vr(i)));return Object.fromEntries(a)}):t}var c3=e=>(t,r)=>t.style("stroke-width",n=>"1.0").style("stroke",n=>ec(n,e));function ec(e,t){return e===0?t?t.textStyles.color:"#666":t?t.colorStyles.grid.gridLineColor:"#bbb"}var f3=e=>(t,r)=>{t.strokeStyle=ec(r,e),t.lineWidth=1},m3=(e,t)=>e.style("display","none"),d3=e=>(t,r)=>{t.lineWidth=1,t.strokeStyle=ec(r,e)},we=(e,t)=>{let r="both",n=!1,o=null,a=null,i=null,l=Ue(),s=Xs(),u=c3(t),c=m3,m=function(...f){n&&(l=wt().context(i),s=js(),u=f3(t),c=d3(t));let d=l.xScale(o).yScale(a),p=r==="vertical"?c:u,h=r==="horizontal"?c:u,x=s.xDecorate(p).yDecorate(h);return d.series([x,e])(...f)};return m.orient=(...f)=>f.length?(r=f[0],m):r,m.canvas=(...f)=>f.length?(n=f[0],m):n,m.xScale=(...f)=>f.length?(o=f[0],m):o,m.yScale=(...f)=>f.length?(a=f[0],m):a,m.context=(...f)=>f.length?(i=f[0],m):i,m};var Pe=()=>{let e=Ki(),t=r=>{let n=e.pad(),o=e.padUnit(),a=1;switch(o){case"domain":break;case"percent":{a=r[1]-r[0];break}default:throw new Error("Unknown padUnit: "+o)}let i=r[0]-n[0]*a,l=r[1]+n[1]*a;return r[0]=r[0]>=0&&i<0?0:i,r[1]=r[1]<=0&&l>0?0:l,r};return t.pad=function(...r){return e.pad()},t.padUnit=function(...r){return e.padUnit()},z(t,e),t};var dg=`<button id="zoom-reset">Reset zoom</button>
<button id="one-year">1 Year</button>
<button id="six-months">6 Months</button>
<button id="one-month">1 Month</button>
`;var Se=()=>{let e=null,t=null,r=null,n=null,o=null,a=null,i=!1,l=!1,s=()=>{};function u(d){let p=`d3fc-${l?"canvas":"svg"}.plot-area`;if(r||o){let h=n&&n.domain()[0]instanceof Date,x=Ui().on("zoom",S=>{let{transform:A}=S;t.zoom={k:A.k,x:A.x,y:A.y},c(A),d.call(e);let v=A.k===1&&A.x===0&&A.y===0,b=m(d).style("display",v?"none":"");b.select("#zoom-reset").on("click",()=>d.select(p).call(x.transform,Pt));let y=b.select("#one-year").style("display",h?"":"none"),M=b.select("#six-months").style("display",h?"":"none"),V=b.select("#one-month").style("display",h?"":"none");if(h){let F=R=>()=>{let N=new Date(r.domain()[0]),Y=new Date(N);R(N,Y);let E=n.range(),w=(E[1]-E[0])/(n(Y)-n(N)),k=-n(N)*w,_=0;if(o){let T=o.domain().reduce((C,B)=>C+B)/2;_=-a(T)*w+o(T)}d.select(p).call(x.transform,Pt.translate(k,_).scale(w))};y.on("click",F((R,N)=>N.setYear(R.getFullYear()+1))),M.on("click",F((R,N)=>N.setMonth(R.getMonth()+6))),V.on("click",F((R,N)=>N.setMonth(R.getMonth()+1)))}}),g=e.decorate();e.decorate((S,A)=>{if(g(S,A),!i){i=!0;let v=S.select(p),b=l?window.devicePixelRatio:1;v.on("measure.zoom-range",y=>{if(n&&n.range([0,y.detail.width/b]),a&&a.range([0,y.detail.height/b]),t.zoom){let M=Pt.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);v.call(x.transform,M)}}).call(x)}})}d.call(e)}u.chart=(...d)=>d.length?(e=d[0],u):e,u.settings=(...d)=>d.length?(t=d[0],u):t,u.xScale=(...d)=>d.length?(r=f(d[0]),n=r?r.copy():null,u):r,u.yScale=(...d)=>{if(!d.length)return o;if(o=f(d[0]),a=o?o.copy():null,a){let p=a.domain();a.domain([p[1],p[0]])}return u},u.canvas=(...d)=>d.length?(l=d[0],u):l,u.onChange=(...d)=>d.length?(s=d[0],u):s;let c=d=>{let p={...d};if(r&&(r.domain(d.rescaleX(n).domain()),p.xDomain=r.domain()),o){let h=d.rescaleY(a).domain();o.domain([h[1],h[0]]),p.yDomain=o.domain()}s(p)},m=d=>be(d,".zoom-controls",()=>d.append("div").attr("class","zoom-controls").style("display","none").html(dg)),f=d=>d&&d.nice?d:null;return u};function pg(e,t){let r=il(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=ol(t,n).orient("horizontal"),i=Ue().mapping((m,f)=>m[f]).series(r.map(()=>a)),l=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[0]).excludeType(re.ordinal).include([0]).paddingStrategy(Pe())(r),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue").orient("vertical")(r),u=ut(l,s).plotArea(we(i,t).orient("horizontal"));u.yPaddingInner&&(u.yPaddingInner(.5),u.yPaddingOuter(.25),a.align("left")),u.xNice&&u.xNice();let c=Se().chart(u).settings(t).yScale(s.scale);e.datum(r).call(c),e.call(o)}pg.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["X Axis"]}};var hg=pg;var bg=(e,t)=>{if(!gg(e)||!gg(t))return;let r=xg(e),n=xg(t);r>n?t[0]=yg(t,r):e[0]=yg(e,n)},gg=e=>e.length===2&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1],xg=e=>(0-e[0])/(e[1]-e[0]),yg=(e,t)=>t*e[1]/(t-1);var vg=e=>{let t=[],r=!1,n,o=i=>{i.text("");let l=U("span","splitter-label").key(c=>c),s=!r&&t.length===1,u=n&&e.splitValues.length===0;l(i,t).classed("disabled",s).text(c=>c.name).style("color",c=>u?Bt(n(c.name)):void 0).on("click",(c,m)=>{s||(r?e.splitMainValues=e.splitMainValues.filter(f=>f!=m.name):e.splitMainValues=[m.name].concat(e.splitMainValues||[]),c.target.getRootNode().host.closest("perspective-viewer")?.dispatchEvent(new Event("perspective-config-update")),a(i))})},a=i=>{let l=jn(i.node());l._container.innerHTML="",l._draw()};return o.labels=(...i)=>i.length?(t=i[0],o):t,o.alt=(...i)=>i.length?(r=i[0],o):r,o.color=(...i)=>i.length?(n=i[0],o):n,o};var Vr=(e,t,r=h3)=>{let n,o,a,i=e.splitMainValues||[],l=c=>{let m=c.split("|");return i.includes(m[m.length-1])},s=e.mainValues.some(c=>l(c.name));o=s?r(t,c=>!l(c)):t,a=s?r(t,l):null;let u=c=>{if(e.mainValues.length===1)return;let m=e.mainValues.map((h,x)=>({index:x,name:h.name})),f=m.filter(h=>!l(h.name)),d=m.filter(h=>l(h.name)),p=()=>vg(e).color(n);c.select(".y-label.left-label").call(p().labels(f)),c.select(".y-label.right-label").call(p().labels(d).alt(!0))};return u.color=(...c)=>c.length?(n=c[0],u):n,u.haveSplit=()=>s,u.data=(...c)=>c.length?(o=c[0],u):o,u.altData=(...c)=>c.length?(a=c[0],u):a,u},h3=(e,t)=>e.map(r=>r.filter(n=>t(n.key))),tc=(e,t)=>e.map(r=>t(r.key)?r:r.map(n=>Object.assign({},n,{mainValue:null}))),wg=(e,t)=>e.map(r=>tc(r,t));function Sg(e,t){let r=il(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=ol(t,n).orient("vertical"),i=Ue().mapping((h,x)=>h[x]).series(r.map(()=>a)),l=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),s=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(re.ordinal).orient("vertical").include([0]).paddingStrategy(Pe()),u=t.mainValues.length>1?wg:tc,c=Vr(t,r,u).color(n),m=s(c.data()),f=c.haveSplit()?i:we(i,t).orient("vertical"),d=ut(l,m).axisSplitter(c).plotArea(f);d.xPaddingInner&&(d.xPaddingInner(.5),d.xPaddingOuter(.25),a.align("left")),d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(l.scale);if(c.haveSplit()){let h=s(c.altData());bg(m.domain,h.domain),d.yDomain(m.domain).altAxis(h)}e.datum(c.data()).call(p),e.call(o)}Sg.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var _g=Sg;function so(e,t){let r=jr(),n=e.data.length*(e.data?.length>0?Object.keys(e.data[0]).length-(e.crossValues?.length>0?1:0):0),o=Math.max(1,Math.min(3,Math.floor(e.size.width/n/2)));return r=r.decorate(a=>{a.style("stroke",i=>Bt(t(i[0]&&i[0].key))).style("stroke-width",o)}),r.crossValue(a=>a.crossValue).mainValue(a=>a.mainValue)}function Ag(e,t){let r=ct(e);return t.map((n,o)=>Object.keys(n).filter(a=>a!=="__ROW_PATH__").map(a=>({key:a,crossValue:r(n,o),mainValue:n[a],row:n})))}var Dl=function(e){let t=[];for(let r of e)for(let n=0;n<r.length;n++)r[n].mainValue!==null&&(t[n]=t[n]||[],t[n].push(r[n]));return t};var rc=(e,t,r=Math.min)=>{let n=i=>i.reduce((l,s)=>{let u=o(s);return u&&(!l||r(l.value,u.value)===u.value)?u:l},null),o=i=>{if(Array.isArray(i))return n(i);let l=t(i);return l!==null?{item:i,value:l}:null},a=n(e);return a?a.item:null};var je=()=>{let e=br().alwaysShow(!0),t=null,r=null,n=null,o=null,a=!1,i=null,l="crossValue",s="mainValue",u=null,c=1,m=p=>{let h=`d3fc-${a?"canvas":"svg"}.plot-area`;if(t||r){let x=null,g=ru().on("point",S=>{let A=S.length?d(S[0]):null;x=A?[A.data]:[];let v=A?A.scale:r;f(p,x,v)});p.select(h).on("measure.nearbyTip",()=>f(p,[])).on("click",()=>{x.length&&ia(p.node(),x[0],e.settings())}).call(g)}},f=(p,h,x=r)=>{let g=p.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(h);g.exit().remove(),g.enter().append("circle").attr("class","nearbyTip").merge(g).attr("r",S=>o?c*Math.sqrt(o(S.size)):10).attr("transform",S=>`translate(${t(S[l])},${x(S[s])})`).style("stroke","none").style("fill",S=>n&&S.key&&nn(n(S.key))),e(g)},d=p=>{let h=S=>A=>A[s]===void 0||A[s]===null||A[l]===void 0||A[l]===null?null:Math.sqrt(Math.pow(t(A[l])-p.x,2)+Math.pow(S(A[s])-p.y,2)),x=h(r),g=rc(i,x,Math.min);if(u){let S=h(u.yScale),A=rc(u.data,S,Math.min);return x(g)<=S(A)?{data:g,scale:r}:{data:A,scale:u.yScale}}return{data:g,scale:r}};return m.scaleFactor=(...p)=>p.length?(c=p[0],m):c,m.xScale=(...p)=>p.length?(t=p[0],m):t,m.yScale=(...p)=>p.length?(r=p[0],m):r,m.color=(...p)=>p.length?(n=p[0],m):n,m.size=(...p)=>p.length?(o=p[0]?p[0].copy().range([40,4e3]):null,m):o,m.canvas=(...p)=>p.length?(a=p[0],m):a,m.data=(...p)=>p.length?(i=p[0],m):i,m.xValueName=(...p)=>p.length?(l=p[0],m):l,m.yValueName=(...p)=>p.length?(s=p[0],m):s,m.altDataWithScale=(...p)=>p.length?(u=p[0],m):u,m.settings=(...p)=>p.length?(e.settings(p[0]),m):e.settings(),z(m,e),m};function Cg(e,t){let r=Ag(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=fr().series(so(t,n)).orient("horizontal"),i=Pe().pad([.1,.1]).padUnit("percent"),l=Vr(t,Dl(r)).color(n),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),u=ae(t).settingName("mainValues").valueName("mainValue").memoValue(l.haveSplit()?null:t.axisMemo[0]).orient("vertical").paddingStrategy(i),c=u(l.data()),m=we(a,t).orient("vertical"),f=ut(s,c).axisSplitter(l).plotArea(m);f.yNice&&f.yNice();let d=Se().chart(f).settings(t).xScale(s.scale),p=je().settings(t).xScale(s.scale).yScale(c.scale).color(n).data(r);if(l.haveSplit()){let x=u(l.altData());f.altAxis(x),p.data(l.data()).altDataWithScale({yScale:x.scale,data:l.altData()})}let h=l.data();e.datum(h).call(d),e.call(p),e.call(o)}Cg.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Mg=Cg;var nc=Math.sqrt(3),g3={draw:function(e,t){let r=Math.sqrt(t/(nc*3));e.moveTo(0,r*2),e.lineTo(-nc*r,-r),e.lineTo(nc*r,-r),e.closePath()}},x3=[ir,li,si,ui,ci,fi,mi],oc={circle:ir,square:ui,cross:li,diamond:si,star:ci,triangle:fi,wye:mi,nabla:g3};function va(e){return e.length>1?mt().domain(e).range(x3):null}var y3=8,b3=1;function Tg(e,t,r,n,o,a,i=1){let l=pi().crossValue(s=>s.x).mainValue(s=>s.y);return a&&l.type(s=>a(s.row[t])),r&&l.size(s=>Math.round(i*r(s.size))),l.decorate((s,u)=>{let c=n(u.colorValue),m=e.colorStyles?.opacity;if(o){let{type:f}=e.mainValues.find(p=>p.name===o),d=Gt(f,u.row[o]);if(d!==null){s.fillStyle=e.textStyles.color,s.font=e.textStyles.font;let p=0;r&&(p=Math.sqrt(i*r(u.size)/Math.PI)*b3);let h=p+y3;s.fillText(d,h,4)}}s.strokeStyle=Bt(c),s.fillStyle=nn(c,m)}),l}function Vg(e,t){let r=[...new Set(al(e,t))];return va(r)}function kg(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=[];return Object.keys(t).forEach(n=>{if(n!=="__ROW_PATH__"){let o=vr(n);r.includes(o)||r.push(o)}}),va(r)}function Dg(e,t){let r=e.mainValues.length;return t.map(n=>{let o=Object.keys(n).filter(i=>i!=="__ROW_PATH__"),a=new Array(o.length/r);for(let i=0;i<o.length/r;i++)a[i]={key:vr(o[i*r]),crossValue:n[o[i*r]],mainValue:n[o[i*r+1]],row:n};return a})}function Ng(e,t){let r=Dl(Dg(t,lo(t))),n=cp(t),o=kg(t),a=null;n.domain().length>=2&&(a=fg().settings(t).scale(o).color(n));let i=fr().series(so(t,n)).orient("horizontal"),l=Pe().pad([.1,.1]).padUnit("percent"),s=ae(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").memoValue(t.axisMemo[0]).paddingStrategy(l),c=ae(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l)(r),m=s(r),f=we(i,t).orient("vertical"),d=ut(m,c).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(f);d.xNice&&d.xNice(),d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(m.scale).yScale(c.scale),h=je().settings(t).xScale(m.scale).yScale(c.scale).color(n).data(r);e.datum(r).call(p),e.call(h),a&&e.call(a)}Ng.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Eg=Ng;function Pg(e,t){let r=Is();return r=r.decorate(n=>{n.style("fill",o=>t(o[0].key)).style("opacity",.5)}),r.crossValue(n=>n.crossValue).mainValue(n=>n.mainValue).baseValue(n=>n.baseValue)}function Lg(e,t){let r=ct(e);return t.map((n,o)=>{let a={};return Object.keys(n).filter(i=>i!=="__ROW_PATH__").map(i=>{let l=i.split("|"),s=l[l.length-1],u=a[s]||0,c=u+n[i];return a[s]=c,{key:i,crossValue:r(n,o),mainValue:c,baseValue:u,row:n}})})}function zg(e,t){let r=Lg(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=fr().series(Pg(t,n).orient("vertical")),i=fr().series(so(t,n)).orient("vertical"),l=Ue().series([a,i]),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),u=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(re.ordinal).orient("vertical").include([0]).paddingStrategy(Pe()),c=Vr(t,r).color(n),m=u(c.data()),f=c.haveSplit()?l:we(l,t).orient("vertical"),d=ut(s,m).axisSplitter(c).plotArea(f);d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(s.scale),h=je().settings(t).xScale(s.scale).yScale(m.scale).color(n).data(r);if(c.haveSplit()){let x=u(c.altData());d.altAxis(x),h.data(c.data()).altDataWithScale({yScale:x.scale,data:c.altData()})}e.datum(c.data()).call(p),e.call(h),e.call(o)}zg.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Bg=zg;function Og(e,t,r,n){let o=Bn().size(100),a=e.colorStyles&&e.colorStyles.opacity;return n&&o.type(n(t)),o.decorate(i=>{i.style("stroke",l=>Bt(r(l.colorValue||t))).style("fill",l=>nn(r(l.colorValue||t),a))}),o.crossValue(i=>i.crossValue).mainValue(i=>i.mainValue)}function Ig(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=Object.keys(t).filter(n=>n!=="__ROW_PATH__");return va(r)}function Rg(e,t){let r=fp(t,ft(t)),n=Ig(t),o=zt(t),a=ba().settings(t).scale(n).color(o),i=Ue().mapping((x,g)=>x[g]).series(r.map(x=>Og(t,x.key,o,n))),l=Pe().pad([.05,.05]).padUnit("percent"),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),u=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l),c=Vr(t,r).color(o),m=u(c.data()),f=c.haveSplit()?i:we(i,t).orient("vertical"),d=ut(s,m).axisSplitter(c).plotArea(f);d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(s.scale),h=je().settings(t).xScale(s.scale).yScale(m.scale).color(o).data(r);if(c.haveSplit()){let x=u(c.altData());d.altAxis(x),h.data(c.data()).altDataWithScale({yScale:x.scale,data:c.altData()})}e.datum(c.data()).call(p),e.call(h),a&&e.call(a)}Rg.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Fg=Rg;function $g(e,t){return an(e,t,{excludeEmpty:!0}).map(r=>v3(e,r))}function v3(e,t){let r=ct(e),n=t.map((o,a)=>({crossValue:r(o,a),mainValues:e.mainValues.map(i=>o[i.name]),x:o[e.mainValues[0].name],y:o[e.mainValues[1].name],colorValue:e.realValues[2]?o[e.realValues[2]]:void 0,size:e.realValues[3]?o[e.realValues[3]]:void 0,key:t.key,row:o}));return n.key=t.key,n}function Hg(e,t,r,n){return ke().domain(Yg(t,r,n))}function kr(e,t,r,n=null){let o=Yg(t,r,n),a=e.colorStyles.gradient.full;if(o[0]>=0)a=e.colorStyles.gradient.positive;else if(o[1]<=0)a=e.colorStyles.gradient.negative;else{let l=Math.max(-o[0],o[1]);o=[-l,l]}let i=w3(a);return ko(i).domain(o)}var Yg=(e,t,r)=>r||pu().valueName(t).pad([0,0])(e),w3=e=>{let t=e.slice(1).map((r,n)=>Ve(e[n][1],r[1]));return r=>{let n=e.findIndex((l,s)=>s<e.length-1&&r<=e[s+1][0]&&r>l[0]);if(n===-1)return r<=e[0][0]?e[0][1]:e[e.length-1][1];let o=t[n],[a]=e[n],[i]=e[n+1];return o((r-a)/(i-a))}};function Dr(){let e=null;function t(r){let n=be(r,"div.legend-container",()=>r.append("div").attr("class","legend-container legend-color").style("z-index","2")),{width:o,height:a}=n.node().getBoundingClientRect(),i=dt().domain([0,1]).range([0,o]),l=e.copy().nice().domain(),s=Do().pad([.1,.1]).padUnit("percent")(l),[u,c]=s,m=Kt(u,c,(c-u)/a),f=ke().domain(s).range([a,0]),d=Jr(On()).xScale(i).yScale(f).crossValue(0).baseValue((b,y)=>m[Math.max(0,y-1)]).mainValue(b=>b).decorate(b=>{b.selectAll("path").style("fill",y=>e(y))}),p=l[0]<0&&l[1]>0?0:Math.round((l[1]+l[0])/2),h=[...l,p],x=Ji(u,c),g=mr(f).tickValues(h).tickSizeOuter(0).tickFormat(b=>x(b)),S=be(n,"svg",()=>n.append("svg")).style("width",o).style("height",a),A=be(S,"g",()=>S.append("g")).datum(m).call(d),v=Math.abs(A.node().getBBox().x);be(S,"#legend-axis",()=>S.append("g").attr("id","legend-axis")).attr("transform",`translate(${v})`).datum(m).call(g).select(".domain").attr("visibility","hidden")}return t.scale=(...r)=>r.length?(e=r[0],t):e,t}function uo(){let e="element-prefix-unset",t=null,r=null,n=null,o=null,a=null,i=null,l=!0,s=null,u=c=>{let m=be(c,"div.outer-container",()=>c.append("div").attr("class","outer-container").style("width",`calc(100% - ${s??0})`).style("height",`calc(100% - ${s??0})`).style("padding-left",s??0)),f=be(m,"div.inner-container",()=>m.append("div").attr("class","inner-container")),d=m.node().getBoundingClientRect(),p=d.height,h=d.width-(a?70:0),x=300,g=c.datum(),S=Math.max(1,Math.min(g.length,Math.floor(h/x))),A=Math.ceil(g.length/S);i={width:h/Math.max(S,1),height:Math.min(p,Math.max(p/A,h/Math.max(S,1)))},p/A>i.height*.75&&(i.height=p/A),g.length>1?(f.style("grid-template-columns",`repeat(${S}, ${100/S}%)`),f.style("grid-template-rows",`repeat(${A}, ${i.height}px)`)):(f.style("grid-template-columns","repeat(1, 100%)"),f.style("grid-template-rows","repeat(1, 100%)")),n=f.selectAll(`div.${e}-container`).data(g,v=>v.split),n.exit().remove(),r=n.enter().append("div").attr("class",`${e}-container`),o=r.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),l?t=r.append("svg").append("g").attr("class",e):t=r.append("div").attr("class",e)};return u.padding=(...c)=>c.length?(s=c[0],u):s,u.svg=(...c)=>c.length?(l=c[0],u):l,u.elementsPrefix=(...c)=>c.length?(e=c[0],u):e,u.chartContainer=()=>t,u.chartEnter=()=>r,u.chartDiv=()=>n,u.chartTitle=()=>o,u.containerSize=()=>i,u}function S3([e,t],[r,n]){let o=(n-t)/(r-e),a=n-o*r;return function(i){let l=i.node(),s=Math.min(l.clientWidth,l.clientHeight);return Math.min(n,Math.max(t,o*s+a))}}function Nl(){let e=null,t=null,r=null,n=null,o=a=>{let l=!!e.realValues[2],s=e.realValues[4],u=e.realValues[3]?Hg(e,t,"size").range([10,1e4]):null,c=e.realValues[5],m=S3([600,.1],[1600,1])(a),f=wt().mapping((b,y)=>b[y]).series(t.map(()=>Tg(e,s,u,r,c,n,m))),d=()=>ae(e).settingName("mainValues").paddingStrategy(Pe()).pad([.1,.1]),p=d().settingValue(e.mainValues[0].name).memoValue(e.axisMemo[0]).valueName("x")(t),h=d().orient("vertical").settingValue(e.mainValues[1].name).memoValue(e.axisMemo[1]).valueName("y")(t),[x,g]=e.splitValues.length===0?[e.mainValues[0].name,e.mainValues[1].name]:["",""],S=Qn(p,h).xLabel(x).yLabel(g).plotArea(we(f,e).canvas(!0));S.xNice&&S.xNice(),S.yNice&&S.yNice();let A=Se().chart(S).settings(e).xScale(p.scale).yScale(h.scale).canvas(!0),v=je().scaleFactor(m).settings(e).canvas(!0).xScale(p.scale).xValueName("x").yValueName("y").yScale(h.scale).color(!l&&r).size(u).data(t);a.datum(t).call(A),a.call(v)};return o.settings=(...a)=>a.length?(e=a[0],o):e,o.data=(...a)=>a.length?(t=a[0],o):t,o.color=(...a)=>a.length?(r=a[0],o):r,o.symbols=(...a)=>a.length?(n=a[0],o):n,o}function _3(e,t){if(!t)return;let r=e.realValues[4],n=e.mainValues.find(s=>s.name===r)?.type,o=t.domain(),a=t.range(),i=a.length;for(let[s,u]of o.entries())a[s]=a[s%i];let l=e.columns_config?.[r]?.symbols??{};return Object.entries(l).forEach(([s,u])=>{let c=oc[u]??ir,m=o.findIndex(f=>{switch(n){case"date":case"datetime":return new Date(f).valueOf()===new Date(s).valueOf();default:return String(f)===String(s)}});a[m]=c}),t.range(a),t}function El(e,t){let r=t.realValues[2],n=!!r,o=t.mainValues.find(m=>m.name===r)?.type==="string",a=null,i=null,l=t.realValues[4],s=Vg(t,l),u=_3(t,s),c=$g(t,lo(t));if(n&&o?l?(t.splitValues.length>0?a=rn(t,c):a=rn(t,c[0]),i=ba().settings(t).scale(u)):(a=up(t,r),i=Ee().settings(t).scale(a)):n?(a=kr(t,c,"colorValue"),i=Dr().scale(a)):(a=_t().settings(t).domain([""])(),i=ba().settings(t).scale(u)),t.splitValues.length!==0){let m=uo().svg(!1).elementsPrefix("xy-scatter");m=m.padding("2.5em"),e.append("div").attr("class","multi-xlabel").append("p").text(t.mainValues[0].name),e.append("div").attr("class","multi-ylabel").append("p").text(t.mainValues[1].name).style("transform","rotate(-90deg)").style("text-wrap","nowrap"),e=e.datum(c),e.call(m);let p=m.chartContainer(),h=m.chartEnter(),x=m.chartDiv(),g=m.chartTitle(),S=m.containerSize();g.each((A,v,b)=>P(b[v]).text(A.key)),h.merge(x).attr("transform",`translate(${S.width/2}, ${S.height/2})`).each(function(A){let v=P(this);Nl().settings(t).data([A]).color(a).symbols(u)(v)})}else Nl().settings(t).data(c).color(a).symbols(u)(e);i&&e.call(i)}El.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Symbol","Label","Tooltip"]},selectMode:"toggle"};El.can_render_column_styles=(e,t)=>e==="string"&&t==="Symbol";El.column_style_controls=(e,t)=>e==="string"&&t==="Symbol"?{symbols:{keys:"row",values:Object.keys(oc)}}:null;var Wg=El;function qg(e,t){let r=Gs();return r.decorate((n,o)=>{n.fillStyle=t(o.colorValue)}),Jr(r).xValue(n=>n.crossValue).yValue(n=>n.mainValue).colorValue(n=>n.colorValue).colorInterpolate(t.interpolator()).widthFraction(1)}function Gg(e,t){let r=ct(e),n=Gn(e).excludeType(re.linear).settingName("splitValues")(),o=[];return t.forEach((a,i)=>{let l=r(a,i);Object.keys(a).filter(s=>s!=="__ROW_PATH__").forEach(s=>{let u=A3(s);o.push({crossValue:l,mainValue:n===re.time?new Date(u):u,colorValue:a[s],row:a})})}),o}function A3(e){let t=e.split("|");return t.pop(),t.join("|")}function Ug(e,t){let r=Gg(t,ft(t)),n=kr(t,r,"colorValue"),o=qg(t,n),a=Dr().scale(n),i=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),l=ae(t).excludeType(re.linear).settingName("splitValues").valueName("mainValue").modifyDomain(m=>!isNaN(m[0])?m.reverse():m).orient("vertical")(r),s=Qn(i,l).plotArea(we(o,t).canvas(!0));s.xPaddingInner&&(s.xPaddingInner(0),s.xPaddingOuter(0),o.xAlign("right")),s.yPaddingInner&&(s.yPaddingInner(0),s.yPaddingOuter(0),o.yAlign("top"));let u=Se().chart(s).settings(t).xScale(i.scale).yScale(l.scale).canvas(!0),c=je().settings(t).canvas(!0).xScale(i.scale).yScale(l.scale).color(n).data(r);e.datum(r).call(u),e.call(a),e.call(c)}Ug.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0,initial:{names:["Color"]}};var Xg=Ug;function jg(e,t){return an(e,t,{excludeEmpty:!0}).map(r=>C3(e,r))}function C3(e,t){let r=ct(e),n=a=>t[a<t.length-1?a+1:a][e.realValues[0]],o=t.map((a,i)=>{let l=e.realValues[0]?a[e.realValues[0]]:void 0,s=e.realValues[1]?a[e.realValues[1]]:n(i);return{crossValue:r(a,i),mainValues:e.mainValues.map(u=>a[u.name]),openValue:l,closeValue:s,highValue:e.realValues[2]?a[e.realValues[2]]:Math.max(l,s),lowValue:e.realValues[3]?a[e.realValues[3]]:Math.min(l,s),key:t.key,row:a}});return o.key=t.key,o}var M3=e=>e.closeValue>=e.openValue;function Qg(e,t,r){let n=r.domain(),o=_t().domain(n).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(on(.5))(),a=_t().settings(e).domain(n)(),i=t().crossValue(u=>u.crossValue).openValue(u=>u.openValue).highValue(u=>u.highValue).lowValue(u=>u.lowValue).closeValue(u=>u.closeValue).decorate((u,c)=>{let m=M3(c)?r(c.key):o(c.key);u.fillStyle=m,u.strokeStyle=m}),l=Ln().mainValue(u=>u.bollinger.average).crossValue(u=>u.crossValue).decorate((u,c)=>{u.strokeStyle=a(c[0].key)}),s=Rs().mainValue(u=>u.bollinger.upper).baseValue(u=>u.bollinger.lower).crossValue(u=>u.crossValue).decorate((u,c)=>{u.fillStyle=on(.25)(a(c[0].key))});return wt().series([s,i,l])}function T3(e){return function(t,r){let n=jg(r,lo(r)),o=jl().value(g=>g.openValue),a=n.map(g=>{let S=o(g);return g.map((A,v)=>Object.assign({bollinger:S[v]},A))}),i=n.map(g=>g.key).concat(r.hideKeys?r.hideKeys:[]).sort(),l=_t().domain(i).settings(r).mapFunction(on(1))(),s=Ee().settings(r).scale(i.length>1?l:null),u=Qg(r,e,l),c=wt().mapping((g,S)=>g[S]).series(a.map(()=>u)),m=Pe().pad([.1,.1]).padUnit("percent"),f=ae(r).settingName("crossValues").valueName("crossValue")(a),d=ae(r).settingName("mainValues").valueNames(["lowValue","highValue"]).memoValue(r.axisMemo[1]).orient("vertical").paddingStrategy(m)(a),p=Qn(f,d).plotArea(we(c,r).orient("vertical").canvas(!0));p.yNice&&p.yNice();let h=Se().chart(p).settings(r).xScale(f.scale).onChange(g=>{let S=a.map(A=>A.filter(v=>v.crossValue>=g.xDomain[0]&&v.crossValue<=g.xDomain[1]));p.yDomain(d.domainFunction(S))}).canvas(!0),x=je().settings(r).xScale(f.scale).yScale(d.scale).yValueName("closeValue").color(l).data(a).canvas(!0);t.datum(a).call(h),t.call(x),t.call(s)}}var Pl=T3;var Kg=Pl($s);Kg.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Jg=Kg;var Zg=Pl(Fs);Zg.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var e0=Zg;function t0(e,t){if(e.realValues.length>1&&e.realValues[1]!==null){let r=e.realValues[1];if(e.mainValues.find(n=>n.name===r)?.type==="string"){let n=t.map(o=>o.data).filter(o=>o.height>0).map(o=>r0(o)).reduce((o,a)=>o.concat(a));return rn(e,n)}else return kr(e,null,null,jd(t.map(n=>n.extents)))}}function r0(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(r=>t.concat(r0(r,t))):e.data.color&&t.push(e.data.color),t}function Ll(e){let t={},r=e.realValues.map(o=>o===null?null:e.mainValues.find(a=>a.name===o));return e.data.forEach((o,a)=>{let i=Array.isArray(o.__ROW_PATH__)?o.__ROW_PATH__:[];k3(o).forEach(s=>{let u;t[s]||(t[s]=[]),u=t[s],i.forEach((c,m)=>{let f=u.find(d=>d.name===c);if(f||(f={name:c,children:[]},u.push(f)),e.realValues.length>1&&e.realValues[1]!==null){let d=m===i.length-1,p=co(d?o:e.agg_paths[a][m+1]||o,e.mainValues[1],s);p!==void 0&&(f.color=p)}if(e.realValues.length>2&&e.realValues[2]!==null){f.tooltip=[];for(let d=2;d<e.realValues.length;++d)f.tooltip.push(co(o,r[d],s))}if(m===i.length-1){if(f.name=i.slice(-1)[0],e.crossValues.length===0)f.size=co(o,e.mainValues[0],"");else if(i.length===e.crossValues.length){let d=co(o,e.mainValues[0],s);f.size=d>0?d:0}}u=f.children})})}),Object.entries(t).map(o=>{let a={name:"root",children:o[1]},i=gr(a).sum(s=>s.size),l=su().size([2*Math.PI,i.height+1])(i);return l.each(s=>{s.current=s,s.mainValues=e.realValues.length===1||e.realValues[1]===null&&e.realValues[2]===null?s.value:[s.value,s.data.color].concat(s.data.tooltip||[]).filter(u=>u!==void 0),s.crossValue=s.ancestors().slice(0,-1).reverse().map(u=>u.data.name),s.key=o[0],s.label=Gt(e.crossValues[s.depth-1<0?0:s.depth-1]?.type||e.mainValues[0].type,s.data.name)}),{split:o[0],data:l,extents:V3(e,o)}})}var co=(e,t,r)=>r.length?e[`${r}|${t.name}`]:e[t.name];function V3(e,[t,r]){if(e.realValues.length>1&&e.realValues[1]!==null){let n=Math.min(...e.data.map(a=>co(a,e.mainValues[1],t))),o=Math.max(...r.map(a=>a.color));return[n,o]}}function k3(e){let t=[];return Object.keys(e).forEach(r=>{if(r!=="__ROW_PATH__"){let n=r.split("|").slice(0,-1).join("|");t.includes(n)||t.push(n)}}),t}var zl=e=>Ls().startAngle(t=>t.x0).endAngle(t=>t.x1).padAngle(t=>Math.min((t.x1-t.x0)/2,.005)).padRadius(e).innerRadius(t=>Math.max(1,(t.y0-1)*e)).outerRadius(t=>Math.max((t.y0-1)*e,(t.y1-1)*e-1)),Qt=e=>e.y0>=1&&e.x1>e.x0;var wa=e=>e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06;function Bl(e,t){let r=(e.x0+e.x1)/2*180/Math.PI,n=(e.y0-1+(e.y1-1))/2*t;return`rotate(${r-90}) translate(${n},0) rotate(${r<180?0:180})`}function n0(e,t){let r=this.getBBox().width;if(r>t){let n=e.label,o=P(this);for(;r>t;)n=n.substring(0,n.length-1),o.text(()=>n),r=this.getBBox().width;o.text(()=>`${n.substring(0,n.length-3).replace(/\s+$/,"")}...`)}}var o0=(e,t,r,n,o,a,i,l,s)=>(u,c)=>{s.sunburstLevel[l]=u.data.name,u.parent?(r.datum(u.parent),r.style("cursor","pointer"),n.html(`&#8682; ${u.label}`)):(r.datum(e),r.style("cursor","default"),n.html("")),e.each(f=>f.target={x0:Math.max(0,Math.min(1,(f.x0-u.x0)/(u.x1-u.x0)))*2*Math.PI,x1:Math.max(0,Math.min(1,(f.x1-u.x0)/(u.x1-u.x0)))*2*Math.PI,y0:Math.max(0,f.y0-u.depth),y1:Math.max(0,f.y1-u.depth)});let m=t.transition().duration(c?0:750);o.transition(m).tween("data",f=>{let d=Ve(f.current,f.target);return p=>f.current=d(p)}).filter(function(f){return+this.getAttribute("fill-opacity")||Qt(f.target)}).attr("fill-opacity",f=>Qt(f.target)?1:0).attr("user-select",f=>Qt(f.target)?"initial":"none").style("pointer-events",f=>Qt(f.target)?"initial":"none").attrTween("d",f=>()=>zl(i)(f.current)),a.filter(function(f){return+this.getAttribute("fill-opacity")||wa(f.target)}).transition(m).attr("fill-opacity",f=>+wa(f.target)).attrTween("transform",f=>()=>Bl(f.current,i))};function a0(){let e=null,t=null,r=null,n=null,o=null,a=i=>{let l=i.selectAll("g.segment").data(r.descendants().slice(1)),s=l.enter().append("g").attr("class","segment");s.append("path"),s.append("text").attr("class","segment").attr("dy","0.35em");let u=s.merge(l),c=u.select("path").attr("fill-opacity",h=>Qt(h.current)?1:0).attr("user-select",h=>Qt(h.current)?"initial":"none").style("pointer-events",h=>Qt(h.current)?"initial":"none").attr("d",h=>zl(o)(h.current));n&&c.style("fill",h=>n(h.data.color));let m=u.select("text").attr("fill-opacity",h=>+wa(h.current)).attr("transform",h=>Bl(h.current,o)).text(h=>h.label).each(function(h){n0.call(this,h,o)}),f=i.select("text.parent"),d=i.select("circle").attr("r",o).datum(r),p=o0(r,i,d,f,c,m,o,t,e);if(e.sunburstLevel){let h=r.descendants().find(x=>x.data.name===e.sunburstLevel[t]);h&&p(h,!0)}else e.sunburstLevel={};d.on("click",h=>p(h,!1)),c.filter(h=>h.children).style("cursor","pointer").on("click",h=>p(h,!1))};return a.settings=(...i)=>i.length?(e=i[0],a):e,a.split=(...i)=>i.length?(t=i[0],a):t,a.data=(...i)=>i.length?(r=i[0],a):r,a.color=(...i)=>i.length?(n=i[0],a):n,a.radius=(...i)=>i.length?(o=i[0],a):o,a}function i0(e,t){let r=Ll(t),n=t0(t,r),o=uo().elementsPrefix("sunburst");if(e.datum(r).call(o),n){let c=t.realValues[1];if(t.mainValues.find(m=>m.name===c)?.type==="string"){let m=Ee().settings(t).scale(n);e.call(m)}else{let m=Dr().scale(n);e.call(m)}}let a=o.chartContainer(),i=o.chartEnter(),l=o.chartDiv(),s=o.chartTitle(),u=o.containerSize();s.each((c,m,f)=>P(f[m]).text(c.split)),a.append("circle").attr("fill","none").style("pointer-events","all"),a.append("text").attr("class","parent"),i.merge(l).select("svg").select("g.sunburst").attr("transform",`translate(${u.width/2}, ${u.height/2})`).each(function({split:c,data:m}){let f=P(this),d=this.parentNode,{width:p,height:h}=d.getBoundingClientRect(),x=(Math.min(p,h)-24)/Math.max(2,t.crossValues.length*2);a0().settings(t).split(c).data(m).color(n).radius(x)(f),br().settings(t)(f.selectAll("g.segment"))})}i0.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var l0=i0;function s0(e,t){if(e.realValues.length<1||e.realValues[1]===null||e.realValues[1]===void 0)return;let r=e.realValues[1],n=t.filter(o=>o.height>0).map(o=>u0(o)).reduce((o,a)=>o.concat(a));if(e.mainValues.find(o=>o.name===r)?.type==="string")return rn(e,n);{let o=Math.min(...n),a=Math.max(...n);return kr(e,null,null,[o,a])}}function u0(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(r=>t.concat(u0(r,t))):e.data.color&&t.push(e.data.color),t}var c0=7,Ol=e=>!!(e.target&&e.target.textAttributes),Il=(e,t,r)=>{e.selectAll("text").each(function(o,a){let i=P3(o,t,r);this.style=i});let n=_a(e);D3(n),ac(n)},f0=e=>{e.each((t,r,n)=>{P(n[r]).selectAll("text").attr("dx",t.target.textAttributes.dx).attr("dy",t.target.textAttributes.dy).attr("style",t.target.textAttributes.style)})},ac=e=>{let n=a=>a.getBoundingClientRect(),o=[];e.selectAll("text").filter((a,i,l)=>P(l[i]).attr("style")===xn.high).each((a,i,l)=>o.push(l[i])),e.selectAll("text").filter((a,i,l)=>P(l[i]).attr("style")===xn.low).each((a,i,l)=>{let s=l[i];o.filter(u=>wu("x",n(u),n(s))&&wu("y",n(u),n(s),-2)).forEach(()=>P(s).attr("dy",Number(P(s).attr("dy"))+14))})},m0=e=>P(e).style("opacity",Sa[P(e).attr("class")]),d0=e=>P(e).style("opacity",null),Sa={top:1,mid:.7,lower:0},_a=e=>e.filter((t,r,n)=>P(n[r]).selectAll("text").attr("style")!==xn.zero),Rl=e=>e.selectAll("text").each((t,r,n)=>N3(n[r])),D3=e=>e.selectAll("text").each((t,r,n)=>p0(n[r])),p0=e=>{let t=P(e),r=e.getBoundingClientRect();t.attr("dx",0-r.width/2).attr("dy",0+r.height/4)},N3=e=>{let r=e.parentNode.childNodes[0],n=e.getBBox(),o=r.getBBox();E3(e,o,n)||P(e).attr("style",P(e).attr("style"))},E3=(e,t,r)=>{let n=Math.min(t.height/r.height,t.width/r.width);if(n<1){let o=parseInt(P(e).style("font-size")),a=Math.floor(o*n);return o>c0&&a>c0?(P(e).style("font-size",`${a}px`),p0(e)):(P(e).style("font-size",null),P(e).style("opacity","0")),!0}return!1},P3=(e,t,r)=>{if(!r.filter(n=>n!=="").every(n=>e.crossValue.includes(n)))return xn.zero;switch(e.depth){case t+1:return xn.high;case t+2:return xn.low;default:return xn.zero}},xn={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"};var Fl=(e,t)=>{let r=uu().size([e,t]).paddingInner(n=>1+2*(n.height-1));return r.tile(cu),r};var L3=(e,t)=>t.every(r=>e.crossValue.includes(r));function ic(e,t,r,n,o,a){z3(e,t,r,n,o),e.mapLevel[n].levelRoot=!0,B3(e,a.node().getBoundingClientRect().width,a.node().getBoundingClientRect().height,n),g0(r,n)}function h0(e,t){e.each(r=>{r.mapLevel=[],r.mapLevel[0]={x0:r.x0,x1:yn(r)+r.x0,y0:r.y0,y1:bn(r)+r.y0,visible:!0,opacity:1}}),t.mapLevel[0].levelRoot=!0,g0(e,0)}var $l=(e,t)=>{e.each((r,n,o)=>{let a=P(o[n]).selectAll("text");r.mapLevel[t].textAttributes={dx:a.attr("dx"),dy:a.attr("dy"),class:a.attr("class"),"font-size":a.style("font-size")}})};function z3(e,t,r,n,o){let a={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},i={width:o.x1-o.x0,height:o.y1-o.y0},l={width:i.width/a.width,height:i.height/a.height};r.each(s=>{let u=(s.x0-a.x)*l.width,c=(s.y0-a.y)*l.height,m=yn(s)*l.width,f=bn(s)*l.height,d=L3(s,t)&&s.data.name!==t[n-1];s.mapLevel[n]={x0:u,x1:m+u,y0:c,y1:f+c,visible:d,opacity:d?1:0}}),e.mapLevel[n].levelRoot=!0}function B3(e,t,r,n){let i=Fl(t,r)(gr(e.data).sum(s=>s.size)).descendants(),l=e.descendants();i.forEach((s,u)=>{l[u].mapLevel[n].x0=i[u].x0,l[u].mapLevel[n].x1=i[u].x1,l[u].mapLevel[n].y0=i[u].y0,l[u].mapLevel[n].y1=i[u].y1})}function g0(e,t){e.selectAll("text").each((r,n,o)=>{let a=P(o[n]),i=P(o[n]).datum(),l=a.attr("class");i.mapLevel[t].textLockedAt={opacity:Sa[l]}})}function x0(e,t,r,n,o,a,i,l,s){if(n.treemapLevel>0){let u=i.crossValue;sc(i,e,t,r,n,o,a,i,0,u,l,s,1,!1),n.treemapRoute.slice(1,n.treemapRoute.length).forEach(c=>{let m=t.filter(d=>d.crossValue===c).datum(),f=m.crossValue;ic(m,f,t,m.depth,i,o),sc(m,e,t,r,n,o,a,i,m.depth,f,l,s,1,!1)})}}function uc(e,t,r,n,o,a,i,l,s,u){if(!e.children)return;o.treemapLevel<e.depth?o.treemapRoute.push(e.crossValue):o.treemapRoute.pop(),o.treemapLevel=e.depth;let c=e.crossValue;(!e.mapLevel[o.treemapLevel]||!e.mapLevel[o.treemapLevel].levelRoot)&&ic(e,c,r,o.treemapLevel,l,a),sc(e,t,r,n,o,a,i,l,o.treemapLevel,c,s,u)}function sc(e,t,r,n,o,a,i,l,s,u,c,m,f=500,d=!0){let p=e.parent,h=i.transition("main transition").duration(f).ease(Wi);r.each(g=>g.target=g.mapLevel[s]),Ol(e)||F3(r,c),r.transition(h).tween("data",g=>{let S=Ve(g.current,g.target);return A=>g.current=S(A)}).styleTween("opacity",g=>()=>g.current.opacity).attrTween("pointer-events",g=>()=>g.target.visible?"all":"none"),t.transition(h).filter(g=>g.target.visible).styleTween("x",g=>()=>`${g.current.x0}px`).styleTween("y",g=>()=>`${g.current.y0}px`).styleTween("width",g=>()=>`${g.current.x1-g.current.x0}px`).styleTween("height",g=>()=>`${g.current.y1-g.current.y0}px`),n.transition(h).filter(g=>g.target.visible).attrTween("x",g=>()=>g.current.x0+yn(g.current)/2).attrTween("y",g=>()=>g.current.y0+bn(g.current)/2).end().catch(()=>lc(r)).then(()=>{Ol(e)||(ac(x),Rl(x),O3(n,i,f),d&&$l(r,s),lc(r,c))}).catch(g=>{console.error("Exception completing promises after main transition",g),lc(r,c)}),Ol(e)?f0(r):(n.each((g,S,A)=>m0(A[S])),Il(r,s,u));let x=_a(r);p?c.hide(!1).text(e.label).onClick(()=>{uc(p,t,r,n,o,a,i,l,c,m);let g=a.node().getRootNode().host.parentElement;ia(g,p,m)})():c.hide(!0)()}async function O3(e,t,r=400){let n=t.transition("text fade transition").duration(r).ease(Wi);await e.transition(n).filter(o=>o.target.visible).tween("data",(o,a,i)=>{let l=i[a],s=Ve(I3(o),R3(l));return u=>o.current.opacity=s(u)}).styleTween("opacity",o=>()=>o.current.opacity).end().catch(o=>console.error("Exception in text fade transition",o)).then(()=>e.each((o,a,i)=>d0(i[a])))}var I3=e=>e.target.textLockedAt.opacity,R3=e=>Sa[P(e).attr("class")],F3=(e,t)=>{t.deactivate(!0),e.each((r,n,o)=>{P(o[n]).selectAll("rect").style("pointer-events","none")})},lc=(e,t=void 0)=>{t&&t.deactivate(!1),e.each((r,n,o)=>{P(o[n]).selectAll("rect").style("pointer-events",null)})};var y0=`<button id="goto-parent">Goto parent</button>
`;function b0(e){let t=null,r=null,n=!0,o=!1,a=be(e,".parent-controls",()=>e.append("div").attr("class","parent-controls").style("display",n?"none":"").html(y0)),i=()=>{a.style("display",n?"none":"").select("#goto-parent").style("pointer-events",o?"none":null).html(`\u21EA ${r}`).on("click",()=>t())};return i.deactivate=(...l)=>{if(!l.length)return o;o=l[0];let s=a.select("#goto-parent");return o?s.style("pointer-events","none"):s.style("pointer-events",null),i},i.hide=(...l)=>l.length?(n=l[0],i):n,i.text=(...l)=>l.length?(r=l[0],i):r,i.onClick=(...l)=>l.length?(t=l[0],i):t,i}var Hl={leaf:"leafnode",branch:"branchnode",root:"rootnode"},yn=e=>e.x1-e.x0,bn=e=>e.y1-e.y0,H3=(e,t)=>t.depth===e,v0=(e,t)=>t.depth===0?Hl.root:H3(e,t)?Hl.leaf:Hl.branch;function w0(){let e=null,t=null,r=null,n=null,o=null,a=null,i=l=>{a=b0(o),a();let s=r.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),Fl(o.node().getBoundingClientRect().width,o.node().getBoundingClientRect().height)(r);let c=l.selectAll("g").data(r.descendants()),m=c.enter().append("g");m.append("rect"),m.append("text");let f=m.merge(c).sort((x,g)=>g.depth-x.depth),d=f.select("rect").attr("class",x=>`treerect ${v0(s,x)}`).style("x",x=>`${x.x0}px`).style("y",x=>`${x.y0}px`).style("width",x=>`${yn(x)}px`).style("height",x=>`${bn(x)}px`);d.style("fill",x=>v0(s,x)===Hl.leaf?x.data.color?n(x.data.color):t.colorStyles.series:"transparent");let p=f.filter(x=>x.value!==0).select("text").attr("x",x=>x.x0+yn(x)/2).attr("y",x=>x.y0+bn(x)/2).text(x=>x.label),h=d.filter(x=>x.crossValue.length===0).datum();h0(f,h),Il(f,0,[]),Rl(_a(f)),$l(f,0),e.treemapRoute.length===0&&e.treemapRoute.push(h.crossValue),d.filter(x=>x.children).on("click",(x,g)=>uc(g,d,f,p,e,o,l,h,a,t)),x0(d,f,p,e,o,l,h,a,t)};return i.settings=(...l)=>l.length?(e=l[0],t=l[1],i):e,i.data=(...l)=>l.length?(r=l[0],i):r,i.color=(...l)=>l.length?(n=l[0],i):n,i.container=(...l)=>l.length?(o=l[0],i):o,i}function S0(e,t){t.treemaps||(t.treemaps={});let r=Ll(t),n=s0(t,r.map(s=>s.data));n&&this._container.classList.add("has-legend");let o=uo().elementsPrefix("treemap");if(e.datum(r).call(o),n){let s=t.realValues[1];if(t.mainValues.find(u=>u.name===s)?.type==="string"){let u=Ee().settings(t).scale(n);e.call(u)}else{let u=Dr().scale(n);e.call(u)}}let a=o.chartEnter(),i=o.chartDiv();o.chartTitle().each((s,u,c)=>P(c[u]).text(s.split)),a.merge(i).select("svg").select("g.treemap").each(function({split:s,data:u}){let c=P(this);t.treemaps[s]||(t.treemaps[s]={}),w0().settings(t.treemaps[s],t).data(u).container(P(P(this.parentNode).node().parentNode)).color(n)(c),br().settings(t).centered(!0)(c.selectAll("g"))})}S0.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:3e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var _0=S0;var Y3=[hg,_g,Mg,Eg,Bg,Fg,Wg,Jg,e0,_0,l0,Xg],cc=Y3;var C0=B0(A0(),1),mc=(e,t)=>{if(!t.colorStyles){let r={scheme:[],gradient:{},interpolator:{},grid:{}},n=G3(e);r.series=n("--d3fc-series");for(let a=1;;a++){let i=`series-${a}`,l=n(`--d3fc-${i}`);if(!l)break;r[i]=l,r.scheme.push(l)}r.opacity=W3(r.series),r.grid.gridLineColor=n`--d3fc-gridline--color`,["full","positive","negative"].forEach(a=>{let i=n(`--d3fc-${a}--gradient`);r.gradient[a]=U3(i,r.opacity)}),t.colorStyles=r}if(!t.textStyles){let r=window.getComputedStyle(e),n=r.getPropertyValue("color"),o=`12px ${r.getPropertyValue("font-family")}`;t.textStyles={color:n,font:o}}},W3=e=>Te(e).opacity,q3=(e,t)=>{let r=Te(`#${e}`);return r.opacity=t,r+""},G3=e=>{let t=getComputedStyle(e);return r=>t?.getPropertyValue(r)},U3=(e,t)=>{let r=C0.parse(e)[0].colorStops;return r.map((n,o)=>[n.length?n.length.value/100:o/(r.length-1),q3(n.value,t)]).sort((n,o)=>n[0]-o[0])};var M0=':host{user-select:none;}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:12px;overflow:hidden;}:host .chart.yline .y-series:not(:first-child) .gridline-x{display:none;}:host .chart text{font-family:var(--interface-monospace--font-family);}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);}:host .chart .chart-label{display:none;}:host .chart.heatmap{padding-right:120px;}:host .chart.xyscatter{padding:0;font-size:14px;}:host .chart.xyscatter d3fc-group:first-child{padding:16px;padding-top:0px;width:calc(100% - 32px);height:calc(100% - 16px);}:host .chart.xyscatter .multi-xlabel{position:absolute;bottom:0;height:2.5em;width:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .multi-ylabel{position:absolute;top:0;width:2.5em;height:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .outer-container{height:100%;}:host .chart.xyscatter .inner-container{display:inline-grid;overflow-y:auto;width:calc(100% - 16px);height:100%;padding:0;margin:0;}:host .chart.xyscatter .inner-container div{overflow:hidden;}:host .chart.xyscatter .inner-container text.segment,:host .chart.xyscatter .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.xyscatter .inner-container div.xy-scatter-container{margin:5px 0;}:host .chart.sunburst{padding:0;font-size:14px;}:host .chart.sunburst .outer-container{height:100%;}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.sunburst .inner-container div{overflow:hidden;}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translate(0,-27px);}:host .chart.sunburst .inner-container svg{width:100%;height:100%;}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.sunburst .inner-container div.title-container{margin-top:5px;}:host .chart.has-legend{padding-right:120px;}:host .chart.treemap .treemap-container{position:relative;}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px);}:host .chart.treemap .outer-container{height:100%;}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.treemap .inner-container div{overflow:hidden;}:host .chart.treemap .inner-container svg{width:100%;height:100%;}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines,var(--d3fc-axis--lines,white));fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight,black);stroke-opacity:1;}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .branchnode{opacity:0;}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:0.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight,black);}:host .chart.treemap .inner-container .leafnode{fill-opacity:0.8;}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:0.5;}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none;}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:0.7;z-index:4;}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4;}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging;}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:12px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s;}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px#000;transition:box-shadow 0.2s;}:host .chart .x-label{height:1.2em!important;line-height:1em!important;}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color,inherit);font-size:14px;}:host .chart d3fc-canvas.plot-area{display:none;}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block;}:host .chart .y-axis text,:host .chart .y2-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color,rgb(80,80,80));font-size:11px;}:host .chart .y-axis path,:host .chart .y2-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer;}:host .chart .splitter-label::after{margin-left:5px;color:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label:hover::after{color:var(--d3fc-axis-ticks--color,rgb(80,80,80));}:host .chart .splitter-label.disabled::after{color:rgba(80,80,80,0.3);}:host .chart .splitter-label.disabled{cursor:default;}:host .chart .y-label.left-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}:host .chart .y-label.right-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.ybar .y2-axis path,:host .chart.yline .y2-axis path,:host .chart.xyline .y2-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.yarea .y2-axis path,:host .chart.yscatter .y2-axis path,:host .chart.xyscatter .y2-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden;}:host .chart .y-label{white-space:nowrap;}:host .chart .nearbyTip{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none;}:host #dragHandles rect{pointer-events:all;}:host .label rect{fill:none;}:host .legend-container{position:absolute;top:12px;right:12px;left:auto;width:150px;height:280px;}:host .legend-container.legend-color{width:90px;height:150px;}:host .legend-container[borderbox-on-hover="true"]{transition:box-shadow 1s;}:host .legend-container[borderbox-on-hover="true"]:hover{background-color:var(--d3fc-legend--background,#ffffff);transition:box-shadow 0.2s,background-color 0.2s;}:host .legend-container .legend{font-size:8pt;width:100%;}:host .legend-container .legend .cell{cursor:pointer;}:host .legend-container .legend .cell path{fill:var(--d3fc-series,rgba(31,119,180,0.5));stroke:var(--d3fc-series,rgb(31,119,180));}:host .legend-container .legend .cell.hidden path{fill:rgba(204,204,204,0.5);stroke:rgb(204,204,204);}:host .legend-container .legend .cell.hidden circle{fill:rgb(204,204,204)!important;}:host .legend-container text{fill:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .label:hover{fill:rgb(34,160,206);}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .legend-controls{margin-left:12px;}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:rgb(31,119,180);}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:rgb(51,51,51);}:host .heatmap .legend-container.legend-color{height:200px;}:host .treemap .legend-container.legend-color{height:200px;}:host .treemap .legend-container:not(.legend-color){width:100px;}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center;}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background,rgb(247,247,247));border:1px solid var(--inactive--color,rgb(204,204,204));color:var(--d3fc-label--color,inherit);font-size:12px;padding:8px;opacity:0.5;cursor:pointer;}:host .zoom-controls button:hover{opacity:1;}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right;}:host .parent-controls button{-webkit-appearance:none;background:rgb(247,247,247);border:1px solid rgb(204,204,204);padding:10px;opacity:0.5;cursor:pointer;}:host .parent-controls button:hover{background:rgb(230,230,230);}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:0.5em;background:var(--d3fc-tooltip--background,#ffffff);color:var(--d3fc-tooltip--color,black);border:1px solid var(--d3fc-tooltip--border-color,#777777);box-shadow:var(--d3fc-tooltip--box-shadow,none);pointer-events:none;}:host div.tooltip ul{margin:0;padding:0;list-style-type:none;}';var T0={initial:{type:"number",count:1,names:[]},selectMode:"select"},j3=[Ni,ki,M0].map(e=>{let t=new CSSStyleSheet;return t.replaceSync(e),t}),dc=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","textStyles","agg_paths","treemaps","axisMemo","columns_config"];async function Q3(e){await customElements.get("perspective-viewer").registerPlugin(e)}function V0(...e){let t=new Set(e.length>0?e:cc.map(r=>r.plugin.name));cc.forEach(r=>{if(t.has(r.plugin.name)){let o=`perspective-viewer-d3fc-${r.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,"")}`;customElements.define(o,class extends pc{_chart=r;static _chart=r}),customElements.whenDefined("perspective-viewer").then(()=>Q3(o))}})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var pc=class extends HTMLElement{_chart;static _chart;_settings;render_warning;_initialized;_container;_staged_view;config;constructor(){super(),this._settings=null,this.render_warning=!0}connectedCallback(){if(!this._initialized){this.attachShadow({mode:"open"});for(let t of j3)this.shadowRoot.adoptedStyleSheets.push(t);this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0}}get name(){return this._chart.plugin.name}get category(){return this._chart.plugin.category}get select_mode(){return this._chart.plugin.selectMode||"select"}get min_config_columns(){return this._chart.plugin.initial?.count||T0.initial.count}get config_column_names(){return this._chart.plugin.initial?.names||T0.initial.names}static get max_cells(){return this._chart.plugin.max_cells||1e4}static set max_cells(t){this._chart.plugin.max_cells=t}static get max_columns(){return this._chart.plugin.max_columns||50}static set max_columns(t){this._chart.plugin.max_columns=t}get max_cells(){return this._chart.plugin.max_cells||1e4}set max_cells(t){this._chart.plugin.max_cells=t}get max_columns(){return this._chart.plugin.max_columns||50}set max_columns(t){this._chart.plugin.max_columns=t}can_render_column_styles(t,r){return this._chart.can_render_column_styles?.call(this,t,r)}column_style_controls(t,r){return this._chart.column_style_controls?.call(this,t,r)}async render(){var t=document.createElement("canvas"),r=this.shadowRoot.querySelector("#container");t.width=r.offsetWidth,t.height=r.offsetHeight;let n=t.getContext("2d");n.fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",n.fillRect(0,0,t.width,t.height);let o=window.getComputedStyle(this).getPropertyValue("color"),a=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)"));for(let u of a.reverse()){var i=document.createElement("img");let c=0;i.width=u.parentElement?u.parentElement.offsetWidth:c,i.height=u.parentElement?u.parentElement.offsetHeight:c;let m=u.cloneNode(!0);m.hasAttribute("viewBox")||m.setAttribute("viewBox",`0 0 ${i.width} ${i.height}`),m.setAttribute("xmlns","http://www.w3.org/2000/svg");for(let d of m.querySelectorAll("text"))d.setAttribute("fill",o);var l=new XMLSerializer().serializeToString(m);l=l.replace(/[^\x00-\x7F]/g,"");let f=new Promise((d,p)=>{i.onload=d,i.onerror=p});try{i.src=`data:image/svg+xml;base64,${btoa(l)}`,await f}catch{let p=new Promise((h,x)=>{i.onload=h,i.onerror=x});i.src=`data:image/svg+xml;utf8,${l}`,await p}n.drawImage(i,u.parentNode.offsetLeft,u.parentNode.offsetTop,i.width,i.height)}let s=Array.from(this.shadowRoot.querySelectorAll("canvas"));for(let u of s.reverse())n.drawImage(u,u.parentNode.offsetLeft,u.parentNode.offsetTop,u.width/window.devicePixelRatio,u.height/window.devicePixelRatio);return await new Promise(u=>t.toBlob(c=>u(c)),"image/png")}async draw(t,r,n){if(this.offsetParent===null){this._staged_view=[t,r,n];return}this._staged_view=void 0,this._settings&&(this._settings.axisMemo=[[1/0,-1/0],[1/0,-1/0]]),await this.update(t,r,n,!0)}async update(t,r,n,o=!1){if(this.offsetParent===null)return;let a=this.parentElement,i,l,s=this._chart.plugin.name!=="Sunburst";r&&n?i=t.to_columns_string({end_row:n,end_col:r,leaves_only:s}):r?i=t.to_columns_string({end_col:r,leaves_only:s}):n?i=t.to_columns_string({end_row:n,leaves_only:s}):i=t.to_columns_string({leaves_only:s}),l=await Promise.all([a.save(),a.getTable().then(k=>k.schema()),t.expression_schema(!1),t.schema(!1),i,t.get_config()]);let[u,c,m,f,d,p]=l,h=JSON.parse(d),x=Object.keys(h),g={row(k){let _={};for(let T of x)_[T]=h[T][k];return _}};this.config=u;let S=this.config.columns,A=function(k){let _=c[k];return _||(_=m[k]),_},{columns:v,group_by:b,split_by:y,filter:M}=p,V=h[Object.keys(h)[0]]||[],F=b.length>0?V.reduce((k,_,T)=>{let C=g.row(T);if(C.__ROW_PATH__&&C.__ROW_PATH__.length==b.length)k.agg_paths.push(k.aggs.slice()),k.rows.push(C);else{let B=C.__ROW_PATH__.filter(L=>L!==void 0).length;k.aggs[B]=C,k.aggs=k.aggs.slice(0,B+1)}return k},{rows:[],aggs:[],agg_paths:[]}):{rows:V.map((k,_)=>g.row(_))},R=(k,_)=>b.length?k:{...k,__ROW_PATH__:[_]},N=F.rows.map(R),Y={realValues:S,crossValues:b.map(k=>({name:k,type:A(k)})),mainValues:v.map(k=>({name:k,type:f[k]})),splitValues:y.map(k=>({name:k,type:A(k)})),filter:M,data:N,agg_paths:F.agg_paths,...this.config.plugin_config},E={set:(k,_,T)=>(dc.includes(_)||this._container&&this._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),k[_]=T,!0)},w=[[1/0,-1/0],[1/0,-1/0]];this._settings=new Proxy({axisMemo:w,...this._settings,...Y},E),this._settings.splitMainValues&&this._settings.splitMainValues.length>=v.length&&(this._settings.splitMainValues=[]),mc(this._container,this._settings),o&&(this._container.innerHTML=""),this._draw(),await new Promise(k=>requestAnimationFrame(k))}async clear(){this._container&&(this._container.innerHTML="")}_draw(){if(this.offsetParent!==null){let t=P(this._container),n=`chart ${this._chart.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,"")}`;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(t.attr("class",n),this._settings):t.attr("class",`${n} disabled`)}}async resize(t){if(this.offsetParent!==null)if(this._settings?.data!==void 0)this._draw();else{let[r,n,o]=this._staged_view;this._staged_view=void 0,this.draw(r,n,o)}}async restyle(t,r,n){let o=this._settings;o&&(delete o.colorStyles,delete o.textStyles,this.isConnected&&(mc(this._container,this._settings),this.resize(t)))}async delete(){this._container.innerHTML=""}getContainer(){return this._container}save(){let t={...this._settings};return dc.forEach(r=>{delete t[r]}),t}restore(t,r){let n={};for(let o of dc)this._settings?.[o]!==void 0&&(n[o]=this._settings?.[o]);this._settings={...n,...t,columns_config:r}}};await V0();
//# sourceMappingURL=perspective-viewer-d3fc.js.map
